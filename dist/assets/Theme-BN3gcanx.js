import{j as e}from"./ui-components-ClhKjEhW.js";import{a as s}from"./react-vendor-CmKLYqnR.js";import{C as a,o as l,d as t,n as r,B as i,L as o,I as n,u as d,e as c,w as m,s as x,x as h,y as p,z as u,a as j,b as f,c as g,i as b,j as y,k as v,l as N,m as w}from"./index-bNgPkIHN.js";import{d as C,E as k,av as P,at as S,ag as F,aw as z,ax as T}from"./icons-COCuBKKE.js";import{P as B,a as E,b as D}from"./popover-iRucKzBs.js";import{T as A,a as L,b as M,c as O}from"./tabs-bV5seOk5.js";import{u as H,U as V}from"./UpgradeModal-BGp5RF_6.js";import"./three-addons-Bi7cYlKH.js";import"./three-BxgHQpUo.js";import"./charts-D6IDAGAX.js";import"./utils-CwVVV8W2.js";import"./data-DkeJbMsV.js";import"./supabase-Bfq1IbS0.js";import"./forms-BQFHsYzL.js";function $({theme:s,isSelected:o,onSelect:n,onPreview:d}){return e.jsxs(a,{className:l("relative cursor-pointer transition-all hover:shadow-lg",o&&"ring-2 ring-primary"),onClick:()=>n(s),children:[o&&e.jsx("div",{className:"absolute top-2 right-2 z-10 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:e.jsx(C,{className:"w-4 h-4 text-white"})}),e.jsxs(t,{className:"p-0",children:[e.jsxs("div",{className:"h-32 p-4 rounded-t-lg relative overflow-hidden",style:{backgroundColor:s.colors.background},children:[s.has3D&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-pink-500/10 animate-pulse"}),e.jsxs("div",{className:"flex items-start gap-2 mb-3 relative z-10",children:[e.jsx("div",{className:"w-16 h-16 rounded-full",style:{backgroundColor:s.colors.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 rounded",style:{backgroundColor:s.colors.foreground,opacity:.8,width:"70%"}}),e.jsx("div",{className:"h-2 rounded",style:{backgroundColor:s.colors.muted,width:"90%"}})]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.primary},title:"Primary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.secondary},title:"Secondary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.accent},title:"Accent"})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[s.isPremium&&e.jsx(r,{variant:"secondary",className:"text-xs",children:"Pro"}),s.has3D&&e.jsx(r,{variant:"outline",className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:"3D"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Fonts:"})," ",s.fonts.heading,s.fonts.heading!==s.fonts.body&&` / ${s.fonts.body}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:o?"default":"outline",size:"sm",className:"flex-1",onClick:e=>{e.stopPropagation(),n(s)},children:o?"Selected":"Apply"}),d&&e.jsx(i,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),d(s)},children:"Preview"})]})]})]})]})}const _=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#1F2937","#6B7280"];function q({label:a,value:l,onChange:t,description:r}){const[d,c]=s.useState(!1),m=e=>{t(e)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:a,children:a}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{open:d,onOpenChange:c,children:[e.jsx(E,{asChild:!0,children:e.jsx(i,{variant:"outline",className:"w-12 h-10 p-0 border-2",style:{backgroundColor:l},"aria-label":`Pick ${a}`})}),e.jsx(D,{className:"w-64 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Preset Colors"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:_.map(s=>e.jsx("button",{className:"w-10 h-10 rounded border-2 hover:scale-110 transition-transform",style:{backgroundColor:s},onClick:()=>{m(s),c(!1)},"aria-label":`Select ${s}`},s))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:l,onChange:e=>m(e.target.value),className:"w-12 h-10 rounded border cursor-pointer"}),e.jsx(n,{type:"text",value:l,onChange:e=>m(e.target.value),placeholder:"#000000",className:"flex-1 font-mono text-sm"})]})]})]})})]}),e.jsx(n,{type:"text",value:l,onChange:e=>m(e.target.value),placeholder:"#000000",className:"flex-1 font-mono"})]})]})}const R=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Playfair Display","Merriweather","Bebas Neue","Source Sans Pro"];function Y(){const{toast:l}=d(),{user:n}=c(),[C,B]=s.useState(m()),[E,D]=s.useState(C.colors),[_,Y]=s.useState(C.fonts),[I,U]=s.useState(!1),[J,W]=s.useState(!1),[G,K]=s.useState(!1),[Q,X]=s.useState("desktop"),{subscription:Z}=H();s.useEffect(()=>{ee()},[n]);const ee=async()=>{if(n)try{const{data:e,error:s}=await x.from("profiles").select("theme").eq("id",n.id).single();if(s)throw s;if(e?.theme){let s;if("string"==typeof e.theme)if(e.theme.startsWith("{"))s=JSON.parse(e.theme);else{s=h.find(s=>s.id===e.theme)||h[0]}else s=e.theme;B(s),D(s.colors),Y(s.fonts),p(s)}}catch(e){const s=h[0];B(s),D(s.colors),Y(s.fonts)}},se=async e=>{e.isPremium&&"free"===Z?.plan_name?K(!0):(B(e),D(e.colors),Y(e.fonts),U(!1),p(e))},ae=(e,s)=>{D(a=>({...a,[e]:s})),U(!0)},le=(e,s)=>{Y(a=>({...a,[e]:s})),U(!0)},te=h.filter(e=>!e.isPremium),re=h.filter(e=>e.isPremium);return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Theme Customization"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1",children:"Customize your profile's look and feel"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:async()=>{if(n)try{const{data:e,error:s}=await x.from("profiles").select("username").eq("id",n.id).single();if(s)throw s;e?.username&&window.open(`/${e.username}`,"_blank")}catch(e){l({title:"Error",description:"Failed to open preview",variant:"destructive"})}else l({title:"Error",description:"You must be logged in to preview",variant:"destructive"})},title:"Open your public profile in a new tab to see your theme",className:"flex-1 sm:flex-none",children:[e.jsx(k,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Preview Live"})]}),I&&e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>{D(C.colors),Y(C.fonts),U(!1),l({title:"Reset to default",description:"Theme has been reset to its default settings."})},className:"flex-1 sm:flex-none",children:[e.jsx(P,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),e.jsxs(i,{size:"sm",onClick:async()=>{if(n){W(!0);try{const e={...C,colors:E,fonts:_},{error:s}=await x.from("profiles").update({theme:JSON.stringify(e)}).eq("id",n.id);if(s)throw s;p(e),l({title:"Theme saved!",description:"Your profile theme has been updated successfully."}),U(!1)}catch(e){l({title:"Error",description:"Failed to save theme. Please try again.",variant:"destructive"})}finally{W(!1)}}else l({title:"Error",description:"You must be logged in to save themes",variant:"destructive"})},disabled:J,className:"flex-1 sm:flex-none",children:[J?e.jsx(u,{size:"sm",className:"mr-2"}):e.jsx(S,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Save Theme"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"text-xl sm:text-2xl flex-shrink-0",children:"‚ú®"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to see your theme changes:"}),e.jsxs("ol",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 space-y-0.5 sm:space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Select a theme below and click ",e.jsx("strong",{children:'"Save Theme"'})]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:'"Preview Live"'})," button above to open your public profile in a new tab"]}),e.jsx("li",{children:"Premium themes with 3D effects will show animated backgrounds on your public page!"})]}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1 sm:mt-2",children:["üí° Note: Theme effects only appear on your ",e.jsx("strong",{children:"public profile page"}),", not in this dashboard."]})]})]})}),e.jsxs(A,{defaultValue:"presets",className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(M,{value:"presets",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Theme Presets"]}),e.jsxs(M,{value:"customize",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Customize"]})]}),e.jsxs(O,{value:"presets",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Free Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:te.map(s=>e.jsx($,{theme:s,isSelected:C.id===s.id,onSelect:se},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Premium Themes"}),e.jsx(r,{children:"Pro"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:re.map(s=>e.jsx($,{theme:s,isSelected:C.id===s.id,onSelect:se},s.id))})]})]}),e.jsxs(O,{value:"customize",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(a,{children:[e.jsxs(j,{className:"pb-3 sm:pb-4",children:[e.jsx(f,{className:"text-base sm:text-lg",children:"Colors"}),e.jsx(g,{className:"text-xs sm:text-sm",children:"Customize the color scheme of your profile"})]}),e.jsxs(t,{className:"space-y-3 sm:space-y-4",children:[e.jsx(q,{label:"Primary Color",value:E.primary,onChange:e=>ae("primary",e),description:"Main brand color (buttons, links)"}),e.jsx(q,{label:"Secondary Color",value:E.secondary,onChange:e=>ae("secondary",e),description:"Secondary accent color"}),e.jsx(q,{label:"Accent Color",value:E.accent,onChange:e=>ae("accent",e),description:"Highlights and CTAs"}),e.jsx(q,{label:"Background Color",value:E.background,onChange:e=>ae("background",e),description:"Page background"}),e.jsx(q,{label:"Text Color",value:E.foreground,onChange:e=>ae("foreground",e),description:"Primary text color"})]})]}),e.jsxs(a,{children:[e.jsxs(j,{className:"pb-3 sm:pb-4",children:[e.jsx(f,{className:"text-base sm:text-lg",children:"Typography"}),e.jsx(g,{className:"text-xs sm:text-sm",children:"Select fonts for headings and body text"})]}),e.jsxs(t,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"heading-font",children:"Heading Font"}),e.jsxs(b,{value:_.heading,onValueChange:e=>le("heading",e),children:[e.jsx(y,{id:"heading-font",children:e.jsx(v,{})}),e.jsx(N,{children:R.map(s=>e.jsx(w,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for titles and headings"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"body-font",children:"Body Font"}),e.jsxs(b,{value:_.body,onValueChange:e=>le("body",e),children:[e.jsx(y,{id:"body-font",children:e.jsx(v,{})}),e.jsx(N,{children:R.map(s=>e.jsx(w,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for paragraphs and text"})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Preview"}),e.jsx("h3",{className:"text-2xl font-bold",style:{fontFamily:_.heading,color:E.primary},children:"Your Profile Heading"}),e.jsx("p",{className:"text-sm",style:{fontFamily:_.body,color:E.foreground},children:"This is how your body text will appear on your profile. It should be readable and professional."})]})]})]})]}),e.jsxs(a,{children:[e.jsx(j,{className:"pb-3 sm:pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-base sm:text-lg",children:"Live Preview"}),e.jsx(g,{className:"text-xs sm:text-sm",children:"See how your theme will look on different devices"})]}),e.jsxs("div",{className:"flex gap-1 bg-muted p-1 rounded-lg",children:[e.jsxs(i,{variant:"desktop"===Q?"default":"ghost",size:"sm",onClick:()=>X("desktop"),className:"gap-1.5",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Desktop"})]}),e.jsxs(i,{variant:"mobile"===Q?"default":"ghost",size:"sm",onClick:()=>X("mobile"),className:"gap-1.5",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Mobile"})]})]})]})}),e.jsxs(t,{children:[e.jsx("div",{className:"flex justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-lg p-4 sm:p-8",children:e.jsxs("div",{className:"rounded-lg p-4 sm:p-6 space-y-3 sm:space-y-4 transition-all duration-300 "+("mobile"===Q?"w-full max-w-[375px]":"w-full"),style:{backgroundColor:E.background,boxShadow:"mobile"===Q?"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)":"none"},children:[e.jsxs("div",{className:"flex items-start "+("mobile"===Q?"flex-col items-center text-center":"gap-4"),children:[e.jsx("div",{className:"rounded-full "+("mobile"===Q?"w-16 h-16 mb-3":"w-20 h-20"),style:{backgroundColor:E.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"font-bold "+("mobile"===Q?"text-xl":"text-2xl"),style:{fontFamily:_.heading,color:E.foreground},children:"Agent Name"}),e.jsx("p",{className:"text-sm",style:{fontFamily:_.body,color:E.mutedForeground},children:"Realtor¬Æ | Luxury Home Specialist"})]})]}),e.jsxs("div",{className:`flex ${"mobile"===Q?"flex-col w-full":"flex-wrap"} gap-2`,children:[e.jsx("button",{className:"py-2 rounded-lg text-white text-xs sm:text-sm font-medium min-h-[44px] "+("mobile"===Q?"w-full px-4":"px-3 sm:px-4"),style:{backgroundColor:E.primary},children:"Primary Button"}),e.jsx("button",{className:"py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px] "+("mobile"===Q?"w-full px-4":"px-3 sm:px-4"),style:{backgroundColor:E.secondary,color:"white"},children:"Secondary Button"}),"desktop"===Q&&e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px]",style:{backgroundColor:E.accent,color:"white"},children:"Accent Button"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:E.card},children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{fontFamily:_.heading,color:E.cardForeground},children:"Property Card"}),e.jsx("p",{className:"text-xs",style:{fontFamily:_.body,color:E.mutedForeground},children:"mobile"===Q?"Mobile view":"This is how property cards will appear with your selected theme."})]})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"mobile"===Q?"üì± Viewing mobile preview (375px wide)":"üñ•Ô∏è Viewing desktop preview (full width)"})})]})]})]})]}),e.jsx(V,{open:G,onOpenChange:K,feature:"premium_themes",currentPlan:Z?.plan_name||"Free",requiredPlan:"Professional"})]})}export{Y as default};
