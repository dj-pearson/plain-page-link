{"version":3,"file":"Settings-BLijtT2M.js","sources":["../../node_modules/lucide-react/dist/esm/icons/credit-card.js","../../node_modules/lucide-react/dist/esm/icons/history.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/key-round.js","../../node_modules/lucide-react/dist/esm/icons/tablet.js","../../src/hooks/useSettings.ts","../../src/components/UsernameInput.tsx","../../src/components/settings/ProfileURLCard.tsx","../../src/components/settings/ProfileDisplaySettings.tsx","../../src/hooks/useSessions.ts","../../src/components/settings/SessionManagement.tsx","../../src/hooks/useAuditLog.ts","../../src/components/settings/AuditLogViewer.tsx","../../src/hooks/useGDPR.ts","../../src/components/settings/GDPRSettings.tsx","../../src/pages/dashboard/Settings.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CreditCard = createLucideIcon(\"CreditCard\", [\n  [\"rect\", { width: \"20\", height: \"14\", x: \"2\", y: \"5\", rx: \"2\", key: \"ynyp8z\" }],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"10\", y2: \"10\", key: \"1b3vmo\" }]\n]);\n\nexport { CreditCard as default };\n//# sourceMappingURL=credit-card.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst History = createLucideIcon(\"History\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M12 7v5l4 2\", key: \"1fdv2h\" }]\n]);\n\nexport { History as default };\n//# sourceMappingURL=history.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst KeyRound = createLucideIcon(\"KeyRound\", [\n  [\"path\", { d: \"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z\", key: \"167ctg\" }],\n  [\"circle\", { cx: \"16.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"w0ekpg\" }]\n]);\n\nexport { KeyRound as default };\n//# sourceMappingURL=key-round.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Tablet = createLucideIcon(\"Tablet\", [\n  [\"rect\", { width: \"16\", height: \"20\", x: \"4\", y: \"2\", rx: \"2\", ry: \"2\", key: \"76otgf\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"18\", y2: \"18\", key: \"1dp563\" }]\n]);\n\nexport { Tablet as default };\n//# sourceMappingURL=tablet.js.map\n","import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuthStore } from \"@/stores/useAuthStore\";\n\nexport interface UserSettings {\n  id: string;\n  user_id: string;\n  email_leads: boolean;\n  sms_leads: boolean;\n  weekly_report: boolean;\n  marketing_emails: boolean;\n  show_listings: boolean;\n  show_sold_properties: boolean;\n  show_testimonials: boolean;\n  show_social_proof: boolean;\n  show_contact_buttons: boolean;\n  created_at: string;\n  updated_at: string;\n}\n\nexport function useSettings() {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n\n  const { data: settings, isLoading } = useQuery({\n    queryKey: [\"settings\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null;\n\n      const { data, error } = await supabase\n        .from(\"user_settings\")\n        .select(\"*\")\n        .eq(\"user_id\", user.id)\n        .maybeSingle();\n\n      if (error && error.code !== 'PGRST116') throw error;\n      \n      // If no settings exist, create default ones\n      if (!data) {\n        const { data: newSettings, error: insertError } = await supabase\n          .from(\"user_settings\")\n          .insert({\n            user_id: user.id,\n            email_leads: true,\n            sms_leads: false,\n            weekly_report: true,\n            marketing_emails: false,\n            show_listings: true,\n            show_sold_properties: true,\n            show_testimonials: true,\n            show_social_proof: true,\n            show_contact_buttons: true,\n          })\n          .select()\n          .single();\n\n        if (insertError) throw insertError;\n        return newSettings as UserSettings;\n      }\n\n      return data as UserSettings;\n    },\n    enabled: !!user?.id,\n  });\n\n  const updateSettings = useMutation({\n    mutationFn: async (updates: Partial<UserSettings>) => {\n      if (!user?.id) throw new Error(\"User not authenticated\");\n\n      const { data, error } = await supabase\n        .from(\"user_settings\")\n        .update(updates)\n        .eq(\"user_id\", user.id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"settings\", user?.id] });\n    },\n  });\n\n  return {\n    settings,\n    isLoading,\n    updateSettings,\n  };\n}\n","import { useEffect, useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useUsernameCheck } from \"@/hooks/useUsernameCheck\";\nimport { Check, X, Loader2 } from \"lucide-react\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\n\ninterface UsernameInputProps {\n  value: string;\n  onChange: (value: string) => void;\n  currentUsername?: string;\n}\n\nexport const UsernameInput = ({ value, onChange, currentUsername }: UsernameInputProps) => {\n  const { checkUsername, isChecking, error, isAvailable } = useUsernameCheck();\n  const [touched, setTouched] = useState(false);\n\n  useEffect(() => {\n    if (value && value !== currentUsername) {\n      checkUsername(value);\n      setTouched(true);\n    }\n  }, [value, currentUsername, checkUsername]);\n\n  const showSuccess = touched && isAvailable && !error && !isChecking && value !== currentUsername;\n  const showError = touched && (error || isAvailable === false) && !isChecking;\n\n  return (\n    <div className=\"space-y-2\">\n      <Label htmlFor=\"username\">Username</Label>\n      <div className=\"relative\">\n        <Input\n          id=\"username\"\n          value={value}\n          onChange={(e) => onChange(e.target.value.toLowerCase().replace(/[^a-z0-9_-]/g, ''))}\n          placeholder=\"Enter username\"\n          className={`pr-10 ${\n            showSuccess ? 'border-green-500' : showError ? 'border-red-500' : ''\n          }`}\n        />\n        <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n          {isChecking && <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />}\n          {showSuccess && <Check className=\"h-4 w-4 text-green-500\" />}\n          {showError && <X className=\"h-4 w-4 text-red-500\" />}\n        </div>\n      </div>\n      \n      {showError && (\n        <p className=\"text-sm text-red-500\">{error}</p>\n      )}\n      \n      {showSuccess && (\n        <p className=\"text-sm text-green-500\">Username is available!</p>\n      )}\n\n      <Alert>\n        <AlertDescription className=\"text-sm\">\n          Your profile will be accessible at: <strong>agentbio.net/{value || 'username'}</strong>\n        </AlertDescription>\n      </Alert>\n\n      <div className=\"text-xs text-muted-foreground space-y-1\">\n        <p>Username requirements:</p>\n        <ul className=\"list-disc list-inside ml-2\">\n          <li>3-30 characters</li>\n          <li>Letters, numbers, hyphens, and underscores only</li>\n          <li>No profanity or reserved words</li>\n        </ul>\n      </div>\n    </div>\n  );\n};","import { useState } from \"react\";\nimport { ExternalLink, Copy, Check, Share2 } from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface ProfileURLCardProps {\n  username: string;\n}\n\nexport function ProfileURLCard({ username }: ProfileURLCardProps) {\n  const [copied, setCopied] = useState(false);\n  const { toast } = useToast();\n  const profileURL = `${window.location.origin}/${username}`;\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(profileURL);\n      setCopied(true);\n      toast({\n        title: \"Copied!\",\n        description: \"Profile URL copied to clipboard\",\n      });\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      toast({\n        title: \"Failed to copy\",\n        description: \"Please copy the URL manually\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const shareProfile = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: \"My Real Estate Profile\",\n          text: \"Check out my professional real estate profile\",\n          url: profileURL,\n        });\n      } catch (err) {\n        // User cancelled share or error occurred\n        console.log(\"Share cancelled or failed\");\n      }\n    } else {\n      // Fallback to copy\n      copyToClipboard();\n    }\n  };\n\n  return (\n    <Card className=\"border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <ExternalLink className=\"h-5 w-5 text-blue-600\" />\n          Your Public Profile\n        </CardTitle>\n        <CardDescription>\n          Share this link to showcase your properties and capture leads\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 p-3 bg-white rounded-lg border border-gray-200\">\n          <code className=\"flex-1 text-sm text-blue-600 font-mono truncate\">\n            {profileURL}\n          </code>\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button\n            onClick={copyToClipboard}\n            variant=\"outline\"\n            className=\"flex-1\"\n          >\n            {copied ? (\n              <>\n                <Check className=\"h-4 w-4 mr-2\" />\n                Copied!\n              </>\n            ) : (\n              <>\n                <Copy className=\"h-4 w-4 mr-2\" />\n                Copy Link\n              </>\n            )}\n          </Button>\n\n          <Button\n            onClick={shareProfile}\n            variant=\"outline\"\n            className=\"flex-1\"\n          >\n            <Share2 className=\"h-4 w-4 mr-2\" />\n            Share\n          </Button>\n\n          <Button\n            asChild\n            variant=\"default\"\n          >\n            <a\n              href={`/${username}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <ExternalLink className=\"h-4 w-4 mr-2\" />\n              View\n            </a>\n          </Button>\n        </div>\n\n        <div className=\"text-xs text-muted-foreground\">\n          <p className=\"mb-2\">ðŸ’¡ <strong>Pro tip:</strong> Share this link on:</p>\n          <ul className=\"list-disc list-inside ml-2 space-y-1\">\n            <li>Your email signature</li>\n            <li>Business cards and flyers</li>\n            <li>Social media profiles</li>\n            <li>MLS listings and property descriptions</li>\n            <li>Text messages to potential clients</li>\n          </ul>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Globe, Plus, ExternalLink, CheckCircle2 } from \"lucide-react\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuthStore } from \"@/stores/useAuthStore\";\nimport { toast } from \"sonner\";\n\nexport function ProfileDisplaySettings() {\n    const navigate = useNavigate();\n    const { user } = useAuthStore();\n    const [activePage, setActivePage] = useState<any>(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        loadActivePage();\n    }, [user]);\n\n    const loadActivePage = async () => {\n        if (!user) return;\n\n        try {\n            const { data, error } = await supabase\n                .from('custom_pages')\n                .select('*')\n                .eq('user_id', user.id)\n                .eq('is_active', true)\n                .single();\n\n            if (!error && data) {\n                setActivePage(data);\n            }\n        } catch (error) {\n            console.error('Error loading active page:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDeactivate = async () => {\n        if (!activePage) return;\n\n        try {\n            const { error } = await supabase\n                .from('custom_pages')\n                .update({ is_active: false })\n                .eq('id', activePage.id);\n\n            if (error) throw error;\n\n            toast.success('Switched to default profile');\n            setActivePage(null);\n        } catch (error) {\n            console.error('Error deactivating page:', error);\n            toast.error('Failed to deactivate custom page');\n        }\n    };\n\n    return (\n        <Card className=\"p-6\">\n            <div className=\"space-y-4\">\n                <div>\n                    <h3 className=\"text-lg font-semibold mb-1\">Profile Display</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                        Choose what visitors see when they visit your profile\n                    </p>\n                </div>\n\n                {loading ? (\n                    <p className=\"text-sm text-muted-foreground\">Loading...</p>\n                ) : activePage ? (\n                    <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between p-4 border rounded-lg bg-muted/50\">\n                            <div className=\"flex-1\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                    <Globe className=\"h-4 w-4 text-primary\" />\n                                    <span className=\"font-medium\">{activePage.title}</span>\n                                    <Badge variant=\"default\" className=\"gap-1\">\n                                        <CheckCircle2 className=\"h-3 w-3\" />\n                                        Active\n                                    </Badge>\n                                </div>\n                                <p className=\"text-sm text-muted-foreground\">\n                                    Custom page: /{activePage.slug}\n                                </p>\n                            </div>\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                asChild\n                            >\n                                <a\n                                    href={`/p/${activePage.slug}`}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"gap-2\"\n                                >\n                                    View\n                                    <ExternalLink className=\"h-3 w-3\" />\n                                </a>\n                            </Button>\n                        </div>\n\n                        <div className=\"flex gap-2\">\n                            <Button\n                                variant=\"outline\"\n                                onClick={() => navigate('/dashboard/page-builder')}\n                                className=\"gap-2\"\n                            >\n                                Edit Custom Page\n                            </Button>\n                            <Button\n                                variant=\"outline\"\n                                onClick={handleDeactivate}\n                            >\n                                Use Default Profile\n                            </Button>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"space-y-4\">\n                        <div className=\"p-4 border rounded-lg\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                                <CheckCircle2 className=\"h-4 w-4 text-primary\" />\n                                <span className=\"font-medium\">Default Profile</span>\n                                <Badge variant=\"secondary\">Active</Badge>\n                            </div>\n                            <p className=\"text-sm text-muted-foreground\">\n                                Using the standard profile layout with listings, testimonials, and links\n                            </p>\n                        </div>\n\n                        <Button\n                            onClick={() => navigate('/dashboard/page-builder')}\n                            className=\"gap-2\"\n                        >\n                            <Plus className=\"h-4 w-4\" />\n                            Create Custom Page\n                        </Button>\n                    </div>\n                )}\n            </div>\n        </Card>\n    );\n}\n","/**\n * useSessions Hook\n * Manages user session viewing and revocation\n */\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAuthStore } from '@/stores/useAuthStore';\nimport { useToast } from '@/hooks/use-toast';\nimport { edgeFunctions } from '@/lib/edgeFunctions';\n\nexport interface Session {\n  id: string;\n  ip_address: string | null;\n  user_agent: string | null;\n  device_type: 'desktop' | 'mobile' | 'tablet' | 'unknown' | null;\n  browser: string | null;\n  os: string | null;\n  location_city: string | null;\n  location_country: string | null;\n  is_current: boolean;\n  last_activity_at: string;\n  created_at: string;\n}\n\ninterface SessionsResponse {\n  success: boolean;\n  sessions: Session[];\n  total: number;\n  error?: string;\n}\n\ninterface RevokeResponse {\n  success: boolean;\n  message: string;\n  revoked_count?: number;\n  error?: string;\n}\n\nexport function useSessions() {\n  const { user, session } = useAuthStore();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch all active sessions\n  const {\n    data: sessionsData,\n    isLoading,\n    error,\n    refetch,\n  } = useQuery({\n    queryKey: ['sessions', user?.id],\n    queryFn: async (): Promise<SessionsResponse> => {\n      const { data, error } = await edgeFunctions.invoke('get-sessions');\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    enabled: !!user?.id,\n    staleTime: 30000, // 30 seconds\n    refetchInterval: 60000, // Refetch every minute\n  });\n\n  // Revoke a specific session\n  const revokeSessionMutation = useMutation({\n    mutationFn: async (sessionId: string): Promise<RevokeResponse> => {\n      const { data, error } = await edgeFunctions.invoke('revoke-session', {\n        body: {\n          sessionId,\n          reason: 'user_revoked',\n        },\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['sessions'] });\n      toast({\n        title: 'Session Revoked',\n        description: data.message || 'The session has been revoked successfully.',\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Error',\n        description: error.message || 'Failed to revoke session.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Revoke all other sessions\n  const revokeAllOthersMutation = useMutation({\n    mutationFn: async (): Promise<RevokeResponse> => {\n      // Get current session ID for preservation\n      const currentSessionId = sessionsData?.sessions.find(s => s.is_current)?.id;\n\n      const { data, error } = await edgeFunctions.invoke('revoke-session', {\n        body: {\n          revokeAll: true,\n          currentSessionId,\n          reason: 'revoke_all_by_user',\n        },\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['sessions'] });\n      toast({\n        title: 'Sessions Revoked',\n        description: data.message || `${data.revoked_count} session(s) have been revoked.`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Error',\n        description: error.message || 'Failed to revoke sessions.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Helper to format session info\n  const formatSessionInfo = (session: Session): string => {\n    const parts: string[] = [];\n\n    if (session.browser) parts.push(session.browser);\n    if (session.os) parts.push(`on ${session.os}`);\n    if (session.location_city && session.location_country) {\n      parts.push(`from ${session.location_city}, ${session.location_country}`);\n    } else if (session.location_country) {\n      parts.push(`from ${session.location_country}`);\n    }\n\n    return parts.join(' ') || 'Unknown device';\n  };\n\n  // Helper to get device icon type\n  const getDeviceIcon = (deviceType: Session['device_type']): 'desktop' | 'mobile' | 'tablet' => {\n    switch (deviceType) {\n      case 'mobile':\n        return 'mobile';\n      case 'tablet':\n        return 'tablet';\n      default:\n        return 'desktop';\n    }\n  };\n\n  // Helper to format relative time\n  const formatRelativeTime = (dateString: string): string => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins} min ago`;\n    if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n    if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n\n    return date.toLocaleDateString();\n  };\n\n  return {\n    sessions: sessionsData?.sessions || [],\n    totalSessions: sessionsData?.total || 0,\n    isLoading,\n    error: error?.message || sessionsData?.error,\n    refetch,\n    revokeSession: revokeSessionMutation.mutate,\n    revokeAllOtherSessions: revokeAllOthersMutation.mutate,\n    isRevoking: revokeSessionMutation.isPending,\n    isRevokingAll: revokeAllOthersMutation.isPending,\n    formatSessionInfo,\n    getDeviceIcon,\n    formatRelativeTime,\n  };\n}\n","/**\n * Session Management Component\n * Displays active sessions and allows users to revoke them\n */\n\nimport { useState } from 'react';\nimport { Monitor, Smartphone, Tablet, MoreVertical, LogOut, Shield, RefreshCw } from 'lucide-react';\nimport { useSessions, Session } from '@/hooks/useSessions';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\n\nexport function SessionManagement() {\n  const {\n    sessions,\n    totalSessions,\n    isLoading,\n    error,\n    refetch,\n    revokeSession,\n    revokeAllOtherSessions,\n    isRevoking,\n    isRevokingAll,\n    formatSessionInfo,\n    formatRelativeTime,\n  } = useSessions();\n\n  const [sessionToRevoke, setSessionToRevoke] = useState<Session | null>(null);\n  const [showRevokeAllDialog, setShowRevokeAllDialog] = useState(false);\n\n  const getDeviceIcon = (deviceType: Session['device_type']) => {\n    switch (deviceType) {\n      case 'mobile':\n        return <Smartphone className=\"h-5 w-5\" />;\n      case 'tablet':\n        return <Tablet className=\"h-5 w-5\" />;\n      default:\n        return <Monitor className=\"h-5 w-5\" />;\n    }\n  };\n\n  const handleRevokeSession = () => {\n    if (sessionToRevoke) {\n      revokeSession(sessionToRevoke.id);\n      setSessionToRevoke(null);\n    }\n  };\n\n  const handleRevokeAllOthers = () => {\n    revokeAllOtherSessions();\n    setShowRevokeAllDialog(false);\n  };\n\n  const otherSessionsCount = sessions.filter(s => !s.is_current).length;\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <Shield className=\"h-5 w-5 text-primary\" />\n              <div>\n                <CardTitle>Active Sessions</CardTitle>\n                <CardDescription>\n                  Manage devices and browsers where you're signed in\n                </CardDescription>\n              </div>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => refetch()}\n              disabled={isLoading}\n            >\n              <RefreshCw className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`} />\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading && sessions.length === 0 ? (\n            <div className=\"flex items-center justify-center py-8 text-muted-foreground\">\n              <RefreshCw className=\"h-5 w-5 animate-spin mr-2\" />\n              Loading sessions...\n            </div>\n          ) : error ? (\n            <div className=\"text-center py-8 text-red-600\">\n              <p>Failed to load sessions</p>\n              <p className=\"text-sm text-muted-foreground mt-1\">{error}</p>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => refetch()}\n                className=\"mt-4\"\n              >\n                Try Again\n              </Button>\n            </div>\n          ) : sessions.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No active sessions found\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {/* Session list */}\n              <div className=\"space-y-3\">\n                {sessions.map((session) => (\n                  <div\n                    key={session.id}\n                    className={`flex items-center justify-between p-4 rounded-lg border ${\n                      session.is_current\n                        ? 'border-primary bg-primary/5'\n                        : 'border-border hover:bg-accent/50'\n                    } transition-colors`}\n                  >\n                    <div className=\"flex items-center gap-4\">\n                      <div className={`p-2 rounded-full ${\n                        session.is_current ? 'bg-primary/10 text-primary' : 'bg-muted text-muted-foreground'\n                      }`}>\n                        {getDeviceIcon(session.device_type)}\n                      </div>\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"font-medium text-foreground\">\n                            {session.browser || 'Unknown Browser'}\n                            {session.os && ` on ${session.os}`}\n                          </span>\n                          {session.is_current && (\n                            <span className=\"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full\">\n                              Current\n                            </span>\n                          )}\n                        </div>\n                        <div className=\"text-sm text-muted-foreground mt-0.5\">\n                          {session.ip_address && (\n                            <span>{session.ip_address}</span>\n                          )}\n                          {session.location_city && session.location_country && (\n                            <span> â€¢ {session.location_city}, {session.location_country}</span>\n                          )}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground mt-1\">\n                          Last active: {formatRelativeTime(session.last_activity_at)}\n                        </div>\n                      </div>\n                    </div>\n\n                    {!session.is_current && (\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button variant=\"ghost\" size=\"icon\" disabled={isRevoking}>\n                            <MoreVertical className=\"h-4 w-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuItem\n                            onClick={() => setSessionToRevoke(session)}\n                            className=\"text-red-600 focus:text-red-600\"\n                          >\n                            <LogOut className=\"h-4 w-4 mr-2\" />\n                            Sign out this device\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              {/* Revoke all button */}\n              {otherSessionsCount > 0 && (\n                <div className=\"pt-4 border-t border-border\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => setShowRevokeAllDialog(true)}\n                    disabled={isRevokingAll}\n                    className=\"w-full text-red-600 hover:text-red-700 hover:bg-red-50\"\n                  >\n                    <LogOut className=\"h-4 w-4 mr-2\" />\n                    {isRevokingAll ? 'Signing out...' : `Sign out all other devices (${otherSessionsCount})`}\n                  </Button>\n                </div>\n              )}\n\n              {/* Session count */}\n              <div className=\"text-xs text-muted-foreground text-center pt-2\">\n                {totalSessions} active session{totalSessions !== 1 ? 's' : ''}\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Revoke single session dialog */}\n      <AlertDialog open={!!sessionToRevoke} onOpenChange={() => setSessionToRevoke(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Sign out this device?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will sign out the session on{' '}\n              <strong>\n                {sessionToRevoke?.browser || 'Unknown browser'}\n                {sessionToRevoke?.os && ` on ${sessionToRevoke.os}`}\n              </strong>\n              . They'll need to sign in again to access their account.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleRevokeSession}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              Sign Out Device\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Revoke all sessions dialog */}\n      <AlertDialog open={showRevokeAllDialog} onOpenChange={setShowRevokeAllDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Sign out all other devices?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will sign out {otherSessionsCount} other session{otherSessionsCount !== 1 ? 's' : ''}.\n              Your current session will remain active. This is useful if you think someone else\n              may have access to your account.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleRevokeAllOthers}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              Sign Out All Other Devices\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}\n","/**\n * useAuditLog Hook\n * Provides audit logging functionality for security events\n */\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuthStore } from '@/stores/useAuthStore';\nimport { logger } from '@/lib/logger';\n\nexport interface AuditLogEntry {\n  id: string;\n  user_id: string;\n  actor_id: string | null;\n  action: string;\n  resource_type: string | null;\n  resource_id: string | null;\n  status: 'success' | 'failure' | 'blocked';\n  ip_address: string | null;\n  user_agent: string | null;\n  details: Record<string, unknown> | null;\n  risk_level: 'low' | 'medium' | 'high' | 'critical';\n  created_at: string;\n}\n\ninterface AuditLogsResponse {\n  success: boolean;\n  logs: AuditLogEntry[];\n  total: number;\n  limit: number;\n  offset: number;\n  error?: string;\n}\n\ninterface LogEventParams {\n  action: string;\n  status: 'success' | 'failure' | 'blocked';\n  resourceType?: string;\n  resourceId?: string;\n  details?: Record<string, unknown>;\n  riskLevel?: 'low' | 'medium' | 'high' | 'critical';\n}\n\ninterface UseAuditLogOptions {\n  action?: string;\n  resourceType?: string;\n  startDate?: string;\n  endDate?: string;\n  limit?: number;\n  offset?: number;\n  enabled?: boolean;\n}\n\n// Action display names\nconst ACTION_LABELS: Record<string, string> = {\n  login: 'Login',\n  logout: 'Logout',\n  password_change: 'Password Changed',\n  email_change: 'Email Changed',\n  profile_update: 'Profile Updated',\n  session_revoke: 'Session Revoked',\n  revoke_all_sessions: 'All Sessions Revoked',\n  mfa_enable: 'MFA Enabled',\n  mfa_disable: 'MFA Disabled',\n  mfa_verify: 'MFA Verified',\n  gdpr_export_request: 'Data Export Requested',\n  gdpr_data_export: 'Data Exported',\n  account_deletion_request: 'Account Deletion Requested',\n  account_deletion_cancelled: 'Account Deletion Cancelled',\n  listing_create: 'Listing Created',\n  listing_update: 'Listing Updated',\n  listing_delete: 'Listing Deleted',\n  lead_create: 'Lead Captured',\n  lead_update: 'Lead Updated',\n  settings_update: 'Settings Updated',\n};\n\n// Risk level colors\nconst RISK_COLORS: Record<string, string> = {\n  low: 'text-green-600 bg-green-50',\n  medium: 'text-yellow-600 bg-yellow-50',\n  high: 'text-orange-600 bg-orange-50',\n  critical: 'text-red-600 bg-red-50',\n};\n\nexport function useAuditLog(options: UseAuditLogOptions = {}) {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n  const {\n    action,\n    resourceType,\n    startDate,\n    endDate,\n    limit = 50,\n    offset = 0,\n    enabled = true,\n  } = options;\n\n  // Fetch audit logs\n  const {\n    data: logsData,\n    isLoading,\n    error,\n    refetch,\n  } = useQuery({\n    queryKey: ['auditLogs', user?.id, action, resourceType, startDate, endDate, limit, offset],\n    queryFn: async (): Promise<AuditLogsResponse> => {\n      const params = new URLSearchParams();\n      if (action) params.set('action', action);\n      if (resourceType) params.set('resourceType', resourceType);\n      if (startDate) params.set('startDate', startDate);\n      if (endDate) params.set('endDate', endDate);\n      params.set('limit', limit.toString());\n      params.set('offset', offset.toString());\n\n      // For GET requests, we use direct DB query since edge functions default to POST\n      const { data: logs, error: dbError, count } = await supabase\n        .from('audit_logs')\n        .select('*', { count: 'exact' })\n        .eq('user_id', user?.id)\n        .order('created_at', { ascending: false })\n        .range(offset, offset + limit - 1);\n\n      if (dbError) {\n        throw new Error(dbError.message);\n      }\n\n      return {\n        success: true,\n        logs: logs || [],\n        total: count || 0,\n        limit,\n        offset,\n      };\n    },\n    enabled: !!user?.id && enabled,\n    staleTime: 60000, // 1 minute\n  });\n\n  // Log a new audit event\n  const logEventMutation = useMutation({\n    mutationFn: async (params: LogEventParams): Promise<{ success: boolean; logId: string }> => {\n      const { data, error } = await supabase.functions.invoke('audit-log', {\n        body: params,\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['auditLogs'] });\n    },\n  });\n\n  // Helper to get action label\n  const getActionLabel = (actionName: string): string => {\n    return ACTION_LABELS[actionName] || actionName.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n\n  // Helper to get risk level color classes\n  const getRiskLevelColor = (riskLevel: string): string => {\n    return RISK_COLORS[riskLevel] || RISK_COLORS.low;\n  };\n\n  // Helper to format log details\n  const formatLogDetails = (log: AuditLogEntry): string => {\n    const parts: string[] = [];\n\n    if (log.resource_type) {\n      parts.push(`${log.resource_type}${log.resource_id ? ` #${log.resource_id.slice(0, 8)}` : ''}`);\n    }\n\n    if (log.ip_address) {\n      parts.push(`from ${log.ip_address}`);\n    }\n\n    return parts.join(' ') || 'No additional details';\n  };\n\n  // Helper to group logs by date\n  const groupLogsByDate = (logs: AuditLogEntry[]): Record<string, AuditLogEntry[]> => {\n    return logs.reduce((groups, log) => {\n      const date = new Date(log.created_at).toLocaleDateString();\n      if (!groups[date]) {\n        groups[date] = [];\n      }\n      groups[date].push(log);\n      return groups;\n    }, {} as Record<string, AuditLogEntry[]>);\n  };\n\n  return {\n    logs: logsData?.logs || [],\n    totalLogs: logsData?.total || 0,\n    isLoading,\n    error: error?.message || logsData?.error,\n    refetch,\n    logEvent: logEventMutation.mutateAsync,\n    isLogging: logEventMutation.isPending,\n    getActionLabel,\n    getRiskLevelColor,\n    formatLogDetails,\n    groupLogsByDate,\n  };\n}\n\n// Standalone function for logging events without the hook\nexport async function logAuditEvent(params: LogEventParams): Promise<void> {\n  try {\n    await supabase.functions.invoke('audit-log', {\n      body: params,\n    });\n  } catch (error) {\n    logger.error('Failed to log audit event', error);\n  }\n}\n","/**\n * Audit Log Viewer Component\n * Displays user's security activity history\n */\n\nimport { useState } from 'react';\nimport { History, ChevronDown, ChevronUp, Shield, AlertTriangle, AlertCircle, Info } from 'lucide-react';\nimport { useAuditLog, AuditLogEntry } from '@/hooks/useAuditLog';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\n\nexport function AuditLogViewer() {\n  const {\n    logs,\n    totalLogs,\n    isLoading,\n    error,\n    refetch,\n    getActionLabel,\n    getRiskLevelColor,\n    formatLogDetails,\n    groupLogsByDate,\n  } = useAuditLog({ limit: 20 });\n\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [selectedLog, setSelectedLog] = useState<AuditLogEntry | null>(null);\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'success':\n        return <Shield className=\"h-4 w-4 text-green-600\" />;\n      case 'failure':\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\n      case 'blocked':\n        return <AlertCircle className=\"h-4 w-4 text-red-600\" />;\n      default:\n        return <Info className=\"h-4 w-4 text-muted-foreground\" />;\n    }\n  };\n\n  const getRiskBadge = (riskLevel: string) => {\n    const colorMap: Record<string, string> = {\n      low: 'bg-green-100 text-green-700',\n      medium: 'bg-yellow-100 text-yellow-700',\n      high: 'bg-orange-100 text-orange-700',\n      critical: 'bg-red-100 text-red-700',\n    };\n\n    return (\n      <Badge variant=\"outline\" className={`text-xs ${colorMap[riskLevel] || colorMap.low}`}>\n        {riskLevel}\n      </Badge>\n    );\n  };\n\n  const displayedLogs = isExpanded ? logs : logs.slice(0, 5);\n  const groupedLogs = groupLogsByDate(displayedLogs);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center gap-3\">\n          <History className=\"h-5 w-5 text-primary\" />\n          <div>\n            <CardTitle>Security Activity</CardTitle>\n            <CardDescription>\n              Recent security-related actions on your account\n            </CardDescription>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {isLoading && logs.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            Loading activity...\n          </div>\n        ) : error ? (\n          <div className=\"text-center py-8 text-red-600\">\n            <p>Failed to load activity</p>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => refetch()}\n              className=\"mt-4\"\n            >\n              Try Again\n            </Button>\n          </div>\n        ) : logs.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            No security activity recorded yet\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {Object.entries(groupedLogs).map(([date, dateLogs]) => (\n              <div key={date} className=\"space-y-2\">\n                <div className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">\n                  {date}\n                </div>\n                <div className=\"space-y-1\">\n                  {dateLogs.map((log) => (\n                    <div\n                      key={log.id}\n                      className=\"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors cursor-pointer\"\n                      onClick={() => setSelectedLog(selectedLog?.id === log.id ? null : log)}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        {getStatusIcon(log.status)}\n                        <div>\n                          <div className=\"font-medium text-sm\">\n                            {getActionLabel(log.action)}\n                          </div>\n                          <div className=\"text-xs text-muted-foreground\">\n                            {new Date(log.created_at).toLocaleTimeString()}\n                            {log.ip_address && ` â€¢ ${log.ip_address}`}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {log.risk_level !== 'low' && getRiskBadge(log.risk_level)}\n                        <Badge\n                          variant={log.status === 'success' ? 'default' : 'destructive'}\n                          className=\"text-xs\"\n                        >\n                          {log.status}\n                        </Badge>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n\n            {/* Expand/collapse button */}\n            {logs.length > 5 && (\n              <Button\n                variant=\"ghost\"\n                onClick={() => setIsExpanded(!isExpanded)}\n                className=\"w-full text-sm\"\n              >\n                {isExpanded ? (\n                  <>\n                    <ChevronUp className=\"h-4 w-4 mr-2\" />\n                    Show Less\n                  </>\n                ) : (\n                  <>\n                    <ChevronDown className=\"h-4 w-4 mr-2\" />\n                    Show More ({totalLogs - 5} more)\n                  </>\n                )}\n              </Button>\n            )}\n          </div>\n        )}\n\n        {/* Selected log details */}\n        {selectedLog && (\n          <div className=\"mt-4 p-4 bg-muted rounded-lg\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h4 className=\"font-medium\">{getActionLabel(selectedLog.action)}</h4>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setSelectedLog(null)}\n              >\n                Close\n              </Button>\n            </div>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Status:</span>\n                <span>{selectedLog.status}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">Time:</span>\n                <span>{new Date(selectedLog.created_at).toLocaleString()}</span>\n              </div>\n              {selectedLog.ip_address && (\n                <div className=\"flex justify-between\">\n                  <span className=\"text-muted-foreground\">IP Address:</span>\n                  <span className=\"font-mono text-xs\">{selectedLog.ip_address}</span>\n                </div>\n              )}\n              {selectedLog.resource_type && (\n                <div className=\"flex justify-between\">\n                  <span className=\"text-muted-foreground\">Resource:</span>\n                  <span>{selectedLog.resource_type} {selectedLog.resource_id?.slice(0, 8)}</span>\n                </div>\n              )}\n              {selectedLog.details && (\n                <div className=\"mt-2\">\n                  <span className=\"text-muted-foreground block mb-1\">Details:</span>\n                  <pre className=\"text-xs bg-background p-2 rounded overflow-auto max-h-32\">\n                    {JSON.stringify(selectedLog.details, null, 2)}\n                  </pre>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","/**\n * useGDPR Hook\n * Handles GDPR data export and account deletion functionality\n */\n\nimport { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuthStore } from '@/stores/useAuthStore';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface DeletionStatus {\n  scheduled: boolean;\n  scheduledFor?: string;\n  daysRemaining?: number;\n  reason?: string;\n  canCancel?: boolean;\n  requestedAt?: string;\n  message?: string;\n}\n\ninterface ExportRequestResponse {\n  success: boolean;\n  requestId?: string;\n  message?: string;\n  error?: string;\n}\n\ninterface DeletionRequestResponse {\n  success: boolean;\n  requestId?: string;\n  message?: string;\n  scheduledFor?: string;\n  daysRemaining?: number;\n  canCancel?: boolean;\n  cancelInstructions?: string;\n  error?: string;\n}\n\nexport function useGDPR() {\n  const { user, signOut } = useAuthStore();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [isExporting, setIsExporting] = useState(false);\n\n  // Fetch deletion status\n  const {\n    data: deletionStatus,\n    isLoading: isDeletionStatusLoading,\n    error: deletionStatusError,\n    refetch: refetchDeletionStatus,\n  } = useQuery({\n    queryKey: ['deletionStatus', user?.id],\n    queryFn: async (): Promise<DeletionStatus> => {\n      const { data, error } = await edgeFunctions.invoke('gdpr-deletion', {\n        method: 'GET',\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    enabled: !!user?.id,\n    staleTime: 60000, // 1 minute\n  });\n\n  // Request data export\n  const exportDataMutation = useMutation({\n    mutationFn: async (): Promise<Blob> => {\n      setIsExporting(true);\n\n      try {\n        // Request export and get data directly\n        const { data, error } = await edgeFunctions.invoke('gdpr-export', {\n          method: 'GET',\n        });\n\n        if (error) {\n          throw new Error(error.message);\n        }\n\n        // Convert to blob for download\n        const blob = new Blob([JSON.stringify(data, null, 2)], {\n          type: 'application/json',\n        });\n\n        return blob;\n      } finally {\n        setIsExporting(false);\n      }\n    },\n    onSuccess: (blob) => {\n      // Trigger download\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `agentbio-data-export-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      toast({\n        title: 'Data Export Complete',\n        description: 'Your data has been downloaded successfully.',\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Export Failed',\n        description: error.message || 'Failed to export your data. Please try again.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Request account deletion\n  const requestDeletionMutation = useMutation({\n    mutationFn: async (reason?: string): Promise<DeletionRequestResponse> => {\n      const { data, error } = await edgeFunctions.invoke('gdpr-deletion', {\n        body: {\n          action: 'request',\n          reason,\n        },\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: ['deletionStatus'] });\n      toast({\n        title: 'Account Deletion Scheduled',\n        description: `Your account will be deleted in ${data.daysRemaining} days. You can cancel this request anytime before then.`,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Request Failed',\n        description: error.message || 'Failed to schedule account deletion.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Cancel account deletion\n  const cancelDeletionMutation = useMutation({\n    mutationFn: async (cancelReason?: string): Promise<DeletionRequestResponse> => {\n      const { data, error } = await edgeFunctions.invoke('gdpr-deletion', {\n        body: {\n          action: 'cancel',\n          cancelReason,\n        },\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['deletionStatus'] });\n      toast({\n        title: 'Deletion Cancelled',\n        description: 'Your account deletion has been cancelled. Your account is safe.',\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: 'Cancellation Failed',\n        description: error.message || 'Failed to cancel account deletion.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Helper to format days remaining message\n  const formatDaysRemaining = (days: number): string => {\n    if (days === 0) return 'Today';\n    if (days === 1) return 'Tomorrow';\n    return `In ${days} days`;\n  };\n\n  // Helper to get deletion status message\n  const getDeletionStatusMessage = (): string => {\n    if (!deletionStatus?.scheduled) {\n      return 'No account deletion is scheduled';\n    }\n\n    const daysText = formatDaysRemaining(deletionStatus.daysRemaining || 0);\n    return `Account deletion scheduled for ${daysText}`;\n  };\n\n  return {\n    // Export functions\n    exportData: exportDataMutation.mutate,\n    isExporting: isExporting || exportDataMutation.isPending,\n\n    // Deletion status\n    deletionStatus,\n    isDeletionStatusLoading,\n    deletionStatusError: deletionStatusError?.message,\n    refetchDeletionStatus,\n    isAccountDeletionScheduled: deletionStatus?.scheduled || false,\n    daysUntilDeletion: deletionStatus?.daysRemaining,\n    deletionScheduledFor: deletionStatus?.scheduledFor,\n\n    // Deletion actions\n    requestDeletion: requestDeletionMutation.mutate,\n    cancelDeletion: cancelDeletionMutation.mutate,\n    isRequestingDeletion: requestDeletionMutation.isPending,\n    isCancellingDeletion: cancelDeletionMutation.isPending,\n\n    // Helpers\n    formatDaysRemaining,\n    getDeletionStatusMessage,\n  };\n}\n","/**\n * GDPR Settings Component\n * Handles data export and account deletion\n */\n\nimport { useState } from 'react';\nimport { Download, Trash2, AlertTriangle, Clock, XCircle, CheckCircle } from 'lucide-react';\nimport { useGDPR } from '@/hooks/useGDPR';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\n\nexport function GDPRSettings() {\n  const {\n    exportData,\n    isExporting,\n    deletionStatus,\n    isDeletionStatusLoading,\n    isAccountDeletionScheduled,\n    daysUntilDeletion,\n    deletionScheduledFor,\n    requestDeletion,\n    cancelDeletion,\n    isRequestingDeletion,\n    isCancellingDeletion,\n    formatDaysRemaining,\n  } = useGDPR();\n\n  const [showExportDialog, setShowExportDialog] = useState(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [showCancelDialog, setShowCancelDialog] = useState(false);\n  const [deletionReason, setDeletionReason] = useState('');\n\n  const handleExport = () => {\n    exportData();\n    setShowExportDialog(false);\n  };\n\n  const handleRequestDeletion = () => {\n    requestDeletion(deletionReason || undefined);\n    setShowDeleteDialog(false);\n    setDeletionReason('');\n  };\n\n  const handleCancelDeletion = () => {\n    cancelDeletion('User changed their mind');\n    setShowCancelDialog(false);\n  };\n\n  return (\n    <>\n      {/* Data Export Section */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <Download className=\"h-5 w-5 text-primary\" />\n            <div>\n              <CardTitle>Export Your Data</CardTitle>\n              <CardDescription>\n                Download a copy of all your data in JSON format\n              </CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <p className=\"text-sm text-muted-foreground\">\n              Your data export will include your profile, listings, leads, testimonials,\n              links, blog posts, analytics, and security activity logs.\n            </p>\n            <Button\n              onClick={() => setShowExportDialog(true)}\n              disabled={isExporting}\n            >\n              <Download className=\"h-4 w-4 mr-2\" />\n              {isExporting ? 'Preparing Export...' : 'Export My Data'}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Account Deletion Section */}\n      <Card className=\"border-red-200 dark:border-red-900\">\n        <CardHeader>\n          <div className=\"flex items-center gap-3\">\n            <Trash2 className=\"h-5 w-5 text-red-600\" />\n            <div>\n              <CardTitle className=\"text-red-600\">Delete Account</CardTitle>\n              <CardDescription>\n                Permanently delete your account and all associated data\n              </CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isDeletionStatusLoading ? (\n            <div className=\"text-muted-foreground\">Loading status...</div>\n          ) : isAccountDeletionScheduled ? (\n            // Deletion is scheduled\n            <div className=\"space-y-4\">\n              <div className=\"flex items-start gap-3 p-4 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-900\">\n                <Clock className=\"h-5 w-5 text-red-600 mt-0.5\" />\n                <div>\n                  <h4 className=\"font-medium text-red-600\">\n                    Account Deletion Scheduled\n                  </h4>\n                  <p className=\"text-sm text-red-800 dark:text-red-200 mt-1\">\n                    Your account will be permanently deleted{' '}\n                    <strong>{formatDaysRemaining(daysUntilDeletion || 0)}</strong>\n                    {deletionScheduledFor && (\n                      <> ({new Date(deletionScheduledFor).toLocaleDateString()})</>\n                    )}.\n                  </p>\n                  <p className=\"text-sm text-red-800 dark:text-red-200 mt-2\">\n                    You can cancel this request before the deletion date to keep your account.\n                  </p>\n                </div>\n              </div>\n\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowCancelDialog(true)}\n                disabled={isCancellingDeletion}\n              >\n                <XCircle className=\"h-4 w-4 mr-2\" />\n                {isCancellingDeletion ? 'Cancelling...' : 'Cancel Deletion'}\n              </Button>\n            </div>\n          ) : (\n            // No deletion scheduled\n            <div className=\"space-y-4\">\n              <div className=\"flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-900\">\n                <AlertTriangle className=\"h-5 w-5 text-yellow-600 mt-0.5\" />\n                <div>\n                  <h4 className=\"font-medium text-yellow-800 dark:text-yellow-200\">\n                    This action is irreversible\n                  </h4>\n                  <p className=\"text-sm text-yellow-700 dark:text-yellow-300 mt-1\">\n                    Deleting your account will permanently remove all your data, including\n                    your profile, listings, leads, and analytics. This cannot be undone.\n                  </p>\n                </div>\n              </div>\n\n              <ul className=\"text-sm text-muted-foreground space-y-1 ml-4 list-disc\">\n                <li>30-day grace period before permanent deletion</li>\n                <li>You can cancel the deletion request during this period</li>\n                <li>We recommend exporting your data first</li>\n              </ul>\n\n              <Button\n                variant=\"destructive\"\n                onClick={() => setShowDeleteDialog(true)}\n                disabled={isRequestingDeletion}\n              >\n                <Trash2 className=\"h-4 w-4 mr-2\" />\n                {isRequestingDeletion ? 'Processing...' : 'Request Account Deletion'}\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Export Confirmation Dialog */}\n      <AlertDialog open={showExportDialog} onOpenChange={setShowExportDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Export Your Data</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will download a JSON file containing all your data including:\n              <ul className=\"mt-2 ml-4 list-disc text-left\">\n                <li>Profile information</li>\n                <li>Property listings</li>\n                <li>Leads and contacts</li>\n                <li>Testimonials</li>\n                <li>Links and social profiles</li>\n                <li>Blog posts</li>\n                <li>Analytics data</li>\n                <li>Security activity logs</li>\n              </ul>\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleExport}>\n              <Download className=\"h-4 w-4 mr-2\" />\n              Download Data\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Delete Account Dialog */}\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle className=\"text-red-600\">\n              Delete Your Account?\n            </AlertDialogTitle>\n            <AlertDialogDescription asChild>\n              <div className=\"space-y-4\">\n                <p>\n                  This will schedule your account for permanent deletion. You'll have\n                  30 days to cancel this request if you change your mind.\n                </p>\n                <div>\n                  <Label htmlFor=\"reason\" className=\"text-sm font-medium\">\n                    Why are you leaving? (Optional)\n                  </Label>\n                  <Textarea\n                    id=\"reason\"\n                    placeholder=\"Help us improve by sharing your feedback...\"\n                    value={deletionReason}\n                    onChange={(e) => setDeletionReason(e.target.value)}\n                    className=\"mt-2\"\n                    rows={3}\n                  />\n                </div>\n                <div className=\"flex items-start gap-2 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg\">\n                  <AlertTriangle className=\"h-4 w-4 text-red-600 mt-0.5\" />\n                  <p className=\"text-sm text-red-800 dark:text-red-200\">\n                    After 30 days, all your data will be permanently deleted and cannot be recovered.\n                  </p>\n                </div>\n              </div>\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleRequestDeletion}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n              Schedule Deletion\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      {/* Cancel Deletion Dialog */}\n      <AlertDialog open={showCancelDialog} onOpenChange={setShowCancelDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Cancel Account Deletion?</AlertDialogTitle>\n            <AlertDialogDescription>\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5\" />\n                <p>\n                  Your account deletion will be cancelled and your account will remain active.\n                  All your data will be preserved.\n                </p>\n              </div>\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Go Back</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleCancelDeletion}\n              className=\"bg-green-600 hover:bg-green-700\"\n            >\n              <CheckCircle className=\"h-4 w-4 mr-2\" />\n              Keep My Account\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { Shield, Bell, CreditCard, User, Lock, Mail, Save, Eye, KeyRound } from \"lucide-react\";\nimport { useAuthStore } from \"@/stores/useAuthStore\";\nimport { useSettings } from \"@/hooks/useSettings\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { UsernameInput } from \"@/components/UsernameInput\";\nimport { ProfileURLCard } from \"@/components/settings/ProfileURLCard\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ProfileDisplaySettings } from \"@/components/settings/ProfileDisplaySettings\";\nimport { SessionManagement } from \"@/components/settings/SessionManagement\";\nimport { AuditLogViewer } from \"@/components/settings/AuditLogViewer\";\nimport { GDPRSettings } from \"@/components/settings/GDPRSettings\";\n\nexport default function Settings() {\n  const { user } = useAuthStore();\n  const { settings, updateSettings } = useSettings();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [notifications, setNotifications] = useState({\n    emailLeads: true,\n    smsLeads: false,\n    weeklyReport: true,\n    marketingEmails: false,\n  });\n\n  const [profileVisibility, setProfileVisibility] = useState({\n    showListings: true,\n    showSoldProperties: true,\n    showTestimonials: true,\n    showSocialProof: true,\n    showContactButtons: true,\n  });\n\n  const [password, setPassword] = useState({\n    current: \"\",\n    new: \"\",\n    confirm: \"\",\n  });\n\n  // Profile state\n  const { data: profile, isLoading: profileLoading } = useQuery({\n    queryKey: ['profile', user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null;\n      \n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', user.id)\n        .single();\n\n      if (error) throw error;\n      return data;\n    },\n    enabled: !!user?.id,\n  });\n\n  const [formData, setFormData] = useState({\n    username: '',\n    full_name: '',\n    bio: '',\n  });\n\n  useEffect(() => {\n    if (profile) {\n      setFormData({\n        username: profile.username || '',\n        full_name: profile.full_name || '',\n        bio: profile.bio || '',\n      });\n    }\n  }, [profile]);\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      if (!user?.id) throw new Error('Not authenticated');\n\n      const { error } = await supabase\n        .from('profiles')\n        .update({\n          username: data.username,\n          full_name: data.full_name,\n          bio: data.bio,\n          updated_at: new Date().toISOString(),\n        })\n        .eq('id', user.id);\n\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['profile'] });\n      toast({\n        title: \"Profile updated\",\n        description: \"Your profile has been updated successfully.\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Sync local state with settings from database\n  useEffect(() => {\n    if (settings) {\n      setNotifications({\n        emailLeads: settings.email_leads,\n        smsLeads: settings.sms_leads,\n        weeklyReport: settings.weekly_report,\n        marketingEmails: settings.marketing_emails,\n      });\n      setProfileVisibility({\n        showListings: settings.show_listings,\n        showSoldProperties: settings.show_sold_properties,\n        showTestimonials: settings.show_testimonials,\n        showSocialProof: settings.show_social_proof,\n        showContactButtons: settings.show_contact_buttons,\n      });\n    }\n  }, [settings]);\n\n  const handleNotificationChange = async (key: keyof typeof notifications, value: boolean) => {\n    setNotifications(prev => ({ ...prev, [key]: value }));\n    \n    // Map frontend keys to database column names\n    const dbKey = key === 'emailLeads' ? 'email_leads' :\n                  key === 'smsLeads' ? 'sms_leads' :\n                  key === 'weeklyReport' ? 'weekly_report' :\n                  'marketing_emails';\n    \n    try {\n      await updateSettings.mutateAsync({ [dbKey]: value });\n      toast({\n        title: \"Settings updated\",\n        description: \"Your notification preferences have been saved.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update settings.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleProfileVisibilityChange = async (key: keyof typeof profileVisibility, value: boolean) => {\n    setProfileVisibility(prev => ({ ...prev, [key]: value }));\n    \n    // Map frontend keys to database column names\n    const dbKey = key === 'showListings' ? 'show_listings' :\n                  key === 'showSoldProperties' ? 'show_sold_properties' :\n                  key === 'showTestimonials' ? 'show_testimonials' :\n                  key === 'showSocialProof' ? 'show_social_proof' :\n                  'show_contact_buttons';\n    \n    try {\n      await updateSettings.mutateAsync({ [dbKey]: value });\n      toast({\n        title: \"Profile visibility updated\",\n        description: \"Your profile display preferences have been saved.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update visibility settings.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handlePasswordChange = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (password.new !== password.confirm) {\n      toast({\n        title: \"Error\",\n        description: \"New passwords don't match.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (password.new.length < 6) {\n      toast({\n        title: \"Error\",\n        description: \"Password must be at least 6 characters.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      const { error } = await supabase.auth.updateUser({\n        password: password.new,\n      });\n\n      if (error) throw error;\n\n      toast({\n        title: \"Password updated\",\n        description: \"Your password has been changed successfully.\",\n      });\n\n      setPassword({ current: \"\", new: \"\", confirm: \"\" });\n    } catch (error: any) {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update password.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const memberSince = user?.created_at \n    ? new Date(user.created_at).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })\n    : \"Unknown\";\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-foreground\">Account Settings</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          Manage your account and preferences\n        </p>\n      </div>\n\n      {/* Profile & Username Section */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Profile & Username</CardTitle>\n          <CardDescription>\n            Manage your public profile and unique URL\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex items-center gap-6\">\n            <Avatar className=\"w-20 h-20\">\n              <AvatarImage src={profile?.avatar_url || undefined} />\n              <AvatarFallback className=\"text-xl\">\n                {profile?.full_name?.[0] || profile?.username?.[0] || 'U'}\n              </AvatarFallback>\n            </Avatar>\n          </div>\n\n          <UsernameInput\n            value={formData.username}\n            onChange={(value) => setFormData({ ...formData, username: value })}\n            currentUsername={profile?.username}\n          />\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"full_name\">Full Name</Label>\n            <Input\n              id=\"full_name\"\n              value={formData.full_name}\n              onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n              placeholder=\"Enter your full name\"\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"bio\">Bio</Label>\n            <Textarea\n              id=\"bio\"\n              value={formData.bio}\n              onChange={(e) => setFormData({ ...formData, bio: e.target.value })}\n              placeholder=\"Tell us about yourself\"\n              rows={4}\n              maxLength={500}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {formData.bio?.length || 0}/500 characters\n            </p>\n          </div>\n\n          <button\n            onClick={() => updateProfileMutation.mutate(formData)}\n            disabled={updateProfileMutation.isPending}\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium disabled:opacity-50\"\n          >\n            <Save className=\"h-4 w-4\" />\n            {updateProfileMutation.isPending ? 'Saving...' : 'Save Profile Changes'}\n          </button>\n        </CardContent>\n      </Card>\n\n      {/* Profile URL Card */}\n      {profile?.username && <ProfileURLCard username={profile.username} />}\n\n      {/* Profile Display Settings */}\n      <ProfileDisplaySettings />\n\n      {/* Account Information */}\n      <div className=\"bg-card border border-border rounded-lg p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <User className=\"h-5 w-5 text-primary\" />\n          <h2 className=\"text-lg font-semibold text-foreground\">\n            Account Information\n          </h2>\n        </div>\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Email Address</div>\n              <div className=\"text-sm text-muted-foreground\">\n                {user?.email || \"Not available\"}\n              </div>\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">User ID</div>\n              <div className=\"text-sm text-muted-foreground font-mono text-xs\">\n                {user?.id || \"Not available\"}\n              </div>\n            </div>\n          </div>\n          <div className=\"flex items-center justify-between py-3\">\n            <div>\n              <div className=\"font-medium text-foreground\">Member Since</div>\n              <div className=\"text-sm text-muted-foreground\">{memberSince}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Change Password */}\n      <form onSubmit={handlePasswordChange} className=\"bg-card border border-border rounded-lg p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <Lock className=\"h-5 w-5 text-primary\" />\n          <h2 className=\"text-lg font-semibold text-foreground\">\n            Change Password\n          </h2>\n        </div>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              New Password\n            </label>\n            <input\n              type=\"password\"\n              value={password.new}\n              onChange={(e) => setPassword({ ...password, new: e.target.value })}\n              className=\"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary\"\n              required\n              minLength={6}\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\n              Confirm New Password\n            </label>\n            <input\n              type=\"password\"\n              value={password.confirm}\n              onChange={(e) =>\n                setPassword({ ...password, confirm: e.target.value })\n              }\n              className=\"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary\"\n              required\n              minLength={6}\n            />\n          </div>\n          <button \n            type=\"submit\"\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium\"\n          >\n            <Save className=\"h-4 w-4\" />\n            Update Password\n          </button>\n        </div>\n      </form>\n\n      {/* Notifications */}\n      <div className=\"bg-card border border-border rounded-lg p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <Bell className=\"h-5 w-5 text-primary\" />\n          <h2 className=\"text-lg font-semibold text-foreground\">\n            Notification Preferences\n          </h2>\n        </div>\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Email Notifications for New Leads</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Get notified immediately when someone submits a lead form\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={notifications.emailLeads}\n                onChange={(e) => handleNotificationChange('emailLeads', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">SMS Notifications</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Receive text messages for urgent leads\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={notifications.smsLeads}\n                onChange={(e) => handleNotificationChange('smsLeads', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Weekly Performance Report</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Get a summary of your profile analytics every Monday\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={notifications.weeklyReport}\n                onChange={(e) => handleNotificationChange('weeklyReport', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3\">\n            <div>\n              <div className=\"font-medium text-foreground\">Marketing Emails</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Tips, updates, and special offers from AgentBio.net\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={notifications.marketingEmails}\n                onChange={(e) => handleNotificationChange('marketingEmails', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Profile Visibility */}\n      <div className=\"bg-card border border-border rounded-lg p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <Eye className=\"h-5 w-5 text-primary\" />\n          <h2 className=\"text-lg font-semibold text-foreground\">\n            Profile Visibility\n          </h2>\n        </div>\n        <p className=\"text-sm text-muted-foreground mb-4\">\n          Control which sections appear on your public profile page\n        </p>\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Show Contact Buttons</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Display email, phone, and text buttons\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={profileVisibility.showContactButtons}\n                onChange={(e) => handleProfileVisibilityChange('showContactButtons', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Show Social Proof Banner</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Display stats like properties sold and total volume\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={profileVisibility.showSocialProof}\n                onChange={(e) => handleProfileVisibilityChange('showSocialProof', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Show Active Listings</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Display your currently available properties\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={profileVisibility.showListings}\n                onChange={(e) => handleProfileVisibilityChange('showListings', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Show Sold Properties</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Display your past sales and success history\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={profileVisibility.showSoldProperties}\n                onChange={(e) => handleProfileVisibilityChange('showSoldProperties', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-between py-3\">\n            <div>\n              <div className=\"font-medium text-foreground\">Show Testimonials</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Display client reviews and ratings\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={profileVisibility.showTestimonials}\n                onChange={(e) => handleProfileVisibilityChange('showTestimonials', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary\"></div>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Billing */}\n      <div className=\"bg-card border border-border rounded-lg p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <CreditCard className=\"h-5 w-5 text-primary\" />\n          <h2 className=\"text-lg font-semibold text-foreground\">\n            Billing & Subscription\n          </h2>\n        </div>\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Current Plan</div>\n              <div className=\"text-sm text-muted-foreground\">\n                Professional - $49/month\n              </div>\n            </div>\n            <button className=\"px-4 py-2 bg-background border border-border rounded-lg hover:bg-accent transition-colors text-sm font-medium\">\n              Manage Plan\n            </button>\n          </div>\n          <div className=\"flex items-center justify-between py-3 border-b border-border\">\n            <div>\n              <div className=\"font-medium text-foreground\">Payment Method</div>\n              <div className=\"text-sm text-muted-foreground\">\n                â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 4242\n              </div>\n            </div>\n            <button className=\"px-4 py-2 bg-background border border-border rounded-lg hover:bg-accent transition-colors text-sm font-medium\">\n              Update\n            </button>\n          </div>\n          <div className=\"flex items-center justify-between py-3\">\n            <div>\n              <div className=\"font-medium text-foreground\">Next Billing Date</div>\n              <div className=\"text-sm text-muted-foreground\">February 15, 2024</div>\n            </div>\n            <button className=\"px-4 py-2 bg-background border border-border rounded-lg hover:bg-accent transition-colors text-sm font-medium\">\n              View Invoices\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Security & Privacy Section Header */}\n      <div className=\"pt-6 border-t border-border\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <KeyRound className=\"h-6 w-6 text-primary\" />\n          <h2 className=\"text-2xl font-bold text-foreground\">Security & Privacy</h2>\n        </div>\n        <p className=\"text-muted-foreground mb-6\">\n          Manage your security settings, active sessions, and data privacy\n        </p>\n      </div>\n\n      {/* Session Management */}\n      <SessionManagement />\n\n      {/* Security Activity / Audit Logs */}\n      <AuditLogViewer />\n\n      {/* GDPR Settings (Data Export & Account Deletion) */}\n      <GDPRSettings />\n    </div>\n  );\n}\n"],"names":["CreditCard","createLucideIcon","History","Info","KeyRound","Tablet","useSettings","user","useAuthStore","queryClient","useQueryClient","settings","isLoading","useQuery","data","error","supabase","newSettings","insertError","updateSettings","useMutation","updates","UsernameInput","value","onChange","currentUsername","checkUsername","isChecking","isAvailable","useUsernameCheck","touched","setTouched","useState","useEffect","showSuccess","showError","jsxs","jsx","Label","Input","e","Loader2","Check","X","Alert","AlertDescription","ProfileURLCard","username","copied","setCopied","toast","useToast","profileURL","copyToClipboard","shareProfile","Card","CardHeader","CardTitle","ExternalLink","CardDescription","CardContent","Button","Fragment","Copy","Share2","ProfileDisplaySettings","navigate","useNavigate","activePage","setActivePage","loading","setLoading","loadActivePage","handleDeactivate","Globe","Badge","CheckCircle2","Plus","useSessions","session","sessionsData","refetch","edgeFunctions","revokeSessionMutation","sessionId","revokeAllOthersMutation","currentSessionId","s","formatSessionInfo","parts","getDeviceIcon","deviceType","formatRelativeTime","dateString","date","diffMs","diffMins","diffHours","diffDays","SessionManagement","sessions","totalSessions","revokeSession","revokeAllOtherSessions","isRevoking","isRevokingAll","sessionToRevoke","setSessionToRevoke","showRevokeAllDialog","setShowRevokeAllDialog","Smartphone","Monitor","handleRevokeSession","handleRevokeAllOthers","otherSessionsCount","Shield","RefreshCw","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","DropdownMenuItem","LogOut","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","ACTION_LABELS","RISK_COLORS","useAuditLog","options","action","resourceType","startDate","endDate","limit","offset","enabled","logsData","params","logs","dbError","count","logEventMutation","getActionLabel","actionName","l","getRiskLevelColor","riskLevel","formatLogDetails","log","groupLogsByDate","groups","AuditLogViewer","totalLogs","isExpanded","setIsExpanded","selectedLog","setSelectedLog","getStatusIcon","status","AlertTriangle","AlertCircle","getRiskBadge","colorMap","displayedLogs","groupedLogs","dateLogs","ChevronUp","ChevronDown","useGDPR","signOut","isExporting","setIsExporting","deletionStatus","isDeletionStatusLoading","deletionStatusError","refetchDeletionStatus","exportDataMutation","blob","url","a","requestDeletionMutation","reason","cancelDeletionMutation","cancelReason","formatDaysRemaining","days","getDeletionStatusMessage","GDPRSettings","exportData","isAccountDeletionScheduled","daysUntilDeletion","deletionScheduledFor","requestDeletion","cancelDeletion","isRequestingDeletion","isCancellingDeletion","showExportDialog","setShowExportDialog","showDeleteDialog","setShowDeleteDialog","showCancelDialog","setShowCancelDialog","deletionReason","setDeletionReason","handleExport","handleRequestDeletion","handleCancelDeletion","Download","Trash2","Clock","XCircle","Textarea","CheckCircle","Settings","notifications","setNotifications","profileVisibility","setProfileVisibility","password","setPassword","profile","profileLoading","formData","setFormData","updateProfileMutation","handleNotificationChange","key","prev","dbKey","handleProfileVisibilityChange","handlePasswordChange","memberSince","Avatar","AvatarImage","AvatarFallback","Save","User","Lock","Bell","Eye"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}