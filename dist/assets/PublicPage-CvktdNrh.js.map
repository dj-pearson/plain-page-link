{"version":3,"mappings":"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","names":["PublicPage","slug","useParams","page","setPage","useState","loading","setLoading","error","setError","useEffect","supabase","__vitePreload","n","data","pageConfig","err","preloadThemeFonts","jsxs","jsx","Loader2","themeStyles","getThemedStyles","Fragment","Helmet","block","a","b","BlockRenderer"],"ignoreList":[],"sources":["../../src/pages/PublicPage.tsx"],"sourcesContent":["/**\n * Public Page Viewer\n * Displays published link-in-bio pages to visitors\n */\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { PageConfig } from \"@/types/pageBuilder\";\nimport { BlockRenderer } from \"@/components/pageBuilder/BlockRenderer\";\nimport { Helmet } from \"react-helmet-async\";\nimport { Loader2 } from \"lucide-react\";\nimport { getThemedStyles, preloadThemeFonts } from \"@/lib/themeUtils\";\n\nexport default function PublicPage() {\n    const { slug } = useParams<{ slug: string }>();\n    const [page, setPage] = useState<PageConfig | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        const fetchPage = async () => {\n            if (!slug) {\n                setError(\"No page slug provided\");\n                setLoading(false);\n                return;\n            }\n\n            try {\n                const { supabase } = await import(\"@/integrations/supabase/client\");\n                \n                // Fetch published page from database\n                const { data, error } = await supabase\n                    .from('custom_pages')\n                    .select('*')\n                    .eq('slug', slug)\n                    .eq('published', true)\n                    .single();\n\n                if (error) throw error;\n                if (!data) {\n                    setError(\"Page not found or not published\");\n                    setLoading(false);\n                    return;\n                }\n\n                // Convert database format to PageConfig\n                const pageConfig: PageConfig = {\n                    id: data.id,\n                    userId: data.user_id,\n                    slug: data.slug,\n                    title: data.title,\n                    description: data.description || '',\n                    blocks: data.blocks as any[],\n                    theme: data.theme as any,\n                    seo: data.seo as any,\n                    published: data.published,\n                    createdAt: new Date(data.created_at),\n                    updatedAt: new Date(data.updated_at),\n                };\n\n                setPage(pageConfig);\n            } catch (err) {\n                console.error(\"Failed to fetch page:\", err);\n                setError(\"Page not found or not published\");\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchPage();\n    }, [slug]);\n\n    // Preload theme fonts when page loads\n    useEffect(() => {\n        if (page?.theme) {\n            preloadThemeFonts(page.theme);\n        }\n    }, [page?.theme]);\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center min-h-screen\">\n                <div className=\"text-center\">\n                    <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-4 text-primary\" />\n                    <p className=\"text-gray-600\">Loading page...</p>\n                </div>\n            </div>\n        );\n    }\n\n    if (error || !page) {\n        return (\n            <div className=\"flex items-center justify-center min-h-screen\">\n                <div className=\"text-center\">\n                    <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n                        404\n                    </h1>\n                    <p className=\"text-gray-600 mb-4\">\n                        {error || \"Page not found\"}\n                    </p>\n                    <a href=\"/\" className=\"text-primary hover:underline\">\n                        Go to homepage\n                    </a>\n                </div>\n            </div>\n        );\n    }\n\n    // Apply theme styles using utility function\n    const themeStyles = getThemedStyles(page.theme);\n\n    return (\n        <>\n            {/* SEO Meta Tags */}\n            <Helmet>\n                <title>{page.seo.title || page.title}</title>\n                <meta\n                    name=\"description\"\n                    content={page.seo.description || page.description}\n                />\n                <meta name=\"keywords\" content={page.seo.keywords.join(\", \")} />\n\n                {/* Open Graph */}\n                <meta\n                    property=\"og:title\"\n                    content={page.seo.title || page.title}\n                />\n                <meta\n                    property=\"og:description\"\n                    content={page.seo.description || page.description}\n                />\n                <meta property=\"og:type\" content=\"website\" />\n                {page.seo.ogImage && (\n                    <meta property=\"og:image\" content={page.seo.ogImage} />\n                )}\n\n                {/* Twitter Card */}\n                <meta name=\"twitter:card\" content={page.seo.twitterCard} />\n                <meta\n                    name=\"twitter:title\"\n                    content={page.seo.title || page.title}\n                />\n                <meta\n                    name=\"twitter:description\"\n                    content={page.seo.description || page.description}\n                />\n                {page.seo.ogImage && (\n                    <meta name=\"twitter:image\" content={page.seo.ogImage} />\n                )}\n\n                {/* Structured Data */}\n                {page.seo.structuredData && (\n                    <script type=\"application/ld+json\">\n                        {JSON.stringify(page.seo.structuredData)}\n                    </script>\n                )}\n            </Helmet>\n\n            {/* Page Content */}\n            <div\n                style={themeStyles}\n                className=\"min-h-screen\"\n                data-theme={page.theme.preset || \"default\"}\n            >\n                <div\n                    className=\"max-w-4xl mx-auto py-12 px-4\"\n                    style={{\n                        backgroundColor: page.theme.colors.background,\n                        color: page.theme.colors.text,\n                        fontFamily: `'${page.theme.fonts.body}', sans-serif`,\n                    }}\n                >\n                    {/* Render visible blocks */}\n                    <div style={{\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        gap: page.theme.spacing === \"compact\" ? \"1rem\" :\n                             page.theme.spacing === \"spacious\" ? \"3rem\" : \"2rem\"\n                    }}>\n                        {page.blocks\n                            .filter((block) => block.visible)\n                            .sort((a, b) => a.order - b.order)\n                            .map((block) => (\n                                <BlockRenderer\n                                    key={block.id}\n                                    block={block}\n                                    isEditing={false}\n                                    userId={page.userId}\n                                />\n                            ))}\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"mt-16 pt-8 border-t text-center text-sm text-gray-500\">\n                        <p>\n                            Powered by{\" \"}\n                            <a\n                                href=\"https://agentbio.net\"\n                                className=\"text-primary hover:underline\"\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                            >\n                                AgentBio\n                            </a>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n"],"file":"PublicPage-CvktdNrh.js"}