import{r as e,j as s}from"./react-vendor-CGQ4_CNL.js";import{j as t,c as a,B as i,L as l,S as n,a as r,b as c,d,e as o,I as g,z as h,G as m,H as x,J as u}from"./ui-components-BfOVGuaI.js";import{u as p,b as j}from"./utils-wmY8hpgz.js";import{aM as v,J as f,a8 as b,aD as w,H as N,aB as y,X as S,aP as k,ar as C,ay as A,az as D,aE as L,T as z,E as P,U as T,aQ as I,aR as E}from"./icons-BX9Iz4zT.js";import{K as U}from"./KeyboardShortcutsHelper-CFo3aHvf.js";import"./charts-D_q0pR-d.js";import"./supabase-D5NmozDF.js";function R({listings:i,onStatusChange:l,onRefresh:n,isLoading:r=!1}){const[c,d]=e.useState(new Set),[o,g]=e.useState(new Set),[h,m]=e.useState("all"),x=e=>Math.floor((Date.now()-new Date(e.updatedAt).getTime())/864e5)>=7&&"active"===e.status,u=i.filter(e=>"all"===h||("stale"===h?x(e):e.status===h)),j={total:i.length,active:i.filter(e=>"active"===e.status).length,pending:i.filter(e=>"pending"===e.status).length,sold:i.filter(e=>"sold"===e.status).length,stale:i.filter(e=>x(e)).length},y=async(e,s)=>{g(s=>new Set(s).add(e));try{await l(e,s),p.success(`Listing updated to ${s}`)}catch(t){p.error("Failed to update listing")}finally{g(s=>{const t=new Set(s);return t.delete(e),t})}},S=async e=>{if(0===c.size)return void p.warning("No listings selected");const s=c.size;p.info(`Updating ${s} listing(s)...`);const t=Array.from(c).map(s=>y(s,e));await Promise.all(t),d(new Set),p.success(`${s} listing(s) updated to ${e}`)},k=()=>{d(new Set)};return e.useEffect(()=>{const e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&0!==c.size)switch(e.key.toLowerCase()){case"s":e.preventDefault(),S("sold");break;case"p":e.preventDefault(),S("pending");break;case"a":e.preventDefault(),S("active");break;case"escape":k()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Quick Status Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click listings to select, then use buttons or keyboard shortcuts"})]}),s.jsxs(t,{variant:"outline",size:"sm",onClick:n,disabled:r,className:"gap-2",children:[s.jsx(v,{className:a("w-4 h-4",r&&"animate-spin")}),"Refresh"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[s.jsx(M,{label:"Total",count:j.total,active:"all"===h,onClick:()=>m("all")}),s.jsx(M,{label:"Active",count:j.active,active:"active"===h,onClick:()=>m("active"),color:"green"}),s.jsx(M,{label:"Pending",count:j.pending,active:"pending"===h,onClick:()=>m("pending"),color:"yellow"}),s.jsx(M,{label:"Sold",count:j.sold,color:"blue"}),s.jsx(M,{label:"Stale",count:j.stale,active:"stale"===h,onClick:()=>m("stale"),color:"orange",alert:j.stale>0})]}),c.size>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"font-semibold",children:[c.size," selected"]}),s.jsx(t,{variant:"ghost",size:"sm",onClick:()=>{d(new Set(u.map(e=>e.id)))},children:"Select All"}),s.jsx(t,{variant:"ghost",size:"sm",onClick:k,children:"Clear"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(t,{size:"sm",variant:"outline",onClick:()=>S("active"),className:"gap-1",children:[s.jsx(f,{className:"w-4 h-4"}),"Active ",s.jsx("kbd",{className:"ml-1 text-xs",children:"A"})]}),s.jsxs(t,{size:"sm",variant:"outline",onClick:()=>S("pending"),className:"gap-1",children:[s.jsx(b,{className:"w-4 h-4"}),"Pending ",s.jsx("kbd",{className:"ml-1 text-xs",children:"P"})]}),s.jsxs(t,{size:"sm",variant:"outline",onClick:()=>S("sold"),className:"gap-1",children:[s.jsx(w,{className:"w-4 h-4"}),"Sold ",s.jsx("kbd",{className:"ml-1 text-xs",children:"S"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(e=>s.jsx(O,{listing:e,isSelected:c.has(e.id),isUpdating:o.has(e.id),onSelect:()=>{return s=e.id,void d(e=>{const t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t});var s},onStatusChange:y,isStale:x(e)},e.id))}),0===u.length&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(N,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"No listings found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})}function M({label:e,count:t,active:i,onClick:l,color:n,alert:r}){return s.jsxs("button",{onClick:l,disabled:!l,className:a("relative p-4 rounded-lg border-2 transition-all",i?"border-primary bg-primary/5":"border-gray-200 bg-white",l&&"hover:border-primary/50 cursor-pointer",!l&&"cursor-default"),children:[r&&s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),s.jsx("div",{className:"text-3xl font-bold",children:t}),s.jsx("div",{className:a("text-sm font-medium",n&&{green:"text-green-600 bg-green-50 border-green-200",yellow:"text-yellow-600 bg-yellow-50 border-yellow-200",blue:"text-blue-600 bg-blue-50 border-blue-200",orange:"text-orange-600 bg-orange-50 border-orange-200"}[n]),children:e})]})}function O({listing:e,isSelected:l,isUpdating:n,onSelect:r,onStatusChange:c,isStale:d}){return s.jsxs("div",{onClick:r,className:a("relative group p-4 rounded-lg border-2 transition-all cursor-pointer",l?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-gray-300",n&&"opacity-50 pointer-events-none",d&&"border-l-4 border-l-orange-500"),children:[s.jsx("div",{className:a("absolute top-2 left-2 w-5 h-5 rounded border-2 flex items-center justify-center",l?"bg-primary border-primary":"border-gray-300 group-hover:border-primary"),children:l&&s.jsx(f,{className:"w-4 h-4 text-white"})}),d&&s.jsxs(i,{variant:"outline",className:"absolute top-2 right-2 bg-orange-100 text-orange-800 border-orange-300",children:[s.jsx(b,{className:"w-3 h-3 mr-1"}),"Stale"]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"font-semibold text-sm truncate mb-1",children:e.title}),s.jsxs("p",{className:"text-lg font-bold text-primary mb-2",children:["$",e.price.toLocaleString()]}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(i,{className:{active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",sold:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"}[e.status],children:e.status.toUpperCase()}),s.jsx("span",{className:"text-xs text-gray-500",children:j(new Date(e.updatedAt),{addSuffix:!0})})]}),(void 0!==e.views||void 0!==e.leads)&&s.jsxs("div",{className:"flex gap-3 text-xs text-gray-600 mb-3",children:[void 0!==e.views&&s.jsxs("span",{children:["ðŸ‘ï¸ ",e.views," views"]}),void 0!==e.leads&&s.jsxs("span",{children:["ðŸ‘¥ ",e.leads," leads"]})]}),s.jsxs("div",{className:"flex gap-2",children:["sold"!==e.status&&s.jsx(t,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),c(e.id,"sold")},className:"flex-1 text-xs",children:"Mark Sold"}),"pending"!==e.status&&s.jsx(t,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),c(e.id,"pending")},className:"flex-1 text-xs",children:"Pending"})]})]}),n&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 rounded-lg",children:s.jsx(v,{className:"w-6 h-6 animate-spin text-primary"})})]})}function $({staleListings:i,onDismiss:l,onRefresh:n,onDismissAll:r,className:c}){const[d,o]=e.useState(!0),[g,h]=e.useState(new Set);e.useEffect(()=>{const e=localStorage.getItem("dismissed-stale-alerts");if(e)try{h(new Set(JSON.parse(e)))}catch(s){}},[]),e.useEffect(()=>{localStorage.setItem("dismissed-stale-alerts",JSON.stringify(Array.from(g)))},[g]);const m=i.filter(e=>!g.has(e.id));if(0===m.length)return null;const x=m.filter(e=>e.daysSinceUpdate>=14).length,u=m.length-x;return s.jsxs("div",{className:a("bg-orange-50 border-2 border-orange-200 rounded-lg",c),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",onClick:()=>o(!d),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"w-6 h-6 text-orange-600"}),s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-600 text-white text-xs rounded-full flex items-center justify-center font-bold",children:m.length})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-orange-900",children:"Stale Listings Need Attention"}),s.jsxs("p",{className:"text-sm text-orange-700",children:[x>0&&s.jsxs("span",{className:"font-medium",children:[x," critical (14+ days)"]}),x>0&&u>0&&" Â· ",u>0&&s.jsxs("span",{children:[u," warning (7+ days)"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(t,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),h(new Set(i.map(e=>e.id))),r?.()},className:"text-orange-700 hover:text-orange-900",children:"Dismiss All"}),s.jsx(t,{size:"sm",variant:"ghost",className:"text-orange-700",onClick:e=>e.stopPropagation(),children:d?"â–¼":"â–¶"})]})]}),d&&s.jsx("div",{className:"border-t border-orange-200 divide-y divide-orange-200",children:m.map(e=>s.jsx(B,{listing:e,onDismiss:()=>{return s=e.id,h(e=>new Set(e).add(s)),void l?.(s);var s},onRefresh:()=>n?.(e.id)},e.id))}),d&&s.jsxs("div",{className:"p-4 bg-orange-100/50 border-t border-orange-200",children:[s.jsx("p",{className:"text-xs text-orange-800 mb-2 font-medium",children:"ðŸ’¡ Quick Tips:"}),s.jsxs("ul",{className:"text-xs text-orange-700 space-y-1 ml-4 list-disc",children:[s.jsx("li",{children:"Update listing descriptions with recent improvements or price changes"}),s.jsx("li",{children:"Add new photos to refresh your listing's appeal"}),s.jsx("li",{children:"Verify pricing is still competitive in current market"}),s.jsx("li",{children:"Check if property status has changed"})]})]})]})}function B({listing:e,onDismiss:l,onRefresh:n}){const r=e.daysSinceUpdate>=14;return s.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-orange-100/30 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),s.jsx(i,{variant:"outline",className:a("text-xs",r?"bg-red-100 text-red-800 border-red-300":"bg-yellow-100 text-yellow-800 border-yellow-300"),children:r?s.jsxs(s.Fragment,{children:[s.jsx(y,{className:"w-3 h-3 mr-1"}),"CRITICAL"]}):s.jsxs(s.Fragment,{children:[s.jsx(b,{className:"w-3 h-3 mr-1"}),"WARNING"]})})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{children:["Status: ",e.status]}),s.jsxs("span",{children:["Last updated:"," ",j(new Date(e.updatedAt),{addSuffix:!0})]}),s.jsxs("span",{className:"font-medium text-orange-700",children:[e.daysSinceUpdate," days old"]})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsxs(t,{size:"sm",variant:"outline",onClick:n,className:"gap-1 bg-white",children:[s.jsx(v,{className:"w-3 h-3"}),"Update"]}),s.jsx(t,{size:"sm",variant:"ghost",onClick:l,children:s.jsx(S,{className:"w-4 h-4"})})]})]})}function F({count:e}){return 0===e?null:s.jsxs(i,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300 animate-pulse",children:[s.jsx(y,{className:"w-3 h-3 mr-1"}),e," Stale"]})}function V({listings:a,selectedIds:i,onToggleSelect:h,onSelectAll:m,onClearSelection:x,onBulkUpdate:u,onBulkDelete:j}){const[v,f]=e.useState(!1),[b,w]=e.useState({}),[N,y]=e.useState("increase"),[z,P]=e.useState(""),[T,I]=e.useState("percent"),E=a.filter(e=>i.includes(e.id)),U=a.length>0&&i.length===a.length,R=e=>{if(!z)return e.price;const s=parseFloat(z);if(isNaN(s))return e.price;switch(N){case"increase":return"percent"===T?e.price*(1+s/100):e.price+s;case"decrease":return"percent"===T?e.price*(1-s/100):e.price-s;case"set":return s;default:return e.price}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(t,{variant:"outline",size:"sm",onClick:U?x:m,className:"gap-2",children:U?s.jsxs(s.Fragment,{children:[s.jsx(k,{className:"w-4 h-4"}),"Deselect All"]}):s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"w-4 h-4"}),"Select All"]})}),s.jsxs("span",{className:"text-sm font-medium",children:[i.length," of ",a.length," selected"]})]}),s.jsx("div",{className:"flex gap-2",children:i.length>0&&!v&&s.jsxs(s.Fragment,{children:[s.jsxs(t,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"gap-2",children:[s.jsx(A,{className:"w-4 h-4"}),"Bulk Edit"]}),s.jsxs(t,{variant:"destructive",size:"sm",onClick:async()=>{if(0!==i.length){if(confirm(`Delete ${i.length} listing(s)? This cannot be undone.`))try{await j(i),p.success(`${i.length} listing(s) deleted`),x()}catch(e){p.error("Failed to delete listings")}}else p.error("No listings selected")},className:"gap-2",children:[s.jsx(D,{className:"w-4 h-4"}),"Delete Selected"]})]})})]}),v&&i.length>0&&s.jsxs("div",{className:"p-6 bg-white rounded-lg border-2 border-primary shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Bulk Edit ",i.length," Listings"]}),s.jsx(t,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:s.jsx(S,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Update Status"}),s.jsxs(n,{value:b.status||"",onValueChange:e=>w({...b,status:e}),children:[s.jsx(r,{children:s.jsx(c,{placeholder:"Keep current status"})}),s.jsxs(d,{children:[s.jsx(o,{value:"active",children:"Active"}),s.jsx(o,{value:"pending",children:"Pending"}),s.jsx(o,{value:"sold",children:"Sold"}),s.jsx(o,{value:"draft",children:"Draft"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Update Category"}),s.jsxs(n,{value:b.category||"",onValueChange:e=>w({...b,category:e}),children:[s.jsx(r,{children:s.jsx(c,{placeholder:"Keep current category"})}),s.jsxs(d,{children:[s.jsx(o,{value:"residential",children:"Residential"}),s.jsx(o,{value:"commercial",children:"Commercial"}),s.jsx(o,{value:"land",children:"Land"}),s.jsx(o,{value:"rental",children:"Rental"})]})]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(l,{children:"Price Adjustment"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs(n,{value:N,onValueChange:e=>y(e),children:[s.jsx(r,{children:s.jsx(c,{})}),s.jsxs(d,{children:[s.jsx(o,{value:"increase",children:"Increase"}),s.jsx(o,{value:"decrease",children:"Decrease"}),s.jsx(o,{value:"set",children:"Set to"})]})]}),s.jsx(g,{type:"number",placeholder:"Value",value:z,onChange:e=>P(e.target.value)}),s.jsxs(n,{value:T,onValueChange:e=>I(e),children:[s.jsx(r,{children:s.jsx(c,{})}),s.jsxs(d,{children:[s.jsx(o,{value:"percent",children:"Percent"}),s.jsx(o,{value:"amount",children:"Amount"})]})]})]})]})]}),E.length>0&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Preview Changes"}),s.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[E.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-white rounded",children:[s.jsx("span",{className:"truncate flex-1",children:e.title}),z&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-gray-500 line-through",children:["$",e.price.toLocaleString()]}),s.jsxs("span",{className:"font-medium text-primary",children:["$",R(e).toLocaleString()]})]})]},e.id)),E.length>5&&s.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["... and ",E.length-5," ","more"]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx(t,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsxs(t,{onClick:async()=>{if(0===i.length)return void p.error("No listings selected");const e={...b};if(z&&(e.priceAdjustment={type:N,value:parseFloat(z),unit:T}),0!==Object.keys(e).length)try{await u(e),p.success(`${i.length} listing(s) updated`),f(!1),w({}),P("")}catch(s){p.error("Failed to update listings")}else p.warning("No changes to apply")},className:"gap-2",children:[s.jsx(L,{className:"w-4 h-4"}),"Apply Changes"]})]})]})]})}function H({stats:e,period:t="Last 30 days",className:i}){return s.jsxs("div",{className:a("space-y-4",i),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Quick Analytics"}),s.jsx("span",{className:"text-sm text-gray-600",children:t})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map((e,t)=>s.jsx(Q,{stat:e},t))})]})}function Q({stat:e}){const t=e.icon||N,i="up"===e.trend,l="down"===e.trend;return s.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("div",{className:a("p-2 rounded-lg",i&&"bg-green-100",l&&"bg-red-100",!i&&!l&&"bg-gray-100"),children:s.jsx(t,{className:a("w-4 h-4",i&&"text-green-600",l&&"text-red-600",!i&&!l&&"text-gray-600")})}),void 0!==e.change&&s.jsxs("div",{className:a("flex items-center gap-1 text-xs font-medium",i&&"text-green-600",l&&"text-red-600",!i&&!l&&"text-gray-600"),children:[i&&s.jsx(I,{className:"w-3 h-3"}),l&&s.jsx(E,{className:"w-3 h-3"}),Math.abs(e.change),"%"]})]}),s.jsx("div",{className:"text-2xl font-bold mb-1",children:e.value}),s.jsx("div",{className:"text-sm text-gray-600",children:e.label}),e.changeLabel&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.changeLabel})]})}const G=[{id:"1",title:"Modern 3BR House in Downtown",price:45e4,status:"active",updatedAt:new Date(Date.now()-7776e5).toISOString(),views:156,leads:12},{id:"2",title:"Luxury Condo with Ocean View",price:85e4,status:"pending",updatedAt:new Date(Date.now()-1728e5).toISOString(),views:243,leads:18},{id:"3",title:"Cozy 2BR Apartment Near Park",price:325e3,status:"active",updatedAt:new Date(Date.now()-1296e6).toISOString(),views:89,leads:5},{id:"4",title:"Spacious Family Home with Pool",price:675e3,status:"active",updatedAt:new Date(Date.now()-10368e5).toISOString(),views:198,leads:22},{id:"5",title:"Renovated Townhouse in Suburbs",price:425e3,status:"sold",updatedAt:new Date(Date.now()-864e5).toISOString(),views:312,leads:28},{id:"6",title:"Charming Cottage with Garden",price:385e3,status:"active",updatedAt:new Date(Date.now()-1728e6).toISOString(),views:67,leads:3}];function J(){const[t,a]=e.useState(G),[i,l]=e.useState([]),[n,r]=e.useState(!1),c=t.filter(e=>Math.floor((Date.now()-new Date(e.updatedAt).getTime())/864e5)>=7&&"active"===e.status).map(e=>({id:e.id,title:e.title,status:e.status,updatedAt:e.updatedAt,daysSinceUpdate:Math.floor((Date.now()-new Date(e.updatedAt).getTime())/864e5)})),d=[{label:"Total Listings",value:(o={totalListings:t.length,activeListings:t.filter(e=>"active"===e.status).length,totalViews:t.reduce((e,s)=>e+(s.views||0),0),totalLeads:t.reduce((e,s)=>e+(s.leads||0),0),avgPrice:Math.floor(t.reduce((e,s)=>e+s.price,0)/t.length),viewsChange:12.5,leadsChange:8.3}).totalListings,icon:N,trend:"neutral"},{label:"Active Listings",value:o.activeListings,icon:z,trend:"up"},{label:"Total Views",value:o.totalViews.toLocaleString(),change:o.viewsChange,changeLabel:o.viewsChange?"vs last period":void 0,icon:P,trend:o.viewsChange&&o.viewsChange>0?"up":o.viewsChange&&o.viewsChange<0?"down":"neutral"},{label:"Total Leads",value:o.totalLeads,change:o.leadsChange,changeLabel:o.leadsChange?"vs last period":void 0,icon:T,trend:o.leadsChange&&o.leadsChange>0?"up":o.leadsChange&&o.leadsChange<0?"down":"neutral"}];var o;const g=async(e,s)=>{await new Promise(e=>setTimeout(e,500)),a(t=>t.map(t=>t.id===e?{...t,status:s,updatedAt:(new Date).toISOString()}:t))},j=e=>{l(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},v=()=>{l([])},f=[{key:"?",description:"Show keyboard shortcuts",action:()=>{},category:"General"},{key:"s",description:"Mark selected as Sold",action:()=>{i.length>0&&i.forEach(e=>g(e,"sold"))},category:"Status"},{key:"p",description:"Mark selected as Pending",action:()=>{i.length>0&&i.forEach(e=>g(e,"pending"))},category:"Status"},{key:"a",description:"Mark selected as Active",action:()=>{i.length>0&&i.forEach(e=>g(e,"active"))},category:"Status"},{key:"Escape",description:"Clear selection",action:v,category:"Selection"}];return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Quick Actions Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your listings efficiently with keyboard shortcuts and bulk actions"})]}),c.length>0&&s.jsx(F,{count:c.length})]}),s.jsx(H,{stats:d,period:"Last 30 days"}),c.length>0&&s.jsx($,{staleListings:c,onRefresh:async e=>{const s=t.find(s=>s.id===e);s&&p.info(`Opening editor for "${s.title}"`)}}),s.jsxs(h,{defaultValue:"quick-status",className:"w-full",children:[s.jsxs(m,{className:"grid w-full grid-cols-2 max-w-md",children:[s.jsx(x,{value:"quick-status",children:"Quick Status"}),s.jsx(x,{value:"bulk-edit",children:"Bulk Edit"})]}),s.jsx(u,{value:"quick-status",className:"mt-6",children:s.jsx(R,{listings:t,onStatusChange:g,onRefresh:async()=>{r(!0),await new Promise(e=>setTimeout(e,1e3)),r(!1),p.success("Listings refreshed")},isLoading:n})}),s.jsxs(u,{value:"bulk-edit",className:"mt-6",children:[s.jsx(V,{listings:t,selectedIds:i,onToggleSelect:j,onSelectAll:()=>{l(t.map(e=>e.id))},onClearSelection:v,onBulkUpdate:async e=>{await new Promise(e=>setTimeout(e,1e3)),a(s=>s.map(s=>{if(!i.includes(s.id))return s;let t={...s,updatedAt:(new Date).toISOString()};if(e.status&&(t.status=e.status),e.priceAdjustment){const{type:a,value:i,unit:l}=e.priceAdjustment;"increase"===a?t.price="percent"===l?s.price*(1+i/100):s.price+i:"decrease"===a?t.price="percent"===l?s.price*(1-i/100):s.price-i:"set"===a&&(t.price=i)}return t})),v()},onBulkDelete:async e=>{await new Promise(e=>setTimeout(e,800)),a(s=>s.filter(s=>!e.includes(s.id)))}}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:t.map(e=>s.jsxs("div",{onClick:()=>j(e.id),className:"p-4 rounded-lg border-2 cursor-pointer transition-all "+(i.includes(e.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"),children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-sm",children:e.title}),s.jsx("input",{type:"checkbox",checked:i.includes(e.id),onChange:()=>j(e.id),className:"mt-1"})]}),s.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",e.price.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600 capitalize",children:e.status})]},e.id))})]})]}),s.jsx(U,{shortcuts:f})]})}export{J as default};
