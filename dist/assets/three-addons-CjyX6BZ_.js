import{r as T,a as mf,j as Ot,c as vf}from"./react-vendor-CotwlNTQ.js";import{R as Fu,O as Er,P as Gr,S as fa,a as jl,V as gf,b as yf,B as wf,N as Sf,A as Ef,W as Du,C as _f,c as je,d as Ht,e as xf,L as Wl,f as Vr,U as No,T as Mf,D as Uu,g as Bu,h as Pf,M as da,I as Cf,i as pa,j as Lr,k as Fr,l as ru,Q as iu,m as Rf,n as If,o as Hu,H as ln,F as Bn,p as Hr,q as Rn,r as Tf,s as kf,t as Nf,u as zf,v as nr,w as ju,x as Wu,y as zo,z as Of,E as oa,G as jr,J as Af,K as Lf,X as Ff,Y as Df,Z as Uf,_ as To,$ as Bf,a0 as Hf,a1 as ou,a2 as jf,a3 as Wf,a4 as Gf,a5 as Zf,a6 as Qf,a7 as Vf,a8 as Zr,a9 as Yf}from"./three-D6omocmH.js";import{g as Xf,_ as In}from"./charts-hR54p0E0.js";const Kf="modulepreload",bf=function(l){return"/"+l},lu={},eh=function(i,s,a){let f=Promise.resolve();if(s&&s.length>0){let w=function(E){return Promise.all(E.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");f=w(s.map(E=>{if(E=bf(E),E in lu)return;lu[E]=!0;const h=E.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${m}`))return;const S=document.createElement("link");if(S.rel=h?"stylesheet":Kf,h||(S.as="script"),S.crossOrigin="",S.href=E,g&&S.setAttribute("nonce",g),document.head.appendChild(S),h)return new Promise((M,R)=>{S.addEventListener("load",M),S.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${E}`)))})}))}function v(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return f.then(p=>{for(const g of p||[])g.status==="rejected"&&v(g.reason);return i().catch(v)})};var Gl={exports:{}},$n={};var au;function qf(){return au||(au=1,$n.ConcurrentRoot=1,$n.ContinuousEventPriority=4,$n.DefaultEventPriority=16,$n.DiscreteEventPriority=1,$n.IdleEventPriority=536870912,$n.LegacyRoot=0),$n}var su;function Jf(){return su||(su=1,Gl.exports=qf()),Gl.exports}var Wr=Jf();function $f(l){let i;const s=new Set,a=(E,h)=>{const m=typeof E=="function"?E(i):E;if(m!==i){const S=i;i=h?m:Object.assign({},i,m),s.forEach(M=>M(i,S))}},f=()=>i,v=(E,h=f,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let S=h(i);function M(){const R=h(i);if(!m(S,R)){const W=S;E(S=R,W)}}return s.add(M),()=>s.delete(M)},w={setState:a,getState:f,subscribe:(E,h,m)=>h||m?v(E,h,m):(s.add(E),()=>s.delete(E)),destroy:()=>s.clear()};return i=l(a,f,w),w}const ed=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uu=ed?T.useEffect:T.useLayoutEffect;function Gu(l){const i=typeof l=="function"?$f(l):l,s=(a=i.getState,f=Object.is)=>{const[,v]=T.useReducer(F=>F+1,0),p=i.getState(),g=T.useRef(p),w=T.useRef(a),E=T.useRef(f),h=T.useRef(!1),m=T.useRef();m.current===void 0&&(m.current=a(p));let S,M=!1;(g.current!==p||w.current!==a||E.current!==f||h.current)&&(S=a(p),M=!f(m.current,S)),uu(()=>{M&&(m.current=S),g.current=p,w.current=a,E.current=f,h.current=!1});const R=T.useRef(p);uu(()=>{const F=()=>{try{const k=i.getState(),H=w.current(k);E.current(m.current,H)||(g.current=k,m.current=H,v())}catch{h.current=!0,v()}},P=i.subscribe(F);return i.getState()!==R.current&&F(),P},[]);const W=M?S:m.current;return T.useDebugValue(W),W};return Object.assign(s,i),s[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const a=[s,i];return{next(){const f=a.length<=0;return{value:a.shift(),done:f}}}},s}const td=l=>typeof l=="object"&&typeof l.then=="function",Sr=[];function Zu(l,i,s=(a,f)=>a===f){if(l===i)return!0;if(!l||!i)return!1;const a=l.length;if(i.length!==a)return!1;for(let f=0;f<a;f++)if(!s(l[f],i[f]))return!1;return!0}function Qu(l,i=null,s=!1,a={}){i===null&&(i=[l]);for(const v of Sr)if(Zu(i,v.keys,v.equal)){if(s)return;if(Object.prototype.hasOwnProperty.call(v,"error"))throw v.error;if(Object.prototype.hasOwnProperty.call(v,"response"))return a.lifespan&&a.lifespan>0&&(v.timeout&&clearTimeout(v.timeout),v.timeout=setTimeout(v.remove,a.lifespan)),v.response;if(!s)throw v.promise}const f={keys:i,equal:a.equal,remove:()=>{const v=Sr.indexOf(f);v!==-1&&Sr.splice(v,1)},promise:(td(l)?l:l(...i)).then(v=>{f.response=v,a.lifespan&&a.lifespan>0&&(f.timeout=setTimeout(f.remove,a.lifespan))}).catch(v=>f.error=v)};if(Sr.push(f),!s)throw f.promise}const nd=(l,i,s)=>Qu(l,i,!1,s),rd=(l,i,s)=>void Qu(l,i,!0,s),id=l=>{if(l===void 0||l.length===0)Sr.splice(0,Sr.length);else{const i=Sr.find(s=>Zu(l,s.keys,s.equal));i&&i.remove()}};var Zl={exports:{}},Ql={exports:{}},Vl={};var cu;function od(){return cu||(cu=1,(function(l){function i(X,oe){var V=X.length;X.push(oe);e:for(;0<V;){var pe=V-1>>>1,ue=X[pe];if(0<f(ue,oe))X[pe]=oe,X[V]=ue,V=pe;else break e}}function s(X){return X.length===0?null:X[0]}function a(X){if(X.length===0)return null;var oe=X[0],V=X.pop();if(V!==oe){X[0]=V;e:for(var pe=0,ue=X.length,me=ue>>>1;pe<me;){var We=2*(pe+1)-1,tt=X[We],Pe=We+1,st=X[Pe];if(0>f(tt,V))Pe<ue&&0>f(st,tt)?(X[pe]=st,X[Pe]=V,pe=Pe):(X[pe]=tt,X[We]=V,pe=We);else if(Pe<ue&&0>f(st,V))X[pe]=st,X[Pe]=V,pe=Pe;else break e}}return oe}function f(X,oe){var V=X.sortIndex-oe.sortIndex;return V!==0?V:X.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;l.unstable_now=function(){return v.now()}}else{var p=Date,g=p.now();l.unstable_now=function(){return p.now()-g}}var w=[],E=[],h=1,m=null,S=3,M=!1,R=!1,W=!1,F=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(X){for(var oe=s(E);oe!==null;){if(oe.callback===null)a(E);else if(oe.startTime<=X)a(E),oe.sortIndex=oe.expirationTime,i(w,oe);else break;oe=s(E)}}function $(X){if(W=!1,H(X),!R)if(s(w)!==null)R=!0,ge(Z);else{var oe=s(E);oe!==null&&Le($,oe.startTime-X)}}function Z(X,oe){R=!1,W&&(W=!1,P(B),B=-1),M=!0;var V=S;try{for(H(oe),m=s(w);m!==null&&(!(m.expirationTime>oe)||X&&!G());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,S=m.priorityLevel;var ue=pe(m.expirationTime<=oe);oe=l.unstable_now(),typeof ue=="function"?m.callback=ue:m===s(w)&&a(w),H(oe)}else a(w);m=s(w)}if(m!==null)var me=!0;else{var We=s(E);We!==null&&Le($,We.startTime-oe),me=!1}return me}finally{m=null,S=V,M=!1}}var U=!1,le=null,B=-1,j=5,Q=-1;function G(){return!(l.unstable_now()-Q<j)}function se(){if(le!==null){var X=l.unstable_now();Q=X;var oe=!0;try{oe=le(!0,X)}finally{oe?he():(U=!1,le=null)}}else U=!1}var he;if(typeof k=="function")he=function(){k(se)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ee=de.port2;de.port1.onmessage=se,he=function(){Ee.postMessage(null)}}else he=function(){F(se,0)};function ge(X){le=X,U||(U=!0,he())}function Le(X,oe){B=F(function(){X(l.unstable_now())},oe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(X){X.callback=null},l.unstable_continueExecution=function(){R||M||(R=!0,ge(Z))},l.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<X?Math.floor(1e3/X):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_getFirstCallbackNode=function(){return s(w)},l.unstable_next=function(X){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var V=S;S=oe;try{return X()}finally{S=V}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var V=S;S=X;try{return oe()}finally{S=V}},l.unstable_scheduleCallback=function(X,oe,V){var pe=l.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?pe+V:pe):V=pe,X){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=V+ue,X={id:h++,callback:oe,priorityLevel:X,startTime:V,expirationTime:ue,sortIndex:-1},V>pe?(X.sortIndex=V,i(E,X),s(w)===null&&X===s(E)&&(W?(P(B),B=-1):W=!0,Le($,V-pe))):(X.sortIndex=ue,i(w,X),R||M||(R=!0,ge(Z))),X},l.unstable_shouldYield=G,l.unstable_wrapCallback=function(X){var oe=S;return function(){var V=S;S=oe;try{return X.apply(this,arguments)}finally{S=V}}}})(Vl)),Vl}var fu;function Vu(){return fu||(fu=1,Ql.exports=od()),Ql.exports}var Yl,du;function ld(){return du||(du=1,Yl=function(i){var s={},a=mf(),f=Vu(),v=Object.assign;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),R=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),Z=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}function le(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case h:return"Fragment";case E:return"Portal";case S:return"Profiler";case m:return"StrictMode";case F:return"Suspense";case P:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case W:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:le(e.type)||"Memo";case H:t=e._payload,e=e._init;try{return le(e(t))}catch{}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(t);case 8:return t===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function j(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Q(e){if(j(e)!==e)throw Error(p(188))}function G(e){var t=e.alternate;if(!t){if(t=j(e),t===null)throw Error(p(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return Q(o),e;if(u===r)return Q(o),t;u=u.sibling}throw Error(p(188))}if(n.return!==r.return)n=o,r=u;else{for(var y=!1,x=o.child;x;){if(x===n){y=!0,n=o,r=u;break}if(x===r){y=!0,r=o,n=u;break}x=x.sibling}if(!y){for(x=u.child;x;){if(x===n){y=!0,n=u,r=o;break}if(x===r){y=!0,r=u,n=o;break}x=x.sibling}if(!y)throw Error(p(189))}}if(n.alternate!==r)throw Error(p(190))}if(n.tag!==3)throw Error(p(188));return n.stateNode.current===n?e:t}function se(e){return e=G(e),e!==null?he(e):null}function he(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=he(e);if(t!==null)return t;e=e.sibling}return null}function de(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=de(e);if(t!==null)return t}e=e.sibling}return null}var Ee=Array.isArray,ge=i.getPublicInstance,Le=i.getRootHostContext,X=i.getChildHostContext,oe=i.prepareForCommit,V=i.resetAfterCommit,pe=i.createInstance,ue=i.appendInitialChild,me=i.finalizeInitialChildren,We=i.prepareUpdate,tt=i.shouldSetTextContent,Pe=i.createTextInstance,st=i.scheduleTimeout,ct=i.cancelTimeout,dn=i.noTimeout,lt=i.isPrimaryRenderer,Te=i.supportsMutation,St=i.supportsPersistence,Xe=i.supportsHydration,Wt=i.getInstanceFromNode,an=i.preparePortalMount,ir=i.getCurrentEventPriority,At=i.detachDeletedInstance,Tn=i.supportsMicrotasks,pn=i.scheduleMicrotask,Xt=i.supportsTestSelectors,or=i.findFiberRoot,Hn=i.getBoundingRect,hn=i.getTextContent,Tt=i.isHiddenSubtree,kn=i.matchAccessibilityRole,lr=i.setFocusIfFocusable,Lt=i.setupIntersectionObserver,jn=i.appendChild,Wn=i.appendChildToContainer,br=i.commitTextUpdate,_r=i.commitMount,qr=i.commitUpdate,Nn=i.insertBefore,ht=i.insertInContainerBefore,Gn=i.removeChild,I=i.removeChildFromContainer,K=i.resetTextContent,ce=i.hideInstance,De=i.hideTextInstance,J=i.unhideInstance,Et=i.unhideTextInstance,Kt=i.clearContainer,Ti=i.cloneInstance,ar=i.createContainerChildSet,Ft=i.appendChildToContainerChildSet,Gt=i.finalizeContainerChildren,mn=i.replaceContainerChildren,vn=i.cloneHiddenInstance,gn=i.cloneHiddenTextInstance,Zn=i.canHydrateInstance,Ao=i.canHydrateTextInstance,Lo=i.canHydrateSuspenseInstance,sr=i.isSuspenseInstancePending,Jr=i.isSuspenseInstanceFallback,ur=i.registerSuspenseInstanceRetry,sn=i.getNextHydratableSibling,Fe=i.getFirstHydratableChild,ki=i.getFirstHydratableChildWithinContainer,Fo=i.getFirstHydratableChildWithinSuspenseInstance,c=i.hydrateInstance,d=i.hydrateTextInstance,_=i.hydrateSuspenseInstance,z=i.getNextHydratableInstanceAfterSuspenseInstance,A=i.commitHydratedContainer,L=i.commitHydratedSuspenseInstance,b=i.clearSuspenseBoundary,Y=i.clearSuspenseBoundaryFromContainer,ne=i.shouldDeleteUnhydratedTailInstances,te=i.didNotMatchHydratedContainerTextInstance,re=i.didNotMatchHydratedTextInstance,ee;function Ke(e){if(ee===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ee=t&&t[1]||""}return`
`+ee+e}var ve=!1;function we(e,t){if(!e||ve)return"";ve=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var r=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){r=q}e.call(t.prototype)}else{try{throw Error()}catch(q){r=q}e()}}catch(q){if(q&&r&&typeof q.stack=="string"){for(var o=q.stack.split(`
`),u=r.stack.split(`
`),y=o.length-1,x=u.length-1;1<=y&&0<=x&&o[y]!==u[x];)x--;for(;1<=y&&0<=x;y--,x--)if(o[y]!==u[x]){if(y!==1||x!==1)do if(y--,x--,0>x||o[y]!==u[x]){var D=`
`+o[y].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=y&&0<=x);break}}}finally{ve=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ke(e):""}var Ce=Object.prototype.hasOwnProperty,ke=[],He=-1;function Ue(e){return{current:e}}function Me(e){0>He||(e.current=ke[He],ke[He]=null,He--)}function Ne(e,t){He++,ke[He]=e.current,e.current=t}var Be={},qe=Ue(Be),ze=Ue(!1),$e=Be;function Mt(e,t){var n=e.type.contextTypes;if(!n)return Be;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},u;for(u in n)o[u]=t[u];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ft(e){return e=e.childContextTypes,e!=null}function _t(){Me(ze),Me(qe)}function Ye(e,t,n){if(qe.current!==Be)throw Error(p(168));Ne(qe,t),Ne(ze,n)}function mt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(p(108,B(e)||"Unknown",o));return v({},n,r)}function be(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Be,$e=qe.current,Ne(qe,e),Ne(ze,ze.current),!0}function Ge(e,t,n){var r=e.stateNode;if(!r)throw Error(p(169));n?(e=mt(e,t,$e),r.__reactInternalMemoizedMergedChildContext=e,Me(ze),Me(qe),Ne(qe,e)):Me(ze),Ne(ze,n)}var rt=Math.clz32?Math.clz32:yn,zn=Math.log,kt=Math.LN2;function yn(e){return e>>>=0,e===0?32:31-(zn(e)/kt|0)|0}var Ni=64,zi=4194304;function $r(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,u=e.pingedLanes,y=n&268435455;if(y!==0){var x=y&~o;x!==0?r=$r(x):(u&=y,u!==0&&(r=$r(u)))}else y=n&~o,y!==0?r=$r(y):u!==0&&(r=$r(u));if(r===0)return 0;if(t!==0&&t!==r&&(t&o)===0&&(o=r&-r,u=t&-t,o>=u||o===16&&(u&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rt(t),o=1<<n,r|=e[n],t&=~o;return r}function Cc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes;0<u;){var y=31-rt(u),x=1<<y,D=o[y];D===-1?((x&n)===0||(x&r)!==0)&&(o[y]=Cc(x,t)):D<=t&&(e.expiredLanes|=x),u&=~x}}function Do(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ei(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rt(t),e[t]=n}function Ic(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-rt(n),u=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~u}}function Bo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ze=0;function Ca(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ho=f.unstable_scheduleCallback,Ra=f.unstable_cancelCallback,Tc=f.unstable_shouldYield,kc=f.unstable_requestPaint,gt=f.unstable_now,jo=f.unstable_ImmediatePriority,Nc=f.unstable_UserBlockingPriority,Wo=f.unstable_NormalPriority,zc=f.unstable_IdlePriority,Ai=null,wn=null;function Oc(e){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Ai,e,void 0,(e.current.flags&128)===128)}catch{}}function Ac(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sn=typeof Object.is=="function"?Object.is:Ac,On=null,Li=!1,Go=!1;function Ia(e){On===null?On=[e]:On.push(e)}function Lc(e){Li=!0,Ia(e)}function En(){if(!Go&&On!==null){Go=!0;var e=0,t=Ze;try{var n=On;for(Ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}On=null,Li=!1}catch(o){throw On!==null&&(On=On.slice(e+1)),Ho(jo,En),o}finally{Ze=t,Go=!1}}return null}var Fc=g.ReactCurrentBatchConfig;function Fi(e,t){if(Sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ce.call(t,o)||!Sn(e[o],t[o]))return!1}return!0}function Dc(e){switch(e.tag){case 5:return Ke(e.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return e=we(e.type,!1),e;case 11:return e=we(e.type.render,!1),e;case 1:return e=we(e.type,!0),e;default:return""}}function un(e,t){if(e&&e.defaultProps){t=v({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Di=Ue(null),Ui=null,xr=null,Zo=null;function Qo(){Zo=xr=Ui=null}function Ta(e,t,n){lt?(Ne(Di,t._currentValue),t._currentValue=n):(Ne(Di,t._currentValue2),t._currentValue2=n)}function Vo(e){var t=Di.current;Me(Di),lt?e._currentValue=t:e._currentValue2=t}function Yo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Mr(e,t){Ui=e,Zo=xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Vt=!0),e.firstContext=null)}function bt(e){var t=lt?e._currentValue:e._currentValue2;if(Zo!==e)if(e={context:e,memoizedValue:t,next:null},xr===null){if(Ui===null)throw Error(p(308));xr=e,Ui.dependencies={lanes:0,firstContext:e}}else xr=xr.next=e;return t}var _n=null,Qn=!1;function Xo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ka(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,dt!==null&&(e.mode&1)!==0&&(Ae&2)===0?(e=n.interleaved,e===null?(t.next=t,_n===null?_n=[n]:_n.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function Bi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bo(e,n)}}function Na(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var y={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?o=u=y:u=u.next=y,n=n.next}while(n!==null);u===null?o=u=t:u=u.next=t}else o=u=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var o=e.updateQueue;Qn=!1;var u=o.firstBaseUpdate,y=o.lastBaseUpdate,x=o.shared.pending;if(x!==null){o.shared.pending=null;var D=x,q=D.next;D.next=null,y===null?u=q:y.next=q,y=D;var fe=e.alternate;fe!==null&&(fe=fe.updateQueue,x=fe.lastBaseUpdate,x!==y&&(x===null?fe.firstBaseUpdate=q:x.next=q,fe.lastBaseUpdate=D))}if(u!==null){var Re=o.baseState;y=0,fe=q=D=null,x=u;do{var _e=x.lane,Je=x.eventTime;if((r&_e)===_e){fe!==null&&(fe=fe.next={eventTime:Je,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var Se=e,It=x;switch(_e=t,Je=n,It.tag){case 1:if(Se=It.payload,typeof Se=="function"){Re=Se.call(Je,Re,_e);break e}Re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=It.payload,_e=typeof Se=="function"?Se.call(Je,Re,_e):Se,_e==null)break e;Re=v({},Re,_e);break e;case 2:Qn=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,_e=o.effects,_e===null?o.effects=[x]:_e.push(x))}else Je={eventTime:Je,lane:_e,tag:x.tag,payload:x.payload,callback:x.callback,next:null},fe===null?(q=fe=Je,D=Re):fe=fe.next=Je,y|=_e;if(x=x.next,x===null){if(x=o.shared.pending,x===null)break;_e=x,x=_e.next,_e.next=null,o.lastBaseUpdate=_e,o.shared.pending=null}}while(!0);if(fe===null&&(D=Re),o.baseState=D,o.firstBaseUpdate=q,o.lastBaseUpdate=fe,t=o.shared.interleaved,t!==null){o=t;do y|=o.lane,o=o.next;while(o!==t)}else u===null&&(o.shared.lanes=0);Or|=y,e.lanes=y,e.memoizedState=Re}}function za(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(p(191,o));o.call(r)}}}var Oa=new a.Component().refs;function Ko(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:v({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ji={isMounted:function(e){return(e=e._reactInternals)?j(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zt(),o=Kn(e),u=An(r,o);u.payload=t,n!=null&&(u.callback=n),Vn(e,u),t=tn(e,o,r),t!==null&&Bi(t,e,o)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zt(),o=Kn(e),u=An(r,o);u.tag=1,u.payload=t,n!=null&&(u.callback=n),Vn(e,u),t=tn(e,o,r),t!==null&&Bi(t,e,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zt(),r=Kn(e),o=An(n,r);o.tag=2,t!=null&&(o.callback=t),Vn(e,o),t=tn(e,r,n),t!==null&&Bi(t,e,r)}};function Aa(e,t,n,r,o,u,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,y):t.prototype&&t.prototype.isPureReactComponent?!Fi(n,r)||!Fi(o,u):!0}function La(e,t,n){var r=!1,o=Be,u=t.contextType;return typeof u=="object"&&u!==null?u=bt(u):(o=ft(t)?$e:qe.current,r=t.contextTypes,u=(r=r!=null)?Mt(e,o):Be),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=u),t}function Fa(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Oa,Xo(e);var u=t.contextType;typeof u=="object"&&u!==null?o.context=bt(u):(u=ft(t)?$e:qe.current,o.context=Mt(e,u)),o.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(Ko(e,t,u,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ji.enqueueReplaceState(o,o.state,null),Hi(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}var Pr=[],Cr=0,Wi=null,Gi=0,qt=[],Jt=0,cr=null,Ln=1,Fn="";function fr(e,t){Pr[Cr++]=Gi,Pr[Cr++]=Wi,Wi=e,Gi=t}function Da(e,t,n){qt[Jt++]=Ln,qt[Jt++]=Fn,qt[Jt++]=cr,cr=e;var r=Ln;e=Fn;var o=32-rt(r)-1;r&=~(1<<o),n+=1;var u=32-rt(t)+o;if(30<u){var y=o-o%5;u=(r&(1<<y)-1).toString(32),r>>=y,o-=y,Ln=1<<32-rt(t)+o|n<<o|r,Fn=u+e}else Ln=1<<u|n<<o|r,Fn=e}function qo(e){e.return!==null&&(fr(e,1),Da(e,1,0))}function Jo(e){for(;e===Wi;)Wi=Pr[--Cr],Pr[Cr]=null,Gi=Pr[--Cr],Pr[Cr]=null;for(;e===cr;)cr=qt[--Jt],qt[Jt]=null,Fn=qt[--Jt],qt[Jt]=null,Ln=qt[--Jt],qt[Jt]=null}var Zt=null,Qt=null,it=!1,ti=!1,cn=null;function Ua(e,t){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ba(e,t){switch(e.tag){case 5:return t=Zn(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Zt=e,Qt=Fe(t),!0):!1;case 6:return t=Ao(t,e.pendingProps),t!==null?(e.stateNode=t,Zt=e,Qt=null,!0):!1;case 13:if(t=Lo(t),t!==null){var n=cr!==null?{id:Ln,overflow:Fn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Zt=e,Qt=null,!0}return!1;default:return!1}}function $o(e){return(e.mode&1)!==0&&(e.flags&128)===0}function el(e){if(it){var t=Qt;if(t){var n=t;if(!Ba(e,t)){if($o(e))throw Error(p(418));t=sn(n);var r=Zt;t&&Ba(e,t)?Ua(r,n):(e.flags=e.flags&-4097|2,it=!1,Zt=e)}}else{if($o(e))throw Error(p(418));e.flags=e.flags&-4097|2,it=!1,Zt=e}}}function Ha(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function ni(e){if(!Xe||e!==Zt)return!1;if(!it)return Ha(e),it=!0,!1;if(e.tag!==3&&(e.tag!==5||ne(e.type)&&!tt(e.type,e.memoizedProps))){var t=Qt;if(t){if($o(e)){for(e=Qt;e;)e=sn(e);throw Error(p(418))}for(;t;)Ua(e,t),t=sn(t)}}if(Ha(e),e.tag===13){if(!Xe)throw Error(p(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));Qt=z(e)}else Qt=Zt?sn(e.stateNode):null;return!0}function Rr(){Xe&&(Qt=Zt=null,ti=it=!1)}function tl(e){cn===null?cn=[e]:cn.push(e)}function ri(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(p(309));var r=n.stateNode}if(!r)throw Error(p(147,e));var o=r,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(y){var x=o.refs;x===Oa&&(x=o.refs={}),y===null?delete x[u]:x[u]=y},t._stringRef=u,t)}if(typeof e!="string")throw Error(p(284));if(!n._owner)throw Error(p(290,e))}return e}function Zi(e,t){throw e=Object.prototype.toString.call(t),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ja(e){var t=e._init;return t(e._payload)}function Wa(e){function t(N,C){if(e){var O=N.deletions;O===null?(N.deletions=[C],N.flags|=16):O.push(C)}}function n(N,C){if(!e)return null;for(;C!==null;)t(N,C),C=C.sibling;return null}function r(N,C){for(N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function o(N,C){return N=qn(N,C),N.index=0,N.sibling=null,N}function u(N,C,O){return N.index=O,e?(O=N.alternate,O!==null?(O=O.index,O<C?(N.flags|=2,C):O):(N.flags|=2,C)):(N.flags|=1048576,C)}function y(N){return e&&N.alternate===null&&(N.flags|=2),N}function x(N,C,O,ae){return C===null||C.tag!==6?(C=Ul(O,N.mode,ae),C.return=N,C):(C=o(C,O),C.return=N,C)}function D(N,C,O,ae){var ye=O.type;return ye===h?fe(N,C,O.props.children,ae,O.key):C!==null&&(C.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===H&&ja(ye)===C.type)?(ae=o(C,O.props),ae.ref=ri(N,C,O),ae.return=N,ae):(ae=_o(O.type,O.key,O.props,null,N.mode,ae),ae.ref=ri(N,C,O),ae.return=N,ae)}function q(N,C,O,ae){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=Bl(O,N.mode,ae),C.return=N,C):(C=o(C,O.children||[]),C.return=N,C)}function fe(N,C,O,ae,ye){return C===null||C.tag!==7?(C=yr(O,N.mode,ae,ye),C.return=N,C):(C=o(C,O),C.return=N,C)}function Re(N,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ul(""+C,N.mode,O),C.return=N,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case w:return O=_o(C.type,C.key,C.props,null,N.mode,O),O.ref=ri(N,null,C),O.return=N,O;case E:return C=Bl(C,N.mode,O),C.return=N,C;case H:var ae=C._init;return Re(N,ae(C._payload),O)}if(Ee(C)||U(C))return C=yr(C,N.mode,O,null),C.return=N,C;Zi(N,C)}return null}function _e(N,C,O,ae){var ye=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ye!==null?null:x(N,C,""+O,ae);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return O.key===ye?D(N,C,O,ae):null;case E:return O.key===ye?q(N,C,O,ae):null;case H:return ye=O._init,_e(N,C,ye(O._payload),ae)}if(Ee(O)||U(O))return ye!==null?null:fe(N,C,O,ae,null);Zi(N,O)}return null}function Je(N,C,O,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return N=N.get(O)||null,x(C,N,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return N=N.get(ae.key===null?O:ae.key)||null,D(C,N,ae,ye);case E:return N=N.get(ae.key===null?O:ae.key)||null,q(C,N,ae,ye);case H:var Oe=ae._init;return Je(N,C,O,Oe(ae._payload),ye)}if(Ee(ae)||U(ae))return N=N.get(O)||null,fe(C,N,ae,ye,null);Zi(C,ae)}return null}function Se(N,C,O,ae){for(var ye=null,Oe=null,Ie=C,Qe=C=0,wt=null;Ie!==null&&Qe<O.length;Qe++){Ie.index>Qe?(wt=Ie,Ie=null):wt=Ie.sibling;var Ve=_e(N,Ie,O[Qe],ae);if(Ve===null){Ie===null&&(Ie=wt);break}e&&Ie&&Ve.alternate===null&&t(N,Ie),C=u(Ve,C,Qe),Oe===null?ye=Ve:Oe.sibling=Ve,Oe=Ve,Ie=wt}if(Qe===O.length)return n(N,Ie),it&&fr(N,Qe),ye;if(Ie===null){for(;Qe<O.length;Qe++)Ie=Re(N,O[Qe],ae),Ie!==null&&(C=u(Ie,C,Qe),Oe===null?ye=Ie:Oe.sibling=Ie,Oe=Ie);return it&&fr(N,Qe),ye}for(Ie=r(N,Ie);Qe<O.length;Qe++)wt=Je(Ie,N,Qe,O[Qe],ae),wt!==null&&(e&&wt.alternate!==null&&Ie.delete(wt.key===null?Qe:wt.key),C=u(wt,C,Qe),Oe===null?ye=wt:Oe.sibling=wt,Oe=wt);return e&&Ie.forEach(function(Jn){return t(N,Jn)}),it&&fr(N,Qe),ye}function It(N,C,O,ae){var ye=U(O);if(typeof ye!="function")throw Error(p(150));if(O=ye.call(O),O==null)throw Error(p(151));for(var Oe=ye=null,Ie=C,Qe=C=0,wt=null,Ve=O.next();Ie!==null&&!Ve.done;Qe++,Ve=O.next()){Ie.index>Qe?(wt=Ie,Ie=null):wt=Ie.sibling;var Jn=_e(N,Ie,Ve.value,ae);if(Jn===null){Ie===null&&(Ie=wt);break}e&&Ie&&Jn.alternate===null&&t(N,Ie),C=u(Jn,C,Qe),Oe===null?ye=Jn:Oe.sibling=Jn,Oe=Jn,Ie=wt}if(Ve.done)return n(N,Ie),it&&fr(N,Qe),ye;if(Ie===null){for(;!Ve.done;Qe++,Ve=O.next())Ve=Re(N,Ve.value,ae),Ve!==null&&(C=u(Ve,C,Qe),Oe===null?ye=Ve:Oe.sibling=Ve,Oe=Ve);return it&&fr(N,Qe),ye}for(Ie=r(N,Ie);!Ve.done;Qe++,Ve=O.next())Ve=Je(Ie,N,Qe,Ve.value,ae),Ve!==null&&(e&&Ve.alternate!==null&&Ie.delete(Ve.key===null?Qe:Ve.key),C=u(Ve,C,Qe),Oe===null?ye=Ve:Oe.sibling=Ve,Oe=Ve);return e&&Ie.forEach(function(hf){return t(N,hf)}),it&&fr(N,Qe),ye}function rn(N,C,O,ae){if(typeof O=="object"&&O!==null&&O.type===h&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case w:e:{for(var ye=O.key,Oe=C;Oe!==null;){if(Oe.key===ye){if(ye=O.type,ye===h){if(Oe.tag===7){n(N,Oe.sibling),C=o(Oe,O.props.children),C.return=N,N=C;break e}}else if(Oe.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===H&&ja(ye)===Oe.type){n(N,Oe.sibling),C=o(Oe,O.props),C.ref=ri(N,Oe,O),C.return=N,N=C;break e}n(N,Oe);break}else t(N,Oe);Oe=Oe.sibling}O.type===h?(C=yr(O.props.children,N.mode,ae,O.key),C.return=N,N=C):(ae=_o(O.type,O.key,O.props,null,N.mode,ae),ae.ref=ri(N,C,O),ae.return=N,N=ae)}return y(N);case E:e:{for(Oe=O.key;C!==null;){if(C.key===Oe)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){n(N,C.sibling),C=o(C,O.children||[]),C.return=N,N=C;break e}else{n(N,C);break}else t(N,C);C=C.sibling}C=Bl(O,N.mode,ae),C.return=N,N=C}return y(N);case H:return Oe=O._init,rn(N,C,Oe(O._payload),ae)}if(Ee(O))return Se(N,C,O,ae);if(U(O))return It(N,C,O,ae);Zi(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(n(N,C.sibling),C=o(C,O),C.return=N,N=C):(n(N,C),C=Ul(O,N.mode,ae),C.return=N,N=C),y(N)):n(N,C)}return rn}var Ir=Wa(!0),Ga=Wa(!1),ii={},$t=Ue(ii),oi=Ue(ii),Tr=Ue(ii);function xn(e){if(e===ii)throw Error(p(174));return e}function nl(e,t){Ne(Tr,t),Ne(oi,e),Ne($t,ii),e=Le(t),Me($t),Ne($t,e)}function kr(){Me($t),Me(oi),Me(Tr)}function Za(e){var t=xn(Tr.current),n=xn($t.current);t=X(n,e.type,t),n!==t&&(Ne(oi,e),Ne($t,t))}function rl(e){oi.current===e&&(Me($t),Me(oi))}var ot=Ue(0);function Qi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||sr(n)||Jr(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var il=[];function ol(){for(var e=0;e<il.length;e++){var t=il[e];lt?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}il.length=0}var Vi=g.ReactCurrentDispatcher,en=g.ReactCurrentBatchConfig,Nr=0,at=null,Pt=null,yt=null,Yi=!1,li=!1,ai=0,Uc=0;function Ct(){throw Error(p(321))}function ll(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Sn(e[n],t[n]))return!1;return!0}function al(e,t,n,r,o,u){if(Nr=u,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vi.current=e===null||e.memoizedState===null?Wc:Gc,e=n(r,o),li){u=0;do{if(li=!1,ai=0,25<=u)throw Error(p(301));u+=1,yt=Pt=null,t.updateQueue=null,Vi.current=Zc,e=n(r,o)}while(li)}if(Vi.current=Ji,t=Pt!==null&&Pt.next!==null,Nr=0,yt=Pt=at=null,Yi=!1,t)throw Error(p(300));return e}function sl(){var e=ai!==0;return ai=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?at.memoizedState=yt=e:yt=yt.next=e,yt}function Mn(){if(Pt===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=Pt.next;var t=yt===null?at.memoizedState:yt.next;if(t!==null)yt=t,Pt=e;else{if(e===null)throw Error(p(310));Pt=e,e={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},yt===null?at.memoizedState=yt=e:yt=yt.next=e}return yt}function dr(e,t){return typeof t=="function"?t(e):t}function Xi(e){var t=Mn(),n=t.queue;if(n===null)throw Error(p(311));n.lastRenderedReducer=e;var r=Pt,o=r.baseQueue,u=n.pending;if(u!==null){if(o!==null){var y=o.next;o.next=u.next,u.next=y}r.baseQueue=o=u,n.pending=null}if(o!==null){u=o.next,r=r.baseState;var x=y=null,D=null,q=u;do{var fe=q.lane;if((Nr&fe)===fe)D!==null&&(D=D.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),r=q.hasEagerState?q.eagerState:e(r,q.action);else{var Re={lane:fe,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};D===null?(x=D=Re,y=r):D=D.next=Re,at.lanes|=fe,Or|=fe}q=q.next}while(q!==null&&q!==u);D===null?y=r:D.next=x,Sn(r,t.memoizedState)||(Vt=!0),t.memoizedState=r,t.baseState=y,t.baseQueue=D,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do u=o.lane,at.lanes|=u,Or|=u,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ki(e){var t=Mn(),n=t.queue;if(n===null)throw Error(p(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,u=t.memoizedState;if(o!==null){n.pending=null;var y=o=o.next;do u=e(u,y.action),y=y.next;while(y!==o);Sn(u,t.memoizedState)||(Vt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function Qa(){}function Va(e,t){var n=at,r=Mn(),o=t(),u=!Sn(r.memoizedState,o);if(u&&(r.memoizedState=o,Vt=!0),r=r.queue,ui(Ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||u||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,si(9,Xa.bind(null,n,r,o,t),void 0,null),dt===null)throw Error(p(349));(Nr&30)!==0||Ya(n,t,o)}return o}function Ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xa(e,t,n,r){t.value=n,t.getSnapshot=r,ba(t)&&tn(e,1,-1)}function Ka(e,t,n){return n(function(){ba(t)&&tn(e,1,-1)})}function ba(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sn(e,n)}catch{return!0}}function ul(e){var t=Dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:e},t.queue=e,e=e.dispatch=jc.bind(null,at,e),[t.memoizedState,e]}function si(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function qa(){return Mn().memoizedState}function bi(e,t,n,r){var o=Dn();at.flags|=e,o.memoizedState=si(1|t,n,void 0,r===void 0?null:r)}function qi(e,t,n,r){var o=Mn();r=r===void 0?null:r;var u=void 0;if(Pt!==null){var y=Pt.memoizedState;if(u=y.destroy,r!==null&&ll(r,y.deps)){o.memoizedState=si(t,n,u,r);return}}at.flags|=e,o.memoizedState=si(1|t,n,u,r)}function cl(e,t){return bi(8390656,8,e,t)}function ui(e,t){return qi(2048,8,e,t)}function Ja(e,t){return qi(4,2,e,t)}function $a(e,t){return qi(4,4,e,t)}function es(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ts(e,t,n){return n=n!=null?n.concat([e]):null,qi(4,4,es.bind(null,t,e),n)}function fl(){}function ns(e,t){var n=Mn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ll(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rs(e,t){var n=Mn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ll(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bc(e,t){var n=Ze;Ze=n!==0&&4>n?n:4,e(!0);var r=en.transition;en.transition={};try{e(!1),t()}finally{Ze=n,en.transition=r}}function is(){return Mn().memoizedState}function Hc(e,t,n){var r=Kn(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},os(e)?ls(t,n):(as(e,t,n),n=zt(),e=tn(e,r,n),e!==null&&ss(e,t,r))}function jc(e,t,n){var r=Kn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(os(e))ls(t,o);else{as(e,t,o);var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var y=t.lastRenderedState,x=u(y,n);if(o.hasEagerState=!0,o.eagerState=x,Sn(x,y))return}catch{}finally{}n=zt(),e=tn(e,r,n),e!==null&&ss(e,t,r)}}function os(e){var t=e.alternate;return e===at||t!==null&&t===at}function ls(e,t){li=Yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){dt!==null&&(e.mode&1)!==0&&(Ae&2)===0?(e=t.interleaved,e===null?(n.next=n,_n===null?_n=[t]:_n.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ss(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bo(e,n)}}var Ji={readContext:bt,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},Wc={readContext:bt,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:cl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bi(4194308,4,es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var n=Dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hc.bind(null,at,e),[r.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:ul,useDebugValue:fl,useDeferredValue:function(e){var t=ul(e),n=t[0],r=t[1];return cl(function(){var o=en.transition;en.transition={};try{r(e)}finally{en.transition=o}},[e]),n},useTransition:function(){var e=ul(!1),t=e[0];return e=Bc.bind(null,e[1]),Dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=at,o=Dn();if(it){if(n===void 0)throw Error(p(407));n=n()}else{if(n=t(),dt===null)throw Error(p(349));(Nr&30)!==0||Ya(r,t,n)}o.memoizedState=n;var u={value:n,getSnapshot:t};return o.queue=u,cl(Ka.bind(null,r,u,e),[e]),r.flags|=2048,si(9,Xa.bind(null,r,u,n,t),void 0,null),n},useId:function(){var e=Dn(),t=dt.identifierPrefix;if(it){var n=Fn,r=Ln;n=(r&~(1<<32-rt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ai++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Uc++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Gc={readContext:bt,useCallback:ns,useContext:bt,useEffect:ui,useImperativeHandle:ts,useInsertionEffect:Ja,useLayoutEffect:$a,useMemo:rs,useReducer:Xi,useRef:qa,useState:function(){return Xi(dr)},useDebugValue:fl,useDeferredValue:function(e){var t=Xi(dr),n=t[0],r=t[1];return ui(function(){var o=en.transition;en.transition={};try{r(e)}finally{en.transition=o}},[e]),n},useTransition:function(){var e=Xi(dr)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Qa,useSyncExternalStore:Va,useId:is,unstable_isNewReconciler:!1},Zc={readContext:bt,useCallback:ns,useContext:bt,useEffect:ui,useImperativeHandle:ts,useInsertionEffect:Ja,useLayoutEffect:$a,useMemo:rs,useReducer:Ki,useRef:qa,useState:function(){return Ki(dr)},useDebugValue:fl,useDeferredValue:function(e){var t=Ki(dr),n=t[0],r=t[1];return ui(function(){var o=en.transition;en.transition={};try{r(e)}finally{en.transition=o}},[e]),n},useTransition:function(){var e=Ki(dr)[0],t=Mn().memoizedState;return[e,t]},useMutableSource:Qa,useSyncExternalStore:Va,useId:is,unstable_isNewReconciler:!1};function dl(e,t){try{var n="",r=t;do n+=Dc(r),r=r.return;while(r);var o=n}catch(u){o=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:o}}function pl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qc=typeof WeakMap=="function"?WeakMap:Map;function us(e,t,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mo||(mo=!0,Nl=r),pl(e,t)},n}function cs(e,t,n){n=An(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){pl(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){pl(e,t),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),n}function fs(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qc;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=lf.bind(null,e,t,n),t.then(e,e))}function ds(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ps(e,t,n,r,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=An(-1,1),t.tag=2,Vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}function Pn(e){e.flags|=4}function hs(e,t){if(e!==null&&e.child===t.child)return!0;if((t.flags&16)!==0)return!1;for(e=t.child;e!==null;){if((e.flags&12854)!==0||(e.subtreeFlags&12854)!==0)return!1;e=e.sibling}return!0}var ci,fi,$i,eo;if(Te)ci=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)ue(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},fi=function(){},$i=function(e,t,n,r,o){if(e=e.memoizedProps,e!==r){var u=t.stateNode,y=xn($t.current);n=We(u,n,e,r,o,y),(t.updateQueue=n)&&Pn(t)}},eo=function(e,t,n,r){n!==r&&Pn(t)};else if(St){ci=function(e,t,n,r){for(var o=t.child;o!==null;){if(o.tag===5){var u=o.stateNode;n&&r&&(u=vn(u,o.type,o.memoizedProps,o)),ue(e,u)}else if(o.tag===6)u=o.stateNode,n&&r&&(u=gn(u,o.memoizedProps,o)),ue(e,u);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)u=o.child,u!==null&&(u.return=o),ci(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};var ms=function(e,t,n,r){for(var o=t.child;o!==null;){if(o.tag===5){var u=o.stateNode;n&&r&&(u=vn(u,o.type,o.memoizedProps,o)),Ft(e,u)}else if(o.tag===6)u=o.stateNode,n&&r&&(u=gn(u,o.memoizedProps,o)),Ft(e,u);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)u=o.child,u!==null&&(u.return=o),ms(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};fi=function(e,t){var n=t.stateNode;if(!hs(e,t)){e=n.containerInfo;var r=ar(e);ms(r,t,!1,!1),n.pendingChildren=r,Pn(t),Gt(e,r)}},$i=function(e,t,n,r,o){var u=e.stateNode,y=e.memoizedProps;if((e=hs(e,t))&&y===r)t.stateNode=u;else{var x=t.stateNode,D=xn($t.current),q=null;y!==r&&(q=We(x,n,y,r,o,D)),e&&q===null?t.stateNode=u:(u=Ti(u,q,n,y,r,t,e,x),me(u,n,r,o,D)&&Pn(t),t.stateNode=u,e?Pn(t):ci(u,t,!1,!1))}},eo=function(e,t,n,r){n!==r?(e=xn(Tr.current),n=xn($t.current),t.stateNode=Pe(r,e,n,t),Pn(t)):t.stateNode=e.stateNode}}else fi=function(){},$i=function(){},eo=function(){};function di(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vc(e,t,n){var r=t.pendingProps;switch(Jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(t),null;case 1:return ft(t.type)&&_t(),Rt(t),null;case 3:return r=t.stateNode,kr(),Me(ze),Me(qe),ol(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ni(t)?Pn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,cn!==null&&(Al(cn),cn=null))),fi(e,t),Rt(t),null;case 5:rl(t),n=xn(Tr.current);var o=t.type;if(e!==null&&t.stateNode!=null)$i(e,t,o,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(p(166));return Rt(t),null}if(e=xn($t.current),ni(t)){if(!Xe)throw Error(p(175));e=c(t.stateNode,t.type,t.memoizedProps,n,e,t,!ti),t.updateQueue=e,e!==null&&Pn(t)}else{var u=pe(o,r,n,e,t);ci(u,t,!1,!1),t.stateNode=u,me(u,o,r,n,e)&&Pn(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rt(t),null;case 6:if(e&&t.stateNode!=null)eo(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(p(166));if(e=xn(Tr.current),n=xn($t.current),ni(t)){if(!Xe)throw Error(p(176));if(e=t.stateNode,r=t.memoizedProps,(n=d(e,r,t,!ti))&&(o=Zt,o!==null))switch(u=(o.mode&1)!==0,o.tag){case 3:te(o.stateNode.containerInfo,e,r,u);break;case 5:re(o.type,o.memoizedProps,o.stateNode,e,r,u)}n&&Pn(t)}else t.stateNode=Pe(r,e,n,t)}return Rt(t),null;case 13:if(Me(ot),r=t.memoizedState,it&&Qt!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(e=Qt;e;)e=sn(e);return Rr(),t.flags|=98560,t}if(r!==null&&r.dehydrated!==null){if(r=ni(t),e===null){if(!r)throw Error(p(318));if(!Xe)throw Error(p(344));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));_(e,t)}else Rr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return Rt(t),null}return cn!==null&&(Al(cn),cn=null),(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,n=!1,e===null?ni(t):n=e.memoizedState!==null,r&&!n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ot.current&1)!==0?vt===0&&(vt=3):Fl())),t.updateQueue!==null&&(t.flags|=4),Rt(t),null);case 4:return kr(),fi(e,t),e===null&&an(t.stateNode.containerInfo),Rt(t),null;case 10:return Vo(t.type._context),Rt(t),null;case 17:return ft(t.type)&&_t(),Rt(t),null;case 19:if(Me(ot),o=t.memoizedState,o===null)return Rt(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)di(o,!1);else{if(vt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Qi(e),u!==null){for(t.flags|=128,di(o,!1),e=u.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;r!==null;)n=r,o=e,n.flags&=14680066,u=n.alternate,u===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,o=u.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r=r.sibling;return Ne(ot,ot.current&1|2),t.child}e=e.sibling}o.tail!==null&&gt()>kl&&(t.flags|=128,r=!0,di(o,!1),t.lanes=4194304)}else{if(!r)if(e=Qi(u),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),di(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!it)return Rt(t),null}else 2*gt()-o.renderingStartTime>kl&&n!==1073741824&&(t.flags|=128,r=!0,di(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(e=o.last,e!==null?e.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=gt(),t.sibling=null,e=ot.current,Ne(ot,r?e&1|2:e&1),t):(Rt(t),null);case 22:case 23:return Ll(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Yt&1073741824)!==0&&(Rt(t),Te&&t.subtreeFlags&6&&(t.flags|=8192)):Rt(t),null;case 24:return null;case 25:return null}throw Error(p(156,t.tag))}var Yc=g.ReactCurrentOwner,Vt=!1;function Nt(e,t,n,r){t.child=e===null?Ga(t,null,n,r):Ir(t,e.child,n,r)}function vs(e,t,n,r,o){n=n.render;var u=t.ref;return Mr(t,o),r=al(e,t,n,r,u,o),n=sl(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Un(e,t,o)):(it&&n&&qo(t),t.flags|=1,Nt(e,t,r,o),t.child)}function gs(e,t,n,r,o){if(e===null){var u=n.type;return typeof u=="function"&&!Dl(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,ys(e,t,u,r,o)):(e=_o(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,(e.lanes&o)===0){var y=u.memoizedProps;if(n=n.compare,n=n!==null?n:Fi,n(y,r)&&e.ref===t.ref)return Un(e,t,o)}return t.flags|=1,e=qn(u,r),e.ref=t.ref,e.return=t,t.child=e}function ys(e,t,n,r,o){if(e!==null&&Fi(e.memoizedProps,r)&&e.ref===t.ref)if(Vt=!1,(e.lanes&o)!==0)(e.flags&131072)!==0&&(Vt=!0);else return t.lanes=e.lanes,Un(e,t,o);return hl(e,t,n,r,o)}function ws(e,t,n){var r=t.pendingProps,o=r.children,u=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null},Ne(zr,Yt),Yt|=n;else if((n&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null},r=u!==null?u.baseLanes:n,Ne(zr,Yt),Yt|=r;else return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Ne(zr,Yt),Yt|=e,null;else u!==null?(r=u.baseLanes|n,t.memoizedState=null):r=n,Ne(zr,Yt),Yt|=r;return Nt(e,t,o,n),t.child}function Ss(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function hl(e,t,n,r,o){var u=ft(n)?$e:qe.current;return u=Mt(t,u),Mr(t,o),n=al(e,t,n,r,u,o),r=sl(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Un(e,t,o)):(it&&r&&qo(t),t.flags|=1,Nt(e,t,n,o),t.child)}function Es(e,t,n,r,o){if(ft(n)){var u=!0;be(t)}else u=!1;if(Mr(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),La(t,n,r),bo(t,n,r,o),r=!0;else if(e===null){var y=t.stateNode,x=t.memoizedProps;y.props=x;var D=y.context,q=n.contextType;typeof q=="object"&&q!==null?q=bt(q):(q=ft(n)?$e:qe.current,q=Mt(t,q));var fe=n.getDerivedStateFromProps,Re=typeof fe=="function"||typeof y.getSnapshotBeforeUpdate=="function";Re||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==r||D!==q)&&Fa(t,y,r,q),Qn=!1;var _e=t.memoizedState;y.state=_e,Hi(t,r,y,o),D=t.memoizedState,x!==r||_e!==D||ze.current||Qn?(typeof fe=="function"&&(Ko(t,n,fe,r),D=t.memoizedState),(x=Qn||Aa(t,n,x,r,_e,D,q))?(Re||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=D),y.props=r,y.state=D,y.context=q,r=x):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{y=t.stateNode,ka(e,t),x=t.memoizedProps,q=t.type===t.elementType?x:un(t.type,x),y.props=q,Re=t.pendingProps,_e=y.context,D=n.contextType,typeof D=="object"&&D!==null?D=bt(D):(D=ft(n)?$e:qe.current,D=Mt(t,D));var Je=n.getDerivedStateFromProps;(fe=typeof Je=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==Re||_e!==D)&&Fa(t,y,r,D),Qn=!1,_e=t.memoizedState,y.state=_e,Hi(t,r,y,o);var Se=t.memoizedState;x!==Re||_e!==Se||ze.current||Qn?(typeof Je=="function"&&(Ko(t,n,Je,r),Se=t.memoizedState),(q=Qn||Aa(t,n,q,r,_e,Se,D)||!1)?(fe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(r,Se,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(r,Se,D)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=Se),y.props=r,y.state=Se,y.context=D,r=q):(typeof y.componentDidUpdate!="function"||x===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),r=!1)}return ml(e,t,n,r,u,o)}function ml(e,t,n,r,o,u){Ss(e,t);var y=(t.flags&128)!==0;if(!r&&!y)return o&&Ge(t,n,!1),Un(e,t,u);r=t.stateNode,Yc.current=t;var x=y&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&y?(t.child=Ir(t,e.child,null,u),t.child=Ir(t,null,x,u)):Nt(e,t,x,u),t.memoizedState=r.state,o&&Ge(t,n,!0),t.child}function _s(e){var t=e.stateNode;t.pendingContext?Ye(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ye(e,t.context,!1),nl(e,t.containerInfo)}function xs(e,t,n,r,o){return Rr(),tl(o),t.flags|=256,Nt(e,t,n,r),t.child}var to={dehydrated:null,treeContext:null,retryLane:0};function no(e){return{baseLanes:e,cachePool:null}}function Ms(e,t,n){var r=t.pendingProps,o=ot.current,u=!1,y=(t.flags&128)!==0,x;if((x=y)||(x=e!==null&&e.memoizedState===null?!1:(o&2)!==0),x?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ne(ot,o&1),e===null)return el(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:Jr(e)?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,u?(r=t.mode,u=t.child,o={mode:"hidden",children:o},(r&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=o):u=xo(o,r,0,null),e=yr(e,r,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=no(n),t.memoizedState=to,e):vl(t,o));if(o=e.memoizedState,o!==null){if(x=o.dehydrated,x!==null){if(y)return t.flags&256?(t.flags&=-257,ro(e,t,n,Error(p(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=r.fallback,o=t.mode,r=xo({mode:"visible",children:r.children},o,0,null),u=yr(u,o,n,null),u.flags|=2,r.return=t,u.return=t,r.sibling=u,t.child=r,(t.mode&1)!==0&&Ir(t,e.child,null,n),t.child.memoizedState=no(n),t.memoizedState=to,u);if((t.mode&1)===0)t=ro(e,t,n,null);else if(Jr(x))t=ro(e,t,n,Error(p(419)));else if(r=(n&e.childLanes)!==0,Vt||r){if(r=dt,r!==null){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}r=(u&(r.suspendedLanes|n))!==0?0:u,r!==0&&r!==o.retryLane&&(o.retryLane=r,tn(e,r,-1))}Fl(),t=ro(e,t,n,Error(p(421)))}else sr(x)?(t.flags|=128,t.child=e.child,t=af.bind(null,e),ur(x,t),t=null):(n=o.treeContext,Xe&&(Qt=Fo(x),Zt=t,it=!0,cn=null,ti=!1,n!==null&&(qt[Jt++]=Ln,qt[Jt++]=Fn,qt[Jt++]=cr,Ln=n.id,Fn=n.overflow,cr=t)),t=vl(t,t.pendingProps.children),t.flags|=4096);return t}return u?(r=Cs(e,t,r.children,r.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=o===null?no(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=to,r):(n=Ps(e,t,r.children,n),t.memoizedState=null,n)}return u?(r=Cs(e,t,r.children,r.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=o===null?no(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=to,r):(n=Ps(e,t,r.children,n),t.memoizedState=null,n)}function vl(e,t){return t=xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ps(e,t,n,r){var o=e.child;return e=o.sibling,n=qn(o,{mode:"visible",children:n}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Cs(e,t,n,r,o){var u=t.mode;e=e.child;var y=e.sibling,x={mode:"hidden",children:n};return(u&1)===0&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=x,t.deletions=null):(n=qn(e,x),n.subtreeFlags=e.subtreeFlags&14680064),y!==null?r=qn(y,r):(r=yr(r,u,o,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ro(e,t,n,r){return r!==null&&tl(r),Ir(t,e.child,null,n),e=vl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rs(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Yo(e.return,t,n)}function gl(e,t,n,r,o){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=o)}function Is(e,t,n){var r=t.pendingProps,o=r.revealOrder,u=r.tail;if(Nt(e,t,r.children,n),r=ot.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rs(e,n,t);else if(e.tag===19)Rs(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(ot,r),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Qi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),gl(t,!1,o,n,u);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Qi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}gl(t,!0,n,null,u);break;case"together":gl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(p(153));if(t.child!==null){for(e=t.child,n=qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xc(e,t,n){switch(t.tag){case 3:_s(t),Rr();break;case 5:Za(t);break;case 1:ft(t.type)&&be(t);break;case 4:nl(t,t.stateNode.containerInfo);break;case 10:Ta(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Ne(ot,ot.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Ms(e,t,n):(Ne(ot,ot.current&1),e=Un(e,t,n),e!==null?e.sibling:null);Ne(ot,ot.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Is(e,t,n);t.flags|=128}var o=t.memoizedState;if(o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ne(ot,ot.current),r)break;return null;case 22:case 23:return t.lanes=0,ws(e,t,n)}return Un(e,t,n)}function Kc(e,t){switch(Jo(t),t.tag){case 1:return ft(t.type)&&_t(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kr(),Me(ze),Me(qe),ol(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return rl(t),null;case 13:if(Me(ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(p(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(ot),null;case 4:return kr(),null;case 10:return Vo(t.type._context),null;case 22:case 23:return Ll(),null;case 24:return null;default:return null}}var io=!1,pr=!1,bc=typeof WeakSet=="function"?WeakSet:Set,ie=null;function oo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bt(e,t,r)}else n.current=null}function yl(e,t,n){try{n()}catch(r){Bt(e,t,r)}}var Ts=!1;function qc(e,t){for(oe(e.containerInfo),ie=t;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var n=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,o=n.memoizedState,u=e.stateNode,y=u.getSnapshotBeforeUpdate(e.elementType===e.type?r:un(e.type,r),o);u.__reactInternalSnapshotBeforeUpdate=y}break;case 3:Te&&Kt(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(x){Bt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return n=Ts,Ts=!1,n}function hr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var u=o.destroy;o.destroy=void 0,u!==void 0&&yl(t,n,u)}o=o.next}while(o!==r)}}function pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function wl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=ge(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ks(e,t,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Ai,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var o=r,u=o.destroy;o=o.tag,u!==void 0&&((o&2)!==0||(o&4)!==0)&&yl(t,n,u),r=r.next}while(r!==e)}break;case 1:if(oo(t,n),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(y){Bt(t,n,y)}break;case 5:oo(t,n);break;case 4:Te?Fs(e,t,n):St&&St&&(t=t.stateNode.containerInfo,n=ar(t),mn(t,n))}}function Ns(e,t,n){for(var r=t;;)if(ks(e,r,n),r.child===null||Te&&r.tag===4){if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function zs(e){var t=e.alternate;t!==null&&(e.alternate=null,zs(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&At(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Os(e){return e.tag===5||e.tag===3||e.tag===4}function As(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ls(e){if(Te){e:{for(var t=e.return;t!==null;){if(Os(t))break e;t=t.return}throw Error(p(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,n.flags&32&&(K(t),n.flags&=-33),n=As(e),El(e,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=As(e),Sl(e,n,t);break;default:throw Error(p(161))}}}function Sl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?ht(n,e,t):Wn(n,e);else if(r!==4&&(e=e.child,e!==null))for(Sl(e,t,n),e=e.sibling;e!==null;)Sl(e,t,n),e=e.sibling}function El(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?Nn(n,e,t):jn(n,e);else if(r!==4&&(e=e.child,e!==null))for(El(e,t,n),e=e.sibling;e!==null;)El(e,t,n),e=e.sibling}function Fs(e,t,n){for(var r=t,o=!1,u,y;;){if(!o){o=r.return;e:for(;;){if(o===null)throw Error(p(160));switch(u=o.stateNode,o.tag){case 5:y=!1;break e;case 3:u=u.containerInfo,y=!0;break e;case 4:u=u.containerInfo,y=!0;break e}o=o.return}o=!0}if(r.tag===5||r.tag===6)Ns(e,r,n),y?I(u,r.stateNode):Gn(u,r.stateNode);else if(r.tag===18)y?Y(u,r.stateNode):b(u,r.stateNode);else if(r.tag===4){if(r.child!==null){u=r.stateNode.containerInfo,y=!0,r.child.return=r,r=r.child;continue}}else if(ks(e,r,n),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function _l(e,t){if(Te){switch(t.tag){case 0:case 11:case 14:case 15:hr(3,t,t.return),pi(3,t),hr(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var r=t.memoizedProps;e=e!==null?e.memoizedProps:r;var o=t.type,u=t.updateQueue;t.updateQueue=null,u!==null&&qr(n,u,o,e,r,t)}return;case 6:if(t.stateNode===null)throw Error(p(162));n=t.memoizedProps,br(t.stateNode,e!==null?e.memoizedProps:n,n);return;case 3:Xe&&e!==null&&e.memoizedState.isDehydrated&&A(t.stateNode.containerInfo);return;case 12:return;case 13:lo(t);return;case 19:lo(t);return;case 17:return}throw Error(p(163))}switch(t.tag){case 0:case 11:case 14:case 15:hr(3,t,t.return),pi(3,t),hr(5,t,t.return);return;case 12:return;case 13:lo(t);return;case 19:lo(t);return;case 3:Xe&&e!==null&&e.memoizedState.isDehydrated&&A(t.stateNode.containerInfo);break;case 22:case 23:return}e:if(St){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,mn(t.containerInfo,t.pendingChildren);break e}throw Error(p(163))}}function lo(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bc),t.forEach(function(r){var o=sf.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Jc(e,t){for(ie=t;ie!==null;){t=ie;var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var u=e;Te?Fs(u,o,t):Ns(u,o,t);var y=o.alternate;y!==null&&(y.return=null),o.return=null}catch(ye){Bt(o,t,ye)}}if(n=t.child,(t.subtreeFlags&12854)!==0&&n!==null)n.return=t,ie=n;else for(;ie!==null;){t=ie;try{var x=t.flags;if(x&32&&Te&&K(t.stateNode),x&512){var D=t.alternate;if(D!==null){var q=D.ref;q!==null&&(typeof q=="function"?q(null):q.current=null)}}if(x&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var fe=t.alternate;(fe===null||fe.memoizedState===null)&&(Tl=gt())}break;case 22:var Re=t.memoizedState!==null,_e=t.alternate,Je=_e!==null&&_e.memoizedState!==null;if(n=t,Te){e:if(r=n,o=Re,u=null,Te)for(var Se=r;;){if(Se.tag===5){if(u===null){u=Se;var It=Se.stateNode;o?ce(It):J(Se.stateNode,Se.memoizedProps)}}else if(Se.tag===6){if(u===null){var rn=Se.stateNode;o?De(rn):Et(rn,Se.memoizedProps)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===r)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===r)break;for(;Se.sibling===null;){if(Se.return===null||Se.return===r)break e;u===Se&&(u=null),Se=Se.return}u===Se&&(u=null),Se.sibling.return=Se.return,Se=Se.sibling}}if(Re&&!Je&&(n.mode&1)!==0){ie=n;for(var N=n.child;N!==null;){for(n=ie=N;ie!==null;){r=ie;var C=r.child;switch(r.tag){case 0:case 11:case 14:case 15:hr(4,r,r.return);break;case 1:oo(r,r.return);var O=r.stateNode;if(typeof O.componentWillUnmount=="function"){var ae=r.return;try{O.props=r.memoizedProps,O.state=r.memoizedState,O.componentWillUnmount()}catch(ye){Bt(r,ae,ye)}}break;case 5:oo(r,r.return);break;case 22:if(r.memoizedState!==null){Bs(n);continue}}C!==null?(C.return=r,ie=C):Bs(n)}N=N.sibling}}}switch(x&4102){case 2:Ls(t),t.flags&=-3;break;case 6:Ls(t),t.flags&=-3,_l(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,_l(t.alternate,t);break;case 4:_l(t.alternate,t)}}catch(ye){Bt(t,t.return,ye)}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}}function $c(e,t,n){ie=e,Ds(e)}function Ds(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var o=ie,u=o.child;if(o.tag===22&&r){var y=o.memoizedState!==null||io;if(!y){var x=o.alternate,D=x!==null&&x.memoizedState!==null||pr;x=io;var q=pr;if(io=y,(pr=D)&&!q)for(ie=o;ie!==null;)y=ie,D=y.child,y.tag===22&&y.memoizedState!==null?Hs(o):D!==null?(D.return=y,ie=D):Hs(o);for(;u!==null;)ie=u,Ds(u),u=u.sibling;ie=o,io=x,pr=q}Us(e)}else(o.subtreeFlags&8772)!==0&&u!==null?(u.return=o,ie=u):Us(e)}}function Us(e){for(;ie!==null;){var t=ie;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:pr||pi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pr)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:un(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&za(t,u,r);break;case 3:var y=t.updateQueue;if(y!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=ge(t.child.stateNode);break;case 1:n=t.child.stateNode}za(t,y,n)}break;case 5:var x=t.stateNode;n===null&&t.flags&4&&_r(x,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(Xe&&t.memoizedState===null){var D=t.alternate;if(D!==null){var q=D.memoizedState;if(q!==null){var fe=q.dehydrated;fe!==null&&L(fe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(p(163))}pr||t.flags&512&&wl(t)}catch(Re){Bt(t,t.return,Re)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Bs(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function Hs(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pi(4,t)}catch(D){Bt(t,n,D)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(D){Bt(t,o,D)}}var u=t.return;try{wl(t)}catch(D){Bt(t,u,D)}break;case 5:var y=t.return;try{wl(t)}catch(D){Bt(t,y,D)}}}catch(D){Bt(t,t.return,D)}if(t===e){ie=null;break}var x=t.sibling;if(x!==null){x.return=t.return,ie=x;break}ie=t.return}}var ao=0,so=1,uo=2,co=3,fo=4;if(typeof Symbol=="function"&&Symbol.for){var hi=Symbol.for;ao=hi("selector.component"),so=hi("selector.has_pseudo_class"),uo=hi("selector.role"),co=hi("selector.test_id"),fo=hi("selector.text")}function xl(e){var t=Wt(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(p(364));return t}if(e=or(e),e===null)throw Error(p(362));return e.stateNode.current}function Ml(e,t){switch(t.$$typeof){case ao:if(e.type===t.value)return!0;break;case so:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],o=e[n++],u=t[o];if(r.tag!==5||!Tt(r)){for(;u!=null&&Ml(r,u);)o++,u=t[o];if(o===t.length){t=!0;break e}else for(r=r.child;r!==null;)e.push(r,o),r=r.sibling}}t=!1}return t;case uo:if(e.tag===5&&kn(e.stateNode,t.value))return!0;break;case fo:if((e.tag===5||e.tag===6)&&(e=hn(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case co:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(p(365))}return!1}function Pl(e){switch(e.$$typeof){case ao:return"<"+(le(e.value)||"Unknown")+">";case so:return":has("+(Pl(e)||"")+")";case uo:return'[role="'+e.value+'"]';case fo:return'"'+e.value+'"';case co:return'[data-testname="'+e.value+'"]';default:throw Error(p(365))}}function js(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var o=e[r++],u=e[r++],y=t[u];if(o.tag!==5||!Tt(o)){for(;y!=null&&Ml(o,y);)u++,y=t[u];if(u===t.length)n.push(o);else for(o=o.child;o!==null;)e.push(o,u),o=o.sibling}}return n}function Cl(e,t){if(!Xt)throw Error(p(363));e=xl(e),e=js(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(r.tag===5)Tt(r)||t.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return t}var ef=Math.ceil,po=g.ReactCurrentDispatcher,Rl=g.ReactCurrentOwner,ut=g.ReactCurrentBatchConfig,Ae=0,dt=null,pt=null,xt=0,Yt=0,zr=Ue(0),vt=0,mi=null,Or=0,ho=0,Il=0,vi=null,Dt=null,Tl=0,kl=1/0;function Ar(){kl=gt()+500}var mo=!1,Nl=null,Yn=null,vo=!1,Xn=null,go=0,gi=0,zl=null,yo=-1,wo=0;function zt(){return(Ae&6)!==0?gt():yo!==-1?yo:yo=gt()}function Kn(e){return(e.mode&1)===0?1:(Ae&2)!==0&&xt!==0?xt&-xt:Fc.transition!==null?(wo===0&&(e=Ni,Ni<<=1,(Ni&4194240)===0&&(Ni=64),wo=e),wo):(e=Ze,e!==0?e:ir())}function tn(e,t,n){if(50<gi)throw gi=0,zl=null,Error(p(185));var r=So(e,t);return r===null?null:(ei(r,t,n),((Ae&2)===0||r!==dt)&&(r===dt&&((Ae&2)===0&&(ho|=t),vt===4&&bn(r,xt)),Ut(r,n),t===1&&Ae===0&&(e.mode&1)===0&&(Ar(),Li&&En())),r)}function So(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function Ut(e,t){var n=e.callbackNode;Rc(e,t);var r=Oi(e,e===dt?xt:0);if(r===0)n!==null&&Ra(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ra(n),t===1)e.tag===0?Lc(Gs.bind(null,e)):Ia(Gs.bind(null,e)),Tn?pn(function(){Ae===0&&En()}):Ho(jo,En),n=null;else{switch(Ca(r)){case 1:n=jo;break;case 4:n=Nc;break;case 16:n=Wo;break;case 536870912:n=zc;break;default:n=Wo}n=Js(n,Ws.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ws(e,t){if(yo=-1,wo=0,(Ae&6)!==0)throw Error(p(327));var n=e.callbackNode;if(gr()&&e.callbackNode!==n)return null;var r=Oi(e,e===dt?xt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Eo(e,r);else{t=r;var o=Ae;Ae|=2;var u=Vs();(dt!==e||xt!==t)&&(Ar(),mr(e,t));do try{rf();break}catch(x){Qs(e,x)}while(!0);Qo(),po.current=u,Ae=o,pt!==null?t=0:(dt=null,xt=0,t=vt)}if(t!==0){if(t===2&&(o=Do(e),o!==0&&(r=o,t=Ol(e,o))),t===1)throw n=mi,mr(e,0),bn(e,r),Ut(e,gt()),n;if(t===6)bn(e,r);else{if(o=e.current.alternate,(r&30)===0&&!tf(o)&&(t=Eo(e,r),t===2&&(u=Do(e),u!==0&&(r=u,t=Ol(e,u))),t===1))throw n=mi,mr(e,0),bn(e,r),Ut(e,gt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(p(345));case 2:vr(e,Dt);break;case 3:if(bn(e,r),(r&130023424)===r&&(t=Tl+500-gt(),10<t)){if(Oi(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){zt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=st(vr.bind(null,e,Dt),t);break}vr(e,Dt);break;case 4:if(bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var y=31-rt(r);u=1<<y,y=t[y],y>o&&(o=y),r&=~u}if(r=o,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ef(r/1960))-r,10<r){e.timeoutHandle=st(vr.bind(null,e,Dt),r);break}vr(e,Dt);break;case 5:vr(e,Dt);break;default:throw Error(p(329))}}}return Ut(e,gt()),e.callbackNode===n?Ws.bind(null,e):null}function Ol(e,t){var n=vi;return e.current.memoizedState.isDehydrated&&(mr(e,t).flags|=256),e=Eo(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&Al(t)),e}function Al(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function tf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],u=o.getSnapshot;o=o.value;try{if(!Sn(u(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t){for(t&=~Il,t&=~ho,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function Gs(e){if((Ae&6)!==0)throw Error(p(327));gr();var t=Oi(e,0);if((t&1)===0)return Ut(e,gt()),null;var n=Eo(e,t);if(e.tag!==0&&n===2){var r=Do(e);r!==0&&(t=r,n=Ol(e,r))}if(n===1)throw n=mi,mr(e,0),bn(e,t),Ut(e,gt()),n;if(n===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vr(e,Dt),Ut(e,gt()),null}function Zs(e){Xn!==null&&Xn.tag===0&&(Ae&6)===0&&gr();var t=Ae;Ae|=1;var n=ut.transition,r=Ze;try{if(ut.transition=null,Ze=1,e)return e()}finally{Ze=r,ut.transition=n,Ae=t,(Ae&6)===0&&En()}}function Ll(){Yt=zr.current,Me(zr)}function mr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==dn&&(e.timeoutHandle=dn,ct(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(Jo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_t();break;case 3:kr(),Me(ze),Me(qe),ol();break;case 5:rl(r);break;case 4:kr();break;case 13:Me(ot);break;case 19:Me(ot);break;case 10:Vo(r.type._context);break;case 22:case 23:Ll()}n=n.return}if(dt=e,pt=e=qn(e.current,null),xt=Yt=t,vt=0,mi=null,Il=ho=Or=0,Dt=vi=null,_n!==null){for(t=0;t<_n.length;t++)if(n=_n[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,u=n.pending;if(u!==null){var y=u.next;u.next=o,r.next=y}n.pending=r}_n=null}return e}function Qs(e,t){do{var n=pt;try{if(Qo(),Vi.current=Ji,Yi){for(var r=at.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Yi=!1}if(Nr=0,yt=Pt=at=null,li=!1,ai=0,Rl.current=null,n===null||n.return===null){vt=1,mi=t,pt=null;break}e:{var u=e,y=n.return,x=n,D=t;if(t=xt,x.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=D,fe=x,Re=fe.tag;if((fe.mode&1)===0&&(Re===0||Re===11||Re===15)){var _e=fe.alternate;_e?(fe.updateQueue=_e.updateQueue,fe.memoizedState=_e.memoizedState,fe.lanes=_e.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Je=ds(y);if(Je!==null){Je.flags&=-257,ps(Je,y,x,u,t),Je.mode&1&&fs(u,q,t),t=Je,D=q;var Se=t.updateQueue;if(Se===null){var It=new Set;It.add(D),t.updateQueue=It}else Se.add(D);break e}else{if((t&1)===0){fs(u,q,t),Fl();break e}D=Error(p(426))}}else if(it&&x.mode&1){var rn=ds(y);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),ps(rn,y,x,u,t),tl(D);break e}}u=D,vt!==4&&(vt=2),vi===null?vi=[u]:vi.push(u),D=dl(D,x),x=y;do{switch(x.tag){case 3:x.flags|=65536,t&=-t,x.lanes|=t;var N=us(x,D,t);Na(x,N);break e;case 1:u=D;var C=x.type,O=x.stateNode;if((x.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Yn===null||!Yn.has(O)))){x.flags|=65536,t&=-t,x.lanes|=t;var ae=cs(x,u,t);Na(x,ae);break e}}x=x.return}while(x!==null)}Xs(n)}catch(ye){t=ye,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function Vs(){var e=po.current;return po.current=Ji,e===null?Ji:e}function Fl(){(vt===0||vt===3||vt===2)&&(vt=4),dt===null||(Or&268435455)===0&&(ho&268435455)===0||bn(dt,xt)}function Eo(e,t){var n=Ae;Ae|=2;var r=Vs();dt===e&&xt===t||mr(e,t);do try{nf();break}catch(o){Qs(e,o)}while(!0);if(Qo(),Ae=n,po.current=r,pt!==null)throw Error(p(261));return dt=null,xt=0,vt}function nf(){for(;pt!==null;)Ys(pt)}function rf(){for(;pt!==null&&!Tc();)Ys(pt)}function Ys(e){var t=qs(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?Xs(e):pt=t,Rl.current=null}function Xs(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Vc(n,t,Yt),n!==null){pt=n;return}}else{if(n=Kc(n,t),n!==null){n.flags&=32767,pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,pt=null;return}}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);vt===0&&(vt=5)}function vr(e,t){var n=Ze,r=ut.transition;try{ut.transition=null,Ze=1,of(e,t,n)}finally{ut.transition=r,Ze=n}return null}function of(e,t,n){do gr();while(Xn!==null);if((Ae&6)!==0)throw Error(p(327));var r=e.finishedWork,o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(Ic(e,u),e===dt&&(pt=dt=null,xt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||vo||(vo=!0,Js(Wo,function(){return gr(),null})),u=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||u){u=ut.transition,ut.transition=null;var y=Ze;Ze=1;var x=Ae;Ae|=4,Rl.current=null,qc(e,r),Jc(e,r),V(e.containerInfo),e.current=r,$c(r),kc(),Ae=x,Ze=y,ut.transition=u}else e.current=r;if(vo&&(vo=!1,Xn=e,go=o),u=e.pendingLanes,u===0&&(Yn=null),Oc(r.stateNode),Ut(e,gt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(mo)throw mo=!1,e=Nl,Nl=null,e;return(go&1)!==0&&e.tag!==0&&gr(),u=e.pendingLanes,(u&1)!==0?e===zl?gi++:(gi=0,zl=e):gi=0,En(),null}function gr(){if(Xn!==null){var e=Ca(go),t=ut.transition,n=Ze;try{if(ut.transition=null,Ze=16>e?16:e,Xn===null)var r=!1;else{if(e=Xn,Xn=null,go=0,(Ae&6)!==0)throw Error(p(331));var o=Ae;for(Ae|=4,ie=e.current;ie!==null;){var u=ie,y=u.child;if((ie.flags&16)!==0){var x=u.deletions;if(x!==null){for(var D=0;D<x.length;D++){var q=x[D];for(ie=q;ie!==null;){var fe=ie;switch(fe.tag){case 0:case 11:case 15:hr(8,fe,u)}var Re=fe.child;if(Re!==null)Re.return=fe,ie=Re;else for(;ie!==null;){fe=ie;var _e=fe.sibling,Je=fe.return;if(zs(fe),fe===q){ie=null;break}if(_e!==null){_e.return=Je,ie=_e;break}ie=Je}}}var Se=u.alternate;if(Se!==null){var It=Se.child;if(It!==null){Se.child=null;do{var rn=It.sibling;It.sibling=null,It=rn}while(It!==null)}}ie=u}}if((u.subtreeFlags&2064)!==0&&y!==null)y.return=u,ie=y;else e:for(;ie!==null;){if(u=ie,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:hr(9,u,u.return)}var N=u.sibling;if(N!==null){N.return=u.return,ie=N;break e}ie=u.return}}var C=e.current;for(ie=C;ie!==null;){y=ie;var O=y.child;if((y.subtreeFlags&2064)!==0&&O!==null)O.return=y,ie=O;else e:for(y=C;ie!==null;){if(x=ie,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:pi(9,x)}}catch(ye){Bt(x,x.return,ye)}if(x===y){ie=null;break e}var ae=x.sibling;if(ae!==null){ae.return=x.return,ie=ae;break e}ie=x.return}}if(Ae=o,En(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Ai,e)}catch{}r=!0}return r}finally{Ze=n,ut.transition=t}}return!1}function Ks(e,t,n){t=dl(n,t),t=us(e,t,1),Vn(e,t),t=zt(),e=So(e,1),e!==null&&(ei(e,1,t),Ut(e,t))}function Bt(e,t,n){if(e.tag===3)Ks(e,e,n);else for(;t!==null;){if(t.tag===3){Ks(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=dl(n,e),e=cs(t,e,1),Vn(t,e),e=zt(),t=So(t,1),t!==null&&(ei(t,1,e),Ut(t,e));break}}t=t.return}}function lf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=zt(),e.pingedLanes|=e.suspendedLanes&n,dt===e&&(xt&n)===n&&(vt===4||vt===3&&(xt&130023424)===xt&&500>gt()-Tl?mr(e,0):Il|=n),Ut(e,t)}function bs(e,t){t===0&&((e.mode&1)===0?t=1:(t=zi,zi<<=1,(zi&130023424)===0&&(zi=4194304)));var n=zt();e=So(e,t),e!==null&&(ei(e,t,n),Ut(e,n))}function af(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bs(e,n)}function sf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(p(314))}r!==null&&r.delete(t),bs(e,n)}var qs;qs=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ze.current)Vt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Vt=!1,Xc(e,t,n);Vt=(e.flags&131072)!==0}else Vt=!1,it&&(t.flags&1048576)!==0&&Da(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var o=Mt(t,qe.current);Mr(t,n),o=al(null,t,r,e,o,n);var u=sl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(u=!0,be(t)):u=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Xo(t),o.updater=ji,t.stateNode=o,o._reactInternals=t,bo(t,r,e,n),t=ml(null,t,r,!0,u,n)):(t.tag=0,it&&u&&qo(t),Nt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=cf(r),e=un(r,e),o){case 0:t=hl(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=vs(null,t,r,e,n);break e;case 14:t=gs(null,t,r,un(r.type,e),n);break e}throw Error(p(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:un(r,o),hl(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:un(r,o),Es(e,t,r,o,n);case 3:e:{if(_s(t),e===null)throw Error(p(387));r=t.pendingProps,u=t.memoizedState,o=u.element,ka(e,t),Hi(t,r,null,n);var y=t.memoizedState;if(r=y.element,Xe&&u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:y.cache,transitions:y.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){o=Error(p(423)),t=xs(e,t,r,n,o);break e}else if(r!==o){o=Error(p(424)),t=xs(e,t,r,n,o);break e}else for(Xe&&(Qt=ki(t.stateNode.containerInfo),Zt=t,it=!0,cn=null,ti=!1),n=Ga(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rr(),r===o){t=Un(e,t,n);break e}Nt(e,t,r,n)}t=t.child}return t;case 5:return Za(t),e===null&&el(t),r=t.type,o=t.pendingProps,u=e!==null?e.memoizedProps:null,y=o.children,tt(r,o)?y=null:u!==null&&tt(r,u)&&(t.flags|=32),Ss(e,t),Nt(e,t,y,n),t.child;case 6:return e===null&&el(t),null;case 13:return Ms(e,t,n);case 4:return nl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ir(t,null,r,n):Nt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:un(r,o),vs(e,t,r,o,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,u=t.memoizedProps,y=o.value,Ta(t,r,y),u!==null)if(Sn(u.value,y)){if(u.children===o.children&&!ze.current){t=Un(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var x=u.dependencies;if(x!==null){y=u.child;for(var D=x.firstContext;D!==null;){if(D.context===r){if(u.tag===1){D=An(-1,n&-n),D.tag=2;var q=u.updateQueue;if(q!==null){q=q.shared;var fe=q.pending;fe===null?D.next=D:(D.next=fe.next,fe.next=D),q.pending=D}}u.lanes|=n,D=u.alternate,D!==null&&(D.lanes|=n),Yo(u.return,n,t),x.lanes|=n;break}D=D.next}}else if(u.tag===10)y=u.type===t.type?null:u.child;else if(u.tag===18){if(y=u.return,y===null)throw Error(p(341));y.lanes|=n,x=y.alternate,x!==null&&(x.lanes|=n),Yo(y,n,t),y=u.sibling}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===t){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}Nt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Mr(t,n),o=bt(o),r=r(o),t.flags|=1,Nt(e,t,r,n),t.child;case 14:return r=t.type,o=un(r,t.pendingProps),o=un(r.type,o),gs(e,t,r,o,n);case 15:return ys(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:un(r,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(r)?(e=!0,be(t)):e=!1,Mr(t,n),La(t,r,o),bo(t,r,o,n),ml(null,t,r,!0,e,n);case 19:return Is(e,t,n);case 22:return ws(e,t,n)}throw Error(p(156,t.tag))};function Js(e,t){return Ho(e,t)}function uf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(e,t,n,r){return new uf(e,t,n,r)}function Dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cf(e){if(typeof e=="function")return Dl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W)return 11;if(e===k)return 14}return 2}function qn(e,t){var n=e.alternate;return n===null?(n=nn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _o(e,t,n,r,o,u){var y=2;if(r=e,typeof e=="function")Dl(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case h:return yr(n.children,o,u,t);case m:y=8,o|=8;break;case S:return e=nn(12,n,t,o|2),e.elementType=S,e.lanes=u,e;case F:return e=nn(13,n,t,o),e.elementType=F,e.lanes=u,e;case P:return e=nn(19,n,t,o),e.elementType=P,e.lanes=u,e;case $:return xo(n,o,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:y=10;break e;case R:y=9;break e;case W:y=11;break e;case k:y=14;break e;case H:y=16,r=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return t=nn(y,n,t,o),t.elementType=e,t.type=r,t.lanes=u,t}function yr(e,t,n,r){return e=nn(7,e,r,t),e.lanes=n,e}function xo(e,t,n,r){return e=nn(22,e,r,t),e.elementType=$,e.lanes=n,e.stateNode={},e}function Ul(e,t,n){return e=nn(6,e,null,t),e.lanes=n,e}function Bl(e,t,n){return t=nn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ff(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=dn,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uo(0),this.expirationTimes=Uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uo(0),this.identifierPrefix=r,this.onRecoverableError=o,Xe&&(this.mutableSourceEagerHydrationData=null)}function $s(e,t,n,r,o,u,y,x,D){return e=new ff(e,t,n,x,D),t===1?(t=1,u===!0&&(t|=8)):t=0,u=nn(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Xo(u),e}function eu(e){if(!e)return Be;e=e._reactInternals;e:{if(j(e)!==e||e.tag!==1)throw Error(p(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(p(171))}if(e.tag===1){var n=e.type;if(ft(n))return mt(e,n,t)}return t}function tu(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=se(t),e===null?null:e.stateNode}function nu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hl(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function df(e){return e=se(e),e===null?null:e.stateNode}function pf(){return null}return s.attemptContinuousHydration=function(e){if(e.tag===13){var t=zt();tn(e,134217728,t),Hl(e,134217728)}},s.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=zt(),n=Kn(e);tn(e,n,t),Hl(e,n)}},s.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$r(t.pendingLanes);n!==0&&(Bo(t,n|1),Ut(t,gt()),(Ae&6)===0&&(Ar(),En()))}break;case 13:var r=zt();Zs(function(){return tn(e,1,r)}),Hl(e,1)}},s.batchedUpdates=function(e,t){var n=Ae;Ae|=1;try{return e(t)}finally{Ae=n,Ae===0&&(Ar(),Li&&En())}},s.createComponentSelector=function(e){return{$$typeof:ao,value:e}},s.createContainer=function(e,t,n,r,o,u,y){return $s(e,t,!1,null,n,r,o,u,y)},s.createHasPseudoClassSelector=function(e){return{$$typeof:so,value:e}},s.createHydrationContainer=function(e,t,n,r,o,u,y,x,D){return e=$s(n,r,!0,e,o,u,y,x,D),e.context=eu(null),n=e.current,r=zt(),o=Kn(n),u=An(r,o),u.callback=t??null,Vn(n,u),e.current.lanes=o,ei(e,o,r),Ut(e,r),e},s.createPortal=function(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}},s.createRoleSelector=function(e){return{$$typeof:uo,value:e}},s.createTestNameSelector=function(e){return{$$typeof:co,value:e}},s.createTextSelector=function(e){return{$$typeof:fo,value:e}},s.deferredUpdates=function(e){var t=Ze,n=ut.transition;try{return ut.transition=null,Ze=16,e()}finally{Ze=t,ut.transition=n}},s.discreteUpdates=function(e,t,n,r,o){var u=Ze,y=ut.transition;try{return ut.transition=null,Ze=1,e(t,n,r,o)}finally{Ze=u,ut.transition=y,Ae===0&&Ar()}},s.findAllNodes=Cl,s.findBoundingRects=function(e,t){if(!Xt)throw Error(p(363));t=Cl(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Hn(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,o=r+n.width,u=n.y,y=u+n.height,x=t-1;0<=x;x--)if(t!==x){var D=e[x],q=D.x,fe=q+D.width,Re=D.y,_e=Re+D.height;if(r>=q&&u>=Re&&o<=fe&&y<=_e){e.splice(t,1);break}else if(r!==q||n.width!==D.width||_e<u||Re>y){if(!(u!==Re||n.height!==D.height||fe<r||q>o)){q>r&&(D.width+=q-r,D.x=r),fe<o&&(D.width=o-q),e.splice(t,1);break}}else{Re>u&&(D.height+=Re-u,D.y=u),_e<y&&(D.height=y-Re),e.splice(t,1);break}}}return e},s.findHostInstance=tu,s.findHostInstanceWithNoPortals=function(e){return e=G(e),e=e!==null?de(e):null,e===null?null:e.stateNode},s.findHostInstanceWithWarning=function(e){return tu(e)},s.flushControlled=function(e){var t=Ae;Ae|=1;var n=ut.transition,r=Ze;try{ut.transition=null,Ze=1,e()}finally{Ze=r,ut.transition=n,Ae=t,Ae===0&&(Ar(),En())}},s.flushPassiveEffects=gr,s.flushSync=Zs,s.focusWithin=function(e,t){if(!Xt)throw Error(p(363));for(e=xl(e),t=js(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!Tt(n)){if(n.tag===5&&lr(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},s.getCurrentUpdatePriority=function(){return Ze},s.getFindAllNodesFailureDescription=function(e,t){if(!Xt)throw Error(p(363));var n=0,r=[];e=[xl(e),0];for(var o=0;o<e.length;){var u=e[o++],y=e[o++],x=t[y];if((u.tag!==5||!Tt(u))&&(Ml(u,x)&&(r.push(Pl(x)),y++,y>n&&(n=y)),y<t.length))for(u=u.child;u!==null;)e.push(u,y),u=u.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Pl(t[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},s.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return ge(e.child.stateNode);default:return e.child.stateNode}},s.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:g.ReactCurrentDispatcher,findHostInstanceByFiber:df,findFiberByHostInstance:e.findFiberByHostInstance||pf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ai=t.inject(e),wn=t}catch{}e=!!t.checkDCE}}return e},s.isAlreadyRendering=function(){return!1},s.observeVisibleRects=function(e,t,n,r){if(!Xt)throw Error(p(363));e=Cl(e,t);var o=Lt(e,n,r).disconnect;return{disconnect:function(){o()}}},s.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},s.runWithPriority=function(e,t){var n=Ze;try{return Ze=e,t()}finally{Ze=n}},s.shouldError=function(){return null},s.shouldSuspend=function(){return!1},s.updateContainer=function(e,t,n,r){var o=t.current,u=zt(),y=Kn(o);return n=eu(n),t.context===null?t.context=n:t.pendingContext=n,t=An(u,y),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),Vn(o,t),e=tn(o,y,u),e!==null&&Bi(e,o,y),y},s}),Yl}var pu;function ad(){return pu||(pu=1,Zl.exports=ld()),Zl.exports}var sd=ad();const ud=Xf(sd);var hu=Vu();const ha={},Yu=l=>void Object.assign(ha,l);function cd(l,i){function s(h,{args:m=[],attach:S,...M},R){let W=`${h[0].toUpperCase()}${h.slice(1)}`,F;if(h==="primitive"){if(M.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const P=M.object;F=Ur(P,{type:h,root:R,attach:S,primitive:!0})}else{const P=ha[W];if(!P)throw new Error(`R3F: ${W} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");F=Ur(new P(...m),{type:h,root:R,attach:S,memoizedProps:{args:m}})}return F.__r3f.attach===void 0&&(F.isBufferGeometry?F.__r3f.attach="geometry":F.isMaterial&&(F.__r3f.attach="material")),W!=="inject"&&bl(F,M),F}function a(h,m){let S=!1;if(m){var M,R;(M=m.__r3f)!=null&&M.attach?Kl(h,m,m.__r3f.attach):m.isObject3D&&h.isObject3D&&(h.add(m),S=!0),S||(R=h.__r3f)==null||R.objects.push(m),m.__r3f||Ur(m,{}),m.__r3f.parent=h,aa(m),Br(m)}}function f(h,m,S){let M=!1;if(m){var R,W;if((R=m.__r3f)!=null&&R.attach)Kl(h,m,m.__r3f.attach);else if(m.isObject3D&&h.isObject3D){m.parent=h,m.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:m});const F=h.children.filter(k=>k!==m),P=F.indexOf(S);h.children=[...F.slice(0,P),m,...F.slice(P)],M=!0}M||(W=h.__r3f)==null||W.objects.push(m),m.__r3f||Ur(m,{}),m.__r3f.parent=h,aa(m),Br(m)}}function v(h,m,S=!1){h&&[...h].forEach(M=>p(m,M,S))}function p(h,m,S){if(m){var M,R,W;if(m.__r3f&&(m.__r3f.parent=null),(M=h.__r3f)!=null&&M.objects&&(h.__r3f.objects=h.__r3f.objects.filter($=>$!==m)),(R=m.__r3f)!=null&&R.attach)wu(h,m,m.__r3f.attach);else if(m.isObject3D&&h.isObject3D){var F;h.remove(m),(F=m.__r3f)!=null&&F.root&&gd(ko(m),m)}const k=(W=m.__r3f)==null?void 0:W.primitive,H=!k&&(S===void 0?m.dispose!==null:S);if(!k){var P;v((P=m.__r3f)==null?void 0:P.objects,m,H),v(m.children,m,H)}if(delete m.__r3f,H&&m.dispose&&m.type!=="Scene"){const $=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?hu.unstable_scheduleCallback(hu.unstable_IdlePriority,$):$()}Br(h)}}function g(h,m,S,M){var R;const W=(R=h.__r3f)==null?void 0:R.parent;if(!W)return;const F=s(m,S,h.__r3f.root);if(h.children){for(const P of h.children)P.__r3f&&a(F,P);h.children=h.children.filter(P=>!P.__r3f)}h.__r3f.objects.forEach(P=>a(F,P)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||p(W,h),F.parent&&(F.__r3f.autoRemovedBeforeAppend=!0),a(W,F),F.raycast&&F.__r3f.eventCount&&ko(F).getState().internal.interaction.push(F),[M,M.alternate].forEach(P=>{P!==null&&(P.stateNode=F,P.ref&&(typeof P.ref=="function"?P.ref(F):P.ref.current=F))})}const w=()=>{};return{reconciler:ud({createInstance:s,removeChild:p,appendChild:a,appendInitialChild:a,insertBefore:f,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,m)=>{if(!m)return;const S=h.getState().scene;S.__r3f&&(S.__r3f.root=h,a(S,m))},removeChildFromContainer:(h,m)=>{m&&p(h.getState().scene,m)},insertInContainerBefore:(h,m,S)=>{if(!m||!S)return;const M=h.getState().scene;M.__r3f&&f(M,m,S)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var m;return!!((m=h?.__r3f)!=null?m:{}).handlers},prepareUpdate(h,m,S,M){var R;if(((R=h?.__r3f)!=null?R:{}).primitive&&M.object&&M.object!==h)return[!0];{const{args:F=[],children:P,...k}=M,{args:H=[],children:$,...Z}=S;if(!Array.isArray(F))throw new Error("R3F: the args prop must be an array!");if(F.some((le,B)=>le!==H[B]))return[!0];const U=ec(h,k,Z,!0);return U.changes.length?[!1,U]:null}},commitUpdate(h,[m,S],M,R,W,F){m?g(h,M,W,F):bl(h,S)},commitMount(h,m,S,M){var R;const W=(R=h.__r3f)!=null?R:{};h.raycast&&W.handlers&&W.eventCount&&ko(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Ur(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var m;const{attach:S,parent:M}=(m=h.__r3f)!=null?m:{};S&&M&&wu(M,h,S),h.isObject3D&&(h.visible=!1),Br(h)},unhideInstance(h,m){var S;const{attach:M,parent:R}=(S=h.__r3f)!=null?S:{};M&&R&&Kl(R,h,M),(h.isObject3D&&m.visible==null||m.visible)&&(h.visible=!0),Br(h)},createTextInstance:w,hideTextInstance:w,unhideTextInstance:w,getCurrentEventPriority:()=>i?i():Wr.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&et.fun(performance.now)?performance.now:et.fun(Date.now)?Date.now:()=>0,scheduleTimeout:et.fun(setTimeout)?setTimeout:void 0,cancelTimeout:et.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bl}}var mu,vu;const Xl=l=>"colorSpace"in l||"outputColorSpace"in l,Xu=()=>{var l;return(l=ha.ColorManagement)!=null?l:null},Ku=l=>l&&l.isOrthographicCamera,fd=l=>l&&l.hasOwnProperty("current"),Ci=typeof window<"u"&&((mu=window.document)!=null&&mu.createElement||((vu=window.navigator)==null?void 0:vu.product)==="ReactNative")?T.useLayoutEffect:T.useEffect;function bu(l){const i=T.useRef(l);return Ci(()=>void(i.current=l),[l]),i}function dd({set:l}){return Ci(()=>(l(new Promise(()=>null)),()=>l(!1)),[l]),null}class qu extends T.Component{constructor(...i){super(...i),this.state={error:!1}}componentDidCatch(i){this.props.set(i)}render(){return this.state.error?null:this.props.children}}qu.getDerivedStateFromError=()=>({error:!0});const Ju="__default",gu=new Map,pd=l=>l&&!!l.memoized&&!!l.changes;function $u(l){var i;const s=typeof window<"u"?(i=window.devicePixelRatio)!=null?i:2:1;return Array.isArray(l)?Math.min(Math.max(l[0],s),l[1]):l}const yi=l=>{var i;return(i=l.__r3f)==null?void 0:i.root.getState()};function ko(l){let i=l.__r3f.root;for(;i.getState().previousRoot;)i=i.getState().previousRoot;return i}const et={obj:l=>l===Object(l)&&!et.arr(l)&&typeof l!="function",fun:l=>typeof l=="function",str:l=>typeof l=="string",num:l=>typeof l=="number",boo:l=>typeof l=="boolean",und:l=>l===void 0,arr:l=>Array.isArray(l),equ(l,i,{arrays:s="shallow",objects:a="reference",strict:f=!0}={}){if(typeof l!=typeof i||!!l!=!!i)return!1;if(et.str(l)||et.num(l)||et.boo(l))return l===i;const v=et.obj(l);if(v&&a==="reference")return l===i;const p=et.arr(l);if(p&&s==="reference")return l===i;if((p||v)&&l===i)return!0;let g;for(g in l)if(!(g in i))return!1;if(v&&s==="shallow"&&a==="shallow"){for(g in f?i:l)if(!et.equ(l[g],i[g],{strict:f,objects:"reference"}))return!1}else for(g in f?i:l)if(l[g]!==i[g])return!1;if(et.und(g)){if(p&&l.length===0&&i.length===0||v&&Object.keys(l).length===0&&Object.keys(i).length===0)return!0;if(l!==i)return!1}return!0}};function hd(l){const i={nodes:{},materials:{}};return l&&l.traverse(s=>{s.name&&(i.nodes[s.name]=s),s.material&&!i.materials[s.material.name]&&(i.materials[s.material.name]=s.material)}),i}function md(l){l.dispose&&l.type!=="Scene"&&l.dispose();for(const i in l)i.dispose==null||i.dispose(),delete l[i]}function Ur(l,i){const s=l;return s.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...i},l}function la(l,i){let s=l;if(i.includes("-")){const a=i.split("-"),f=a.pop();return s=a.reduce((v,p)=>v[p],l),{target:s,key:f}}else return{target:s,key:i}}const yu=/-\d+$/;function Kl(l,i,s){if(et.str(s)){if(yu.test(s)){const v=s.replace(yu,""),{target:p,key:g}=la(l,v);Array.isArray(p[g])||(p[g]=[])}const{target:a,key:f}=la(l,s);i.__r3f.previousAttach=a[f],a[f]=i}else i.__r3f.previousAttach=s(l,i)}function wu(l,i,s){var a,f;if(et.str(s)){const{target:v,key:p}=la(l,s),g=i.__r3f.previousAttach;g===void 0?delete v[p]:v[p]=g}else(a=i.__r3f)==null||a.previousAttach==null||a.previousAttach(l,i);(f=i.__r3f)==null||delete f.previousAttach}function ec(l,{children:i,key:s,ref:a,...f},{children:v,key:p,ref:g,...w}={},E=!1){const h=l.__r3f,m=Object.entries(f),S=[];if(E){const R=Object.keys(w);for(let W=0;W<R.length;W++)f.hasOwnProperty(R[W])||m.unshift([R[W],Ju+"remove"])}m.forEach(([R,W])=>{var F;if((F=l.__r3f)!=null&&F.primitive&&R==="object"||et.equ(W,w[R]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(R))return S.push([R,W,!0,[]]);let P=[];R.includes("-")&&(P=R.split("-")),S.push([R,W,!1,P]);for(const k in f){const H=f[k];k.startsWith(`${R}-`)&&S.push([k,H,!1,k.split("-")])}});const M={...f};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(M.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(M.attach=h.memoizedProps.attach),{memoized:M,changes:S}}function bl(l,i){var s;const a=l.__r3f,f=a?.root,v=f==null||f.getState==null?void 0:f.getState(),{memoized:p,changes:g}=pd(i)?i:ec(l,i),w=a?.eventCount;l.__r3f&&(l.__r3f.memoizedProps=p);for(let S=0;S<g.length;S++){let[M,R,W,F]=g[S];if(Xl(l)){const $="srgb",Z="srgb-linear";M==="encoding"?(M="colorSpace",R=R===3001?$:Z):M==="outputEncoding"&&(M="outputColorSpace",R=R===3001?$:Z)}let P=l,k=P[M];if(F.length&&(k=F.reduce((H,$)=>H[$],l),!(k&&k.set))){const[H,...$]=F.reverse();P=$.reverse().reduce((Z,U)=>Z[U],l),M=H}if(R===Ju+"remove")if(P.constructor){let H=gu.get(P.constructor);H||(H=new P.constructor,gu.set(P.constructor,H)),R=H[M]}else R=0;if(W&&a)R?a.handlers[M]=R:delete a.handlers[M],a.eventCount=Object.keys(a.handlers).length;else if(k&&k.set&&(k.copy||k instanceof Wl)){if(Array.isArray(R))k.fromArray?k.fromArray(R):k.set(...R);else if(k.copy&&R&&R.constructor&&k.constructor===R.constructor)k.copy(R);else if(R!==void 0){var E;const H=(E=k)==null?void 0:E.isColor;!H&&k.setScalar?k.setScalar(R):k instanceof Wl&&R instanceof Wl?k.mask=R.mask:k.set(R),!Xu()&&v&&!v.linear&&H&&k.convertSRGBToLinear()}}else{var h;if(P[M]=R,(h=P[M])!=null&&h.isTexture&&P[M].format===Vr&&P[M].type===No&&v){const H=P[M];Xl(H)&&Xl(v.gl)?H.colorSpace=v.gl.outputColorSpace:H.encoding=v.gl.outputEncoding}}Br(l)}if(a&&a.parent&&l.raycast&&w!==a.eventCount){const S=ko(l).getState().internal,M=S.interaction.indexOf(l);M>-1&&S.interaction.splice(M,1),a.eventCount&&S.interaction.push(l)}return!(g.length===1&&g[0][0]==="onUpdate")&&g.length&&(s=l.__r3f)!=null&&s.parent&&aa(l),l}function Br(l){var i,s;const a=(i=l.__r3f)==null||(s=i.root)==null||s.getState==null?void 0:s.getState();a&&a.internal.frames===0&&a.invalidate()}function aa(l){l.onUpdate==null||l.onUpdate(l)}function tc(l,i){l.manual||(Ku(l)?(l.left=i.width/-2,l.right=i.width/2,l.top=i.height/2,l.bottom=i.height/-2):l.aspect=i.width/i.height,l.updateProjectionMatrix(),l.updateMatrixWorld())}function Mo(l){return(l.eventObject||l.object).uuid+"/"+l.index+l.instanceId}function vd(){var l;const i=typeof self<"u"&&self||typeof window<"u"&&window;if(!i)return Wr.DefaultEventPriority;switch((l=i.event)==null?void 0:l.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wr.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wr.ContinuousEventPriority;default:return Wr.DefaultEventPriority}}function nc(l,i,s,a){const f=s.get(i);f&&(s.delete(i),s.size===0&&(l.delete(a),f.target.releasePointerCapture(a)))}function gd(l,i){const{internal:s}=l.getState();s.interaction=s.interaction.filter(a=>a!==i),s.initialHits=s.initialHits.filter(a=>a!==i),s.hovered.forEach((a,f)=>{(a.eventObject===i||a.object===i)&&s.hovered.delete(f)}),s.capturedMap.forEach((a,f)=>{nc(s.capturedMap,i,a,f)})}function yd(l){function i(w){const{internal:E}=l.getState(),h=w.offsetX-E.initialClick[0],m=w.offsetY-E.initialClick[1];return Math.round(Math.sqrt(h*h+m*m))}function s(w){return w.filter(E=>["Move","Over","Enter","Out","Leave"].some(h=>{var m;return(m=E.__r3f)==null?void 0:m.handlers["onPointer"+h]}))}function a(w,E){const h=l.getState(),m=new Set,S=[],M=E?E(h.internal.interaction):h.internal.interaction;for(let P=0;P<M.length;P++){const k=yi(M[P]);k&&(k.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(w,h);function R(P){const k=yi(P);if(!k||!k.events.enabled||k.raycaster.camera===null)return[];if(k.raycaster.camera===void 0){var H;k.events.compute==null||k.events.compute(w,k,(H=k.previousRoot)==null?void 0:H.getState()),k.raycaster.camera===void 0&&(k.raycaster.camera=null)}return k.raycaster.camera?k.raycaster.intersectObject(P,!0):[]}let W=M.flatMap(R).sort((P,k)=>{const H=yi(P.object),$=yi(k.object);return!H||!$?P.distance-k.distance:$.events.priority-H.events.priority||P.distance-k.distance}).filter(P=>{const k=Mo(P);return m.has(k)?!1:(m.add(k),!0)});h.events.filter&&(W=h.events.filter(W,h));for(const P of W){let k=P.object;for(;k;){var F;(F=k.__r3f)!=null&&F.eventCount&&S.push({...P,eventObject:k}),k=k.parent}}if("pointerId"in w&&h.internal.capturedMap.has(w.pointerId))for(let P of h.internal.capturedMap.get(w.pointerId).values())m.has(Mo(P.intersection))||S.push(P.intersection);return S}function f(w,E,h,m){const S=l.getState();if(w.length){const M={stopped:!1};for(const R of w){const W=yi(R.object)||S,{raycaster:F,pointer:P,camera:k,internal:H}=W,$=new je(P.x,P.y,0).unproject(k),Z=Q=>{var G,se;return(G=(se=H.capturedMap.get(Q))==null?void 0:se.has(R.eventObject))!=null?G:!1},U=Q=>{const G={intersection:R,target:E.target};H.capturedMap.has(Q)?H.capturedMap.get(Q).set(R.eventObject,G):H.capturedMap.set(Q,new Map([[R.eventObject,G]])),E.target.setPointerCapture(Q)},le=Q=>{const G=H.capturedMap.get(Q);G&&nc(H.capturedMap,R.eventObject,G,Q)};let B={};for(let Q in E){let G=E[Q];typeof G!="function"&&(B[Q]=G)}let j={...R,...B,pointer:P,intersections:w,stopped:M.stopped,delta:h,unprojectedPoint:$,ray:F.ray,camera:k,stopPropagation(){const Q="pointerId"in E&&H.capturedMap.get(E.pointerId);if((!Q||Q.has(R.eventObject))&&(j.stopped=M.stopped=!0,H.hovered.size&&Array.from(H.hovered.values()).find(G=>G.eventObject===R.eventObject))){const G=w.slice(0,w.indexOf(R));v([...G,R])}},target:{hasPointerCapture:Z,setPointerCapture:U,releasePointerCapture:le},currentTarget:{hasPointerCapture:Z,setPointerCapture:U,releasePointerCapture:le},nativeEvent:E};if(m(j),M.stopped===!0)break}}return w}function v(w){const{internal:E}=l.getState();for(const h of E.hovered.values())if(!w.length||!w.find(m=>m.object===h.object&&m.index===h.index&&m.instanceId===h.instanceId)){const S=h.eventObject.__r3f,M=S?.handlers;if(E.hovered.delete(Mo(h)),S!=null&&S.eventCount){const R={...h,intersections:w};M.onPointerOut==null||M.onPointerOut(R),M.onPointerLeave==null||M.onPointerLeave(R)}}}function p(w,E){for(let h=0;h<E.length;h++){const m=E[h].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(w)}}function g(w){switch(w){case"onPointerLeave":case"onPointerCancel":return()=>v([]);case"onLostPointerCapture":return E=>{const{internal:h}=l.getState();"pointerId"in E&&h.capturedMap.has(E.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(E.pointerId)&&(h.capturedMap.delete(E.pointerId),v([]))})}}return function(h){const{onPointerMissed:m,internal:S}=l.getState();S.lastEvent.current=h;const M=w==="onPointerMove",R=w==="onClick"||w==="onContextMenu"||w==="onDoubleClick",F=a(h,M?s:void 0),P=R?i(h):0;w==="onPointerDown"&&(S.initialClick=[h.offsetX,h.offsetY],S.initialHits=F.map(H=>H.eventObject)),R&&!F.length&&P<=2&&(p(h,S.interaction),m&&m(h)),M&&v(F);function k(H){const $=H.eventObject,Z=$.__r3f,U=Z?.handlers;if(Z!=null&&Z.eventCount)if(M){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const le=Mo(H),B=S.hovered.get(le);B?B.stopped&&H.stopPropagation():(S.hovered.set(le,H),U.onPointerOver==null||U.onPointerOver(H),U.onPointerEnter==null||U.onPointerEnter(H))}U.onPointerMove==null||U.onPointerMove(H)}else{const le=U[w];le?(!R||S.initialHits.includes($))&&(p(h,S.interaction.filter(B=>!S.initialHits.includes(B))),le(H)):R&&S.initialHits.includes($)&&p(h,S.interaction.filter(B=>!S.initialHits.includes(B)))}}f(F,h,P,k)}}return{handlePointer:g}}const wd=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],rc=l=>!!(l!=null&&l.render),ma=T.createContext(null),Sd=(l,i)=>{const s=Gu((g,w)=>{const E=new je,h=new je,m=new je;function S(P=w().camera,k=h,H=w().size){const{width:$,height:Z,top:U,left:le}=H,B=$/Z;k.isVector3?m.copy(k):m.set(...k);const j=P.getWorldPosition(E).distanceTo(m);if(Ku(P))return{width:$/P.zoom,height:Z/P.zoom,top:U,left:le,factor:1,distance:j,aspect:B};{const Q=P.fov*Math.PI/180,G=2*Math.tan(Q/2)*j,se=G*($/Z);return{width:se,height:G,top:U,left:le,factor:$/se,distance:j,aspect:B}}}let M;const R=P=>g(k=>({performance:{...k.performance,current:P}})),W=new Ht;return{set:g,get:w,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(P=1)=>l(w(),P),advance:(P,k)=>i(P,k,w()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new xf,pointer:W,mouse:W,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const P=w();M&&clearTimeout(M),P.performance.current!==P.performance.min&&R(P.performance.min),M=setTimeout(()=>R(w().performance.max),P.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:S},setEvents:P=>g(k=>({...k,events:{...k.events,...P}})),setSize:(P,k,H,$,Z)=>{const U=w().camera,le={width:P,height:k,top:$||0,left:Z||0,updateStyle:H};g(B=>({size:le,viewport:{...B.viewport,...S(U,h,le)}}))},setDpr:P=>g(k=>{const H=$u(P);return{viewport:{...k.viewport,dpr:H,initialDpr:k.viewport.initialDpr||H}}}),setFrameloop:(P="always")=>{const k=w().clock;k.stop(),k.elapsedTime=0,P!=="never"&&(k.start(),k.elapsedTime=0),g(()=>({frameloop:P}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:T.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(P,k,H)=>{const $=w().internal;return $.priority=$.priority+(k>0?1:0),$.subscribers.push({ref:P,priority:k,store:H}),$.subscribers=$.subscribers.sort((Z,U)=>Z.priority-U.priority),()=>{const Z=w().internal;Z!=null&&Z.subscribers&&(Z.priority=Z.priority-(k>0?1:0),Z.subscribers=Z.subscribers.filter(U=>U.ref!==P))}}}}}),a=s.getState();let f=a.size,v=a.viewport.dpr,p=a.camera;return s.subscribe(()=>{const{camera:g,size:w,viewport:E,gl:h,set:m}=s.getState();if(w.width!==f.width||w.height!==f.height||E.dpr!==v){var S;f=w,v=E.dpr,tc(g,w),h.setPixelRatio(E.dpr);const M=(S=w.updateStyle)!=null?S:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(w.width,w.height,M)}g!==p&&(p=g,m(M=>({viewport:{...M.viewport,...M.viewport.getCurrentViewport(g)}})))}),s.subscribe(g=>l(g)),s};let Po,Ed=new Set,_d=new Set,xd=new Set;function ql(l,i){if(l.size)for(const{callback:s}of l.values())s(i)}function wi(l,i){switch(l){case"before":return ql(Ed,i);case"after":return ql(_d,i);case"tail":return ql(xd,i)}}let Jl,$l;function ea(l,i,s){let a=i.clock.getDelta();for(i.frameloop==="never"&&typeof l=="number"&&(a=l-i.clock.elapsedTime,i.clock.oldTime=i.clock.elapsedTime,i.clock.elapsedTime=l),Jl=i.internal.subscribers,Po=0;Po<Jl.length;Po++)$l=Jl[Po],$l.ref.current($l.store.getState(),a,s);return!i.internal.priority&&i.gl.render&&i.gl.render(i.scene,i.camera),i.internal.frames=Math.max(0,i.internal.frames-1),i.frameloop==="always"?1:i.internal.frames}function Md(l){let i=!1,s=!1,a,f,v;function p(E){f=requestAnimationFrame(p),i=!0,a=0,wi("before",E),s=!0;for(const m of l.values()){var h;v=m.store.getState(),v.internal.active&&(v.frameloop==="always"||v.internal.frames>0)&&!((h=v.gl.xr)!=null&&h.isPresenting)&&(a+=ea(E,v))}if(s=!1,wi("after",E),a===0)return wi("tail",E),i=!1,cancelAnimationFrame(f)}function g(E,h=1){var m;if(!E)return l.forEach(S=>g(S.store.getState(),h));(m=E.gl.xr)!=null&&m.isPresenting||!E.internal.active||E.frameloop==="never"||(h>1?E.internal.frames=Math.min(60,E.internal.frames+h):s?E.internal.frames=2:E.internal.frames=1,i||(i=!0,requestAnimationFrame(p)))}function w(E,h=!0,m,S){if(h&&wi("before",E),m)ea(E,m,S);else for(const M of l.values())ea(E,M.store.getState());h&&wi("after",E)}return{loop:p,invalidate:g,advance:w}}function va(){const l=T.useContext(ma);if(!l)throw new Error("R3F: Hooks can only be used within the Canvas component!");return l}function jt(l=s=>s,i){return va()(l,i)}function Kr(l,i=0){const s=va(),a=s.getState().internal.subscribe,f=bu(l);return Ci(()=>a(f,i,s),[i,a,s]),null}const Su=new WeakMap;function ic(l,i){return function(s,...a){let f=Su.get(s);return f||(f=new s,Su.set(s,f)),l&&l(f),Promise.all(a.map(v=>new Promise((p,g)=>f.load(v,w=>{w.scene&&Object.assign(w,hd(w.scene)),p(w)},i,w=>g(new Error(`Could not load ${v}: ${w?.message}`))))))}}function Yr(l,i,s,a){const f=Array.isArray(i)?i:[i],v=nd(ic(s,a),[l,...f],{equal:et.equ});return Array.isArray(i)?v:v[0]}Yr.preload=function(l,i,s){const a=Array.isArray(i)?i:[i];return rd(ic(s),[l,...a])};Yr.clear=function(l,i){const s=Array.isArray(i)?i:[i];return id([l,...s])};const Xr=new Map,{invalidate:Eu,advance:_u}=Md(Xr),{reconciler:Mi,applyProps:tr}=cd(Xr,vd),Dr={objects:"shallow",strict:!1},Pd=(l,i)=>{const s=typeof l=="function"?l(i):l;return rc(s)?s:new Du({powerPreference:"high-performance",canvas:i,antialias:!0,alpha:!0,...l})};function Cd(l,i){const s=typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement;if(i){const{width:a,height:f,top:v,left:p,updateStyle:g=s}=i;return{width:a,height:f,top:v,left:p,updateStyle:g}}else if(typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&l.parentElement){const{width:a,height:f,top:v,left:p}=l.parentElement.getBoundingClientRect();return{width:a,height:f,top:v,left:p,updateStyle:s}}else if(typeof OffscreenCanvas<"u"&&l instanceof OffscreenCanvas)return{width:l.width,height:l.height,top:0,left:0,updateStyle:s};return{width:0,height:0,top:0,left:0}}function Rd(l){const i=Xr.get(l),s=i?.fiber,a=i?.store;i&&console.warn("R3F.createRoot should only be called once!");const f=typeof reportError=="function"?reportError:console.error,v=a||Sd(Eu,_u),p=s||Mi.createContainer(v,Wr.ConcurrentRoot,null,!1,null,"",f,null);i||Xr.set(l,{fiber:p,store:v});let g,w=!1,E;return{configure(h={}){let{gl:m,size:S,scene:M,events:R,onCreated:W,shadows:F=!1,linear:P=!1,flat:k=!1,legacy:H=!1,orthographic:$=!1,frameloop:Z="always",dpr:U=[1,2],performance:le,raycaster:B,camera:j,onPointerMissed:Q}=h,G=v.getState(),se=G.gl;G.gl||G.set({gl:se=Pd(m,l)});let he=G.raycaster;he||G.set({raycaster:he=new Fu});const{params:de,...Ee}=B||{};if(et.equ(Ee,he,Dr)||tr(he,{...Ee}),et.equ(de,he.params,Dr)||tr(he,{params:{...he.params,...de}}),!G.camera||G.camera===E&&!et.equ(E,j,Dr)){E=j;const V=j instanceof _f,pe=V?j:$?new Er(0,0,0,0,.1,1e3):new Gr(75,0,.1,1e3);V||(pe.position.z=5,j&&(tr(pe,j),("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(pe.manual=!0,pe.updateProjectionMatrix())),!G.camera&&!(j!=null&&j.rotation)&&pe.lookAt(0,0,0)),G.set({camera:pe}),he.camera=pe}if(!G.scene){let V;M!=null&&M.isScene?V=M:(V=new fa,M&&tr(V,M)),G.set({scene:Ur(V)})}if(!G.xr){var ge;const V=(me,We)=>{const tt=v.getState();tt.frameloop!=="never"&&_u(me,!0,tt,We)},pe=()=>{const me=v.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?V:null),me.gl.xr.isPresenting||Eu(me)},ue={connect(){const me=v.getState().gl;me.xr.addEventListener("sessionstart",pe),me.xr.addEventListener("sessionend",pe)},disconnect(){const me=v.getState().gl;me.xr.removeEventListener("sessionstart",pe),me.xr.removeEventListener("sessionend",pe)}};typeof((ge=se.xr)==null?void 0:ge.addEventListener)=="function"&&ue.connect(),G.set({xr:ue})}if(se.shadowMap){const V=se.shadowMap.enabled,pe=se.shadowMap.type;if(se.shadowMap.enabled=!!F,et.boo(F))se.shadowMap.type=jl;else if(et.str(F)){var Le;const ue={basic:wf,percentage:yf,soft:jl,variance:gf};se.shadowMap.type=(Le=ue[F])!=null?Le:jl}else et.obj(F)&&Object.assign(se.shadowMap,F);(V!==se.shadowMap.enabled||pe!==se.shadowMap.type)&&(se.shadowMap.needsUpdate=!0)}const X=Xu();X&&("enabled"in X?X.enabled=!H:"legacyMode"in X&&(X.legacyMode=H)),w||tr(se,{outputEncoding:P?3e3:3001,toneMapping:k?Sf:Ef}),G.legacy!==H&&G.set(()=>({legacy:H})),G.linear!==P&&G.set(()=>({linear:P})),G.flat!==k&&G.set(()=>({flat:k})),m&&!et.fun(m)&&!rc(m)&&!et.equ(m,se,Dr)&&tr(se,m),R&&!G.events.handlers&&G.set({events:R(v)});const oe=Cd(l,S);return et.equ(oe,G.size,Dr)||G.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),U&&G.viewport.dpr!==$u(U)&&G.setDpr(U),G.frameloop!==Z&&G.setFrameloop(Z),G.onPointerMissed||G.set({onPointerMissed:Q}),le&&!et.equ(le,G.performance,Dr)&&G.set(V=>({performance:{...V.performance,...le}})),g=W,w=!0,this},render(h){return w||this.configure(),Mi.updateContainer(Ot.jsx(Id,{store:v,children:h,onCreated:g,rootElement:l}),p,null,()=>{}),v},unmount(){oc(l)}}}function Id({store:l,children:i,onCreated:s,rootElement:a}){return Ci(()=>{const f=l.getState();f.set(v=>({internal:{...v.internal,active:!0}})),s&&s(f),l.getState().events.connected||f.events.connect==null||f.events.connect(a)},[]),Ot.jsx(ma.Provider,{value:l,children:i})}function oc(l,i){const s=Xr.get(l),a=s?.fiber;if(a){const f=s?.store.getState();f&&(f.internal.active=!1),Mi.updateContainer(null,a,null,()=>{f&&setTimeout(()=>{try{var v,p,g,w;f.events.disconnect==null||f.events.disconnect(),(v=f.gl)==null||(p=v.renderLists)==null||p.dispose==null||p.dispose(),(g=f.gl)==null||g.forceContextLoss==null||g.forceContextLoss(),(w=f.gl)!=null&&w.xr&&f.xr.disconnect(),md(f),Xr.delete(l)}catch{}},500)})}}function Td(l,i,s){return Ot.jsx(kd,{children:l,container:i,state:s},i.uuid)}function kd({state:l={},children:i,container:s}){const{events:a,size:f,...v}=l,p=va(),[g]=T.useState(()=>new Fu),[w]=T.useState(()=>new Ht),E=T.useCallback((m,S)=>{const M={...m};Object.keys(m).forEach(W=>{(wd.includes(W)||m[W]!==S[W]&&S[W])&&delete M[W]});let R;if(S&&f){const W=S.camera;R=m.viewport.getCurrentViewport(W,new je,f),W!==m.camera&&tc(W,f)}return{...M,scene:s,raycaster:g,pointer:w,mouse:w,previousRoot:p,events:{...m.events,...S?.events,...a},size:{...m.size,...f},viewport:{...m.viewport,...R},...v}},[l]),[h]=T.useState(()=>{const m=p.getState();return Gu((M,R)=>({...m,scene:s,raycaster:g,pointer:w,mouse:w,previousRoot:p,events:{...m.events,...a},size:{...m.size,...f},...v,set:M,get:R,setEvents:W=>M(F=>({...F,events:{...F.events,...W}}))}))});return T.useEffect(()=>{const m=p.subscribe(S=>h.setState(M=>E(S,M)));return()=>{m()}},[E]),T.useEffect(()=>{h.setState(m=>E(p.getState(),m))},[E]),T.useEffect(()=>()=>{h.destroy()},[]),Ot.jsx(Ot.Fragment,{children:Mi.createPortal(Ot.jsx(ma.Provider,{value:h,children:i}),h,null)})}Mi.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:T.version});const ta={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Nd(l){const{handlePointer:i}=yd(l);return{priority:1,enabled:!0,compute(s,a,f){a.pointer.set(s.offsetX/a.size.width*2-1,-(s.offsetY/a.size.height)*2+1),a.raycaster.setFromCamera(a.pointer,a.camera)},connected:void 0,handlers:Object.keys(ta).reduce((s,a)=>({...s,[a]:i(a)}),{}),update:()=>{var s;const{events:a,internal:f}=l.getState();(s=f.lastEvent)!=null&&s.current&&a.handlers&&a.handlers.onPointerMove(f.lastEvent.current)},connect:s=>{var a;const{set:f,events:v}=l.getState();v.disconnect==null||v.disconnect(),f(p=>({events:{...p.events,connected:s}})),Object.entries((a=v.handlers)!=null?a:[]).forEach(([p,g])=>{const[w,E]=ta[p];s.addEventListener(w,g,{passive:E})})},disconnect:()=>{const{set:s,events:a}=l.getState();if(a.connected){var f;Object.entries((f=a.handlers)!=null?f:[]).forEach(([v,p])=>{if(a&&a.connected instanceof HTMLElement){const[g]=ta[v];a.connected.removeEventListener(g,p)}}),s(v=>({events:{...v.events,connected:void 0}}))}}}}function xu(l,i){let s;return(...a)=>{window.clearTimeout(s),s=window.setTimeout(()=>l(...a),i)}}function zd({debounce:l,scroll:i,polyfill:s,offsetSize:a}={debounce:0,scroll:!1,offsetSize:!1}){const f=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!f)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[v,p]=T.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),g=T.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:v,orientationHandler:null}),w=l?typeof l=="number"?l:l.scroll:null,E=l?typeof l=="number"?l:l.resize:null,h=T.useRef(!1);T.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[m,S,M]=T.useMemo(()=>{const P=()=>{if(!g.current.element)return;const{left:k,top:H,width:$,height:Z,bottom:U,right:le,x:B,y:j}=g.current.element.getBoundingClientRect(),Q={left:k,top:H,width:$,height:Z,bottom:U,right:le,x:B,y:j};g.current.element instanceof HTMLElement&&a&&(Q.height=g.current.element.offsetHeight,Q.width=g.current.element.offsetWidth),Object.freeze(Q),h.current&&!Fd(g.current.lastBounds,Q)&&p(g.current.lastBounds=Q)};return[P,E?xu(P,E):P,w?xu(P,w):P]},[p,a,w,E]);function R(){g.current.scrollContainers&&(g.current.scrollContainers.forEach(P=>P.removeEventListener("scroll",M,!0)),g.current.scrollContainers=null),g.current.resizeObserver&&(g.current.resizeObserver.disconnect(),g.current.resizeObserver=null),g.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",g.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",g.current.orientationHandler))}function W(){g.current.element&&(g.current.resizeObserver=new f(M),g.current.resizeObserver.observe(g.current.element),i&&g.current.scrollContainers&&g.current.scrollContainers.forEach(P=>P.addEventListener("scroll",M,{capture:!0,passive:!0})),g.current.orientationHandler=()=>{M()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",g.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",g.current.orientationHandler))}const F=P=>{!P||P===g.current.element||(R(),g.current.element=P,g.current.scrollContainers=lc(P),W())};return Ad(M,!!i),Od(S),T.useEffect(()=>{R(),W()},[i,M,S]),T.useEffect(()=>R,[]),[F,v,m]}function Od(l){T.useEffect(()=>{const i=l;return window.addEventListener("resize",i),()=>void window.removeEventListener("resize",i)},[l])}function Ad(l,i){T.useEffect(()=>{if(i){const s=l;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[l,i])}function lc(l){const i=[];if(!l||l===document.body)return i;const{overflow:s,overflowX:a,overflowY:f}=window.getComputedStyle(l);return[s,a,f].some(v=>v==="auto"||v==="scroll")&&i.push(l),[...i,...lc(l.parentElement)]}const Ld=["x","y","top","bottom","left","right","width","height"],Fd=(l,i)=>Ld.every(s=>l[s]===i[s]);var Dd=Object.defineProperty,Ud=Object.defineProperties,Bd=Object.getOwnPropertyDescriptors,Mu=Object.getOwnPropertySymbols,Hd=Object.prototype.hasOwnProperty,jd=Object.prototype.propertyIsEnumerable,Pu=(l,i,s)=>i in l?Dd(l,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[i]=s,Cu=(l,i)=>{for(var s in i||(i={}))Hd.call(i,s)&&Pu(l,s,i[s]);if(Mu)for(var s of Mu(i))jd.call(i,s)&&Pu(l,s,i[s]);return l},Wd=(l,i)=>Ud(l,Bd(i)),Ru,Iu;typeof window<"u"&&((Ru=window.document)!=null&&Ru.createElement||((Iu=window.navigator)==null?void 0:Iu.product)==="ReactNative")?T.useLayoutEffect:T.useEffect;function ac(l,i,s){if(!l)return;if(s(l)===!0)return l;let a=l.child;for(;a;){const f=ac(a,i,s);if(f)return f;a=a.sibling}}function sc(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const Tu=console.error;console.error=function(){const l=[...arguments].join("");if(l?.startsWith("Warning:")&&l.includes("useContext")){console.error=Tu;return}return Tu.apply(this,arguments)};const ga=sc(T.createContext(null));class uc extends T.Component{render(){return T.createElement(ga.Provider,{value:this._reactInternals},this.props.children)}}function Gd(){const l=T.useContext(ga);if(l===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const i=T.useId();return T.useMemo(()=>{for(const a of[l,l?.alternate]){if(!a)continue;const f=ac(a,!1,v=>{let p=v.memoizedState;for(;p;){if(p.memoizedState===i)return!0;p=p.next}});if(f)return f}},[l,i])}function Zd(){const l=Gd(),[i]=T.useState(()=>new Map);i.clear();let s=l;for(;s;){if(s.type&&typeof s.type=="object"){const f=s.type._context===void 0&&s.type.Provider===s.type?s.type:s.type._context;f&&f!==ga&&!i.has(f)&&i.set(f,T.useContext(sc(f)))}s=s.return}return i}function Qd(){const l=Zd();return T.useMemo(()=>Array.from(l.keys()).reduce((i,s)=>a=>T.createElement(i,null,T.createElement(s.Provider,Wd(Cu({},a),{value:l.get(s)}))),i=>T.createElement(uc,Cu({},i))),[l])}const Vd=T.forwardRef(function({children:i,fallback:s,resize:a,style:f,gl:v,events:p=Nd,eventSource:g,eventPrefix:w,shadows:E,linear:h,flat:m,legacy:S,orthographic:M,frameloop:R,dpr:W,performance:F,raycaster:P,camera:k,scene:H,onPointerMissed:$,onCreated:Z,...U},le){T.useMemo(()=>Yu(Mf),[]);const B=Qd(),[j,Q]=zd({scroll:!0,debounce:{scroll:50,resize:0},...a}),G=T.useRef(null),se=T.useRef(null);T.useImperativeHandle(le,()=>G.current);const he=bu($),[de,Ee]=T.useState(!1),[ge,Le]=T.useState(!1);if(de)throw de;if(ge)throw ge;const X=T.useRef(null);Ci(()=>{const V=G.current;Q.width>0&&Q.height>0&&V&&(X.current||(X.current=Rd(V)),X.current.configure({gl:v,events:p,shadows:E,linear:h,flat:m,legacy:S,orthographic:M,frameloop:R,dpr:W,performance:F,raycaster:P,camera:k,scene:H,size:Q,onPointerMissed:(...pe)=>he.current==null?void 0:he.current(...pe),onCreated:pe=>{pe.events.connect==null||pe.events.connect(g?fd(g)?g.current:g:se.current),w&&pe.setEvents({compute:(ue,me)=>{const We=ue[w+"X"],tt=ue[w+"Y"];me.pointer.set(We/me.size.width*2-1,-(tt/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),Z?.(pe)}}),X.current.render(Ot.jsx(B,{children:Ot.jsx(qu,{set:Le,children:Ot.jsx(T.Suspense,{fallback:Ot.jsx(dd,{set:Ee}),children:i??null})})})))}),T.useEffect(()=>{const V=G.current;if(V)return()=>oc(V)},[]);const oe=g?"none":"auto";return Ot.jsx("div",{ref:se,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:oe,...f},...U,children:Ot.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:Ot.jsx("canvas",{ref:G,style:{display:"block"},children:s})})})}),th=T.forwardRef(function(i,s){return Ot.jsx(uc,{children:Ot.jsx(Vd,{...i,ref:s})})}),Ri=new je,ya=new je,Yd=new je,ku=new Ht;function Xd(l,i,s){const a=Ri.setFromMatrixPosition(l.matrixWorld);a.project(i);const f=s.width/2,v=s.height/2;return[a.x*f+f,-(a.y*v)+v]}function Kd(l,i){const s=Ri.setFromMatrixPosition(l.matrixWorld),a=ya.setFromMatrixPosition(i.matrixWorld),f=s.sub(a),v=i.getWorldDirection(Yd);return f.angleTo(v)>Math.PI/2}function bd(l,i,s,a){const f=Ri.setFromMatrixPosition(l.matrixWorld),v=f.clone();v.project(i),ku.set(v.x,v.y),s.setFromCamera(ku,i);const p=s.intersectObjects(a,!0);if(p.length){const g=p[0].distance;return f.distanceTo(s.ray.origin)<g}return!0}function qd(l,i){if(i instanceof Er)return i.zoom;if(i instanceof Gr){const s=Ri.setFromMatrixPosition(l.matrixWorld),a=ya.setFromMatrixPosition(i.matrixWorld),f=i.fov*Math.PI/180,v=s.distanceTo(a);return 1/(2*Math.tan(f/2)*v)}else return 1}function Jd(l,i,s){if(i instanceof Gr||i instanceof Er){const a=Ri.setFromMatrixPosition(l.matrixWorld),f=ya.setFromMatrixPosition(i.matrixWorld),v=a.distanceTo(f),p=(s[1]-s[0])/(i.far-i.near),g=s[1]-p*i.far;return Math.round(p*v+g)}}const sa=l=>Math.abs(l)<1e-10?0:l;function cc(l,i,s=""){let a="matrix3d(";for(let f=0;f!==16;f++)a+=sa(i[f]*l.elements[f])+(f!==15?",":")");return s+a}const $d=(l=>i=>cc(i,l))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ep=(l=>(i,s)=>cc(i,l(s),"translate(-50%,-50%)"))(l=>[1/l,1/l,1/l,1,-1/l,-1/l,-1/l,-1,1/l,1/l,1/l,1,1,1,1,1]);function tp(l){return l&&typeof l=="object"&&"current"in l}const nh=T.forwardRef(({children:l,eps:i=.001,style:s,className:a,prepend:f,center:v,fullscreen:p,portal:g,distanceFactor:w,sprite:E=!1,transform:h=!1,occlude:m,onOcclude:S,castShadow:M,receiveShadow:R,material:W,geometry:F,zIndexRange:P=[16777271,0],calculatePosition:k=Xd,as:H="div",wrapperClass:$,pointerEvents:Z="auto",...U},le)=>{const{gl:B,camera:j,scene:Q,size:G,raycaster:se,events:he,viewport:de}=jt(),[Ee]=T.useState(()=>document.createElement(H)),ge=T.useRef(),Le=T.useRef(null),X=T.useRef(0),oe=T.useRef([0,0]),V=T.useRef(null),pe=T.useRef(null),ue=g?.current||he.connected||B.domElement.parentNode,me=T.useRef(null),We=T.useRef(!1),tt=T.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&tp(m[0]),[m]);T.useLayoutEffect(()=>{const lt=B.domElement;m&&m==="blending"?(lt.style.zIndex=`${Math.floor(P[0]/2)}`,lt.style.position="absolute",lt.style.pointerEvents="none"):(lt.style.zIndex=null,lt.style.position=null,lt.style.pointerEvents=null)},[m]),T.useLayoutEffect(()=>{if(Le.current){const lt=ge.current=vf.createRoot(Ee);if(Q.updateMatrixWorld(),h)Ee.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Te=k(Le.current,j,G);Ee.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Te[0]}px,${Te[1]}px,0);transform-origin:0 0;`}return ue&&(f?ue.prepend(Ee):ue.appendChild(Ee)),()=>{ue&&ue.removeChild(Ee),lt.unmount()}}},[ue,h]),T.useLayoutEffect(()=>{$&&(Ee.className=$)},[$]);const Pe=T.useMemo(()=>h?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:v?"translate3d(-50%,-50%,0)":"none",...p&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height},...s},[s,v,p,G,h]),st=T.useMemo(()=>({position:"absolute",pointerEvents:Z}),[Z]);T.useLayoutEffect(()=>{if(We.current=!1,h){var lt;(lt=ge.current)==null||lt.render(T.createElement("div",{ref:V,style:Pe},T.createElement("div",{ref:pe,style:st},T.createElement("div",{ref:le,className:a,style:s,children:l}))))}else{var Te;(Te=ge.current)==null||Te.render(T.createElement("div",{ref:le,style:Pe,className:a,children:l}))}});const ct=T.useRef(!0);Kr(lt=>{if(Le.current){j.updateMatrixWorld(),Le.current.updateWorldMatrix(!0,!1);const Te=h?oe.current:k(Le.current,j,G);if(h||Math.abs(X.current-j.zoom)>i||Math.abs(oe.current[0]-Te[0])>i||Math.abs(oe.current[1]-Te[1])>i){const St=Kd(Le.current,j);let Xe=!1;tt&&(Array.isArray(m)?Xe=m.map(At=>At.current):m!=="blending"&&(Xe=[Q]));const Wt=ct.current;if(Xe){const At=bd(Le.current,j,se,Xe);ct.current=At&&!St}else ct.current=!St;Wt!==ct.current&&(S?S(!ct.current):Ee.style.display=ct.current?"block":"none");const an=Math.floor(P[0]/2),ir=m?tt?[P[0],an]:[an-1,0]:P;if(Ee.style.zIndex=`${Jd(Le.current,j,ir)}`,h){const[At,Tn]=[G.width/2,G.height/2],pn=j.projectionMatrix.elements[5]*Tn,{isOrthographicCamera:Xt,top:or,left:Hn,bottom:hn,right:Tt}=j,kn=$d(j.matrixWorldInverse),lr=Xt?`scale(${pn})translate(${sa(-(Tt+Hn)/2)}px,${sa((or+hn)/2)}px)`:`translateZ(${pn}px)`;let Lt=Le.current.matrixWorld;E&&(Lt=j.matrixWorldInverse.clone().transpose().copyPosition(Lt).scale(Le.current.scale),Lt.elements[3]=Lt.elements[7]=Lt.elements[11]=0,Lt.elements[15]=1),Ee.style.width=G.width+"px",Ee.style.height=G.height+"px",Ee.style.perspective=Xt?"":`${pn}px`,V.current&&pe.current&&(V.current.style.transform=`${lr}${kn}translate(${At}px,${Tn}px)`,pe.current.style.transform=ep(Lt,1/((w||10)/400)))}else{const At=w===void 0?1:qd(Le.current,j)*w;Ee.style.transform=`translate3d(${Te[0]}px,${Te[1]}px,0) scale(${At})`}oe.current=Te,X.current=j.zoom}}if(!tt&&me.current&&!We.current)if(h){if(V.current){const Te=V.current.children[0];if(Te!=null&&Te.clientWidth&&Te!=null&&Te.clientHeight){const{isOrthographicCamera:St}=j;if(St||F)U.scale&&(Array.isArray(U.scale)?U.scale instanceof je?me.current.scale.copy(U.scale.clone().divideScalar(1)):me.current.scale.set(1/U.scale[0],1/U.scale[1],1/U.scale[2]):me.current.scale.setScalar(1/U.scale));else{const Xe=(w||10)/400,Wt=Te.clientWidth*Xe,an=Te.clientHeight*Xe;me.current.scale.set(Wt,an,1)}We.current=!0}}}else{const Te=Ee.children[0];if(Te!=null&&Te.clientWidth&&Te!=null&&Te.clientHeight){const St=1/de.factor,Xe=Te.clientWidth*St,Wt=Te.clientHeight*St;me.current.scale.set(Xe,Wt,1),We.current=!0}me.current.lookAt(lt.camera.position)}});const dn=T.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return T.createElement("group",In({},U,{ref:Le}),m&&!tt&&T.createElement("mesh",{castShadow:M,receiveShadow:R,ref:me},F||T.createElement("planeGeometry",null),W||T.createElement("shaderMaterial",{side:Uu,vertexShader:dn.vertexShader,fragmentShader:dn.fragmentShader})))}),fc=parseInt(Bu.replace(/\D+/g,""));function np(l,i=Math.PI/3){const s=Math.cos(i),a=(1+1e-10)*100,f=[new je,new je,new je],v=new je,p=new je,g=new je,w=new je;function E(W){const F=~~(W.x*a),P=~~(W.y*a),k=~~(W.z*a);return`${F},${P},${k}`}const h=l.index?l.toNonIndexed():l,m=h.attributes.position,S={};for(let W=0,F=m.count/3;W<F;W++){const P=3*W,k=f[0].fromBufferAttribute(m,P+0),H=f[1].fromBufferAttribute(m,P+1),$=f[2].fromBufferAttribute(m,P+2);v.subVectors($,H),p.subVectors(k,H);const Z=new je().crossVectors(v,p).normalize();for(let U=0;U<3;U++){const le=f[U],B=E(le);B in S||(S[B]=[]),S[B].push(Z)}}const M=new Float32Array(m.count*3),R=new Pf(M,3,!1);for(let W=0,F=m.count/3;W<F;W++){const P=3*W,k=f[0].fromBufferAttribute(m,P+0),H=f[1].fromBufferAttribute(m,P+1),$=f[2].fromBufferAttribute(m,P+2);v.subVectors($,H),p.subVectors(k,H),g.crossVectors(v,p).normalize();for(let Z=0;Z<3;Z++){const U=f[Z],le=E(U),B=S[le];w.set(0,0,0);for(let j=0,Q=B.length;j<Q;j++){const G=B[j];g.dot(G)>s&&w.add(G)}w.normalize(),R.setXYZ(P+Z,w.x,w.y,w.z)}}return h.setAttribute("normal",R),h}var on=Uint8Array,rr=Uint16Array,ua=Uint32Array,dc=new on([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pc=new on([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rp=new on([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hc=function(l,i){for(var s=new rr(31),a=0;a<31;++a)s[a]=i+=1<<l[a-1];for(var f=new ua(s[30]),a=1;a<30;++a)for(var v=s[a];v<s[a+1];++v)f[v]=v-s[a]<<5|a;return[s,f]},mc=hc(dc,2),vc=mc[0],ip=mc[1];vc[28]=258,ip[258]=28;var op=hc(pc,0),lp=op[0],ca=new rr(32768);for(var nt=0;nt<32768;++nt){var er=(nt&43690)>>>1|(nt&21845)<<1;er=(er&52428)>>>2|(er&13107)<<2,er=(er&61680)>>>4|(er&3855)<<4,ca[nt]=((er&65280)>>>8|(er&255)<<8)>>>1}var xi=(function(l,i,s){for(var a=l.length,f=0,v=new rr(i);f<a;++f)++v[l[f]-1];var p=new rr(i);for(f=0;f<i;++f)p[f]=p[f-1]+v[f-1]<<1;var g;if(s){g=new rr(1<<i);var w=15-i;for(f=0;f<a;++f)if(l[f])for(var E=f<<4|l[f],h=i-l[f],m=p[l[f]-1]++<<h,S=m|(1<<h)-1;m<=S;++m)g[ca[m]>>>w]=E}else for(g=new rr(a),f=0;f<a;++f)l[f]&&(g[f]=ca[p[l[f]-1]++]>>>15-l[f]);return g}),Ii=new on(288);for(var nt=0;nt<144;++nt)Ii[nt]=8;for(var nt=144;nt<256;++nt)Ii[nt]=9;for(var nt=256;nt<280;++nt)Ii[nt]=7;for(var nt=280;nt<288;++nt)Ii[nt]=8;var gc=new on(32);for(var nt=0;nt<32;++nt)gc[nt]=5;var ap=xi(Ii,9,1),sp=xi(gc,5,1),na=function(l){for(var i=l[0],s=1;s<l.length;++s)l[s]>i&&(i=l[s]);return i},fn=function(l,i,s){var a=i/8|0;return(l[a]|l[a+1]<<8)>>(i&7)&s},ra=function(l,i){var s=i/8|0;return(l[s]|l[s+1]<<8|l[s+2]<<16)>>(i&7)},up=function(l){return(l/8|0)+(l&7&&1)},cp=function(l,i,s){(s==null||s>l.length)&&(s=l.length);var a=new(l instanceof rr?rr:l instanceof ua?ua:on)(s-i);return a.set(l.subarray(i,s)),a},fp=function(l,i,s){var a=l.length;if(!a||s&&!s.l&&a<5)return i||new on(0);var f=!i||s,v=!s||s.i;s||(s={}),i||(i=new on(a*3));var p=function(Pe){var st=i.length;if(Pe>st){var ct=new on(Math.max(st*2,Pe));ct.set(i),i=ct}},g=s.f||0,w=s.p||0,E=s.b||0,h=s.l,m=s.d,S=s.m,M=s.n,R=a*8;do{if(!h){s.f=g=fn(l,w,1);var W=fn(l,w+1,3);if(w+=3,W)if(W==1)h=ap,m=sp,S=9,M=5;else if(W==2){var H=fn(l,w,31)+257,$=fn(l,w+10,15)+4,Z=H+fn(l,w+5,31)+1;w+=14;for(var U=new on(Z),le=new on(19),B=0;B<$;++B)le[rp[B]]=fn(l,w+B*3,7);w+=$*3;for(var j=na(le),Q=(1<<j)-1,G=xi(le,j,1),B=0;B<Z;){var se=G[fn(l,w,Q)];w+=se&15;var F=se>>>4;if(F<16)U[B++]=F;else{var he=0,de=0;for(F==16?(de=3+fn(l,w,3),w+=2,he=U[B-1]):F==17?(de=3+fn(l,w,7),w+=3):F==18&&(de=11+fn(l,w,127),w+=7);de--;)U[B++]=he}}var Ee=U.subarray(0,H),ge=U.subarray(H);S=na(Ee),M=na(ge),h=xi(Ee,S,1),m=xi(ge,M,1)}else throw"invalid block type";else{var F=up(w)+4,P=l[F-4]|l[F-3]<<8,k=F+P;if(k>a){if(v)throw"unexpected EOF";break}f&&p(E+P),i.set(l.subarray(F,k),E),s.b=E+=P,s.p=w=k*8;continue}if(w>R){if(v)throw"unexpected EOF";break}}f&&p(E+131072);for(var Le=(1<<S)-1,X=(1<<M)-1,oe=w;;oe=w){var he=h[ra(l,w)&Le],V=he>>>4;if(w+=he&15,w>R){if(v)throw"unexpected EOF";break}if(!he)throw"invalid length/literal";if(V<256)i[E++]=V;else if(V==256){oe=w,h=null;break}else{var pe=V-254;if(V>264){var B=V-257,ue=dc[B];pe=fn(l,w,(1<<ue)-1)+vc[B],w+=ue}var me=m[ra(l,w)&X],We=me>>>4;if(!me)throw"invalid distance";w+=me&15;var ge=lp[We];if(We>3){var ue=pc[We];ge+=ra(l,w)&(1<<ue)-1,w+=ue}if(w>R){if(v)throw"unexpected EOF";break}f&&p(E+131072);for(var tt=E+pe;E<tt;E+=4)i[E]=i[E-ge],i[E+1]=i[E+1-ge],i[E+2]=i[E+2-ge],i[E+3]=i[E+3-ge];E=tt}}s.l=h,s.p=oe,s.b=E,h&&(g=1,s.m=S,s.d=m,s.n=M)}while(!g);return E==i.length?i:cp(i,0,E)},dp=new on(0),pp=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Co(l,i){return fp((pp(l),l.subarray(2,-4)),i)}var hp=typeof TextDecoder<"u"&&new TextDecoder,mp=0;try{hp.decode(dp,{stream:!0}),mp=1}catch{}const vp=l=>l&&l.isCubeTexture;class gp extends da{constructor(i,s){var a,f;const v=vp(i),g=((f=v?(a=i.image[0])==null?void 0:a.width:i.image.width)!=null?f:1024)/4,w=Math.floor(Math.log2(g)),E=Math.pow(2,w),h=3*Math.max(E,112),m=4*E,S=[v?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${w}.0`],M=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,R=S.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${fc>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,W={map:{value:i},height:{value:s?.height||15},radius:{value:s?.radius||100}},F=new Cf(1,16),P=new pa({uniforms:W,fragmentShader:R,vertexShader:M,side:Uu});super(F,P)}set radius(i){this.material.uniforms.radius.value=i}get radius(){return this.material.uniforms.radius.value}set height(i){this.material.uniforms.height.value=i}get height(){return this.material.uniforms.height.value}}var yp=Object.defineProperty,wp=(l,i,s)=>i in l?yp(l,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[i]=s,Sp=(l,i,s)=>(wp(l,i+"",s),s);class Ep{constructor(){Sp(this,"_listeners")}addEventListener(i,s){this._listeners===void 0&&(this._listeners={});const a=this._listeners;a[i]===void 0&&(a[i]=[]),a[i].indexOf(s)===-1&&a[i].push(s)}hasEventListener(i,s){if(this._listeners===void 0)return!1;const a=this._listeners;return a[i]!==void 0&&a[i].indexOf(s)!==-1}removeEventListener(i,s){if(this._listeners===void 0)return;const f=this._listeners[i];if(f!==void 0){const v=f.indexOf(s);v!==-1&&f.splice(v,1)}}dispatchEvent(i){if(this._listeners===void 0)return;const a=this._listeners[i.type];if(a!==void 0){i.target=this;const f=a.slice(0);for(let v=0,p=f.length;v<p;v++)f[v].call(this,i);i.target=null}}}var _p=Object.defineProperty,xp=(l,i,s)=>i in l?_p(l,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[i]=s,xe=(l,i,s)=>(xp(l,typeof i!="symbol"?i+"":i,s),s);const Ro=new Rf,Nu=new If,Mp=Math.cos(70*(Math.PI/180)),zu=(l,i)=>(l%i+i)%i;let Pp=class extends Ep{constructor(i,s){super(),xe(this,"object"),xe(this,"domElement"),xe(this,"enabled",!0),xe(this,"target",new je),xe(this,"minDistance",0),xe(this,"maxDistance",1/0),xe(this,"minZoom",0),xe(this,"maxZoom",1/0),xe(this,"minPolarAngle",0),xe(this,"maxPolarAngle",Math.PI),xe(this,"minAzimuthAngle",-1/0),xe(this,"maxAzimuthAngle",1/0),xe(this,"enableDamping",!1),xe(this,"dampingFactor",.05),xe(this,"enableZoom",!0),xe(this,"zoomSpeed",1),xe(this,"enableRotate",!0),xe(this,"rotateSpeed",1),xe(this,"enablePan",!0),xe(this,"panSpeed",1),xe(this,"screenSpacePanning",!0),xe(this,"keyPanSpeed",7),xe(this,"zoomToCursor",!1),xe(this,"autoRotate",!1),xe(this,"autoRotateSpeed",2),xe(this,"reverseOrbit",!1),xe(this,"reverseHorizontalOrbit",!1),xe(this,"reverseVerticalOrbit",!1),xe(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),xe(this,"mouseButtons",{LEFT:Lr.ROTATE,MIDDLE:Lr.DOLLY,RIGHT:Lr.PAN}),xe(this,"touches",{ONE:Fr.ROTATE,TWO:Fr.DOLLY_PAN}),xe(this,"target0"),xe(this,"position0"),xe(this,"zoom0"),xe(this,"_domElementKeyEvents",null),xe(this,"getPolarAngle"),xe(this,"getAzimuthalAngle"),xe(this,"setPolarAngle"),xe(this,"setAzimuthalAngle"),xe(this,"getDistance"),xe(this,"getZoomScale"),xe(this,"listenToKeyEvents"),xe(this,"stopListenToKeyEvents"),xe(this,"saveState"),xe(this,"reset"),xe(this,"update"),xe(this,"connect"),xe(this,"dispose"),xe(this,"dollyIn"),xe(this,"dollyOut"),xe(this,"getScale"),xe(this,"setScale"),this.object=i,this.domElement=s,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=I=>{let K=zu(I,2*Math.PI),ce=h.phi;ce<0&&(ce+=2*Math.PI),K<0&&(K+=2*Math.PI);let De=Math.abs(K-ce);2*Math.PI-De<De&&(K<ce?K+=2*Math.PI:ce+=2*Math.PI),m.phi=K-ce,a.update()},this.setAzimuthalAngle=I=>{let K=zu(I,2*Math.PI),ce=h.theta;ce<0&&(ce+=2*Math.PI),K<0&&(K+=2*Math.PI);let De=Math.abs(K-ce);2*Math.PI-De<De&&(K<ce?K+=2*Math.PI:ce+=2*Math.PI),m.theta=K-ce,a.update()},this.getDistance=()=>a.object.position.distanceTo(a.target),this.listenToKeyEvents=I=>{I.addEventListener("keydown",jn),this._domElementKeyEvents=I},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",jn),this._domElementKeyEvents=null},this.saveState=()=>{a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=()=>{a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(f),a.update(),w=g.NONE},this.update=(()=>{const I=new je,K=new je(0,1,0),ce=new iu().setFromUnitVectors(i.up,K),De=ce.clone().invert(),J=new je,Et=new iu,Kt=2*Math.PI;return function(){const ar=a.object.position;ce.setFromUnitVectors(i.up,K),De.copy(ce).invert(),I.copy(ar).sub(a.target),I.applyQuaternion(ce),h.setFromVector3(I),a.autoRotate&&w===g.NONE&&de(se()),a.enableDamping?(h.theta+=m.theta*a.dampingFactor,h.phi+=m.phi*a.dampingFactor):(h.theta+=m.theta,h.phi+=m.phi);let Ft=a.minAzimuthAngle,Gt=a.maxAzimuthAngle;isFinite(Ft)&&isFinite(Gt)&&(Ft<-Math.PI?Ft+=Kt:Ft>Math.PI&&(Ft-=Kt),Gt<-Math.PI?Gt+=Kt:Gt>Math.PI&&(Gt-=Kt),Ft<=Gt?h.theta=Math.max(Ft,Math.min(Gt,h.theta)):h.theta=h.theta>(Ft+Gt)/2?Math.max(Ft,h.theta):Math.min(Gt,h.theta)),h.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,h.phi)),h.makeSafe(),a.enableDamping===!0?a.target.addScaledVector(M,a.dampingFactor):a.target.add(M),a.zoomToCursor&&j||a.object.isOrthographicCamera?h.radius=me(h.radius):h.radius=me(h.radius*S),I.setFromSpherical(h),I.applyQuaternion(De),ar.copy(a.target).add(I),a.object.matrixAutoUpdate||a.object.updateMatrix(),a.object.lookAt(a.target),a.enableDamping===!0?(m.theta*=1-a.dampingFactor,m.phi*=1-a.dampingFactor,M.multiplyScalar(1-a.dampingFactor)):(m.set(0,0,0),M.set(0,0,0));let mn=!1;if(a.zoomToCursor&&j){let vn=null;if(a.object instanceof Gr&&a.object.isPerspectiveCamera){const gn=I.length();vn=me(gn*S);const Zn=gn-vn;a.object.position.addScaledVector(le,Zn),a.object.updateMatrixWorld()}else if(a.object.isOrthographicCamera){const gn=new je(B.x,B.y,0);gn.unproject(a.object),a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/S)),a.object.updateProjectionMatrix(),mn=!0;const Zn=new je(B.x,B.y,0);Zn.unproject(a.object),a.object.position.sub(Zn).add(gn),a.object.updateMatrixWorld(),vn=I.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),a.zoomToCursor=!1;vn!==null&&(a.screenSpacePanning?a.target.set(0,0,-1).transformDirection(a.object.matrix).multiplyScalar(vn).add(a.object.position):(Ro.origin.copy(a.object.position),Ro.direction.set(0,0,-1).transformDirection(a.object.matrix),Math.abs(a.object.up.dot(Ro.direction))<Mp?i.lookAt(a.target):(Nu.setFromNormalAndCoplanarPoint(a.object.up,a.target),Ro.intersectPlane(Nu,a.target))))}else a.object instanceof Er&&a.object.isOrthographicCamera&&(mn=S!==1,mn&&(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/S)),a.object.updateProjectionMatrix()));return S=1,j=!1,mn||J.distanceToSquared(a.object.position)>E||8*(1-Et.dot(a.object.quaternion))>E?(a.dispatchEvent(f),J.copy(a.object.position),Et.copy(a.object.quaternion),mn=!1,!0):!1}})(),this.connect=I=>{a.domElement=I,a.domElement.style.touchAction="none",a.domElement.addEventListener("contextmenu",_r),a.domElement.addEventListener("pointerdown",Hn),a.domElement.addEventListener("pointercancel",Tt),a.domElement.addEventListener("wheel",Lt)},this.dispose=()=>{var I,K,ce,De,J,Et;a.domElement&&(a.domElement.style.touchAction="auto"),(I=a.domElement)==null||I.removeEventListener("contextmenu",_r),(K=a.domElement)==null||K.removeEventListener("pointerdown",Hn),(ce=a.domElement)==null||ce.removeEventListener("pointercancel",Tt),(De=a.domElement)==null||De.removeEventListener("wheel",Lt),(J=a.domElement)==null||J.ownerDocument.removeEventListener("pointermove",hn),(Et=a.domElement)==null||Et.ownerDocument.removeEventListener("pointerup",Tt),a._domElementKeyEvents!==null&&a._domElementKeyEvents.removeEventListener("keydown",jn)};const a=this,f={type:"change"},v={type:"start"},p={type:"end"},g={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let w=g.NONE;const E=1e-6,h=new ru,m=new ru;let S=1;const M=new je,R=new Ht,W=new Ht,F=new Ht,P=new Ht,k=new Ht,H=new Ht,$=new Ht,Z=new Ht,U=new Ht,le=new je,B=new Ht;let j=!1;const Q=[],G={};function se(){return 2*Math.PI/60/60*a.autoRotateSpeed}function he(){return Math.pow(.95,a.zoomSpeed)}function de(I){a.reverseOrbit||a.reverseHorizontalOrbit?m.theta+=I:m.theta-=I}function Ee(I){a.reverseOrbit||a.reverseVerticalOrbit?m.phi+=I:m.phi-=I}const ge=(()=>{const I=new je;return function(ce,De){I.setFromMatrixColumn(De,0),I.multiplyScalar(-ce),M.add(I)}})(),Le=(()=>{const I=new je;return function(ce,De){a.screenSpacePanning===!0?I.setFromMatrixColumn(De,1):(I.setFromMatrixColumn(De,0),I.crossVectors(a.object.up,I)),I.multiplyScalar(ce),M.add(I)}})(),X=(()=>{const I=new je;return function(ce,De){const J=a.domElement;if(J&&a.object instanceof Gr&&a.object.isPerspectiveCamera){const Et=a.object.position;I.copy(Et).sub(a.target);let Kt=I.length();Kt*=Math.tan(a.object.fov/2*Math.PI/180),ge(2*ce*Kt/J.clientHeight,a.object.matrix),Le(2*De*Kt/J.clientHeight,a.object.matrix)}else J&&a.object instanceof Er&&a.object.isOrthographicCamera?(ge(ce*(a.object.right-a.object.left)/a.object.zoom/J.clientWidth,a.object.matrix),Le(De*(a.object.top-a.object.bottom)/a.object.zoom/J.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}})();function oe(I){a.object instanceof Gr&&a.object.isPerspectiveCamera||a.object instanceof Er&&a.object.isOrthographicCamera?S=I:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function V(I){oe(S/I)}function pe(I){oe(S*I)}function ue(I){if(!a.zoomToCursor||!a.domElement)return;j=!0;const K=a.domElement.getBoundingClientRect(),ce=I.clientX-K.left,De=I.clientY-K.top,J=K.width,Et=K.height;B.x=ce/J*2-1,B.y=-(De/Et)*2+1,le.set(B.x,B.y,1).unproject(a.object).sub(a.object.position).normalize()}function me(I){return Math.max(a.minDistance,Math.min(a.maxDistance,I))}function We(I){R.set(I.clientX,I.clientY)}function tt(I){ue(I),$.set(I.clientX,I.clientY)}function Pe(I){P.set(I.clientX,I.clientY)}function st(I){W.set(I.clientX,I.clientY),F.subVectors(W,R).multiplyScalar(a.rotateSpeed);const K=a.domElement;K&&(de(2*Math.PI*F.x/K.clientHeight),Ee(2*Math.PI*F.y/K.clientHeight)),R.copy(W),a.update()}function ct(I){Z.set(I.clientX,I.clientY),U.subVectors(Z,$),U.y>0?V(he()):U.y<0&&pe(he()),$.copy(Z),a.update()}function dn(I){k.set(I.clientX,I.clientY),H.subVectors(k,P).multiplyScalar(a.panSpeed),X(H.x,H.y),P.copy(k),a.update()}function lt(I){ue(I),I.deltaY<0?pe(he()):I.deltaY>0&&V(he()),a.update()}function Te(I){let K=!1;switch(I.code){case a.keys.UP:X(0,a.keyPanSpeed),K=!0;break;case a.keys.BOTTOM:X(0,-a.keyPanSpeed),K=!0;break;case a.keys.LEFT:X(a.keyPanSpeed,0),K=!0;break;case a.keys.RIGHT:X(-a.keyPanSpeed,0),K=!0;break}K&&(I.preventDefault(),a.update())}function St(){if(Q.length==1)R.set(Q[0].pageX,Q[0].pageY);else{const I=.5*(Q[0].pageX+Q[1].pageX),K=.5*(Q[0].pageY+Q[1].pageY);R.set(I,K)}}function Xe(){if(Q.length==1)P.set(Q[0].pageX,Q[0].pageY);else{const I=.5*(Q[0].pageX+Q[1].pageX),K=.5*(Q[0].pageY+Q[1].pageY);P.set(I,K)}}function Wt(){const I=Q[0].pageX-Q[1].pageX,K=Q[0].pageY-Q[1].pageY,ce=Math.sqrt(I*I+K*K);$.set(0,ce)}function an(){a.enableZoom&&Wt(),a.enablePan&&Xe()}function ir(){a.enableZoom&&Wt(),a.enableRotate&&St()}function At(I){if(Q.length==1)W.set(I.pageX,I.pageY);else{const ce=Gn(I),De=.5*(I.pageX+ce.x),J=.5*(I.pageY+ce.y);W.set(De,J)}F.subVectors(W,R).multiplyScalar(a.rotateSpeed);const K=a.domElement;K&&(de(2*Math.PI*F.x/K.clientHeight),Ee(2*Math.PI*F.y/K.clientHeight)),R.copy(W)}function Tn(I){if(Q.length==1)k.set(I.pageX,I.pageY);else{const K=Gn(I),ce=.5*(I.pageX+K.x),De=.5*(I.pageY+K.y);k.set(ce,De)}H.subVectors(k,P).multiplyScalar(a.panSpeed),X(H.x,H.y),P.copy(k)}function pn(I){const K=Gn(I),ce=I.pageX-K.x,De=I.pageY-K.y,J=Math.sqrt(ce*ce+De*De);Z.set(0,J),U.set(0,Math.pow(Z.y/$.y,a.zoomSpeed)),V(U.y),$.copy(Z)}function Xt(I){a.enableZoom&&pn(I),a.enablePan&&Tn(I)}function or(I){a.enableZoom&&pn(I),a.enableRotate&&At(I)}function Hn(I){var K,ce;a.enabled!==!1&&(Q.length===0&&((K=a.domElement)==null||K.ownerDocument.addEventListener("pointermove",hn),(ce=a.domElement)==null||ce.ownerDocument.addEventListener("pointerup",Tt)),qr(I),I.pointerType==="touch"?Wn(I):kn(I))}function hn(I){a.enabled!==!1&&(I.pointerType==="touch"?br(I):lr(I))}function Tt(I){var K,ce,De;Nn(I),Q.length===0&&((K=a.domElement)==null||K.releasePointerCapture(I.pointerId),(ce=a.domElement)==null||ce.ownerDocument.removeEventListener("pointermove",hn),(De=a.domElement)==null||De.ownerDocument.removeEventListener("pointerup",Tt)),a.dispatchEvent(p),w=g.NONE}function kn(I){let K;switch(I.button){case 0:K=a.mouseButtons.LEFT;break;case 1:K=a.mouseButtons.MIDDLE;break;case 2:K=a.mouseButtons.RIGHT;break;default:K=-1}switch(K){case Lr.DOLLY:if(a.enableZoom===!1)return;tt(I),w=g.DOLLY;break;case Lr.ROTATE:if(I.ctrlKey||I.metaKey||I.shiftKey){if(a.enablePan===!1)return;Pe(I),w=g.PAN}else{if(a.enableRotate===!1)return;We(I),w=g.ROTATE}break;case Lr.PAN:if(I.ctrlKey||I.metaKey||I.shiftKey){if(a.enableRotate===!1)return;We(I),w=g.ROTATE}else{if(a.enablePan===!1)return;Pe(I),w=g.PAN}break;default:w=g.NONE}w!==g.NONE&&a.dispatchEvent(v)}function lr(I){if(a.enabled!==!1)switch(w){case g.ROTATE:if(a.enableRotate===!1)return;st(I);break;case g.DOLLY:if(a.enableZoom===!1)return;ct(I);break;case g.PAN:if(a.enablePan===!1)return;dn(I);break}}function Lt(I){a.enabled===!1||a.enableZoom===!1||w!==g.NONE&&w!==g.ROTATE||(I.preventDefault(),a.dispatchEvent(v),lt(I),a.dispatchEvent(p))}function jn(I){a.enabled===!1||a.enablePan===!1||Te(I)}function Wn(I){switch(ht(I),Q.length){case 1:switch(a.touches.ONE){case Fr.ROTATE:if(a.enableRotate===!1)return;St(),w=g.TOUCH_ROTATE;break;case Fr.PAN:if(a.enablePan===!1)return;Xe(),w=g.TOUCH_PAN;break;default:w=g.NONE}break;case 2:switch(a.touches.TWO){case Fr.DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;an(),w=g.TOUCH_DOLLY_PAN;break;case Fr.DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;ir(),w=g.TOUCH_DOLLY_ROTATE;break;default:w=g.NONE}break;default:w=g.NONE}w!==g.NONE&&a.dispatchEvent(v)}function br(I){switch(ht(I),w){case g.TOUCH_ROTATE:if(a.enableRotate===!1)return;At(I),a.update();break;case g.TOUCH_PAN:if(a.enablePan===!1)return;Tn(I),a.update();break;case g.TOUCH_DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;Xt(I),a.update();break;case g.TOUCH_DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;or(I),a.update();break;default:w=g.NONE}}function _r(I){a.enabled!==!1&&I.preventDefault()}function qr(I){Q.push(I)}function Nn(I){delete G[I.pointerId];for(let K=0;K<Q.length;K++)if(Q[K].pointerId==I.pointerId){Q.splice(K,1);return}}function ht(I){let K=G[I.pointerId];K===void 0&&(K=new Ht,G[I.pointerId]=K),K.set(I.pageX,I.pageY)}function Gn(I){const K=I.pointerId===Q[0].pointerId?Q[1]:Q[0];return G[K.pointerId]}this.dollyIn=(I=he())=>{pe(I),a.update()},this.dollyOut=(I=he())=>{V(I),a.update()},this.getScale=()=>S,this.setScale=I=>{oe(I),a.update()},this.getZoomScale=()=>he(),s!==void 0&&this.connect(s),this.update()}};class Cp extends Hu{constructor(i){super(i),this.type=ln}parse(i){const p=function(B,j){switch(B){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(j||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(j||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(j||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(j||""))}},m=function(B,j,Q){j=j||1024;let se=B.pos,he=-1,de=0,Ee="",ge=String.fromCharCode.apply(null,new Uint16Array(B.subarray(se,se+128)));for(;0>(he=ge.indexOf(`
`))&&de<j&&se<B.byteLength;)Ee+=ge,de+=ge.length,se+=128,ge+=String.fromCharCode.apply(null,new Uint16Array(B.subarray(se,se+128)));return-1<he?(B.pos+=de+he+1,Ee+ge.slice(0,he)):!1},S=function(B){const j=/^#\?(\S+)/,Q=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,se=/^\s*FORMAT=(\S+)\s*$/,he=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,de={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Ee,ge;for((B.pos>=B.byteLength||!(Ee=m(B)))&&p(1,"no header found"),(ge=Ee.match(j))||p(3,"bad initial token"),de.valid|=1,de.programtype=ge[1],de.string+=Ee+`
`;Ee=m(B),Ee!==!1;){if(de.string+=Ee+`
`,Ee.charAt(0)==="#"){de.comments+=Ee+`
`;continue}if((ge=Ee.match(Q))&&(de.gamma=parseFloat(ge[1])),(ge=Ee.match(G))&&(de.exposure=parseFloat(ge[1])),(ge=Ee.match(se))&&(de.valid|=2,de.format=ge[1]),(ge=Ee.match(he))&&(de.valid|=4,de.height=parseInt(ge[1],10),de.width=parseInt(ge[2],10)),de.valid&2&&de.valid&4)break}return de.valid&2||p(3,"missing format specifier"),de.valid&4||p(3,"missing image size specifier"),de},M=function(B,j,Q){const G=j;if(G<8||G>32767||B[0]!==2||B[1]!==2||B[2]&128)return new Uint8Array(B);G!==(B[2]<<8|B[3])&&p(3,"wrong scanline width");const se=new Uint8Array(4*j*Q);se.length||p(4,"unable to allocate buffer space");let he=0,de=0;const Ee=4*G,ge=new Uint8Array(4),Le=new Uint8Array(Ee);let X=Q;for(;X>0&&de<B.byteLength;){de+4>B.byteLength&&p(1),ge[0]=B[de++],ge[1]=B[de++],ge[2]=B[de++],ge[3]=B[de++],(ge[0]!=2||ge[1]!=2||(ge[2]<<8|ge[3])!=G)&&p(3,"bad rgbe scanline format");let oe=0,V;for(;oe<Ee&&de<B.byteLength;){V=B[de++];const ue=V>128;if(ue&&(V-=128),(V===0||oe+V>Ee)&&p(3,"bad scanline data"),ue){const me=B[de++];for(let We=0;We<V;We++)Le[oe++]=me}else Le.set(B.subarray(de,de+V),oe),oe+=V,de+=V}const pe=G;for(let ue=0;ue<pe;ue++){let me=0;se[he]=Le[ue+me],me+=G,se[he+1]=Le[ue+me],me+=G,se[he+2]=Le[ue+me],me+=G,se[he+3]=Le[ue+me],he+=4}X--}return se},R=function(B,j,Q,G){const se=B[j+3],he=Math.pow(2,se-128)/255;Q[G+0]=B[j+0]*he,Q[G+1]=B[j+1]*he,Q[G+2]=B[j+2]*he,Q[G+3]=1},W=function(B,j,Q,G){const se=B[j+3],he=Math.pow(2,se-128)/255;Q[G+0]=Hr.toHalfFloat(Math.min(B[j+0]*he,65504)),Q[G+1]=Hr.toHalfFloat(Math.min(B[j+1]*he,65504)),Q[G+2]=Hr.toHalfFloat(Math.min(B[j+2]*he,65504)),Q[G+3]=Hr.toHalfFloat(1)},F=new Uint8Array(i);F.pos=0;const P=S(F),k=P.width,H=P.height,$=M(F.subarray(F.pos),k,H);let Z,U,le;switch(this.type){case Bn:le=$.length/4;const B=new Float32Array(le*4);for(let Q=0;Q<le;Q++)R($,Q*4,B,Q*4);Z=B,U=Bn;break;case ln:le=$.length/4;const j=new Uint16Array(le*4);for(let Q=0;Q<le;Q++)W($,Q*4,j,Q*4);Z=j,U=ln;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:k,height:H,data:Z,header:P.string,gamma:P.gamma,exposure:P.exposure,type:U}}setDataType(i){return this.type=i,this}load(i,s,a,f){function v(p,g){switch(p.type){case Bn:case ln:"colorSpace"in p?p.colorSpace="srgb-linear":p.encoding=3e3,p.minFilter=Rn,p.magFilter=Rn,p.generateMipmaps=!1,p.flipY=!0;break}s&&s(p,g)}return super.load(i,v,a,f)}}const Si=fc>=152;class Rp extends Hu{constructor(i){super(i),this.type=ln}parse(i){const j=Math.pow(2.7182818,2.2);function Q(c,d){for(var _=0,z=0;z<65536;++z)(z==0||c[z>>3]&1<<(z&7))&&(d[_++]=z);for(var A=_-1;_<65536;)d[_++]=0;return A}function G(c){for(var d=0;d<16384;d++)c[d]={},c[d].len=0,c[d].lit=0,c[d].p=null}const se={l:0,c:0,lc:0};function he(c,d,_,z,A){for(;_<c;)d=d<<8|Gn(z,A),_+=8;_-=c,se.l=d>>_&(1<<c)-1,se.c=d,se.lc=_}const de=new Array(59);function Ee(c){for(var d=0;d<=58;++d)de[d]=0;for(var d=0;d<65537;++d)de[c[d]]+=1;for(var _=0,d=58;d>0;--d){var z=_+de[d]>>1;de[d]=_,_=z}for(var d=0;d<65537;++d){var A=c[d];A>0&&(c[d]=A|de[A]++<<6)}}function ge(c,d,_,z,A,L,b){for(var Y=_,ne=0,te=0;A<=L;A++){if(Y.value-_.value>z)return!1;he(6,ne,te,c,Y);var re=se.l;if(ne=se.c,te=se.lc,b[A]=re,re==63){if(Y.value-_.value>z)throw"Something wrong with hufUnpackEncTable";he(8,ne,te,c,Y);var ee=se.l+6;if(ne=se.c,te=se.lc,A+ee>L+1)throw"Something wrong with hufUnpackEncTable";for(;ee--;)b[A++]=0;A--}else if(re>=59){var ee=re-59+2;if(A+ee>L+1)throw"Something wrong with hufUnpackEncTable";for(;ee--;)b[A++]=0;A--}}Ee(b)}function Le(c){return c&63}function X(c){return c>>6}function oe(c,d,_,z){for(;d<=_;d++){var A=X(c[d]),L=Le(c[d]);if(A>>L)throw"Invalid table entry";if(L>14){var b=z[A>>L-14];if(b.len)throw"Invalid table entry";if(b.lit++,b.p){var Y=b.p;b.p=new Array(b.lit);for(var ne=0;ne<b.lit-1;++ne)b.p[ne]=Y[ne]}else b.p=new Array(1);b.p[b.lit-1]=d}else if(L)for(var te=0,ne=1<<14-L;ne>0;ne--){var b=z[(A<<14-L)+te];if(b.len||b.p)throw"Invalid table entry";b.len=L,b.lit=d,te++}}return!0}const V={c:0,lc:0};function pe(c,d,_,z){c=c<<8|Gn(_,z),d+=8,V.c=c,V.lc=d}const ue={c:0,lc:0};function me(c,d,_,z,A,L,b,Y,ne,te){if(c==d){z<8&&(pe(_,z,A,b),_=V.c,z=V.lc),z-=8;var re=_>>z,re=new Uint8Array([re])[0];if(ne.value+re>te)return!1;for(var ee=Y[ne.value-1];re-- >0;)Y[ne.value++]=ee}else if(ne.value<te)Y[ne.value++]=c;else return!1;ue.c=_,ue.lc=z}function We(c){return c&65535}function tt(c){var d=We(c);return d>32767?d-65536:d}const Pe={a:0,b:0};function st(c,d){var _=tt(c),z=tt(d),A=z,L=_+(A&1)+(A>>1),b=L,Y=L-A;Pe.a=b,Pe.b=Y}function ct(c,d){var _=We(c),z=We(d),A=_-(z>>1)&65535,L=z+A-32768&65535;Pe.a=L,Pe.b=A}function dn(c,d,_,z,A,L,b){for(var Y=b<16384,ne=_>A?A:_,te=1,re;te<=ne;)te<<=1;for(te>>=1,re=te,te>>=1;te>=1;){for(var ee=0,Ke=ee+L*(A-re),ve=L*te,we=L*re,Ce=z*te,ke=z*re,He,Ue,Me,Ne;ee<=Ke;ee+=we){for(var Be=ee,qe=ee+z*(_-re);Be<=qe;Be+=ke){var ze=Be+Ce,$e=Be+ve,Mt=$e+Ce;Y?(st(c[Be+d],c[$e+d]),He=Pe.a,Me=Pe.b,st(c[ze+d],c[Mt+d]),Ue=Pe.a,Ne=Pe.b,st(He,Ue),c[Be+d]=Pe.a,c[ze+d]=Pe.b,st(Me,Ne),c[$e+d]=Pe.a,c[Mt+d]=Pe.b):(ct(c[Be+d],c[$e+d]),He=Pe.a,Me=Pe.b,ct(c[ze+d],c[Mt+d]),Ue=Pe.a,Ne=Pe.b,ct(He,Ue),c[Be+d]=Pe.a,c[ze+d]=Pe.b,ct(Me,Ne),c[$e+d]=Pe.a,c[Mt+d]=Pe.b)}if(_&te){var $e=Be+ve;Y?st(c[Be+d],c[$e+d]):ct(c[Be+d],c[$e+d]),He=Pe.a,c[$e+d]=Pe.b,c[Be+d]=He}}if(A&te)for(var Be=ee,qe=ee+z*(_-re);Be<=qe;Be+=ke){var ze=Be+Ce;Y?st(c[Be+d],c[ze+d]):ct(c[Be+d],c[ze+d]),He=Pe.a,c[ze+d]=Pe.b,c[Be+d]=He}re=te,te>>=1}return ee}function lt(c,d,_,z,A,L,b,Y,ne,te){for(var re=0,ee=0,Ke=Y,ve=Math.trunc(A.value+(L+7)/8);A.value<ve;)for(pe(re,ee,_,A),re=V.c,ee=V.lc;ee>=14;){var we=re>>ee-14&16383,Ce=d[we];if(Ce.len)ee-=Ce.len,me(Ce.lit,b,re,ee,_,z,A,ne,te,Ke),re=ue.c,ee=ue.lc;else{if(!Ce.p)throw"hufDecode issues";var ke;for(ke=0;ke<Ce.lit;ke++){for(var He=Le(c[Ce.p[ke]]);ee<He&&A.value<ve;)pe(re,ee,_,A),re=V.c,ee=V.lc;if(ee>=He&&X(c[Ce.p[ke]])==(re>>ee-He&(1<<He)-1)){ee-=He,me(Ce.p[ke],b,re,ee,_,z,A,ne,te,Ke),re=ue.c,ee=ue.lc;break}}if(ke==Ce.lit)throw"hufDecode issues"}}var Ue=8-L&7;for(re>>=Ue,ee-=Ue;ee>0;){var Ce=d[re<<14-ee&16383];if(Ce.len)ee-=Ce.len,me(Ce.lit,b,re,ee,_,z,A,ne,te,Ke),re=ue.c,ee=ue.lc;else throw"hufDecode issues"}return!0}function Te(c,d,_,z,A,L){var b={value:0},Y=_.value,ne=ht(d,_),te=ht(d,_);_.value+=4;var re=ht(d,_);if(_.value+=4,ne<0||ne>=65537||te<0||te>=65537)throw"Something wrong with HUF_ENCSIZE";var ee=new Array(65537),Ke=new Array(16384);G(Ke);var ve=z-(_.value-Y);if(ge(c,d,_,ve,ne,te,ee),re>8*(z-(_.value-Y)))throw"Something wrong with hufUncompress";oe(ee,ne,te,Ke),lt(ee,Ke,c,d,_,re,te,L,A,b)}function St(c,d,_){for(var z=0;z<_;++z)d[z]=c[d[z]]}function Xe(c){for(var d=1;d<c.length;d++){var _=c[d-1]+c[d]-128;c[d]=_}}function Wt(c,d){for(var _=0,z=Math.floor((c.length+1)/2),A=0,L=c.length-1;!(A>L||(d[A++]=c[_++],A>L));)d[A++]=c[z++]}function an(c){for(var d=c.byteLength,_=new Array,z=0,A=new DataView(c);d>0;){var L=A.getInt8(z++);if(L<0){var b=-L;d-=b+1;for(var Y=0;Y<b;Y++)_.push(A.getUint8(z++))}else{var b=L;d-=2;for(var ne=A.getUint8(z++),Y=0;Y<b+1;Y++)_.push(ne)}}return _}function ir(c,d,_,z,A,L){var ze=new DataView(L.buffer),b=_[c.idx[0]].width,Y=_[c.idx[0]].height,ne=3,te=Math.floor(b/8),re=Math.ceil(b/8),ee=Math.ceil(Y/8),Ke=b-(re-1)*8,ve=Y-(ee-1)*8,we={value:0},Ce=new Array(ne),ke=new Array(ne),He=new Array(ne),Ue=new Array(ne),Me=new Array(ne);for(let Ye=0;Ye<ne;++Ye)Me[Ye]=d[c.idx[Ye]],Ce[Ye]=Ye<1?0:Ce[Ye-1]+re*ee,ke[Ye]=new Float32Array(64),He[Ye]=new Uint16Array(64),Ue[Ye]=new Uint16Array(re*64);for(let Ye=0;Ye<ee;++Ye){var Ne=8;Ye==ee-1&&(Ne=ve);var Be=8;for(let be=0;be<re;++be){be==re-1&&(Be=Ke);for(let Ge=0;Ge<ne;++Ge)He[Ge].fill(0),He[Ge][0]=A[Ce[Ge]++],At(we,z,He[Ge]),Tn(He[Ge],ke[Ge]),pn(ke[Ge]);Xt(ke);for(let Ge=0;Ge<ne;++Ge)or(ke[Ge],Ue[Ge],be*64)}let mt=0;for(let be=0;be<ne;++be){const Ge=_[c.idx[be]].type;for(let rt=8*Ye;rt<8*Ye+Ne;++rt){mt=Me[be][rt];for(let zn=0;zn<te;++zn){const kt=zn*64+(rt&7)*8;ze.setUint16(mt+0*Ge,Ue[be][kt+0],!0),ze.setUint16(mt+2*Ge,Ue[be][kt+1],!0),ze.setUint16(mt+4*Ge,Ue[be][kt+2],!0),ze.setUint16(mt+6*Ge,Ue[be][kt+3],!0),ze.setUint16(mt+8*Ge,Ue[be][kt+4],!0),ze.setUint16(mt+10*Ge,Ue[be][kt+5],!0),ze.setUint16(mt+12*Ge,Ue[be][kt+6],!0),ze.setUint16(mt+14*Ge,Ue[be][kt+7],!0),mt+=16*Ge}}if(te!=re)for(let rt=8*Ye;rt<8*Ye+Ne;++rt){const zn=Me[be][rt]+8*te*2*Ge,kt=te*64+(rt&7)*8;for(let yn=0;yn<Be;++yn)ze.setUint16(zn+yn*2*Ge,Ue[be][kt+yn],!0)}}}for(var qe=new Uint16Array(b),ze=new DataView(L.buffer),$e=0;$e<ne;++$e){_[c.idx[$e]].decoded=!0;var Mt=_[c.idx[$e]].type;if(_[$e].type==2)for(var ft=0;ft<Y;++ft){const Ye=Me[$e][ft];for(var _t=0;_t<b;++_t)qe[_t]=ze.getUint16(Ye+_t*2*Mt,!0);for(var _t=0;_t<b;++_t)ze.setFloat32(Ye+_t*2*Mt,J(qe[_t]),!0)}}}function At(c,d,_){for(var z,A=1;A<64;)z=d[c.value],z==65280?A=64:z>>8==255?A+=z&255:(_[A]=z,A++),c.value++}function Tn(c,d){d[0]=J(c[0]),d[1]=J(c[1]),d[2]=J(c[5]),d[3]=J(c[6]),d[4]=J(c[14]),d[5]=J(c[15]),d[6]=J(c[27]),d[7]=J(c[28]),d[8]=J(c[2]),d[9]=J(c[4]),d[10]=J(c[7]),d[11]=J(c[13]),d[12]=J(c[16]),d[13]=J(c[26]),d[14]=J(c[29]),d[15]=J(c[42]),d[16]=J(c[3]),d[17]=J(c[8]),d[18]=J(c[12]),d[19]=J(c[17]),d[20]=J(c[25]),d[21]=J(c[30]),d[22]=J(c[41]),d[23]=J(c[43]),d[24]=J(c[9]),d[25]=J(c[11]),d[26]=J(c[18]),d[27]=J(c[24]),d[28]=J(c[31]),d[29]=J(c[40]),d[30]=J(c[44]),d[31]=J(c[53]),d[32]=J(c[10]),d[33]=J(c[19]),d[34]=J(c[23]),d[35]=J(c[32]),d[36]=J(c[39]),d[37]=J(c[45]),d[38]=J(c[52]),d[39]=J(c[54]),d[40]=J(c[20]),d[41]=J(c[22]),d[42]=J(c[33]),d[43]=J(c[38]),d[44]=J(c[46]),d[45]=J(c[51]),d[46]=J(c[55]),d[47]=J(c[60]),d[48]=J(c[21]),d[49]=J(c[34]),d[50]=J(c[37]),d[51]=J(c[47]),d[52]=J(c[50]),d[53]=J(c[56]),d[54]=J(c[59]),d[55]=J(c[61]),d[56]=J(c[35]),d[57]=J(c[36]),d[58]=J(c[48]),d[59]=J(c[49]),d[60]=J(c[57]),d[61]=J(c[58]),d[62]=J(c[62]),d[63]=J(c[63])}function pn(c){const d=.5*Math.cos(.7853975),_=.5*Math.cos(3.14159/16),z=.5*Math.cos(3.14159/8),A=.5*Math.cos(3*3.14159/16),L=.5*Math.cos(5*3.14159/16),b=.5*Math.cos(3*3.14159/8),Y=.5*Math.cos(7*3.14159/16);for(var ne=new Array(4),te=new Array(4),re=new Array(4),ee=new Array(4),Ke=0;Ke<8;++Ke){var ve=Ke*8;ne[0]=z*c[ve+2],ne[1]=b*c[ve+2],ne[2]=z*c[ve+6],ne[3]=b*c[ve+6],te[0]=_*c[ve+1]+A*c[ve+3]+L*c[ve+5]+Y*c[ve+7],te[1]=A*c[ve+1]-Y*c[ve+3]-_*c[ve+5]-L*c[ve+7],te[2]=L*c[ve+1]-_*c[ve+3]+Y*c[ve+5]+A*c[ve+7],te[3]=Y*c[ve+1]-L*c[ve+3]+A*c[ve+5]-_*c[ve+7],re[0]=d*(c[ve+0]+c[ve+4]),re[3]=d*(c[ve+0]-c[ve+4]),re[1]=ne[0]+ne[3],re[2]=ne[1]-ne[2],ee[0]=re[0]+re[1],ee[1]=re[3]+re[2],ee[2]=re[3]-re[2],ee[3]=re[0]-re[1],c[ve+0]=ee[0]+te[0],c[ve+1]=ee[1]+te[1],c[ve+2]=ee[2]+te[2],c[ve+3]=ee[3]+te[3],c[ve+4]=ee[3]-te[3],c[ve+5]=ee[2]-te[2],c[ve+6]=ee[1]-te[1],c[ve+7]=ee[0]-te[0]}for(var we=0;we<8;++we)ne[0]=z*c[16+we],ne[1]=b*c[16+we],ne[2]=z*c[48+we],ne[3]=b*c[48+we],te[0]=_*c[8+we]+A*c[24+we]+L*c[40+we]+Y*c[56+we],te[1]=A*c[8+we]-Y*c[24+we]-_*c[40+we]-L*c[56+we],te[2]=L*c[8+we]-_*c[24+we]+Y*c[40+we]+A*c[56+we],te[3]=Y*c[8+we]-L*c[24+we]+A*c[40+we]-_*c[56+we],re[0]=d*(c[we]+c[32+we]),re[3]=d*(c[we]-c[32+we]),re[1]=ne[0]+ne[3],re[2]=ne[1]-ne[2],ee[0]=re[0]+re[1],ee[1]=re[3]+re[2],ee[2]=re[3]-re[2],ee[3]=re[0]-re[1],c[0+we]=ee[0]+te[0],c[8+we]=ee[1]+te[1],c[16+we]=ee[2]+te[2],c[24+we]=ee[3]+te[3],c[32+we]=ee[3]-te[3],c[40+we]=ee[2]-te[2],c[48+we]=ee[1]-te[1],c[56+we]=ee[0]-te[0]}function Xt(c){for(var d=0;d<64;++d){var _=c[0][d],z=c[1][d],A=c[2][d];c[0][d]=_+1.5747*A,c[1][d]=_-.1873*z-.4682*A,c[2][d]=_+1.8556*z}}function or(c,d,_){for(var z=0;z<64;++z)d[_+z]=Hr.toHalfFloat(Hn(c[z]))}function Hn(c){return c<=1?Math.sign(c)*Math.pow(Math.abs(c),2.2):Math.sign(c)*Math.pow(j,Math.abs(c)-1)}function hn(c){return new DataView(c.array.buffer,c.offset.value,c.size)}function Tt(c){var d=c.viewer.buffer.slice(c.offset.value,c.offset.value+c.size),_=new Uint8Array(an(d)),z=new Uint8Array(_.length);return Xe(_),Wt(_,z),new DataView(z.buffer)}function kn(c){var d=c.array.slice(c.offset.value,c.offset.value+c.size),_=Co(d),z=new Uint8Array(_.length);return Xe(_),Wt(_,z),new DataView(z.buffer)}function lr(c){for(var d=c.viewer,_={value:c.offset.value},z=new Uint16Array(c.width*c.scanlineBlockSize*(c.channels*c.type)),A=new Uint8Array(8192),L=0,b=new Array(c.channels),Y=0;Y<c.channels;Y++)b[Y]={},b[Y].start=L,b[Y].end=b[Y].start,b[Y].nx=c.width,b[Y].ny=c.lines,b[Y].size=c.type,L+=b[Y].nx*b[Y].ny*b[Y].size;var ne=Et(d,_),te=Et(d,_);if(te>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ne<=te)for(var Y=0;Y<te-ne+1;Y++)A[Y+ne]=I(d,_);var re=new Uint16Array(65536),ee=Q(A,re),Ke=ht(d,_);Te(c.array,d,_,Ke,z,L);for(var Y=0;Y<c.channels;++Y)for(var ve=b[Y],we=0;we<b[Y].size;++we)dn(z,ve.start+we,ve.nx,ve.size,ve.ny,ve.nx*ve.size,ee);St(re,z,L);for(var Ce=0,ke=new Uint8Array(z.buffer.byteLength),He=0;He<c.lines;He++)for(var Ue=0;Ue<c.channels;Ue++){var ve=b[Ue],Me=ve.nx*ve.size,Ne=new Uint8Array(z.buffer,ve.end*2,Me*2);ke.set(Ne,Ce),Ce+=Me*2,ve.end+=Me}return new DataView(ke.buffer)}function Lt(c){var d=c.array.slice(c.offset.value,c.offset.value+c.size),_=Co(d);const z=c.lines*c.channels*c.width,A=c.type==1?new Uint16Array(z):new Uint32Array(z);let L=0,b=0;const Y=new Array(4);for(let ne=0;ne<c.lines;ne++)for(let te=0;te<c.channels;te++){let re=0;switch(c.type){case 1:Y[0]=L,Y[1]=Y[0]+c.width,L=Y[1]+c.width;for(let ee=0;ee<c.width;++ee){const Ke=_[Y[0]++]<<8|_[Y[1]++];re+=Ke,A[b]=re,b++}break;case 2:Y[0]=L,Y[1]=Y[0]+c.width,Y[2]=Y[1]+c.width,L=Y[2]+c.width;for(let ee=0;ee<c.width;++ee){const Ke=_[Y[0]++]<<24|_[Y[1]++]<<16|_[Y[2]++]<<8;re+=Ke,A[b]=re,b++}break}}return new DataView(A.buffer)}function jn(c){var d=c.viewer,_={value:c.offset.value},z=new Uint8Array(c.width*c.lines*(c.channels*c.type*2)),A={version:K(d,_),unknownUncompressedSize:K(d,_),unknownCompressedSize:K(d,_),acCompressedSize:K(d,_),dcCompressedSize:K(d,_),rleCompressedSize:K(d,_),rleUncompressedSize:K(d,_),rleRawSize:K(d,_),totalAcUncompressedCount:K(d,_),totalDcUncompressedCount:K(d,_),acCompression:K(d,_)};if(A.version<2)throw"EXRLoader.parse: "+sn.compression+" version "+A.version+" is unsupported";for(var L=new Array,b=Et(d,_)-2;b>0;){var Y=Wn(d.buffer,_),ne=I(d,_),te=ne>>2&3,re=(ne>>4)-1,ee=new Int8Array([re])[0],Ke=I(d,_);L.push({name:Y,index:ee,type:Ke,compression:te}),b-=Y.length+3}for(var ve=sn.channels,we=new Array(c.channels),Ce=0;Ce<c.channels;++Ce){var ke=we[Ce]={},He=ve[Ce];ke.name=He.name,ke.compression=0,ke.decoded=!1,ke.type=He.pixelType,ke.pLinear=He.pLinear,ke.width=c.width,ke.height=c.lines}for(var Ue={idx:new Array(3)},Me=0;Me<c.channels;++Me)for(var ke=we[Me],Ce=0;Ce<L.length;++Ce){var Ne=L[Ce];ke.name==Ne.name&&(ke.compression=Ne.compression,Ne.index>=0&&(Ue.idx[Ne.index]=Me),ke.offset=Me)}if(A.acCompressedSize>0)switch(A.acCompression){case 0:var ze=new Uint16Array(A.totalAcUncompressedCount);Te(c.array,d,_,A.acCompressedSize,ze,A.totalAcUncompressedCount);break;case 1:var Be=c.array.slice(_.value,_.value+A.totalAcUncompressedCount),qe=Co(Be),ze=new Uint16Array(qe.buffer);_.value+=A.totalAcUncompressedCount;break}if(A.dcCompressedSize>0){var $e={array:c.array,offset:_,size:A.dcCompressedSize},Mt=new Uint16Array(kn($e).buffer);_.value+=A.dcCompressedSize}if(A.rleRawSize>0){var Be=c.array.slice(_.value,_.value+A.rleCompressedSize),qe=Co(Be),ft=an(qe.buffer);_.value+=A.rleCompressedSize}for(var _t=0,Ye=new Array(we.length),Ce=0;Ce<Ye.length;++Ce)Ye[Ce]=new Array;for(var mt=0;mt<c.lines;++mt)for(var be=0;be<we.length;++be)Ye[be].push(_t),_t+=we[be].width*c.type*2;ir(Ue,Ye,we,ze,Mt,z);for(var Ce=0;Ce<we.length;++Ce){var ke=we[Ce];if(!ke.decoded)switch(ke.compression){case 2:for(var Ge=0,rt=0,mt=0;mt<c.lines;++mt){for(var zn=Ye[Ce][Ge],kt=0;kt<ke.width;++kt){for(var yn=0;yn<2*ke.type;++yn)z[zn++]=ft[rt+yn*ke.width*ke.height];rt++}Ge++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(z.buffer)}function Wn(c,d){for(var _=new Uint8Array(c),z=0;_[d.value+z]!=0;)z+=1;var A=new TextDecoder().decode(_.slice(d.value,d.value+z));return d.value=d.value+z+1,A}function br(c,d,_){var z=new TextDecoder().decode(new Uint8Array(c).slice(d.value,d.value+_));return d.value=d.value+_,z}function _r(c,d){var _=Nn(c,d),z=ht(c,d);return[_,z]}function qr(c,d){var _=ht(c,d),z=ht(c,d);return[_,z]}function Nn(c,d){var _=c.getInt32(d.value,!0);return d.value=d.value+4,_}function ht(c,d){var _=c.getUint32(d.value,!0);return d.value=d.value+4,_}function Gn(c,d){var _=c[d.value];return d.value=d.value+1,_}function I(c,d){var _=c.getUint8(d.value);return d.value=d.value+1,_}const K=function(c,d){let _;return"getBigInt64"in DataView.prototype?_=Number(c.getBigInt64(d.value,!0)):_=c.getUint32(d.value+4,!0)+Number(c.getUint32(d.value,!0)<<32),d.value+=8,_};function ce(c,d){var _=c.getFloat32(d.value,!0);return d.value+=4,_}function De(c,d){return Hr.toHalfFloat(ce(c,d))}function J(c){var d=(c&31744)>>10,_=c&1023;return(c>>15?-1:1)*(d?d===31?_?NaN:1/0:Math.pow(2,d-15)*(1+_/1024):6103515625e-14*(_/1024))}function Et(c,d){var _=c.getUint16(d.value,!0);return d.value+=2,_}function Kt(c,d){return J(Et(c,d))}function Ti(c,d,_,z){for(var A=_.value,L=[];_.value<A+z-1;){var b=Wn(d,_),Y=Nn(c,_),ne=I(c,_);_.value+=3;var te=Nn(c,_),re=Nn(c,_);L.push({name:b,pixelType:Y,pLinear:ne,xSampling:te,ySampling:re})}return _.value+=1,L}function ar(c,d){var _=ce(c,d),z=ce(c,d),A=ce(c,d),L=ce(c,d),b=ce(c,d),Y=ce(c,d),ne=ce(c,d),te=ce(c,d);return{redX:_,redY:z,greenX:A,greenY:L,blueX:b,blueY:Y,whiteX:ne,whiteY:te}}function Ft(c,d){var _=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],z=I(c,d);return _[z]}function Gt(c,d){var _=ht(c,d),z=ht(c,d),A=ht(c,d),L=ht(c,d);return{xMin:_,yMin:z,xMax:A,yMax:L}}function mn(c,d){var _=["INCREASING_Y"],z=I(c,d);return _[z]}function vn(c,d){var _=ce(c,d),z=ce(c,d);return[_,z]}function gn(c,d){var _=ce(c,d),z=ce(c,d),A=ce(c,d);return[_,z,A]}function Zn(c,d,_,z,A){if(z==="string"||z==="stringvector"||z==="iccProfile")return br(d,_,A);if(z==="chlist")return Ti(c,d,_,A);if(z==="chromaticities")return ar(c,_);if(z==="compression")return Ft(c,_);if(z==="box2i")return Gt(c,_);if(z==="lineOrder")return mn(c,_);if(z==="float")return ce(c,_);if(z==="v2f")return vn(c,_);if(z==="v3f")return gn(c,_);if(z==="int")return Nn(c,_);if(z==="rational")return _r(c,_);if(z==="timecode")return qr(c,_);if(z==="preview")return _.value+=A,"skipped";_.value+=A}function Ao(c,d,_){const z={};if(c.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";z.version=c.getUint8(4);const A=c.getUint8(5);z.spec={singleTile:!!(A&2),longName:!!(A&4),deepFormat:!!(A&8),multiPart:!!(A&16)},_.value=8;for(var L=!0;L;){var b=Wn(d,_);if(b==0)L=!1;else{var Y=Wn(d,_),ne=ht(c,_),te=Zn(c,d,_,Y,ne);te===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Y}'.`):z[b]=te}}if((A&-5)!=0)throw console.error("EXRHeader:",z),"THREE.EXRLoader: provided file is currently unsupported.";return z}function Lo(c,d,_,z,A){const L={size:0,viewer:d,array:_,offset:z,width:c.dataWindow.xMax-c.dataWindow.xMin+1,height:c.dataWindow.yMax-c.dataWindow.yMin+1,channels:c.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:c.channels[0].pixelType,uncompress:null,getter:null,format:null,[Si?"colorSpace":"encoding"]:null};switch(c.compression){case"NO_COMPRESSION":L.lines=1,L.uncompress=hn;break;case"RLE_COMPRESSION":L.lines=1,L.uncompress=Tt;break;case"ZIPS_COMPRESSION":L.lines=1,L.uncompress=kn;break;case"ZIP_COMPRESSION":L.lines=16,L.uncompress=kn;break;case"PIZ_COMPRESSION":L.lines=32,L.uncompress=lr;break;case"PXR24_COMPRESSION":L.lines=16,L.uncompress=Lt;break;case"DWAA_COMPRESSION":L.lines=32,L.uncompress=jn;break;case"DWAB_COMPRESSION":L.lines=256,L.uncompress=jn;break;default:throw"EXRLoader.parse: "+c.compression+" is unsupported"}if(L.scanlineBlockSize=L.lines,L.type==1)switch(A){case Bn:L.getter=Kt,L.inputSize=2;break;case ln:L.getter=Et,L.inputSize=2;break}else if(L.type==2)switch(A){case Bn:L.getter=ce,L.inputSize=4;break;case ln:L.getter=De,L.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+L.type+" for "+c.compression+".";L.blockCount=(c.dataWindow.yMax+1)/L.scanlineBlockSize;for(var b=0;b<L.blockCount;b++)K(d,z);L.outputChannels=L.channels==3?4:L.channels;const Y=L.width*L.height*L.outputChannels;switch(A){case Bn:L.byteArray=new Float32Array(Y),L.channels<L.outputChannels&&L.byteArray.fill(1,0,Y);break;case ln:L.byteArray=new Uint16Array(Y),L.channels<L.outputChannels&&L.byteArray.fill(15360,0,Y);break;default:console.error("THREE.EXRLoader: unsupported type: ",A);break}return L.bytesPerLine=L.width*L.inputSize*L.channels,L.outputChannels==4?L.format=Vr:L.format=Tf,Si?L.colorSpace="srgb-linear":L.encoding=3e3,L}const sr=new DataView(i),Jr=new Uint8Array(i),ur={value:0},sn=Ao(sr,i,ur),Fe=Lo(sn,sr,Jr,ur,this.type),ki={value:0},Fo={R:0,G:1,B:2,A:3,Y:0};for(let c=0;c<Fe.height/Fe.scanlineBlockSize;c++){const d=ht(sr,ur);Fe.size=ht(sr,ur),Fe.lines=d+Fe.scanlineBlockSize>Fe.height?Fe.height-d:Fe.scanlineBlockSize;const z=Fe.size<Fe.lines*Fe.bytesPerLine?Fe.uncompress(Fe):hn(Fe);ur.value+=Fe.size;for(let A=0;A<Fe.scanlineBlockSize;A++){const L=A+c*Fe.scanlineBlockSize;if(L>=Fe.height)break;for(let b=0;b<Fe.channels;b++){const Y=Fo[sn.channels[b].name];for(let ne=0;ne<Fe.width;ne++){ki.value=(A*(Fe.channels*Fe.width)+b*Fe.width+ne)*Fe.inputSize;const te=(Fe.height-1-L)*(Fe.width*Fe.outputChannels)+ne*Fe.outputChannels+Y;Fe.byteArray[te]=Fe.getter(z,ki)}}}}return{header:sn,width:Fe.width,height:Fe.height,data:Fe.byteArray,format:Fe.format,[Si?"colorSpace":"encoding"]:Fe[Si?"colorSpace":"encoding"],type:this.type}}setDataType(i){return this.type=i,this}load(i,s,a,f){function v(p,g){Si?p.colorSpace=g.colorSpace:p.encoding=g.encoding,p.minFilter=Rn,p.magFilter=Rn,p.generateMipmaps=!1,p.flipY=!1,s&&s(p,g)}return super.load(i,v,a,f)}}const Ip=()=>parseInt(Bu.replace(/\D+/g,"")),yc=Ip(),ih=T.forwardRef(({makeDefault:l,camera:i,regress:s,domElement:a,enableDamping:f=!0,keyEvents:v=!1,onChange:p,onStart:g,onEnd:w,...E},h)=>{const m=jt(U=>U.invalidate),S=jt(U=>U.camera),M=jt(U=>U.gl),R=jt(U=>U.events),W=jt(U=>U.setEvents),F=jt(U=>U.set),P=jt(U=>U.get),k=jt(U=>U.performance),H=i||S,$=a||R.connected||M.domElement,Z=T.useMemo(()=>new Pp(H),[H]);return Kr(()=>{Z.enabled&&Z.update()},-1),T.useEffect(()=>(v&&Z.connect(v===!0?$:v),Z.connect($),()=>void Z.dispose()),[v,$,s,Z,m]),T.useEffect(()=>{const U=j=>{m(),s&&k.regress(),p&&p(j)},le=j=>{g&&g(j)},B=j=>{w&&w(j)};return Z.addEventListener("change",U),Z.addEventListener("start",le),Z.addEventListener("end",B),()=>{Z.removeEventListener("start",le),Z.removeEventListener("end",B),Z.removeEventListener("change",U)}},[p,g,w,Z,m,W]),T.useEffect(()=>{if(l){const U=P().controls;return F({controls:Z}),()=>F({controls:U})}},[l,Z]),T.createElement("primitive",In({ref:h,object:Z,enableDamping:f},E))}),Tp=3e3,kp=3001,ia=yc>=154?"opaque_fragment":"output_fragment";class Np extends kf{constructor(i){super(i),this.onBeforeCompile=(s,a)=>{const{isWebGL2:f}=a.capabilities;s.fragmentShader=s.fragmentShader.replace(`#include <${ia}>`,`
        ${f?`#include <${ia}>`:`#extension GL_OES_standard_derivatives : enable
#include <${ia}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${yc>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const oh=T.forwardRef((l,i)=>{const[s]=T.useState(()=>new Np(null));return T.createElement("primitive",In({},l,{object:s,ref:i,attach:"material"}))});function wc(l,i){const s=l+"Geometry";return T.forwardRef(({args:a,children:f,...v},p)=>{const g=T.useRef(null);return T.useImperativeHandle(p,()=>g.current),T.useLayoutEffect(()=>void i?.(g.current)),T.createElement("mesh",In({ref:g},v),T.createElement(s,{attach:"geometry",args:a}),f)})}const lh=wc("cylinder"),ah=wc("sphere"),Cn=1e-5;function zp(l,i,s){const a=new Nf,f=s-Cn;return a.absarc(Cn,Cn,Cn,-Math.PI/2,-Math.PI,!0),a.absarc(Cn,i-f*2,Cn,Math.PI,Math.PI/2,!0),a.absarc(l-f*2,i-f*2,Cn,Math.PI/2,0,!0),a.absarc(l-f*2,Cn,Cn,0,-Math.PI/2,!0),a}const sh=T.forwardRef(function({args:[i=1,s=1,a=1]=[],radius:f=.05,steps:v=1,smoothness:p=4,bevelSegments:g=4,creaseAngle:w=.4,children:E,...h},m){const S=T.useMemo(()=>zp(i,s,f),[i,s,f]),M=T.useMemo(()=>({depth:a-f*2,bevelEnabled:!0,bevelSegments:g*2,steps:v,bevelSize:f-Cn,bevelThickness:f,curveSegments:p}),[a,f,p]),R=T.useRef(null);return T.useLayoutEffect(()=>{R.current&&(R.current.center(),np(R.current,w))},[S,M]),T.createElement("mesh",In({ref:m},h),T.createElement("extrudeGeometry",{ref:R,args:[S,M]}),E)}),uh=T.forwardRef(({children:l,enabled:i=!0,speed:s=1,rotationIntensity:a=1,floatIntensity:f=1,floatingRange:v=[-.1,.1],autoInvalidate:p=!1,...g},w)=>{const E=T.useRef(null);T.useImperativeHandle(w,()=>E.current,[]);const h=T.useRef(Math.random()*1e4);return Kr(m=>{var S,M;if(!i||s===0)return;p&&m.invalidate();const R=h.current+m.clock.elapsedTime;E.current.rotation.x=Math.cos(R/4*s)/8*a,E.current.rotation.y=Math.sin(R/4*s)/8*a,E.current.rotation.z=Math.sin(R/4*s)/20*a;let W=Math.sin(R/4*s)/10;W=zf.mapLinear(W,-.1,.1,(S=v?.[0])!==null&&S!==void 0?S:-.1,(M=v?.[1])!==null&&M!==void 0?M:.1),E.current.position.y=W*f,E.current.updateMatrix()}),T.createElement("group",g,T.createElement("group",{ref:E,matrixAutoUpdate:!1},l))}),Sc=(l,i,s)=>{let a;switch(l){case No:a=new Uint8ClampedArray(i*s*4);break;case ln:a=new Uint16Array(i*s*4);break;case Uf:a=new Uint32Array(i*s*4);break;case Df:a=new Int8Array(i*s*4);break;case Ff:a=new Int16Array(i*s*4);break;case Lf:a=new Int32Array(i*s*4);break;case Bn:a=new Float32Array(i*s*4);break;default:throw new Error("Unsupported data type")}return a};let Io;const Op=(l,i,s,a)=>{if(Io!==void 0)return Io;const f=new Wu(1,1,a);i.setRenderTarget(f);const v=new da(new ju,new Af({color:16777215}));i.render(v,s),i.setRenderTarget(null);const p=Sc(l,f.width,f.height);return i.readRenderTargetPixels(f,0,0,f.width,f.height,p),f.dispose(),v.geometry.dispose(),v.material.dispose(),Io=p[0]!==0,Io};class wa{constructor(i){var s,a,f,v,p,g,w,E,h,m,S,M,R,W,F,P;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(H){throw this._renderer.setRenderTarget(null),H}this._renderer.setRenderTarget(null)},this._width=i.width,this._height=i.height,this._type=i.type,this._colorSpace=i.colorSpace;const k={format:Vr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((s=i.renderTargetOptions)===null||s===void 0?void 0:s.anisotropy)!==void 0?(a=i.renderTargetOptions)===null||a===void 0?void 0:a.anisotropy:1,generateMipmaps:((f=i.renderTargetOptions)===null||f===void 0?void 0:f.generateMipmaps)!==void 0?(v=i.renderTargetOptions)===null||v===void 0?void 0:v.generateMipmaps:!1,magFilter:((p=i.renderTargetOptions)===null||p===void 0?void 0:p.magFilter)!==void 0?(g=i.renderTargetOptions)===null||g===void 0?void 0:g.magFilter:Rn,minFilter:((w=i.renderTargetOptions)===null||w===void 0?void 0:w.minFilter)!==void 0?(E=i.renderTargetOptions)===null||E===void 0?void 0:E.minFilter:Rn,samples:((h=i.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(m=i.renderTargetOptions)===null||m===void 0?void 0:m.samples:void 0,wrapS:((S=i.renderTargetOptions)===null||S===void 0?void 0:S.wrapS)!==void 0?(M=i.renderTargetOptions)===null||M===void 0?void 0:M.wrapS:nr,wrapT:((R=i.renderTargetOptions)===null||R===void 0?void 0:R.wrapT)!==void 0?(W=i.renderTargetOptions)===null||W===void 0?void 0:W.wrapT:nr};if(this._material=i.material,i.renderer?this._renderer=i.renderer:(this._renderer=wa.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new fa,this._camera=new Er,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Op(this._type,this._renderer,this._camera,k)){let H;switch(this._type){case ln:H=this._renderer.extensions.has("EXT_color_buffer_float")?Bn:void 0;break}H!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Bn}`),this._type=H):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new da(new ju,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Wu(this.width,this.height,k),this._renderTarget.texture.mapping=((F=i.renderTargetOptions)===null||F===void 0?void 0:F.mapping)!==void 0?(P=i.renderTargetOptions)===null||P===void 0?void 0:P.mapping:zo}static instantiateRenderer(){const i=new Du;return i.setSize(128,128),i}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const i=Sc(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,i),i}toDataTexture(i){const s=new Of(this.toArray(),this.width,this.height,Vr,this._type,i?.mapping||zo,i?.wrapS||nr,i?.wrapT||nr,i?.magFilter||Rn,i?.minFilter||Rn,i?.anisotropy||1,oa);return s.generateMipmaps=i?.generateMipmaps!==void 0?i?.generateMipmaps:!1,s}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(i){this.disposeOnDemandRenderer(),i&&this.renderTarget.dispose(),this.material instanceof pa&&Object.values(this.material.uniforms).forEach(s=>{s.value instanceof jr&&s.value.dispose()}),Object.values(this.material).forEach(s=>{s instanceof jr&&s.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(i){this._width=i,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(i){this._height=i,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(i){this._renderTarget=i,this._width=i.width,this._height=i.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Ap=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Lp=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Fp extends pa{constructor({gamma:i,offsetHdr:s,offsetSdr:a,gainMapMin:f,gainMapMax:v,maxDisplayBoost:p,hdrCapacityMin:g,hdrCapacityMax:w,sdr:E,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:Ap,fragmentShader:Lp,uniforms:{sdr:{value:E},gainMap:{value:h},gamma:{value:new je(1/i[0],1/i[1],1/i[2])},offsetHdr:{value:new je().fromArray(s)},offsetSdr:{value:new je().fromArray(a)},gainMapMin:{value:new je().fromArray(f)},gainMapMax:{value:new je().fromArray(v)},weightFactor:{value:(Math.log2(p)-g)/(w-g)}},blending:Wf,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=p,this._hdrCapacityMin=g,this._hdrCapacityMax=w,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(i){this.uniforms.sdr.value=i}get gainMap(){return this.uniforms.gainMap.value}set gainMap(i){this.uniforms.gainMap.value=i}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(i){this.uniforms.offsetHdr.value.fromArray(i)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(i){this.uniforms.offsetSdr.value.fromArray(i)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(i){this.uniforms.gainMapMin.value.fromArray(i)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(i){this.uniforms.gainMapMax.value.fromArray(i)}get gamma(){const i=this.uniforms.gamma.value;return[1/i.x,1/i.y,1/i.z]}set gamma(i){const s=this.uniforms.gamma.value;s.x=1/i[0],s.y=1/i[1],s.z=1/i[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(i){this._hdrCapacityMin=i,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(i){this._hdrCapacityMax=i,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(i){this._maxDisplayBoost=Math.max(1,Math.min(65504,i)),this.calculateWeight()}calculateWeight(){const i=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,i))}}class Ec extends Error{}class _c extends Error{}const Ei=(l,i,s)=>{const a=new RegExp(`${i}="([^"]*)"`,"i").exec(l);if(a)return a[1];const f=new RegExp(`<${i}[^>]*>([\\s\\S]*?)</${i}>`,"i").exec(l);if(f){const v=f[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return v&&v.length===3?v.map(p=>p.replace(/<\/?rdf:li>/g,"")):f[1].trim()}if(s!==void 0)return s;throw new Error(`Can't find ${i} in gainmap metadata`)},Dp=l=>{let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(l):i=l.toString();let s=i.indexOf("<x:xmpmeta");for(;s!==-1;){const a=i.indexOf("x:xmpmeta>",s),f=i.slice(s,a+10);try{const v=Ei(f,"hdrgm:GainMapMin","0"),p=Ei(f,"hdrgm:GainMapMax"),g=Ei(f,"hdrgm:Gamma","1"),w=Ei(f,"hdrgm:OffsetSDR","0.015625"),E=Ei(f,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(f),m=h?h[1]:"0",S=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(f);if(!S)throw new Error("Incomplete gainmap metadata");const M=S[1];return{gainMapMin:Array.isArray(v)?v.map(R=>parseFloat(R)):[parseFloat(v),parseFloat(v),parseFloat(v)],gainMapMax:Array.isArray(p)?p.map(R=>parseFloat(R)):[parseFloat(p),parseFloat(p),parseFloat(p)],gamma:Array.isArray(g)?g.map(R=>parseFloat(R)):[parseFloat(g),parseFloat(g),parseFloat(g)],offsetSdr:Array.isArray(w)?w.map(R=>parseFloat(R)):[parseFloat(w),parseFloat(w),parseFloat(w)],offsetHdr:Array.isArray(E)?E.map(R=>parseFloat(R)):[parseFloat(E),parseFloat(E),parseFloat(E)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(M)}}catch{}s=i.indexOf("<x:xmpmeta",a)}};class Up{constructor(i){this.options={debug:i&&i.debug!==void 0?i.debug:!1,extractFII:i&&i.extractFII!==void 0?i.extractFII:!0,extractNonFII:i&&i.extractNonFII!==void 0?i.extractNonFII:!0}}extract(i){return new Promise((s,a)=>{const f=this.options.debug,v=new DataView(i.buffer);if(v.getUint16(0)!==65496){a(new Error("Not a valid jpeg"));return}const p=v.byteLength;let g=2,w=0,E;for(;g<p;){if(++w>250){a(new Error(`Found no marker after ${w} loops `));return}if(v.getUint8(g)!==255){a(new Error(`Not a valid marker at offset 0x${g.toString(16)}, found: 0x${v.getUint8(g).toString(16)}`));return}if(E=v.getUint8(g+1),f&&console.log(`Marker: ${E.toString(16)}`),E===226){f&&console.log("Found APP2 marker (0xffe2)");const h=g+4;if(v.getUint32(h)===1297106432){const m=h+4;let S;if(v.getUint16(m)===18761)S=!1;else if(v.getUint16(m)===19789)S=!0;else{a(new Error("No valid endianness marker found in TIFF header"));return}if(v.getUint16(m+2,!S)!==42){a(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const M=v.getUint32(m+4,!S);if(M<8){a(new Error("Not valid TIFF data! (First offset less than 8)"));return}const R=m+M,W=v.getUint16(R,!S),F=R+2;let P=0;for(let Z=F;Z<F+12*W;Z+=12)v.getUint16(Z,!S)===45057&&(P=v.getUint32(Z+8,!S));const H=R+2+W*12+4,$=[];for(let Z=H;Z<H+P*16;Z+=16){const U={MPType:v.getUint32(Z,!S),size:v.getUint32(Z+4,!S),dataOffset:v.getUint32(Z+8,!S),dependantImages:v.getUint32(Z+12,!S),start:-1,end:-1,isFII:!1};U.dataOffset?(U.start=m+U.dataOffset,U.isFII=!1):(U.start=0,U.isFII=!0),U.end=U.start+U.size,$.push(U)}if(this.options.extractNonFII&&$.length){const Z=new Blob([v]),U=[];for(const le of $){if(le.isFII&&!this.options.extractFII)continue;const B=Z.slice(le.start,le.end+1,"image/jpeg");U.push(B)}s(U)}}}g+=2+v.getUint16(g+2)}})}}const Bp=async l=>{const i=Dp(l);if(!i)throw new _c("Gain map XMP metadata not found");const a=await new Up({extractFII:!0,extractNonFII:!0}).extract(l);if(a.length!==2)throw new Ec("Gain map recovery image not found");return{sdr:new Uint8Array(await a[0].arrayBuffer()),gainMap:new Uint8Array(await a[1].arrayBuffer()),metadata:i}},Ou=l=>new Promise((i,s)=>{const a=document.createElement("img");a.onload=()=>{i(a)},a.onerror=f=>{s(f)},a.src=URL.createObjectURL(l)});class xc extends Bf{constructor(i,s){super(s),i&&(this._renderer=i),this._internalLoadingManager=new Hf}setRenderer(i){return this._renderer=i,this}setRenderTargetOptions(i){return this._renderTargetOptions=i,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const i=new Fp({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new jr,sdr:new jr});return new wa({width:16,height:16,type:ln,colorSpace:oa,material:i,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(i,s,a,f){const v=f?new Blob([f],{type:"image/jpeg"}):void 0,p=new Blob([a],{type:"image/jpeg"});let g,w,E=!1;if(typeof createImageBitmap>"u"){const S=await Promise.all([v?Ou(v):Promise.resolve(void 0),Ou(p)]);w=S[0],g=S[1],E=!0}else{const S=await Promise.all([v?createImageBitmap(v,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(p,{imageOrientation:"flipY"})]);w=S[0],g=S[1]}const h=new jr(w||new ImageData(2,2),zo,nr,nr,Rn,ou,Vr,No,1,oa);h.flipY=E,h.needsUpdate=!0;const m=new jr(g,zo,nr,nr,Rn,ou,Vr,No,1,jf);m.flipY=E,m.needsUpdate=!0,i.width=g.width,i.height=g.height,i.material.gainMap=h,i.material.sdr=m,i.material.gainMapMin=s.gainMapMin,i.material.gainMapMax=s.gainMapMax,i.material.offsetHdr=s.offsetHdr,i.material.offsetSdr=s.offsetSdr,i.material.gamma=s.gamma,i.material.hdrCapacityMin=s.hdrCapacityMin,i.material.hdrCapacityMax=s.hdrCapacityMax,i.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),i.material.needsUpdate=!0,i.render()}}class Hp extends xc{load([i,s,a],f,v,p){const g=this.prepareQuadRenderer();let w,E,h;const m=async()=>{if(w&&E&&h){try{await this.render(g,h,w,E)}catch(j){this.manager.itemError(i),this.manager.itemError(s),this.manager.itemError(a),typeof p=="function"&&p(j),g.disposeOnDemandRenderer();return}typeof f=="function"&&f(g),this.manager.itemEnd(i),this.manager.itemEnd(s),this.manager.itemEnd(a),g.disposeOnDemandRenderer()}};let S=!0,M=0,R=0,W=!0,F=0,P=0,k=!0,H=0,$=0;const Z=()=>{if(typeof v=="function"){const j=M+F+H,Q=R+P+$,G=S&&W&&k;v(new ProgressEvent("progress",{lengthComputable:G,loaded:Q,total:j}))}};this.manager.itemStart(i),this.manager.itemStart(s),this.manager.itemStart(a);const U=new To(this._internalLoadingManager);U.setResponseType("arraybuffer"),U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(i,async j=>{if(typeof j=="string")throw new Error("Invalid sdr buffer");w=j,await m()},j=>{S=j.lengthComputable,R=j.loaded,M=j.total,Z()},j=>{this.manager.itemError(i),typeof p=="function"&&p(j)});const le=new To(this._internalLoadingManager);le.setResponseType("arraybuffer"),le.setRequestHeader(this.requestHeader),le.setPath(this.path),le.setWithCredentials(this.withCredentials),le.load(s,async j=>{if(typeof j=="string")throw new Error("Invalid gainmap buffer");E=j,await m()},j=>{W=j.lengthComputable,P=j.loaded,F=j.total,Z()},j=>{this.manager.itemError(s),typeof p=="function"&&p(j)});const B=new To(this._internalLoadingManager);return B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(a,async j=>{if(typeof j!="string")throw new Error("Invalid metadata string");h=JSON.parse(j),await m()},j=>{k=j.lengthComputable,$=j.loaded,H=j.total,Z()},j=>{this.manager.itemError(a),typeof p=="function"&&p(j)}),g}}class jp extends xc{load(i,s,a,f){const v=this.prepareQuadRenderer(),p=new To(this._internalLoadingManager);return p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setPath(this.path),p.setWithCredentials(this.withCredentials),this.manager.itemStart(i),p.load(i,async g=>{if(typeof g=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const w=new Uint8Array(g);let E,h,m;try{const S=await Bp(w);E=S.sdr,h=S.gainMap,m=S.metadata}catch(S){if(S instanceof _c||S instanceof Ec)console.warn(`Failure to reconstruct an HDR image from ${i}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},E=w;else throw S}try{await this.render(v,m,E,h)}catch(S){this.manager.itemError(i),typeof f=="function"&&f(S),v.disposeOnDemandRenderer();return}typeof s=="function"&&s(v),this.manager.itemEnd(i),v.disposeOnDemandRenderer()},a,g=>{this.manager.itemError(i),typeof f=="function"&&f(g)}),v}}const Pi={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Mc="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Qr=l=>Array.isArray(l),Sa=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Oo({files:l=Sa,path:i="",preset:s=void 0,encoding:a=void 0,extensions:f}={}){let v=null,p=!1;s&&(Ea(s),l=Pi[s],i=Mc),p=Qr(l);const{extension:g,isCubemap:w}=_a(l);if(v=xa(g),!v)throw new Error("useEnvironment: Unrecognized file extension: "+l);const E=jt(M=>M.gl);T.useLayoutEffect(()=>{if(g!=="webp"&&g!=="jpg"&&g!=="jpeg")return;function M(){Yr.clear(v,p?[l]:l)}E.domElement.addEventListener("webglcontextlost",M,{once:!0})},[l,E.domElement]);const h=Yr(v,p?[l]:l,M=>{(g==="webp"||g==="jpg"||g==="jpeg")&&M.setRenderer(E),M.setPath==null||M.setPath(i),f&&f(M)});let m=p?h[0]:h;if(g==="jpg"||g==="jpeg"||g==="webp"){var S;m=(S=m.renderTarget)==null?void 0:S.texture}return m.mapping=w?Gf:Zf,"colorSpace"in m?m.colorSpace=a??w?"srgb":"srgb-linear":m.encoding=a??w?kp:Tp,m}const Wp={files:Sa,path:"",preset:void 0,extensions:void 0};Oo.preload=l=>{const i={...Wp,...l};let{files:s,path:a=""}=i;const{preset:f,extensions:v}=i;f&&(Ea(f),s=Pi[f],a=Mc);const{extension:p}=_a(s);if(p==="webp"||p==="jpg"||p==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const g=xa(p);if(!g)throw new Error("useEnvironment: Unrecognized file extension: "+s);Yr.preload(g,Qr(s)?[s]:s,w=>{w.setPath==null||w.setPath(a),v&&v(w)})};const Gp={files:Sa,preset:void 0};Oo.clear=l=>{const i={...Gp,...l};let{files:s}=i;const{preset:a}=i;a&&(Ea(a),s=Pi[a]);const{extension:f}=_a(s),v=xa(f);if(!v)throw new Error("useEnvironment: Unrecognized file extension: "+s);Yr.clear(v,Qr(s)?[s]:s)};function Ea(l){if(!(l in Pi))throw new Error("Preset must be one of: "+Object.keys(Pi).join(", "))}function _a(l){var i;const s=Qr(l)&&l.length===6,a=Qr(l)&&l.length===3&&l.some(p=>p.endsWith("json")),f=Qr(l)?l[0]:l;return{extension:s?"cube":a?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(i=f.split(".").pop())==null||(i=i.split("?"))==null||(i=i.shift())==null?void 0:i.toLowerCase(),isCubemap:s,isGainmap:a}}function xa(l){return l==="cube"?Qf:l==="hdr"?Cp:l==="exr"?Rp:l==="jpg"||l==="jpeg"?jp:l==="webp"?Hp:null}const Zp=l=>l.current&&l.current.isScene,Qp=l=>Zp(l)?l.current:l;function Ma(l,i,s,a,f={}){var v,p,g,w;f={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...f};const E=Qp(i||s),h=E.background,m=E.environment,S={backgroundBlurriness:E.backgroundBlurriness,backgroundIntensity:E.backgroundIntensity,backgroundRotation:(v=(p=E.backgroundRotation)==null||p.clone==null?void 0:p.clone())!==null&&v!==void 0?v:[0,0,0],environmentIntensity:E.environmentIntensity,environmentRotation:(g=(w=E.environmentRotation)==null||w.clone==null?void 0:w.clone())!==null&&g!==void 0?g:[0,0,0]};return l!=="only"&&(E.environment=a),l&&(E.background=a),tr(E,f),()=>{l!=="only"&&(E.environment=m),l&&(E.background=h),tr(E,S)}}function Pa({scene:l,background:i=!1,map:s,...a}){const f=jt(v=>v.scene);return T.useLayoutEffect(()=>{if(s)return Ma(i,l,f,s,a)}),null}function Pc({background:l=!1,scene:i,blur:s,backgroundBlurriness:a,backgroundIntensity:f,backgroundRotation:v,environmentIntensity:p,environmentRotation:g,...w}){const E=Oo(w),h=jt(m=>m.scene);return T.useLayoutEffect(()=>Ma(l,i,h,E,{backgroundBlurriness:s??a,backgroundIntensity:f,backgroundRotation:v,environmentIntensity:p,environmentRotation:g})),T.useEffect(()=>()=>{E.dispose()},[E]),null}function Vp({children:l,near:i=.1,far:s=1e3,resolution:a=256,frames:f=1,map:v,background:p=!1,blur:g,backgroundBlurriness:w,backgroundIntensity:E,backgroundRotation:h,environmentIntensity:m,environmentRotation:S,scene:M,files:R,path:W,preset:F=void 0,extensions:P}){const k=jt(B=>B.gl),H=jt(B=>B.scene),$=T.useRef(null),[Z]=T.useState(()=>new fa),U=T.useMemo(()=>{const B=new Vf(a);return B.texture.type=ln,B},[a]);T.useEffect(()=>()=>{U.dispose()},[U]),T.useLayoutEffect(()=>{if(f===1){const B=k.autoClear;k.autoClear=!0,$.current.update(k,Z),k.autoClear=B}return Ma(p,M,H,U.texture,{backgroundBlurriness:g??w,backgroundIntensity:E,backgroundRotation:h,environmentIntensity:m,environmentRotation:S})},[l,Z,U.texture,M,H,p,f,k]);let le=1;return Kr(()=>{if(f===1/0||le<f){const B=k.autoClear;k.autoClear=!0,$.current.update(k,Z),k.autoClear=B,le++}}),T.createElement(T.Fragment,null,Td(T.createElement(T.Fragment,null,l,T.createElement("cubeCamera",{ref:$,args:[i,s,U]}),R||F?T.createElement(Pc,{background:!0,files:R,preset:F,path:W,extensions:P}):v?T.createElement(Pa,{background:!0,map:v,extensions:P}):null),Z))}function Yp(l){var i,s,a,f;const v=Oo(l),p=l.map||v;T.useMemo(()=>Yu({GroundProjectedEnvImpl:gp}),[]),T.useEffect(()=>()=>{v.dispose()},[v]);const g=T.useMemo(()=>[p],[p]),w=(i=l.ground)==null?void 0:i.height,E=(s=l.ground)==null?void 0:s.radius,h=(a=(f=l.ground)==null?void 0:f.scale)!==null&&a!==void 0?a:1e3;return T.createElement(T.Fragment,null,T.createElement(Pa,In({},l,{map:p})),T.createElement("groundProjectedEnvImpl",{args:g,scale:h,height:w,radius:E}))}function ch(l){return l.ground?T.createElement(Yp,l):l.map?T.createElement(Pa,l):l.children?T.createElement(Vp,l):T.createElement(Pc,l)}let wr,_i;const Xp=T.createContext(null),Au=new Yf,Lu=new je,Kp=T.forwardRef(({children:l,range:i,limit:s=1e3,...a},f)=>{const v=T.useRef(null);T.useImperativeHandle(f,()=>v.current,[]);const[p,g]=T.useState([]),[[w,E,h]]=T.useState(()=>[new Float32Array(s*3),Float32Array.from({length:s*3},()=>1),Float32Array.from({length:s},()=>1)]);T.useEffect(()=>{v.current.geometry.attributes.position.needsUpdate=!0}),Kr(()=>{for(v.current.updateMatrix(),v.current.updateMatrixWorld(),Au.copy(v.current.matrixWorld).invert(),v.current.geometry.drawRange.count=Math.min(s,i!==void 0?i:s,p.length),wr=0;wr<p.length;wr++)_i=p[wr].current,_i.getWorldPosition(Lu).applyMatrix4(Au),Lu.toArray(w,wr*3),v.current.geometry.attributes.position.needsUpdate=!0,_i.matrixWorldNeedsUpdate=!0,_i.color.toArray(E,wr*3),v.current.geometry.attributes.color.needsUpdate=!0,h.set([_i.size],wr),v.current.geometry.attributes.size.needsUpdate=!0});const m=T.useMemo(()=>({getParent:()=>v,subscribe:S=>(g(M=>[...M,S]),()=>g(M=>M.filter(R=>R.current!==S.current)))}),[]);return T.createElement("points",In({userData:{instances:p},matrixAutoUpdate:!1,ref:v,raycast:()=>null},a),T.createElement("bufferGeometry",null,T.createElement("bufferAttribute",{attach:"attributes-position",count:w.length/3,array:w,itemSize:3,usage:Zr}),T.createElement("bufferAttribute",{attach:"attributes-color",count:E.length/3,array:E,itemSize:3,usage:Zr}),T.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:Zr})),T.createElement(Xp.Provider,{value:m},l))}),bp=T.forwardRef(({children:l,positions:i,colors:s,sizes:a,stride:f=3,...v},p)=>{const g=T.useRef(null);return T.useImperativeHandle(p,()=>g.current,[]),Kr(()=>{const w=g.current.geometry.attributes;w.position.needsUpdate=!0,s&&(w.color.needsUpdate=!0),a&&(w.size.needsUpdate=!0)}),T.createElement("points",In({ref:g},v),T.createElement("bufferGeometry",null,T.createElement("bufferAttribute",{attach:"attributes-position",count:i.length/f,array:i,itemSize:f,usage:Zr}),s&&T.createElement("bufferAttribute",{attach:"attributes-color",count:s.length/f,array:s,itemSize:3,usage:Zr}),a&&T.createElement("bufferAttribute",{attach:"attributes-size",count:a.length/f,array:a,itemSize:1,usage:Zr})),l)}),fh=T.forwardRef((l,i)=>l.positions instanceof Float32Array?T.createElement(bp,In({},l,{ref:i})):T.createElement(Kp,In({},l,{ref:i})));export{th as C,ch as E,uh as F,nh as H,ih as O,fh as P,sh as R,ah as S,eh as _,oh as a,lh as b,Kr as u};
