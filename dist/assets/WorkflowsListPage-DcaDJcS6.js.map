{"version":3,"file":"WorkflowsListPage-DcaDJcS6.js","sources":["../../src/pages/dashboard/workflows/WorkflowsListPage.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useWorkflowBuilderStore } from \"@/stores/useWorkflowBuilderStore\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Plus,\n  Search,\n  Workflow,\n  Play,\n  Pause,\n  MoreVertical,\n  Trash2,\n  Copy,\n  Settings,\n  Loader2,\n  CheckCircle,\n  XCircle,\n  Clock,\n} from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\nimport type { Workflow as WorkflowType, WorkflowCategory } from \"@/types/workflow\";\n\nconst CATEGORY_LABELS: Record<WorkflowCategory, string> = {\n  lead_management: \"Lead Management\",\n  listing_automation: \"Listing Automation\",\n  marketing: \"Marketing\",\n  notifications: \"Notifications\",\n  integrations: \"Integrations\",\n  general: \"General\",\n};\n\nexport const WorkflowsListPage = () => {\n  const navigate = useNavigate();\n  const { loadUserWorkflows } = useWorkflowBuilderStore();\n\n  const [workflows, setWorkflows] = useState<WorkflowType[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState<string>(\"all\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n\n  useEffect(() => {\n    const fetchWorkflows = async () => {\n      setIsLoading(true);\n      try {\n        const data = await loadUserWorkflows();\n        setWorkflows(data);\n      } catch (error) {\n        console.error(\"Failed to load workflows:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchWorkflows();\n  }, []);\n\n  const filteredWorkflows = workflows.filter((workflow) => {\n    // Search filter\n    if (\n      searchQuery &&\n      !workflow.name.toLowerCase().includes(searchQuery.toLowerCase()) &&\n      !workflow.description?.toLowerCase().includes(searchQuery.toLowerCase())\n    ) {\n      return false;\n    }\n\n    // Category filter\n    if (categoryFilter !== \"all\" && workflow.category !== categoryFilter) {\n      return false;\n    }\n\n    // Status filter\n    if (statusFilter === \"active\" && !workflow.isActive) return false;\n    if (statusFilter === \"inactive\" && workflow.isActive) return false;\n    if (statusFilter === \"draft\" && workflow.isPublished) return false;\n\n    return true;\n  });\n\n  const handleCreateNew = () => {\n    navigate(\"/dashboard/workflows/new\");\n  };\n\n  const handleEditWorkflow = (workflowId: string) => {\n    navigate(`/dashboard/workflows/${workflowId}`);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n  };\n\n  return (\n    <div className=\"p-6 max-w-7xl mx-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Workflows</h1>\n          <p className=\"text-gray-600 mt-1\">\n            Automate your real estate operations with visual workflows\n          </p>\n        </div>\n        <Button onClick={handleCreateNew}>\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Create Workflow\n        </Button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex items-center gap-4 mb-6\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n          <Input\n            placeholder=\"Search workflows...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n\n        <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n          <SelectTrigger className=\"w-48\">\n            <SelectValue placeholder=\"All Categories\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Categories</SelectItem>\n            {Object.entries(CATEGORY_LABELS).map(([value, label]) => (\n              <SelectItem key={value} value={value}>\n                {label}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n\n        <Select value={statusFilter} onValueChange={setStatusFilter}>\n          <SelectTrigger className=\"w-40\">\n            <SelectValue placeholder=\"All Status\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status</SelectItem>\n            <SelectItem value=\"active\">Active</SelectItem>\n            <SelectItem value=\"inactive\">Inactive</SelectItem>\n            <SelectItem value=\"draft\">Draft</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Workflows list */}\n      {isLoading ? (\n        <div className=\"flex items-center justify-center py-20\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n        </div>\n      ) : filteredWorkflows.length === 0 ? (\n        <div className=\"text-center py-20 bg-white rounded-lg border\">\n          <Workflow className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            {workflows.length === 0\n              ? \"No workflows yet\"\n              : \"No matching workflows\"}\n          </h3>\n          <p className=\"text-gray-600 mb-6\">\n            {workflows.length === 0\n              ? \"Create your first workflow to automate your operations\"\n              : \"Try adjusting your filters\"}\n          </p>\n          {workflows.length === 0 && (\n            <Button onClick={handleCreateNew}>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create Your First Workflow\n            </Button>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid gap-4\">\n          {filteredWorkflows.map((workflow) => (\n            <div\n              key={workflow.id}\n              className=\"bg-white rounded-lg border p-4 hover:shadow-md transition-shadow cursor-pointer\"\n              onClick={() => handleEditWorkflow(workflow.id)}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h3 className=\"font-semibold text-gray-900\">\n                      {workflow.name}\n                    </h3>\n                    <div className=\"flex items-center gap-2\">\n                      {workflow.isActive ? (\n                        <span className=\"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full flex items-center gap-1\">\n                          <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\" />\n                          Active\n                        </span>\n                      ) : workflow.isPublished ? (\n                        <span className=\"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full\">\n                          Inactive\n                        </span>\n                      ) : (\n                        <span className=\"px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full\">\n                          Draft\n                        </span>\n                      )}\n                      <span className=\"px-2 py-0.5 text-xs bg-blue-50 text-blue-700 rounded\">\n                        {CATEGORY_LABELS[workflow.category]}\n                      </span>\n                    </div>\n                  </div>\n\n                  {workflow.description && (\n                    <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">\n                      {workflow.description}\n                    </p>\n                  )}\n\n                  <div className=\"flex items-center gap-6 text-xs text-gray-500\">\n                    <div className=\"flex items-center gap-1\">\n                      <Clock className=\"w-3.5 h-3.5\" />\n                      Updated {formatDate(workflow.updatedAt)}\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <Play className=\"w-3.5 h-3.5\" />\n                      {workflow.executionCount} runs\n                    </div>\n                    {workflow.executionCount > 0 && (\n                      <>\n                        <div className=\"flex items-center gap-1 text-green-600\">\n                          <CheckCircle className=\"w-3.5 h-3.5\" />\n                          {workflow.successCount} success\n                        </div>\n                        {workflow.failureCount > 0 && (\n                          <div className=\"flex items-center gap-1 text-red-600\">\n                            <XCircle className=\"w-3.5 h-3.5\" />\n                            {workflow.failureCount} failed\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>\n                    <Button variant=\"ghost\" size=\"sm\">\n                      <MoreVertical className=\"w-4 h-4\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"end\">\n                    <DropdownMenuItem\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleEditWorkflow(workflow.id);\n                      }}\n                    >\n                      <Settings className=\"w-4 h-4 mr-2\" />\n                      Edit\n                    </DropdownMenuItem>\n                    <DropdownMenuItem onClick={(e) => e.stopPropagation()}>\n                      <Copy className=\"w-4 h-4 mr-2\" />\n                      Duplicate\n                    </DropdownMenuItem>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem\n                      onClick={(e) => e.stopPropagation()}\n                      className=\"text-red-600\"\n                    >\n                      <Trash2 className=\"w-4 h-4 mr-2\" />\n                      Delete\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WorkflowsListPage;\n"],"names":["CATEGORY_LABELS","WorkflowsListPage","navigate","useNavigate","loadUserWorkflows","useWorkflowBuilderStore","workflows","setWorkflows","useState","isLoading","setIsLoading","searchQuery","setSearchQuery","categoryFilter","setCategoryFilter","statusFilter","setStatusFilter","useEffect","data","error","filteredWorkflows","workflow","handleCreateNew","handleEditWorkflow","workflowId","formatDate","dateString","jsxs","jsx","Button","Plus","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","value","label","Loader2","Workflow","Clock","Play","Fragment","CheckCircle","XCircle","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","DropdownMenuItem","Settings","Copy","DropdownMenuSeparator","Trash2"],"mappings":"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"}