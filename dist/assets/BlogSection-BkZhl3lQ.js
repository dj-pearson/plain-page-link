import{j as e}from"./ui-vendor-CfJXqRNY.js";import{b as n,L as c}from"./react-vendor-J1CWpfuS.js";import{u as N}from"./state-vendor-CLv4ylJ5.js";import{x as v,I as w,y,z as b,D as C,F as S,G as L,C as I,a as _,J as d,b as A,c as E,q as B,K as G,j as k,B as q,s as D}from"./index-D2pWWD8v.js";import{A as R}from"./arrow-right-DM0Fm2gD.js";import"./supabase-Cz6j5Lvp.js";import"./three-vendor-D7cCqkiR.js";import"./charts-vendor-CEquIWeD.js";import"./date-vendor-Xm6TBh54.js";import"./form-vendor-DMOe4tsc.js";import"./animation-vendor-BZ61rGB5.js";function P({limit:m=6,showSearch:l=!0,showFilters:i=!0}){const[t,x]=n.useState(""),[r,u]=n.useState("all"),{data:h=[],isLoading:g}=N({queryKey:["published-articles"],queryFn:async()=>{const{data:s,error:a}=await D.from("articles").select("*").eq("status","published").order("published_at",{ascending:!1}).limit(m);if(a)throw a;return s}}),p=["all","Real Estate Tips","Market Insights","Buying Guide","Selling Guide","Investment","Neighborhood Guides","Home Improvement","General"],o=h.filter(s=>{const a=!t||s.title.toLowerCase().includes(t.toLowerCase())||s.excerpt?.toLowerCase().includes(t.toLowerCase())||s.tags?.some(f=>f.toLowerCase().includes(t.toLowerCase())),j=r==="all"||s.category===r;return a&&j});return e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Latest Real Estate Insights"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Expert advice, market trends, and guides to help you succeed in real estate"})]}),(l||i)&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8 max-w-4xl mx-auto",children:[l&&e.jsxs("div",{className:"relative flex-1",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(w,{placeholder:"Search articles, topics, or keywords...",value:t,onChange:s=>x(s.target.value),className:"pl-10"})]}),i&&e.jsxs(y,{value:r,onValueChange:u,children:[e.jsx(b,{className:"w-full sm:w-[200px]",children:e.jsx(C,{})}),e.jsx(S,{children:p.map(s=>e.jsx(L,{value:s,children:s==="all"?"All Categories":s},s))})]})]}),g?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading articles..."})}):o.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No articles found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:o.map(s=>e.jsx(c,{to:`/blog/${s.slug}`,children:e.jsxs(I,{className:"h-full hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[s.featured_image_url&&e.jsx("div",{className:"overflow-hidden rounded-t-lg",children:e.jsx("img",{src:s.featured_image_url,alt:s.title,width:400,height:192,loading:"lazy",decoding:"async",className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(d,{variant:"secondary",children:s.category}),s.tags?.slice(0,2).map(a=>e.jsx(d,{variant:"outline",className:"text-xs",children:a},a))]}),e.jsx(A,{className:"line-clamp-2 group-hover:text-primary transition-colors",children:s.title}),e.jsx(E,{className:"line-clamp-3",children:s.excerpt})]}),e.jsxs(B,{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),new Date(s.published_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4"}),s.view_count," views"]})]})]})},s.id))}),e.jsx("div",{className:"text-center",children:e.jsx(c,{to:"/blog",children:e.jsxs(q,{size:"lg",className:"gap-2",children:["View All Articles",e.jsx(R,{className:"h-4 w-4"})]})})})]})]})})}export{P as BlogSection};
