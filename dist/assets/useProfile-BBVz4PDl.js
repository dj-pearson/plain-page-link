import{f as d,u as l,g as f}from"./vendor-data-D8Q-8Ib3.js";import{l as c,s}from"./index-CEZzrIvr.js";function m(){const{user:e}=c(),o=d(),{data:a,isLoading:n}=l({queryKey:["profile",e?.id],queryFn:async()=>{if(!e?.id)return null;const{data:t,error:r}=await s.from("profiles").select("*").eq("id",e.id).single();if(r)throw r;return t},enabled:!!e?.id}),u=f({mutationFn:async t=>{if(!e?.id)throw new Error("User not authenticated");const{data:r,error:i}=await s.from("profiles").update(t).eq("id",e.id).select().single();if(i)throw i;return r},onSuccess:()=>{o.invalidateQueries({queryKey:["profile",e?.id]})}});return{profile:a,isLoading:n,updateProfile:u}}export{m as u};
