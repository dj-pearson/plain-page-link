import{r as e,j as s}from"./react-vendor-CGQ4_CNL.js";import{j as a,C as t,f as i,g as l,o as r,J as n,K as c,M as d,N as o,h as x,B as h,D as m,a7 as j,l as u,m as p,n as g,G as N,L as f,I as v,T as y,S as _,a as w,b,d as k,e as C,w as S,O as A,Z as R,_ as D,$ as F,a0 as q,a1 as T,a2 as E}from"./ui-components-CG0a5cDP.js";import{s as I}from"./supabase-DfyRWmQG.js";import{u as L}from"./index-CCrfbmPv.js";import{aM as P,c as M,aB as O,T as K,n as B,aN as z,X as H,b3 as U,aw as G,as as V,b4 as W,az as Y,aD as $,a8 as J,S as Z,ac as X,aL as Q,U as ee,h as se,B as ae,aj as te,b5 as ie,b6 as le,b7 as re,b2 as ne,Z as ce,a7 as de,G as oe,a9 as xe,b8 as he,ae as me,ao as je,aI as ue,b9 as pe}from"./icons-BX9Iz4zT.js";import{b as ge}from"./utils-wmY8hpgz.js";import{R as Ne,L as fe,X as ve,Y as ye,T as _e,b as we}from"./charts-D_q0pR-d.js";const be=()=>{const{toast:m}=L(),[j,u]=e.useState(!1),[p,g]=e.useState([]),[N,f]=e.useState([]),[v,y]=e.useState(0),[_,w]=e.useState(0),[b,k]=e.useState(0);e.useEffect(()=>{C(),S();const e=I.channel("seo_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"seo_notification_queue"},e=>{g(s=>[e.new,...s]),A([e.new,...p])}).subscribe();return()=>{e.unsubscribe()}},[]);const C=async()=>{try{const{data:e,error:s}=await I.from("seo_notification_queue").select("*").order("created_at",{ascending:!1}).limit(50);if(s)throw s;g(e||[]),A(e||[])}catch(e){}},S=async()=>{try{const{data:e,error:s}=await I.from("seo_audit_schedules").select("*").not("last_run_at","is",null).order("last_run_at",{ascending:!1}).limit(5);if(s)throw s;f(e||[])}catch(e){}},A=e=>{const s=e.filter(e=>"critical"===e.severity&&"pending"===e.status).length,a=e.filter(e=>"medium"===e.severity&&"pending"===e.status).length,t=e.filter(e=>"opportunity"===e.notification_type&&"pending"===e.status).length;y(s),w(a),k(t)},R=async e=>{try{const{error:s}=await I.from("seo_notification_queue").update({status:"sent"}).eq("id",e);if(s)throw s;g(s=>s.filter(s=>s.id!==e)),A(p.filter(s=>s.id!==e)),m({title:"Notification dismissed",description:"The notification has been marked as read"})}catch(s){m({title:"Error",description:s.message,variant:"destructive"})}},D=e=>{switch(e){case"critical":return s.jsx(M,{className:"h-5 w-5 text-red-500"});case"high":case"medium":return s.jsx(O,{className:"h-5 w-5 text-yellow-500"});case"low":return s.jsx(K,{className:"h-5 w-5 text-blue-500"});default:return s.jsx(z,{className:"h-5 w-5 text-gray-500"})}},F=e=>s.jsx(h,{variant:{critical:"destructive",high:"destructive",medium:"default",low:"secondary"}[e]||"default",children:e}),q=p.filter(e=>("critical"===e.severity||"high"===e.severity)&&"critical_issue"===e.notification_type&&"pending"===e.status),T=p.filter(e=>"medium"===e.severity&&"warning"===e.notification_type&&"pending"===e.status),E=p.filter(e=>"opportunity"===e.notification_type&&"pending"===e.status),H=p.filter(e=>"competitor_alert"===e.notification_type&&"pending"===e.status);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"SEO Alerts Dashboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring of SEO issues, warnings, and opportunities"})]}),s.jsxs(a,{onClick:async()=>{u(!0),await C(),await S(),u(!1),m({title:"Alerts refreshed",description:"Latest alerts and audit results loaded"})},disabled:j,variant:"outline",children:[s.jsx(P,{className:"h-4 w-4 mr-2 "+(j?"animate-spin":"")}),"Refresh"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(t,{className:"border-red-500",children:[s.jsx(i,{className:"pb-2",children:s.jsxs(l,{className:"text-sm flex items-center gap-2",children:[s.jsx(M,{className:"h-4 w-4 text-red-500"}),"Critical Issues"]})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-red-600",children:v}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Require immediate attention"})]})]}),s.jsxs(t,{className:"border-yellow-500",children:[s.jsx(i,{className:"pb-2",children:s.jsxs(l,{className:"text-sm flex items-center gap-2",children:[s.jsx(O,{className:"h-4 w-4 text-yellow-500"}),"Warnings"]})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:_}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Should be addressed soon"})]})]}),s.jsxs(t,{className:"border-blue-500",children:[s.jsx(i,{className:"pb-2",children:s.jsxs(l,{className:"text-sm flex items-center gap-2",children:[s.jsx(K,{className:"h-4 w-4 text-blue-500"}),"Opportunities"]})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:b}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Potential improvements"})]})]}),s.jsxs(t,{className:"border-green-500",children:[s.jsx(i,{className:"pb-2",children:s.jsxs(l,{className:"text-sm flex items-center gap-2",children:[s.jsx(B,{className:"h-4 w-4 text-green-500"}),"Health Score"]})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:N[0]?.last_run_results?.overall_score||"N/A"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Latest audit score"})]})]})]}),s.jsxs(n,{defaultValue:"critical",className:"w-full",children:[s.jsxs(c,{className:"grid w-full grid-cols-4",children:[s.jsxs(d,{value:"critical",children:["Critical (",q.length,")"]}),s.jsxs(d,{value:"warnings",children:["Warnings (",T.length,")"]}),s.jsxs(d,{value:"opportunities",children:["Opportunities (",E.length,")"]}),s.jsxs(d,{value:"competitor",children:["Competitors (",H.length,")"]})]}),s.jsx(o,{value:"critical",className:"space-y-4",children:0===q.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(B,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),s.jsx("p",{children:"No critical issues detected"})]})}):q.map(e=>s.jsx(ke,{notification:e,onDismiss:R,getSeverityIcon:D,getSeverityBadge:F},e.id))}),s.jsx(o,{value:"warnings",className:"space-y-4",children:0===T.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(B,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),s.jsx("p",{children:"No warnings at this time"})]})}):T.map(e=>s.jsx(ke,{notification:e,onDismiss:R,getSeverityIcon:D,getSeverityBadge:F},e.id))}),s.jsx(o,{value:"opportunities",className:"space-y-4",children:0===E.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(K,{className:"h-12 w-12 mx-auto mb-2 text-blue-500"}),s.jsx("p",{children:"No new opportunities identified"})]})}):E.map(e=>s.jsx(ke,{notification:e,onDismiss:R,getSeverityIcon:D,getSeverityBadge:F},e.id))}),s.jsx(o,{value:"competitor",className:"space-y-4",children:0===H.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(z,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"No competitor alerts"})]})}):H.map(e=>s.jsx(ke,{notification:e,onDismiss:R,getSeverityIcon:D,getSeverityBadge:F},e.id))})]}),s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"Recent Audits"}),s.jsx(x,{children:"Latest automated audit results"})]}),s.jsx(r,{children:0===N.length?s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No recent audits found"}):s.jsx("div",{className:"space-y-4",children:N.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:e.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.last_run_at&&`Ran ${ge(new Date(e.last_run_at),{addSuffix:!0})}`})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[e.last_run_results&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:e.last_run_results.overall_score||"N/A"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Score"})]}),s.jsx(h,{variant:"success"===e.last_run_status?"default":"destructive",children:e.last_run_status})]})]},e.id))})})]})]})},ke=({notification:e,onDismiss:n,getSeverityIcon:c,getSeverityBadge:d})=>s.jsxs(t,{children:[s.jsx(i,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[c(e.severity),s.jsxs("div",{children:[s.jsx(l,{className:"text-lg",children:e.title}),s.jsx(x,{children:ge(new Date(e.created_at),{addSuffix:!0})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[d(e.severity),s.jsx(a,{variant:"ghost",size:"icon",onClick:()=>n(e.id),children:s.jsx(H,{className:"h-4 w-4"})})]})]})}),s.jsxs(r,{children:[s.jsx("p",{className:"text-sm mb-4",children:e.message}),e.data&&s.jsxs("div",{className:"space-y-2",children:[e.data.critical_issues&&s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-sm mb-1",children:"Critical Issues:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:e.data.critical_issues.slice(0,3).map((e,a)=>s.jsx("li",{children:e},a))})]}),e.data.warnings&&s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-sm mb-1",children:"Warnings:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:e.data.warnings.slice(0,3).map((e,a)=>s.jsx("li",{children:e},a))})]}),e.data.overall_score&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("span",{className:"text-sm font-semibold",children:"Overall Score:"}),s.jsxs("span",{className:"text-lg font-bold",children:[e.data.overall_score,"/100"]})]})]})]})]}),Ce=[{value:"missing_meta_description",label:"Missing Meta Description"},{value:"missing_alt_text",label:"Missing Alt Text"},{value:"broken_link",label:"Broken Link"},{value:"missing_h1",label:"Missing H1"},{value:"duplicate_title",label:"Duplicate Title"},{value:"thin_content",label:"Thin Content"},{value:"slow_page",label:"Slow Page Speed"},{value:"missing_schema",label:"Missing Schema Markup"}],Se=[{value:"generate_meta_description",label:"Generate Meta Description (AI)"},{value:"generate_alt_text",label:"Generate Alt Text (AI)"},{value:"update_link",label:"Update Link"},{value:"add_schema_markup",label:"Add Schema Markup"},{value:"optimize_image",label:"Optimize Image"},{value:"fix_heading_structure",label:"Fix Heading Structure"}],Ae=()=>{const{toast:R}=L(),[D,F]=e.useState([]),[q,T]=e.useState([]),[E,P]=e.useState([]),[M,O]=e.useState(!1),[K,z]=e.useState(!1),[H,Z]=e.useState({name:"",description:"",issue_type:"",fix_action:"",requires_approval:!0,auto_apply:!1,priority:50});e.useEffect(()=>{X(),Q(),ee()},[]);const X=async()=>{try{const{data:e,error:s}=await I.from("seo_autofix_rules").select("*").order("priority",{ascending:!1});if(s)throw s;F(e||[])}catch(e){}},Q=async()=>{try{const{data:e,error:s}=await I.from("seo_autofix_history").select("*").order("applied_at",{ascending:!1}).limit(50);if(s)throw s;T(e||[])}catch(e){}},ee=async()=>{try{const{data:e,error:s}=await I.from("seo_autofix_history").select("*").eq("result","pending_approval").order("applied_at",{ascending:!1});if(s)throw s;P(e||[])}catch(e){}},se=e=>{switch(e){case"success":return s.jsx(B,{className:"h-5 w-5 text-green-500"});case"failed":return s.jsx($,{className:"h-5 w-5 text-red-500"});case"pending_approval":return s.jsx(J,{className:"h-5 w-5 text-yellow-500"});default:return s.jsx(J,{className:"h-5 w-5 text-gray-500"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(U,{className:"h-6 w-6"}),"Auto-Fix Engine"]}),s.jsx("p",{className:"text-muted-foreground",children:"Automatically detect and fix common SEO issues"})]}),s.jsxs(m,{open:K,onOpenChange:z,children:[s.jsx(j,{asChild:!0,children:s.jsxs(a,{children:[s.jsx(G,{className:"h-4 w-4 mr-2"}),"Create Rule"]})}),s.jsxs(u,{className:"max-w-2xl",children:[s.jsxs(p,{children:[s.jsx(g,{children:"Create Auto-Fix Rule"}),s.jsx(N,{children:"Define a rule to automatically fix SEO issues"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"rule-name",children:"Rule Name *"}),s.jsx(v,{id:"rule-name",placeholder:"e.g., Auto-generate missing alt text",value:H.name,onChange:e=>Z({...H,name:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"rule-description",children:"Description"}),s.jsx(y,{id:"rule-description",placeholder:"Describe what this rule does...",value:H.description,onChange:e=>Z({...H,description:e.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"issue-type",children:"Issue Type *"}),s.jsxs(_,{value:H.issue_type,onValueChange:e=>Z({...H,issue_type:e}),children:[s.jsx(w,{children:s.jsx(b,{placeholder:"Select issue type"})}),s.jsx(k,{children:Ce.map(e=>s.jsx(C,{value:e.value,children:e.label},e.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"fix-action",children:"Fix Action *"}),s.jsxs(_,{value:H.fix_action,onValueChange:e=>Z({...H,fix_action:e}),children:[s.jsx(w,{children:s.jsx(b,{placeholder:"Select fix action"})}),s.jsx(k,{children:Se.map(e=>s.jsx(C,{value:e.value,children:e.label},e.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"priority",children:"Priority (0-100)"}),s.jsx(v,{id:"priority",type:"number",min:"0",max:"100",value:H.priority,onChange:e=>Z({...H,priority:parseInt(e.target.value)||50})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Higher priority rules are executed first"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(S,{id:"requires-approval",checked:H.requires_approval,onCheckedChange:e=>Z({...H,requires_approval:e})}),s.jsx(f,{htmlFor:"requires-approval",children:"Requires Approval"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(S,{id:"auto-apply",checked:H.auto_apply,onCheckedChange:e=>Z({...H,auto_apply:e}),disabled:H.requires_approval}),s.jsx(f,{htmlFor:"auto-apply",children:"Auto Apply"})]})]})]}),s.jsxs(A,{children:[s.jsx(a,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),s.jsx(a,{onClick:async()=>{if(H.name&&H.issue_type&&H.fix_action){O(!0);try{const{data:e,error:s}=await I.from("seo_autofix_rules").insert([{name:H.name,description:H.description,issue_type:H.issue_type,conditions:{},fix_action:{action:H.fix_action},requires_approval:H.requires_approval,auto_apply:H.auto_apply,priority:H.priority}]).select();if(s)throw s;R({title:"Rule Created",description:"Auto-fix rule has been created successfully"}),z(!1),Z({name:"",description:"",issue_type:"",fix_action:"",requires_approval:!0,auto_apply:!1,priority:50}),await X()}catch(e){R({title:"Error",description:e.message,variant:"destructive"})}finally{O(!1)}}else R({title:"Missing Fields",description:"Please fill in all required fields",variant:"destructive"})},disabled:M,children:M?"Creating...":"Create Rule"})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Active Rules"})}),s.jsx(r,{children:s.jsx("div",{className:"text-3xl font-bold",children:D.filter(e=>e.active).length})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Pending Approvals"})}),s.jsx(r,{children:s.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:E.length})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Total Fixes Applied"})}),s.jsx(r,{children:s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:D.reduce((e,s)=>e+s.applied_count,0)})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Success Rate"})}),s.jsx(r,{children:s.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[D.reduce((e,s)=>e+s.applied_count,0)>0?Math.round(D.reduce((e,s)=>e+s.success_count,0)/D.reduce((e,s)=>e+s.applied_count,0)*100):0,"%"]})})]})]}),s.jsxs(n,{defaultValue:"rules",className:"w-full",children:[s.jsxs(c,{className:"grid w-full grid-cols-3",children:[s.jsxs(d,{value:"rules",children:["Rules (",D.length,")"]}),s.jsxs(d,{value:"approvals",children:["Pending Approvals (",E.length,")"]}),s.jsxs(d,{value:"history",children:["History (",q.length,")"]})]}),s.jsx(o,{value:"rules",className:"space-y-4",children:0===D.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(U,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"No auto-fix rules created yet"}),s.jsxs(a,{className:"mt-4",onClick:()=>z(!0),children:[s.jsx(G,{className:"h-4 w-4 mr-2"}),"Create Your First Rule"]})]})}):D.map(e=>s.jsxs(t,{children:[s.jsx(i,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(l,{className:"flex items-center gap-2",children:[e.name,s.jsxs(h,{variant:e.active?"default":"secondary",children:[e.active?s.jsx(V,{className:"h-3 w-3 mr-1"}):s.jsx(W,{className:"h-3 w-3 mr-1"}),e.active?"Active":"Inactive"]}),s.jsxs(h,{variant:"outline",children:["Priority: ",e.priority]})]}),s.jsx(x,{children:e.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a,{variant:"ghost",size:"icon",onClick:()=>(async(e,s)=>{try{const{error:a}=await I.from("seo_autofix_rules").update({active:!s}).eq("id",e);if(a)throw a;R({title:s?"Rule Disabled":"Rule Enabled",description:"Auto-fix rule has been "+(s?"disabled":"enabled")}),await X()}catch(a){R({title:"Error",description:a.message,variant:"destructive"})}})(e.id,e.active),children:e.active?s.jsx(W,{className:"h-4 w-4"}):s.jsx(V,{className:"h-4 w-4"})}),s.jsx(a,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this rule?"))try{const{error:s}=await I.from("seo_autofix_rules").delete().eq("id",e);if(s)throw s;R({title:"Rule Deleted",description:"Auto-fix rule has been deleted"}),await X()}catch(s){R({title:"Error",description:s.message,variant:"destructive"})}})(e.id),children:s.jsx(Y,{className:"h-4 w-4"})})]})]})}),s.jsxs(r,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Issue Type"}),s.jsx("p",{className:"font-semibold",children:Ce.find(s=>s.value===e.issue_type)?.label||e.issue_type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Applied"}),s.jsx("p",{className:"font-semibold",children:e.applied_count})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Success"}),s.jsx("p",{className:"font-semibold text-green-600",children:e.success_count})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Failed"}),s.jsx("p",{className:"font-semibold text-red-600",children:e.failure_count})]})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[e.requires_approval&&s.jsx(h,{variant:"outline",children:"Requires Approval"}),e.auto_apply&&s.jsx(h,{variant:"outline",children:"Auto Apply"})]})]})]},e.id))}),s.jsx(o,{value:"approvals",className:"space-y-4",children:0===E.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(B,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),s.jsx("p",{children:"No pending approvals"})]})}):E.map(e=>s.jsxs(t,{children:[s.jsx(i,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(l,{className:"flex items-center gap-2",children:[se(e.result),"Pending Fix Approval"]}),s.jsx(x,{children:ge(new Date(e.applied_at),{addSuffix:!0})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(a,{size:"sm",variant:"outline",onClick:()=>approveFiximestamp(e.id),children:[s.jsx(B,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(a,{size:"sm",variant:"destructive",onClick:()=>(async e=>{try{const{error:s}=await I.from("seo_autofix_history").update({result:"failed",error_message:"Rejected by admin"}).eq("id",e);if(s)throw s;R({title:"Fix Rejected",description:"The fix has been rejected"}),ee(),Q()}catch(s){R({title:"Error",description:s.message,variant:"destructive"})}})(e.id),children:[s.jsx($,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})}),s.jsx(r,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:"Issue Type:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.issue_type})]}),e.fix_applied&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:"Proposed Fix:"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded-md mt-1 overflow-auto",children:JSON.stringify(e.fix_applied,null,2)})]})]})})]},e.id))}),s.jsx(o,{value:"history",className:"space-y-4",children:0===q.length?s.jsx(t,{children:s.jsxs(r,{className:"pt-6 text-center text-muted-foreground",children:[s.jsx(J,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"No fix history yet"})]})}):q.map(e=>s.jsxs(t,{children:[s.jsx(i,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(l,{className:"flex items-center gap-2",children:[se(e.result),e.issue_type]}),s.jsx(x,{children:ge(new Date(e.applied_at),{addSuffix:!0})})]}),s.jsx(h,{variant:"success"===e.result?"default":"failed"===e.result?"destructive":"secondary",children:e.result})]})}),e.error_message&&s.jsx(r,{children:s.jsx("p",{className:"text-sm text-red-600",children:e.error_message})})]},e.id))})]})]})},Re=()=>{const{toast:n}=L(),[c,d]=e.useState([]),[o,m]=e.useState(!1),[j,u]=e.useState(""),[p,g]=e.useState(null),[N,f]=e.useState([]);e.useEffect(()=>{y()},[]);const y=async()=>{m(!0);try{const{data:e,error:s}=await I.from("seo_keywords").select("*").order("current_position",{ascending:!0});if(s)throw s;d(e||[])}catch(e){n({title:"Error",description:e.message,variant:"destructive"})}finally{m(!1)}},_=(e,a)=>e<a?s.jsx(K,{className:"h-4 w-4 text-green-500"}):e>a?s.jsx(X,{className:"h-4 w-4 text-red-500"}):s.jsx(Q,{className:"h-4 w-4 text-gray-500"}),w=(e,a)=>{const t=a-e;return t>0?s.jsxs("span",{className:"text-green-600",children:["+",t]}):t<0?s.jsx("span",{className:"text-red-600",children:t}):s.jsx("span",{className:"text-gray-500",children:"0"})},b=c.filter(e=>e.keyword.toLowerCase().includes(j.toLowerCase())),k=c.filter(e=>e.previous_position&&e.current_position!==e.previous_position).sort((e,s)=>s.previous_position-s.current_position-(e.previous_position-e.current_position)).slice(0,5),C=c.filter(e=>e.current_position<=10),S=c.filter(e=>e.current_position>20&&e.search_volume>100);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold",children:"Keywords Tracker"}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor keyword rankings and track position changes"})]}),s.jsxs(a,{onClick:async()=>{m(!0);try{const{error:e}=await I.functions.invoke("check-keyword-positions",{body:{}});if(e)throw e;n({title:"Positions Updated",description:"Keyword positions have been refreshed"}),await y()}catch(e){n({title:"Error",description:e.message,variant:"destructive"})}finally{m(!1)}},disabled:o,children:[s.jsx(P,{className:"h-4 w-4 mr-2 "+(o?"animate-spin":"")}),"Check Positions"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Total Keywords"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold",children:c.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Being tracked"})]})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Top 10 Rankings"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:C.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keywords in top 10"})]})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Biggest Gain"})}),s.jsx(r,{children:k.length>0&&k[0].current_position<k[0].previous_position?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["+",k[0].previous_position-k[0].current_position]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:k[0].keyword})]}):s.jsx("div",{className:"text-3xl font-bold text-gray-400",children:"-"})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsxs(l,{className:"text-sm flex items-center gap-1",children:[s.jsx(M,{className:"h-4 w-4"}),"Needs Attention"]})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:S.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keywords to optimize"})]})]})]}),s.jsx("div",{className:"flex gap-4",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(v,{placeholder:"Search keywords...",value:j,onChange:e=>u(e.target.value),className:"pl-9"})]})}),s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"All Keywords"}),s.jsxs(x,{children:[b.length," keywords found"]})]}),s.jsx(r,{children:s.jsx("div",{className:"overflow-auto",children:s.jsxs(R,{children:[s.jsx(D,{children:s.jsxs(F,{children:[s.jsx(q,{children:"Keyword"}),s.jsx(q,{children:"Position"}),s.jsx(q,{children:"Change"}),s.jsx(q,{children:"Search Volume"}),s.jsx(q,{children:"Difficulty"}),s.jsx(q,{children:"URL"}),s.jsx(q,{children:"Last Checked"}),s.jsx(q,{children:"Actions"})]})}),s.jsx(T,{children:0===b.length?s.jsx(F,{children:s.jsx(E,{colSpan:8,className:"text-center text-muted-foreground",children:"No keywords found"})}):b.map(e=>{return s.jsxs(F,{children:[s.jsx(E,{className:"font-medium",children:e.keyword}),s.jsx(E,{children:s.jsxs(h,{variant:e.current_position<=10?"default":"outline",children:["#",e.current_position]})}),s.jsx(E,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[_(e.current_position,e.previous_position||e.current_position),w(e.current_position,e.previous_position||e.current_position)]})}),s.jsx(E,{children:e.search_volume?.toLocaleString()||"N/A"}),s.jsx(E,{children:(t=e.difficulty||0,t>=70?s.jsx(h,{variant:"destructive",children:"Hard"}):t>=40?s.jsx(h,{variant:"default",children:"Medium"}):s.jsx(h,{variant:"secondary",children:"Easy"}))}),s.jsx(E,{className:"max-w-xs truncate",children:e.url||"-"}),s.jsx(E,{children:e.last_checked?new Date(e.last_checked).toLocaleDateString():"Never"}),s.jsx(E,{children:s.jsx(a,{variant:"ghost",size:"sm",onClick:()=>{g(e),(async e=>{try{const{data:s,error:a}=await I.from("seo_keyword_history").select("keyword, position, checked_at").eq("keyword",e).order("checked_at",{ascending:!0}).limit(30);if(a)throw a;f(s||[])}catch(s){}})(e.keyword)},children:"View History"})})]},e.id);var t})})]})})})]}),p&&s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsxs(l,{children:["Position History: ",p.keyword]}),s.jsx(x,{children:"Ranking positions over the last 30 checks"})]}),s.jsxs(r,{children:[N.length>0?s.jsx(Ne,{width:"100%",height:300,children:s.jsxs(fe,{data:N,children:[s.jsx(ve,{dataKey:"checked_at",tickFormatter:e=>new Date(e).toLocaleDateString()}),s.jsx(ye,{reversed:!0,domain:[0,100]}),s.jsx(_e,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`Position ${e}`,"Rank"]}),s.jsx(we,{type:"monotone",dataKey:"position",stroke:"#2563eb",strokeWidth:2,dot:{r:4}})]})}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No history available for this keyword"}),s.jsx("div",{className:"mt-4",children:s.jsx(a,{variant:"outline",onClick:()=>g(null),children:"Close"})})]})]}),k.length>0&&s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"Top Movers"}),s.jsx(x,{children:"Keywords with the biggest position changes"})]}),s.jsx(r,{children:s.jsx("div",{className:"space-y-4",children:k.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:e.keyword}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Position: #",e.current_position]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[_(e.current_position,e.previous_position),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold",children:w(e.current_position,e.previous_position)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.previous_position," â†’ ",e.current_position]})]})]})]},e.id))})})]})]})},De=()=>{const{toast:n}=L(),[c,d]=e.useState([]),[o,y]=e.useState([]),[_,w]=e.useState(!1),[b,k]=e.useState(!1),[C,O]=e.useState({competitor_domain:"",competitor_name:"",keywords:"",check_frequency:"weekly",alert_on_rank_change:!0,alert_on_new_backlinks:!0,rank_change_threshold:5});e.useEffect(()=>{B(),z()},[]);const B=async()=>{try{const{data:e,error:s}=await I.from("seo_competitor_tracking").select("*").order("created_at",{ascending:!1});if(s)throw s;d(e||[])}catch(e){}},z=async()=>{try{const{data:e,error:s}=await I.from("seo_competitor_analysis").select("*").order("analyzed_at",{ascending:!1}).limit(100);if(s)throw s;y(e||[])}catch(e){}},H=o.filter(e=>e.gap<0&&Math.abs(e.gap)<=10),U=o.filter(e=>e.gap>0&&e.our_position<=10),V=o.filter(e=>e.their_position<=10&&e.our_position>10&&e.search_volume>100);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(ee,{className:"h-6 w-6"}),"Competitor Matrix"]}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor competitor rankings and identify opportunities"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(a,{variant:"outline",onClick:async()=>{w(!0);try{n({title:"Analysis Refreshing",description:"Competitor analysis is being updated..."}),await new Promise(e=>setTimeout(e,2e3)),await z(),n({title:"Analysis Complete",description:"Competitor data has been refreshed"})}catch(e){n({title:"Error",description:e.message,variant:"destructive"})}finally{w(!1)}},disabled:_,children:[s.jsx(P,{className:"h-4 w-4 mr-2 "+(_?"animate-spin":"")}),"Refresh"]}),s.jsxs(m,{open:b,onOpenChange:k,children:[s.jsx(j,{asChild:!0,children:s.jsxs(a,{children:[s.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Competitor"]})}),s.jsxs(u,{children:[s.jsxs(p,{children:[s.jsx(g,{children:"Add Competitor"}),s.jsx(N,{children:"Configure automated competitor tracking"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"domain",children:"Competitor Domain *"}),s.jsx(v,{id:"domain",placeholder:"competitor.com",value:C.competitor_domain,onChange:e=>O({...C,competitor_domain:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"name",children:"Competitor Name"}),s.jsx(v,{id:"name",placeholder:"Competitor Inc.",value:C.competitor_name,onChange:e=>O({...C,competitor_name:e.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"keywords",children:"Keywords to Track"}),s.jsx(v,{id:"keywords",placeholder:"keyword1, keyword2, keyword3",value:C.keywords,onChange:e=>O({...C,keywords:e.target.value})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of keywords"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"threshold",children:"Rank Change Alert Threshold"}),s.jsx(v,{id:"threshold",type:"number",value:C.rank_change_threshold,onChange:e=>O({...C,rank_change_threshold:parseInt(e.target.value)||5})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert when position changes by more than this number"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(f,{htmlFor:"rank-alert",children:"Alert on Rank Changes"}),s.jsx(S,{id:"rank-alert",checked:C.alert_on_rank_change,onCheckedChange:e=>O({...C,alert_on_rank_change:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(f,{htmlFor:"backlink-alert",children:"Alert on New Backlinks"}),s.jsx(S,{id:"backlink-alert",checked:C.alert_on_new_backlinks,onCheckedChange:e=>O({...C,alert_on_new_backlinks:e})})]})]}),s.jsxs(A,{children:[s.jsx(a,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),s.jsx(a,{onClick:async()=>{if(C.competitor_domain){w(!0);try{const e=C.keywords.split(",").map(e=>e.trim()).filter(e=>e.length>0),{error:s}=await I.from("seo_competitor_tracking").insert([{competitor_domain:C.competitor_domain,competitor_name:C.competitor_name||C.competitor_domain,keywords:e,check_frequency:C.check_frequency,alert_on_rank_change:C.alert_on_rank_change,alert_on_new_backlinks:C.alert_on_new_backlinks,rank_change_threshold:C.rank_change_threshold}]);if(s)throw s;n({title:"Competitor Added",description:"Competitor tracking has been configured"}),k(!1),O({competitor_domain:"",competitor_name:"",keywords:"",check_frequency:"weekly",alert_on_rank_change:!0,alert_on_new_backlinks:!0,rank_change_threshold:5}),await B()}catch(e){n({title:"Error",description:e.message,variant:"destructive"})}finally{w(!1)}}else n({title:"Domain Required",description:"Please enter a competitor domain",variant:"destructive"})},disabled:_,children:_?"Adding...":"Add Competitor"})]})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Tracked Competitors"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold",children:c.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Being monitored"})]})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Keyword Gaps"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:H.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Close to outranking"})]})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Winning Keywords"})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:U.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Outranking competitors"})]})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsxs(l,{className:"text-sm flex items-center gap-1",children:[s.jsx(K,{className:"h-4 w-4"}),"Opportunities"]})}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:V.length}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"High-value targets"})]})]})]}),s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"Tracked Competitors"}),s.jsxs(x,{children:[c.length," competitors being monitored"]})]}),s.jsx(r,{children:0===c.length?s.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[s.jsx(ee,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),s.jsx("p",{children:"No competitors tracked yet"}),s.jsxs(a,{className:"mt-4",onClick:()=>k(!0),children:[s.jsx(G,{className:"h-4 w-4 mr-2"}),"Add Your First Competitor"]})]}):s.jsx("div",{className:"space-y-4",children:c.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-semibold",children:e.competitor_name}),s.jsx("a",{href:`https://${e.competitor_domain}`,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground",children:s.jsx(se,{className:"h-4 w-4"})}),s.jsx(h,{variant:e.active?"default":"secondary",children:e.active?"Active":"Paused"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.competitor_domain}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs(h,{variant:"outline",children:[e.keywords?.length||0," keywords"]}),s.jsxs(h,{variant:"outline",children:["Check ",e.check_frequency]}),e.alert_on_rank_change&&s.jsxs(h,{variant:"outline",children:[s.jsx(M,{className:"h-3 w-3 mr-1"}),"Rank alerts"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-right mr-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Last checked"}),s.jsx("p",{className:"text-sm font-semibold",children:e.last_checked_at?new Date(e.last_checked_at).toLocaleDateString():"Never"})]}),s.jsx(a,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Are you sure you want to stop tracking this competitor?"))try{const{error:s}=await I.from("seo_competitor_tracking").delete().eq("id",e);if(s)throw s;n({title:"Competitor Removed",description:"Competitor tracking has been stopped"}),await B()}catch(s){n({title:"Error",description:s.message,variant:"destructive"})}})(e.id),children:s.jsx(Y,{className:"h-4 w-4"})})]})]},e.id))})})]}),V.length>0&&s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"Top Opportunities"}),s.jsx(x,{children:"High-value keywords where competitors rank well and you don't"})]}),s.jsx(r,{children:s.jsxs(R,{children:[s.jsx(D,{children:s.jsxs(F,{children:[s.jsx(q,{children:"Keyword"}),s.jsx(q,{children:"Competitor"}),s.jsx(q,{children:"Their Position"}),s.jsx(q,{children:"Your Position"}),s.jsx(q,{children:"Gap"}),s.jsx(q,{children:"Search Volume"})]})}),s.jsx(T,{children:V.slice(0,10).map(e=>s.jsxs(F,{children:[s.jsx(E,{className:"font-medium",children:e.keyword}),s.jsx(E,{children:e.competitor_domain}),s.jsx(E,{children:s.jsxs(h,{variant:"default",children:["#",e.their_position]})}),s.jsx(E,{children:s.jsxs(h,{variant:"outline",children:["#",e.our_position]})}),s.jsx(E,{children:s.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[s.jsx(X,{className:"h-4 w-4"}),e.gap]})}),s.jsx(E,{children:e.search_volume?.toLocaleString()||"N/A"})]},e.id))})]})})]}),H.length>0&&s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"Close Keyword Gaps"}),s.jsx(x,{children:"Keywords where you're close to outranking competitors"})]}),s.jsx(r,{children:s.jsx("div",{className:"space-y-4",children:H.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:e.keyword}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["vs ",e.competitor_domain]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"You"}),s.jsxs(h,{variant:"outline",children:["#",e.our_position]})]}),s.jsxs("div",{className:"text-yellow-600 font-bold",children:[Math.abs(e.gap)," positions"]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Them"}),s.jsxs(h,{variant:"default",children:["#",e.their_position]})]})]})]},e.id))})})]})]})},Fe=()=>{const{toast:h}=L(),[m,j]=e.useState(!1),[u,p]=e.useState(""),[g,N]=e.useState(null);return s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"SEO Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive SEO tools and analytics for your website"})]}),s.jsxs(n,{defaultValue:"alerts",className:"w-full",children:[s.jsxs(c,{className:"grid grid-cols-4 lg:grid-cols-4 gap-2 h-auto mb-2",children:[s.jsxs(d,{value:"alerts",className:"flex items-center gap-2",children:[s.jsx(z,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Alerts"})]}),s.jsxs(d,{value:"autofix",className:"flex items-center gap-2",children:[s.jsx(U,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Auto-Fix"})]}),s.jsxs(d,{value:"keywords",className:"flex items-center gap-2",children:[s.jsx(ae,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Keywords"})]}),s.jsxs(d,{value:"competitors",className:"flex items-center gap-2",children:[s.jsx(ee,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Competitors"})]})]}),s.jsxs(c,{className:"grid grid-cols-6 lg:grid-cols-11 gap-2 h-auto",children:[s.jsxs(d,{value:"audit",className:"flex items-center gap-2",children:[s.jsx(Z,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Audit"})]}),s.jsxs(d,{value:"pages",className:"flex items-center gap-2",children:[s.jsx(te,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Pages"})]}),s.jsxs(d,{value:"monitoring",className:"flex items-center gap-2",children:[s.jsx(z,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Monitoring"})]}),s.jsxs(d,{value:"meta",className:"flex items-center gap-2",children:[s.jsx(ie,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Meta Tags"})]}),s.jsxs(d,{value:"robots",className:"flex items-center gap-2",children:[s.jsx(le,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"robots.txt"})]}),s.jsxs(d,{value:"sitemap",className:"flex items-center gap-2",children:[s.jsx(re,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sitemap"})]}),s.jsxs(d,{value:"structured",className:"flex items-center gap-2",children:[s.jsx(ne,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Schema"})]}),s.jsxs(d,{value:"performance",className:"flex items-center gap-2",children:[s.jsx(ce,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Performance"})]}),s.jsxs(d,{value:"backlinks",className:"flex items-center gap-2",children:[s.jsx(K,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Backlinks"})]})]}),s.jsxs(c,{className:"grid grid-cols-6 lg:grid-cols-11 gap-2 h-auto mt-2",children:[s.jsxs(d,{value:"broken-links",className:"flex items-center gap-2",children:[s.jsx(se,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Broken Links"})]}),s.jsxs(d,{value:"link-structure",className:"flex items-center gap-2",children:[s.jsx(de,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Links"})]}),s.jsxs(d,{value:"content",className:"flex items-center gap-2",children:[s.jsx(te,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Content"})]}),s.jsxs(d,{value:"crawler",className:"flex items-center gap-2",children:[s.jsx(oe,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Crawler"})]}),s.jsxs(d,{value:"images",className:"flex items-center gap-2",children:[s.jsx(xe,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Images"})]}),s.jsxs(d,{value:"redirects",className:"flex items-center gap-2",children:[s.jsx(he,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Redirects"})]}),s.jsxs(d,{value:"duplicate",className:"flex items-center gap-2",children:[s.jsx(me,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Duplicates"})]}),s.jsxs(d,{value:"security",className:"flex items-center gap-2",children:[s.jsx(je,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),s.jsxs(d,{value:"mobile",className:"flex items-center gap-2",children:[s.jsx(ue,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mobile"})]}),s.jsxs(d,{value:"budget",className:"flex items-center gap-2",children:[s.jsx(J,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Budget"})]}),s.jsxs(d,{value:"semantic",className:"flex items-center gap-2",children:[s.jsx(pe,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Semantic"})]})]}),s.jsx(o,{value:"audit",children:s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{children:"SEO Audit"}),s.jsx(x,{children:"Run a comprehensive SEO audit on any URL"})]}),s.jsx(r,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(f,{htmlFor:"audit-url",children:"URL to Audit"}),s.jsx(v,{id:"audit-url",placeholder:"https://example.com",value:u,onChange:e=>p(e.target.value)})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(a,{onClick:async()=>{if(u){j(!0);try{const{data:e,error:s}=await I.functions.invoke("seo-audit",{body:{url:u,auditType:"full",saveResults:!0}});if(s)throw s;N(e.audit),h({title:"Audit Complete",description:`Overall score: ${e.audit.overallScore}/100`})}catch(e){h({title:"Audit Failed",description:e.message,variant:"destructive"})}finally{j(!1)}}else h({title:"URL Required",description:"Please enter a URL to audit",variant:"destructive"})},disabled:m,children:m?"Running...":"Run Audit"})})]}),g&&s.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-4",children:[s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Overall Score"})}),s.jsx(r,{children:s.jsxs("div",{className:"text-3xl font-bold",children:[g.overallScore,"/100"]})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"SEO Score"})}),s.jsx(r,{children:s.jsxs("div",{className:"text-3xl font-bold",children:[g.seoScore,"/100"]})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Performance"})}),s.jsx(r,{children:s.jsxs("div",{className:"text-3xl font-bold",children:[g.performanceScore,"/100"]})})]}),s.jsxs(t,{children:[s.jsx(i,{className:"pb-2",children:s.jsx(l,{className:"text-sm",children:"Accessibility"})}),s.jsx(r,{children:s.jsxs("div",{className:"text-3xl font-bold",children:[g.accessibilityScore,"/100"]})})]})]}),g&&s.jsxs("div",{className:"mt-6 space-y-4",children:[g.criticalIssues.length>0&&s.jsxs(t,{className:"border-red-500",children:[s.jsx(i,{children:s.jsxs(l,{className:"text-red-600",children:["Critical Issues (",g.criticalIssues.length,")"]})}),s.jsx(r,{children:s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:g.criticalIssues.map((e,a)=>s.jsx("li",{className:"text-red-600",children:e},a))})})]}),g.warnings.length>0&&s.jsxs(t,{className:"border-yellow-500",children:[s.jsx(i,{children:s.jsxs(l,{className:"text-yellow-600",children:["Warnings (",g.warnings.length,")"]})}),s.jsx(r,{children:s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:g.warnings.map((e,a)=>s.jsx("li",{className:"text-yellow-600",children:e},a))})})]}),g.recommendations.length>0&&s.jsxs(t,{className:"border-blue-500",children:[s.jsx(i,{children:s.jsxs(l,{className:"text-blue-600",children:["Recommendations (",g.recommendations.length,")"]})}),s.jsx(r,{children:s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:g.recommendations.map((e,a)=>s.jsx("li",{className:"text-blue-600",children:e},a))})})]})]})]})})]})}),s.jsx(o,{value:"alerts",children:s.jsx(be,{})}),s.jsx(o,{value:"autofix",children:s.jsx(Ae,{})}),s.jsx(o,{value:"keywords",children:s.jsx(Re,{})}),s.jsx(o,{value:"competitors",children:s.jsx(De,{})}),["pages","monitoring","meta","robots","sitemap","structured","performance","backlinks","broken-links","link-structure","content","crawler","images","redirects","duplicate","security","mobile","budget","semantic"].map(e=>s.jsx(o,{value:e,children:s.jsxs(t,{children:[s.jsxs(i,{children:[s.jsx(l,{className:"capitalize",children:e.replace("-"," ")}),s.jsxs(x,{children:[e.charAt(0).toUpperCase()+e.slice(1).replace("-"," ")," management and analysis"]})]}),s.jsx(r,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"This feature is under development."}),s.jsx("p",{className:"text-sm mt-2",children:"The backend functions are ready. UI coming soon!"})]})})]})},e))]})]})};export{Fe as S};
