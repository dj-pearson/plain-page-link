{"version":3,"file":"Links-Ct1iJzcx.js","sources":["../../src/components/modals/AddLinkModal.tsx","../../src/components/modals/EditLinkModal.tsx","../../src/hooks/useSoftDelete.ts","../../src/pages/dashboard/Links.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Instagram,\n  Facebook,\n  Linkedin,\n  Music,\n  Youtube,\n  Home,\n  MapPin,\n  Calendar,\n  Globe,\n  Mail,\n  Phone,\n  MessageCircle,\n  FileText,\n  Link as LinkIcon,\n  type LucideIcon,\n} from \"lucide-react\";\n\nconst linkSchema = z.object({\n  title: z.string().min(1, \"Title is required\").max(100, \"Title must be less than 100 characters\"),\n  url: z.string().url(\"Please enter a valid URL\"),\n  icon: z.string(),\n  active: z.boolean(),\n});\n\nexport type LinkFormData = z.infer<typeof linkSchema>;\n\ninterface AddLinkModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSave?: (data: LinkFormData) => void;\n}\n\nconst SOCIAL_ICONS: { value: string; label: string; icon: LucideIcon }[] = [\n  { value: \"instagram\", label: \"Instagram\", icon: Instagram },\n  { value: \"facebook\", label: \"Facebook\", icon: Facebook },\n  { value: \"linkedin\", label: \"LinkedIn\", icon: Linkedin },\n  { value: \"tiktok\", label: \"TikTok\", icon: Music },\n  { value: \"youtube\", label: \"YouTube\", icon: Youtube },\n  { value: \"zillow\", label: \"Zillow\", icon: Home },\n  { value: \"realtor\", label: \"Realtor.com\", icon: MapPin },\n  { value: \"calendar\", label: \"Calendar\", icon: Calendar },\n  { value: \"website\", label: \"Website\", icon: Globe },\n  { value: \"email\", label: \"Email\", icon: Mail },\n  { value: \"phone\", label: \"Phone\", icon: Phone },\n  { value: \"whatsapp\", label: \"WhatsApp\", icon: MessageCircle },\n  { value: \"document\", label: \"Document\", icon: FileText },\n  { value: \"link\", label: \"Link\", icon: LinkIcon },\n];\n\nexport function AddLinkModal({ open, onOpenChange, onSave }: AddLinkModalProps) {\n  const [error, setError] = useState<string | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    setValue,\n    watch,\n  } = useForm<LinkFormData>({\n    resolver: zodResolver(linkSchema),\n    defaultValues: {\n      title: \"\",\n      url: \"\",\n      icon: \"link\",\n      active: true,\n    },\n  });\n\n  const icon = watch(\"icon\");\n  const active = watch(\"active\");\n\n  const onSubmit = async (data: LinkFormData) => {\n    try {\n      setError(null);\n      await onSave?.(data);\n      onOpenChange(false);\n      reset();\n    } catch (err) {\n      console.error(\"Failed to add link:\", err);\n      setError(\"Failed to add link. Please try again.\");\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Add Custom Link</DialogTitle>\n          <DialogDescription>\n            Add a social media profile or custom link to your bio\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg text-sm\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <Label htmlFor=\"title\">Link Title *</Label>\n            <Input\n              id=\"title\"\n              {...register(\"title\")}\n              placeholder=\"Schedule a Consultation\"\n            />\n            {errors.title && (\n              <p className=\"text-sm text-red-600 mt-1\">{errors.title.message}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"url\">URL *</Label>\n            <Input\n              id=\"url\"\n              {...register(\"url\")}\n              placeholder=\"https://example.com\"\n            />\n            {errors.url && (\n              <p className=\"text-sm text-red-600 mt-1\">{errors.url.message}</p>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"icon\">Icon</Label>\n            <Select\n              value={icon}\n              onValueChange={(value) => setValue(\"icon\", value)}\n            >\n              <SelectTrigger>\n                <SelectValue>\n                  {(() => {\n                    const selected = SOCIAL_ICONS.find((i) => i.value === icon);\n                    const IconComponent = selected?.icon || LinkIcon;\n                    return (\n                      <span className=\"flex items-center gap-2\">\n                        <IconComponent className=\"h-4 w-4\" />\n                        <span>{selected?.label || \"Custom\"}</span>\n                      </span>\n                    );\n                  })()}\n                </SelectValue>\n              </SelectTrigger>\n              <SelectContent>\n                {SOCIAL_ICONS.map((iconItem) => {\n                  const IconComponent = iconItem.icon;\n                  return (\n                    <SelectItem key={iconItem.value} value={iconItem.value}>\n                      <span className=\"flex items-center gap-2\">\n                        <IconComponent className=\"h-4 w-4\" />\n                        <span>{iconItem.label}</span>\n                      </span>\n                    </SelectItem>\n                  );\n                })}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"checkbox\"\n              id=\"active\"\n              checked={active}\n              onChange={(e) => setValue(\"active\", e.target.checked)}\n              className=\"rounded border-border\"\n            />\n            <Label htmlFor=\"active\" className=\"cursor-pointer\">\n              Active (visible on profile)\n            </Label>\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\">Add Link</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\n\nexport interface EditLinkFormData {\n  title: string;\n  url: string;\n  icon?: string;\n}\n\ninterface EditLinkModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: EditLinkFormData) => void;\n  initialData: EditLinkFormData;\n}\n\nexport function EditLinkModal({ isOpen, onClose, onSubmit, initialData }: EditLinkModalProps) {\n  const [formData, setFormData] = useState<EditLinkFormData>(initialData);\n\n  useEffect(() => {\n    setFormData(initialData);\n  }, [initialData]);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-md\">\n        <div className=\"border-b border-border p-4 flex items-center justify-between\">\n          <h2 className=\"text-xl font-semibold\">Edit Link</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-accent rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          <div>\n            <Label htmlFor=\"title\">Link Title *</Label>\n            <Input\n              id=\"title\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              placeholder=\"e.g., My Website\"\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"url\">URL *</Label>\n            <Input\n              id=\"url\"\n              type=\"url\"\n              value={formData.url}\n              onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n              placeholder=\"https://example.com\"\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"icon\">Icon (optional)</Label>\n            <Input\n              id=\"icon\"\n              value={formData.icon || ''}\n              onChange={(e) => setFormData({ ...formData, icon: e.target.value })}\n              placeholder=\"e.g., link, globe, home\"\n            />\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              Icon name from Lucide icons\n            </p>\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} className=\"flex-1\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" className=\"flex-1\">\n              Save Changes\n            </Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useState, useCallback, useRef } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface DeleteQueueItem<T> {\n  id: string;\n  data: T;\n  timeoutId: NodeJS.Timeout;\n  timestamp: number;\n}\n\ninterface UseSoftDeleteOptions<T> {\n  /**\n   * Callback to execute the permanent deletion\n   */\n  onDelete: (id: string) => Promise<void>;\n\n  /**\n   * Delay in milliseconds before permanent deletion (default: 10000ms / 10 seconds)\n   */\n  deleteDelay?: number;\n\n  /**\n   * Custom undo message\n   */\n  undoMessage?: (item: T) => string;\n\n  /**\n   * Resource name for toast messages (e.g., \"listing\", \"link\", \"testimonial\")\n   */\n  resourceName: string;\n}\n\nexport function useSoftDelete<T extends { id: string }>(options: UseSoftDeleteOptions<T>) {\n  const {\n    onDelete,\n    deleteDelay = 10000, // 10 seconds default\n    undoMessage,\n    resourceName,\n  } = options;\n\n  const { toast, dismiss } = useToast();\n  const [deletionQueue, setDeletionQueue] = useState<Map<string, DeleteQueueItem<T>>>(new Map());\n  const queueRef = useRef(deletionQueue);\n\n  // Keep ref in sync with state\n  queueRef.current = deletionQueue;\n\n  /**\n   * Initiates a soft delete with undo option\n   */\n  const softDelete = useCallback(\n    async (item: T) => {\n      // If already in queue, skip\n      if (queueRef.current.has(item.id)) {\n        return;\n      }\n\n      // Create timeout for permanent deletion\n      const timeoutId = setTimeout(async () => {\n        try {\n          await onDelete(item.id);\n\n          // Remove from queue after successful deletion\n          setDeletionQueue((prev) => {\n            const newQueue = new Map(prev);\n            newQueue.delete(item.id);\n            return newQueue;\n          });\n\n          // Show success toast\n          toast({\n            title: `${resourceName} deleted`,\n            description: `Your ${resourceName} has been permanently removed.`,\n          });\n        } catch (error) {\n          // Show error toast\n          toast({\n            title: \"Deletion failed\",\n            description: `Failed to delete ${resourceName}. Please try again.`,\n            variant: \"destructive\",\n          });\n\n          // Remove from queue on error\n          setDeletionQueue((prev) => {\n            const newQueue = new Map(prev);\n            newQueue.delete(item.id);\n            return newQueue;\n          });\n        }\n      }, deleteDelay);\n\n      // Add to deletion queue\n      const queueItem: DeleteQueueItem<T> = {\n        id: item.id,\n        data: item,\n        timeoutId,\n        timestamp: Date.now(),\n      };\n\n      setDeletionQueue((prev) => {\n        const newQueue = new Map(prev);\n        newQueue.set(item.id, queueItem);\n        return newQueue;\n      });\n\n      // Show undo toast\n      const { dismiss: dismissToast } = toast({\n        title: `${resourceName} deleted`,\n        description: undoMessage?.(item) || `Deleting ${resourceName} in ${deleteDelay / 1000} seconds...`,\n        action: {\n          label: \"Undo\",\n          onClick: () => {\n            undoDelete(item.id);\n            dismissToast();\n          },\n        },\n        duration: deleteDelay,\n      });\n    },\n    [onDelete, deleteDelay, undoMessage, resourceName, toast]\n  );\n\n  /**\n   * Cancels a pending deletion\n   */\n  const undoDelete = useCallback((id: string) => {\n    const queueItem = queueRef.current.get(id);\n\n    if (!queueItem) {\n      return;\n    }\n\n    // Cancel the timeout\n    clearTimeout(queueItem.timeoutId);\n\n    // Remove from queue\n    setDeletionQueue((prev) => {\n      const newQueue = new Map(prev);\n      newQueue.delete(id);\n      return newQueue;\n    });\n\n    // Show undo confirmation\n    toast({\n      title: \"Deletion cancelled\",\n      description: `Your ${resourceName} has been restored.`,\n    });\n  }, [resourceName, toast]);\n\n  /**\n   * Checks if an item is pending deletion\n   */\n  const isPendingDeletion = useCallback(\n    (id: string): boolean => {\n      return queueRef.current.has(id);\n    },\n    []\n  );\n\n  /**\n   * Gets all items pending deletion\n   */\n  const getPendingDeletions = useCallback((): T[] => {\n    return Array.from(queueRef.current.values()).map((item) => item.data);\n  }, []);\n\n  /**\n   * Cancels all pending deletions\n   */\n  const cancelAllDeletions = useCallback(() => {\n    queueRef.current.forEach((item) => {\n      clearTimeout(item.timeoutId);\n    });\n    setDeletionQueue(new Map());\n\n    if (queueRef.current.size > 0) {\n      toast({\n        title: \"All deletions cancelled\",\n        description: `${queueRef.current.size} ${resourceName}${queueRef.current.size > 1 ? 's' : ''} restored.`,\n      });\n    }\n  }, [resourceName, toast]);\n\n  /**\n   * Forces immediate deletion of a queued item\n   */\n  const forceDelete = useCallback(\n    async (id: string) => {\n      const queueItem = queueRef.current.get(id);\n\n      if (!queueItem) {\n        return;\n      }\n\n      // Cancel the timeout\n      clearTimeout(queueItem.timeoutId);\n\n      // Remove from queue\n      setDeletionQueue((prev) => {\n        const newQueue = new Map(prev);\n        newQueue.delete(id);\n        return newQueue;\n      });\n\n      // Execute deletion immediately\n      try {\n        await onDelete(id);\n        toast({\n          title: `${resourceName} deleted`,\n          description: `Your ${resourceName} has been permanently removed.`,\n        });\n      } catch (error) {\n        toast({\n          title: \"Deletion failed\",\n          description: `Failed to delete ${resourceName}. Please try again.`,\n          variant: \"destructive\",\n        });\n      }\n    },\n    [onDelete, resourceName, toast]\n  );\n\n  return {\n    softDelete,\n    undoDelete,\n    isPendingDeletion,\n    getPendingDeletions,\n    cancelAllDeletions,\n    forceDelete,\n    pendingCount: deletionQueue.size,\n  };\n}\n","import { useState, useMemo } from \"react\";\nimport { Plus, GripVertical, Edit, Trash2, ExternalLink, Instagram, Facebook, Home, Calendar, Link as LinkIcon, Linkedin, Music, Youtube, MapPin, Globe, Mail, Phone, MessageCircle, FileText, Undo2 } from \"lucide-react\";\nimport { AddLinkModal } from \"@/components/modals/AddLinkModal\";\nimport { EditLinkModal } from \"@/components/modals/EditLinkModal\";\nimport type { LinkFormData } from \"@/components/modals/AddLinkModal\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLinks, type Link } from \"@/hooks/useLinks\";\nimport { useSoftDelete } from \"@/hooks/useSoftDelete\";\nimport { useSubscriptionLimits } from \"@/hooks/useSubscriptionLimits\";\nimport { UpgradeModal } from \"@/components/UpgradeModal\";\nimport { LimitBanner } from \"@/components/LimitBanner\";\n\nconst getIconComponent = (iconName: string) => {\n  const iconMap: Record<string, any> = {\n    calendar: Calendar,\n    instagram: Instagram,\n    facebook: Facebook,\n    zillow: Home,\n    link: LinkIcon,\n    linkedin: Linkedin,\n    tiktok: Music,\n    youtube: Youtube,\n    realtor: MapPin,\n    website: Globe,\n    email: Mail,\n    phone: Phone,\n    whatsapp: MessageCircle,\n    document: FileText,\n  };\n  return iconMap[iconName] || LinkIcon;\n};\n\nexport default function Links() {\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [editingLink, setEditingLink] = useState<Link | null>(null);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const { toast } = useToast();\n  const { links, isLoading, addLink, updateLink, deleteLink, toggleActive } = useLinks();\n  const { subscription, canAdd, getLimit, getUsage } = useSubscriptionLimits();\n\n  // Set up soft delete with undo\n  const { softDelete, isPendingDeletion, pendingCount } = useSoftDelete<Link>({\n    onDelete: async (id: string) => {\n      await deleteLink.mutateAsync(id);\n    },\n    deleteDelay: 10000, // 10 seconds\n    resourceName: \"link\",\n    undoMessage: (link) => `\"${link.title}\" will be deleted in 10 seconds. Click Undo to cancel.`,\n  });\n\n  // Filter out pending deletions from display\n  const visibleLinks = useMemo(\n    () => links.filter((link) => !isPendingDeletion(link.id)),\n    [links, isPendingDeletion]\n  );\n\n  const handleAddClick = () => {\n    if (!canAdd('links')) {\n      setShowUpgradeModal(true);\n      return;\n    }\n    setIsAddModalOpen(true);\n  };\n\n  const handleAddLink = async (data: LinkFormData) => {\n    try {\n      await addLink.mutateAsync(data);\n      toast({\n        title: \"Link added!\",\n        description: \"Your custom link has been created successfully.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add link. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleEditLink = (link: Link) => {\n    setEditingLink(link);\n    setIsEditModalOpen(true);\n  };\n\n  const handleUpdateLink = async (id: string, data: Partial<Link>) => {\n    try {\n      await updateLink.mutateAsync({ id, ...data });\n      toast({\n        title: \"Link updated!\",\n        description: \"Your link has been updated successfully.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update link. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDeleteClick = (link: Link) => {\n    softDelete(link);\n  };\n\n  return (\n    <div className=\"space-y-4 sm:space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-foreground\">Custom Links</h1>\n          <p className=\"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1\">\n            Manage your social and custom links\n          </p>\n        </div>\n        <button\n          onClick={handleAddClick}\n          className=\"inline-flex items-center gap-2 px-4 py-2.5 sm:py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 active:scale-95 transition-all font-medium min-h-[44px] w-full sm:w-auto justify-center shadow-sm\"\n        >\n          <Plus className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n          <span className=\"text-sm sm:text-base\">Add Link</span>\n        </button>\n      </div>\n\n      {/* Limit Banner */}\n      {subscription && getLimit('links') !== Infinity && (\n        <LimitBanner\n          feature=\"links\"\n          current={getUsage('links')}\n          limit={getLimit('links')}\n        />\n      )}\n\n      {/* Stats - Mobile optimized 3-column grid */}\n      <div className=\"grid grid-cols-3 gap-2 sm:gap-4\">\n        <div className=\"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow\">\n          <div className=\"text-xl sm:text-2xl font-bold text-foreground\">{visibleLinks.length}</div>\n          <div className=\"text-xs sm:text-sm text-muted-foreground mt-0.5\">Total</div>\n        </div>\n        <div className=\"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow\">\n          <div className=\"text-xl sm:text-2xl font-bold text-green-600\">\n            {visibleLinks.filter((l) => l.is_active).length}\n          </div>\n          <div className=\"text-xs sm:text-sm text-muted-foreground mt-0.5\">Active</div>\n        </div>\n        <div className=\"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow\">\n          <div className=\"text-xl sm:text-2xl font-bold text-primary\">\n            {visibleLinks.reduce((sum, l) => sum + l.click_count, 0)}\n          </div>\n          <div className=\"text-xs sm:text-sm text-muted-foreground mt-0.5\">Clicks</div>\n        </div>\n      </div>\n\n      {/* Links List - Mobile optimized */}\n      <div className=\"bg-card border border-border rounded-lg divide-y divide-border\">\n        {isLoading ? (\n          <div className=\"p-6 sm:p-8 text-center text-muted-foreground text-sm sm:text-base\">\n            Loading links...\n          </div>\n        ) : visibleLinks.length === 0 ? (\n          <div className=\"p-6 sm:p-8 text-center text-muted-foreground text-sm sm:text-base\">\n            No links yet. Click \"Add Link\" to create your first link.\n          </div>\n        ) : (\n          visibleLinks.map((link) => (\n          <div\n            key={link.id}\n            className=\"p-3 sm:p-4 flex items-center gap-2 sm:gap-4 hover:bg-accent/50 active:bg-accent/70 transition-colors\"\n          >\n            {/* Drag Handle - Hidden on mobile, shown on desktop */}\n            <button\n              className=\"cursor-grab active:cursor-grabbing p-1.5 hover:bg-accent rounded hidden sm:block min-h-[44px]\"\n              aria-label=\"Drag to reorder\"\n            >\n              <GripVertical className=\"h-5 w-5 text-muted-foreground\" />\n            </button>\n\n            {/* Icon */}\n            <div className=\"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center bg-accent rounded-lg flex-shrink-0\">\n              {(() => {\n                const IconComponent = getIconComponent(link.icon);\n                return <IconComponent className=\"h-5 w-5 sm:h-6 sm:w-6 text-foreground\" />;\n              })()}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-1.5 sm:gap-2 mb-0.5 sm:mb-1 flex-wrap\">\n                <h3 className=\"font-medium text-sm sm:text-base text-foreground truncate\">\n                  {link.title}\n                </h3>\n                {link.is_active ? (\n                  <span className=\"px-1.5 sm:px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium flex-shrink-0\">\n                    Active\n                  </span>\n                ) : (\n                  <span className=\"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full font-medium flex-shrink-0\">\n                    Inactive\n                  </span>\n                )}\n              </div>\n              <a\n                href={link.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-xs sm:text-sm text-muted-foreground hover:text-primary active:text-primary flex items-center gap-1 truncate\"\n              >\n                <span className=\"truncate\">{link.url}</span>\n                <ExternalLink className=\"h-3 w-3 flex-shrink-0\" />\n              </a>\n              {/* Stats on mobile - shown below URL */}\n              <div className=\"sm:hidden mt-1.5 text-xs text-muted-foreground\">\n                <span className=\"font-semibold text-foreground\">{link.click_count}</span> clicks\n              </div>\n            </div>\n\n            {/* Stats - Desktop only */}\n            <div className=\"text-right hidden sm:block flex-shrink-0\">\n              <div className=\"text-lg font-semibold text-foreground\">\n                {link.click_count}\n              </div>\n              <div className=\"text-xs text-muted-foreground\">clicks</div>\n            </div>\n\n            {/* Actions - Larger touch targets on mobile */}\n            <div className=\"flex items-center gap-0.5 sm:gap-1 flex-shrink-0\">\n              <button\n                onClick={() => handleEditLink(link)}\n                className=\"p-2 sm:p-2.5 hover:bg-accent active:bg-accent/80 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center\"\n                aria-label=\"Edit link\"\n              >\n                <Edit className=\"h-4 w-4 text-muted-foreground\" />\n              </button>\n              <button\n                onClick={() => handleDeleteClick(link)}\n                className=\"p-2 sm:p-2.5 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center\"\n                aria-label=\"Delete link\"\n              >\n                <Trash2 className=\"h-4 w-4 text-red-500\" />\n              </button>\n            </div>\n          </div>\n        ))\n        )}\n      </div>\n\n      {/* Help Text - Mobile optimized */}\n      <div className=\"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4\">\n        <p className=\"text-xs sm:text-sm text-blue-800 dark:text-blue-200 leading-relaxed\">\n          <span role=\"img\" aria-label=\"Tip\">ðŸ’¡</span> <strong>Tip:</strong> <span className=\"hidden sm:inline\">Drag and drop links to reorder them.</span><span className=\"sm:hidden\">Use the edit option to change link details.</span> The order here will reflect on your public profile page.\n        </p>\n      </div>\n\n      {/* Add Link Modal */}\n      <AddLinkModal\n        open={isAddModalOpen}\n        onOpenChange={setIsAddModalOpen}\n        onSave={handleAddLink}\n      />\n\n      {/* Edit Link Modal */}\n      <EditLinkModal\n        open={isEditModalOpen}\n        onOpenChange={setIsEditModalOpen}\n        link={editingLink}\n        onSave={handleUpdateLink}\n      />\n\n      {/* Upgrade Modal */}\n      <UpgradeModal\n        open={showUpgradeModal}\n        onOpenChange={setShowUpgradeModal}\n        feature=\"links\"\n        currentPlan={subscription?.plan_name || \"Free\"}\n        requiredPlan=\"Starter\"\n      />\n    </div>\n  );\n}\n"],"names":["linkSchema","z.object","z.string","z.boolean","SOCIAL_ICONS","Instagram","Facebook","Linkedin","Music","Youtube","Home","MapPin","Calendar","Globe","Mail","Phone","MessageCircle","FileText","LinkIcon","AddLinkModal","open","onOpenChange","onSave","error","setError","useState","register","handleSubmit","errors","reset","setValue","watch","useForm","zodResolver","icon","active","onSubmit","data","err","Dialog","jsxs","DialogContent","DialogHeader","jsx","DialogTitle","DialogDescription","Label","Input","Select","value","SelectTrigger","SelectValue","selected","i","IconComponent","SelectContent","iconItem","SelectItem","e","DialogFooter","Button","EditLinkModal","isOpen","onClose","initialData","formData","setFormData","useEffect","X","useSoftDelete","options","onDelete","deleteDelay","undoMessage","resourceName","toast","useToast","deletionQueue","setDeletionQueue","queueRef","useRef","softDelete","useCallback","item","timeoutId","prev","newQueue","queueItem","dismissToast","undoDelete","id","isPendingDeletion","getPendingDeletions","cancelAllDeletions","forceDelete","getIconComponent","iconName","Links","isAddModalOpen","setIsAddModalOpen","isEditModalOpen","setIsEditModalOpen","editingLink","setEditingLink","showUpgradeModal","setShowUpgradeModal","links","isLoading","addLink","updateLink","deleteLink","useLinks","subscription","canAdd","getLimit","getUsage","useSubscriptionLimits","link","visibleLinks","useMemo","handleAddClick","handleAddLink","handleEditLink","handleUpdateLink","handleDeleteClick","Plus","LimitBanner","l","sum","GripVertical","ExternalLink","Edit","Trash2","UpgradeModal"],"mappings":"snCAwCA,MAAMA,GAAaC,EAAS,CAC1B,MAAOC,EAAE,EAAS,IAAI,EAAG,mBAAmB,EAAE,IAAI,IAAK,wCAAwC,EAC/F,IAAKA,EAAE,EAAS,IAAI,0BAA0B,EAC9C,KAAMA,EAAE,EACR,OAAQC,EAAE,CACZ,CAAC,EAUKC,EAAqE,CACzE,CAAE,MAAO,YAAa,MAAO,YAAa,KAAMC,CAAA,EAChD,CAAE,MAAO,WAAY,MAAO,WAAY,KAAMC,CAAA,EAC9C,CAAE,MAAO,WAAY,MAAO,WAAY,KAAMC,CAAA,EAC9C,CAAE,MAAO,SAAU,MAAO,SAAU,KAAMC,CAAA,EAC1C,CAAE,MAAO,UAAW,MAAO,UAAW,KAAMC,CAAA,EAC5C,CAAE,MAAO,SAAU,MAAO,SAAU,KAAMC,CAAA,EAC1C,CAAE,MAAO,UAAW,MAAO,cAAe,KAAMC,CAAA,EAChD,CAAE,MAAO,WAAY,MAAO,WAAY,KAAMC,CAAA,EAC9C,CAAE,MAAO,UAAW,MAAO,UAAW,KAAMC,CAAA,EAC5C,CAAE,MAAO,QAAS,MAAO,QAAS,KAAMC,CAAA,EACxC,CAAE,MAAO,QAAS,MAAO,QAAS,KAAMC,CAAA,EACxC,CAAE,MAAO,WAAY,MAAO,WAAY,KAAMC,CAAA,EAC9C,CAAE,MAAO,WAAY,MAAO,WAAY,KAAMC,CAAA,EAC9C,CAAE,MAAO,OAAQ,MAAO,OAAQ,KAAMC,CAAA,CACxC,EAEO,SAASC,GAAa,CAAE,KAAAC,EAAM,aAAAC,EAAc,OAAAC,GAA6B,CAC9E,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAwB,IAAI,EAEhD,CACJ,SAAAC,EACA,aAAAC,EACA,UAAW,CAAE,OAAAC,CAAA,EACb,MAAAC,EACA,SAAAC,EACA,MAAAC,CAAA,EACEC,EAAsB,CACxB,SAAUC,GAAYjC,EAAU,EAChC,cAAe,CACb,MAAO,GACP,IAAK,GACL,KAAM,OACN,OAAQ,EAAA,CACV,CACD,EAEKkC,EAAOH,EAAM,MAAM,EACnBI,EAASJ,EAAM,QAAQ,EAEvBK,EAAW,MAAOC,GAAuB,CAC7C,GAAI,CACFb,EAAS,IAAI,EACb,MAAMF,IAASe,CAAI,EACnBhB,EAAa,EAAK,EAClBQ,EAAA,CACF,OAASS,EAAK,CACZ,QAAQ,MAAM,sBAAuBA,CAAG,EACxCd,EAAS,uCAAuC,CAClD,CACF,EAEA,aACGe,EAAA,CAAO,KAAAnB,EAAY,aAAAC,EAClB,SAAAmB,EAAAA,KAACC,GAAA,CAAc,UAAU,WACvB,SAAA,CAAAD,OAACE,GAAA,CACC,SAAA,CAAAC,EAAAA,IAACC,IAAY,SAAA,iBAAA,CAAe,EAC5BD,EAAAA,IAACE,IAAkB,SAAA,uDAAA,CAEnB,CAAA,EACF,SAEC,OAAA,CAAK,SAAUlB,EAAaS,CAAQ,EAAG,UAAU,YAC/C,SAAA,CAAAb,GACCoB,EAAAA,IAAC,MAAA,CAAI,UAAU,4EACZ,SAAApB,EACH,SAGD,MAAA,CACC,SAAA,CAAAoB,EAAAA,IAACG,EAAA,CAAM,QAAQ,QAAQ,SAAA,eAAY,EACnCH,EAAAA,IAACI,EAAA,CACC,GAAG,QACF,GAAGrB,EAAS,OAAO,EACpB,YAAY,yBAAA,CAAA,EAEbE,EAAO,OACNe,MAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAf,EAAO,MAAM,OAAA,CAAQ,CAAA,EAEnE,SAEC,MAAA,CACC,SAAA,CAAAe,EAAAA,IAACG,EAAA,CAAM,QAAQ,MAAM,SAAA,QAAK,EAC1BH,EAAAA,IAACI,EAAA,CACC,GAAG,MACF,GAAGrB,EAAS,KAAK,EAClB,YAAY,qBAAA,CAAA,EAEbE,EAAO,KACNe,MAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAf,EAAO,IAAI,OAAA,CAAQ,CAAA,EAEjE,SAEC,MAAA,CACC,SAAA,CAAAe,EAAAA,IAACG,EAAA,CAAM,QAAQ,OAAO,SAAA,OAAI,EAC1BN,EAAAA,KAACQ,GAAA,CACC,MAAOd,EACP,cAAgBe,GAAUnB,EAAS,OAAQmB,CAAK,EAEhD,SAAA,CAAAN,EAAAA,IAACO,GAAA,CACC,SAAAP,EAAAA,IAACQ,GAAA,CACG,UAAA,IAAM,CACN,MAAMC,EAAWhD,EAAa,KAAMiD,GAAMA,EAAE,QAAUnB,CAAI,EACpDoB,EAAgBF,GAAU,MAAQlC,EACxC,OACEsB,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAG,EAAAA,IAACW,EAAA,CAAc,UAAU,SAAA,CAAU,EACnCX,EAAAA,IAAC,OAAA,CAAM,SAAAS,GAAU,OAAS,QAAA,CAAS,CAAA,EACrC,CAEJ,GAAA,EACF,EACF,EACAT,EAAAA,IAACY,GAAA,CACE,SAAAnD,EAAa,IAAKoD,GAAa,CAC9B,MAAMF,EAAgBE,EAAS,KAC/B,OACEb,EAAAA,IAACc,IAAgC,MAAOD,EAAS,MAC/C,SAAAhB,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAG,EAAAA,IAACW,EAAA,CAAc,UAAU,SAAA,CAAU,EACnCX,EAAAA,IAAC,OAAA,CAAM,SAAAa,EAAS,KAAA,CAAM,CAAA,EACxB,CAAA,EAJeA,EAAS,KAK1B,CAEJ,CAAC,CAAA,CACH,CAAA,CAAA,CAAA,CACF,EACF,EAEAhB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAG,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,GAAG,SACH,QAASR,EACT,SAAWuB,GAAM5B,EAAS,SAAU4B,EAAE,OAAO,OAAO,EACpD,UAAU,uBAAA,CAAA,QAEXZ,EAAA,CAAM,QAAQ,SAAS,UAAU,iBAAiB,SAAA,6BAAA,CAEnD,CAAA,EACF,SAECa,GAAA,CACC,SAAA,CAAAhB,EAAAA,IAACiB,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMvC,EAAa,EAAK,EAClC,SAAA,QAAA,CAAA,EAGDsB,EAAAA,IAACiB,EAAA,CAAO,KAAK,SAAS,SAAA,UAAA,CAAQ,CAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CChMO,SAASC,GAAc,CAAE,OAAAC,EAAQ,QAAAC,EAAS,SAAA3B,EAAU,YAAA4B,GAAmC,CAC5F,KAAM,CAACC,EAAUC,CAAW,EAAIzC,EAAAA,SAA2BuC,CAAW,EAMtE,GAJAG,EAAAA,UAAU,IAAM,CACdD,EAAYF,CAAW,CACzB,EAAG,CAACA,CAAW,CAAC,EAEZ,CAACF,EAAQ,OAAO,KAEpB,MAAMnC,EAAgB+B,GAAuB,CAC3CA,EAAE,eAAA,EACFtB,EAAS6B,CAAQ,CACnB,EAEA,aACG,MAAA,CAAI,UAAU,uFACb,SAAAzB,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAG,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAwB,SAAA,YAAS,EAC/CA,EAAAA,IAAC,SAAA,CACC,QAASoB,EACT,UAAU,mDAEV,SAAApB,EAAAA,IAACyB,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEA5B,EAAAA,KAAC,OAAA,CAAK,SAAUb,EAAc,UAAU,gBACtC,SAAA,CAAAa,OAAC,MAAA,CACC,SAAA,CAAAG,EAAAA,IAACG,EAAA,CAAM,QAAQ,QAAQ,SAAA,eAAY,EACnCH,EAAAA,IAACI,EAAA,CACC,GAAG,QACH,MAAOkB,EAAS,MAChB,SAAWP,GAAMQ,EAAY,CAAE,GAAGD,EAAU,MAAOP,EAAE,OAAO,MAAO,EACnE,YAAY,mBACZ,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAf,EAAAA,IAACG,EAAA,CAAM,QAAQ,MAAM,SAAA,QAAK,EAC1BH,EAAAA,IAACI,EAAA,CACC,GAAG,MACH,KAAK,MACL,MAAOkB,EAAS,IAChB,SAAWP,GAAMQ,EAAY,CAAE,GAAGD,EAAU,IAAKP,EAAE,OAAO,MAAO,EACjE,YAAY,sBACZ,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAf,EAAAA,IAACG,EAAA,CAAM,QAAQ,OAAO,SAAA,kBAAe,EACrCH,EAAAA,IAACI,EAAA,CACC,GAAG,OACH,MAAOkB,EAAS,MAAQ,GACxB,SAAWP,GAAMQ,EAAY,CAAE,GAAGD,EAAU,KAAMP,EAAE,OAAO,MAAO,EAClE,YAAY,yBAAA,CAAA,EAEdf,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,6BAAA,CAElD,CAAA,EACF,EAEAH,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAG,EAAAA,IAACiB,EAAA,CAAO,KAAK,SAAS,QAAQ,UAAU,QAASG,EAAS,UAAU,SAAS,SAAA,QAAA,CAE7E,QACCH,EAAA,CAAO,KAAK,SAAS,UAAU,SAAS,SAAA,cAAA,CAEzC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CC/DO,SAASS,GAAwCC,EAAkC,CACxF,KAAM,CACJ,SAAAC,EACA,YAAAC,EAAc,IACd,YAAAC,EACA,aAAAC,CAAA,EACEJ,EAEE,CAAE,MAAAK,CAAe,EAAIC,EAAA,EACrB,CAACC,EAAeC,CAAgB,EAAIrD,EAAAA,SAA0C,IAAI,GAAK,EACvFsD,EAAWC,EAAAA,OAAOH,CAAa,EAGrCE,EAAS,QAAUF,EAKnB,MAAMI,EAAaC,EAAAA,YACjB,MAAOC,GAAY,CAEjB,GAAIJ,EAAS,QAAQ,IAAII,EAAK,EAAE,EAC9B,OAIF,MAAMC,EAAY,WAAW,SAAY,CACvC,GAAI,CACF,MAAMb,EAASY,EAAK,EAAE,EAGtBL,EAAkBO,GAAS,CACzB,MAAMC,EAAW,IAAI,IAAID,CAAI,EAC7B,OAAAC,EAAS,OAAOH,EAAK,EAAE,EAChBG,CACT,CAAC,EAGDX,EAAM,CACJ,MAAO,GAAGD,CAAY,WACtB,YAAa,QAAQA,CAAY,gCAAA,CAClC,CACH,MAAgB,CAEdC,EAAM,CACJ,MAAO,kBACP,YAAa,oBAAoBD,CAAY,sBAC7C,QAAS,aAAA,CACV,EAGDI,EAAkBO,GAAS,CACzB,MAAMC,EAAW,IAAI,IAAID,CAAI,EAC7B,OAAAC,EAAS,OAAOH,EAAK,EAAE,EAChBG,CACT,CAAC,CACH,CACF,EAAGd,CAAW,EAGRe,EAAgC,CACpC,GAAIJ,EAAK,GACT,KAAMA,EACN,UAAAC,EACA,UAAW,KAAK,IAAA,CAAI,EAGtBN,EAAkBO,GAAS,CACzB,MAAMC,EAAW,IAAI,IAAID,CAAI,EAC7B,OAAAC,EAAS,IAAIH,EAAK,GAAII,CAAS,EACxBD,CACT,CAAC,EAGD,KAAM,CAAE,QAASE,CAAA,EAAiBb,EAAM,CACtC,MAAO,GAAGD,CAAY,WACtB,YAAaD,IAAcU,CAAI,GAAK,YAAYT,CAAY,OAAOF,EAAc,GAAI,cACrF,OAAQ,CACN,MAAO,OACP,QAAS,IAAM,CACbiB,EAAWN,EAAK,EAAE,EAClBK,EAAA,CACF,CAAA,EAEF,SAAUhB,CAAA,CACX,CACH,EACA,CAACD,EAAUC,EAAaC,EAAaC,EAAcC,CAAK,CAAA,EAMpDc,EAAaP,cAAaQ,GAAe,CAC7C,MAAMH,EAAYR,EAAS,QAAQ,IAAIW,CAAE,EAEpCH,IAKL,aAAaA,EAAU,SAAS,EAGhCT,EAAkBO,GAAS,CACzB,MAAMC,EAAW,IAAI,IAAID,CAAI,EAC7B,OAAAC,EAAS,OAAOI,CAAE,EACXJ,CACT,CAAC,EAGDX,EAAM,CACJ,MAAO,qBACP,YAAa,QAAQD,CAAY,qBAAA,CAClC,EACH,EAAG,CAACA,EAAcC,CAAK,CAAC,EAKlBgB,EAAoBT,EAAAA,YACvBQ,GACQX,EAAS,QAAQ,IAAIW,CAAE,EAEhC,CAAA,CAAC,EAMGE,EAAsBV,EAAAA,YAAY,IAC/B,MAAM,KAAKH,EAAS,QAAQ,QAAQ,EAAE,IAAKI,GAASA,EAAK,IAAI,EACnE,CAAA,CAAE,EAKCU,EAAqBX,EAAAA,YAAY,IAAM,CAC3CH,EAAS,QAAQ,QAASI,GAAS,CACjC,aAAaA,EAAK,SAAS,CAC7B,CAAC,EACDL,EAAiB,IAAI,GAAK,EAEtBC,EAAS,QAAQ,KAAO,GAC1BJ,EAAM,CACJ,MAAO,0BACP,YAAa,GAAGI,EAAS,QAAQ,IAAI,IAAIL,CAAY,GAAGK,EAAS,QAAQ,KAAO,EAAI,IAAM,EAAE,YAAA,CAC7F,CAEL,EAAG,CAACL,EAAcC,CAAK,CAAC,EAKlBmB,EAAcZ,EAAAA,YAClB,MAAOQ,GAAe,CACpB,MAAMH,EAAYR,EAAS,QAAQ,IAAIW,CAAE,EAEzC,GAAKH,EAKL,cAAaA,EAAU,SAAS,EAGhCT,EAAkBO,GAAS,CACzB,MAAMC,EAAW,IAAI,IAAID,CAAI,EAC7B,OAAAC,EAAS,OAAOI,CAAE,EACXJ,CACT,CAAC,EAGD,GAAI,CACF,MAAMf,EAASmB,CAAE,EACjBf,EAAM,CACJ,MAAO,GAAGD,CAAY,WACtB,YAAa,QAAQA,CAAY,gCAAA,CAClC,CACH,MAAgB,CACdC,EAAM,CACJ,MAAO,kBACP,YAAa,oBAAoBD,CAAY,sBAC7C,QAAS,aAAA,CACV,CACH,EACF,EACA,CAACH,EAAUG,EAAcC,CAAK,CAAA,EAGhC,MAAO,CACL,WAAAM,EACA,WAAAQ,EACA,kBAAAE,EACA,oBAAAC,EACA,mBAAAC,EACA,YAAAC,EACA,aAAcjB,EAAc,IAAA,CAEhC,CC3NA,MAAMkB,GAAoBC,IACa,CACnC,SAAUpF,EACV,UAAWP,EACX,SAAUC,EACV,OAAQI,EACR,KAAMQ,EACN,SAAUX,EACV,OAAQC,EACR,QAASC,EACT,QAASE,EACT,QAASE,EACT,MAAOC,EACP,MAAOC,EACP,SAAUC,EACV,SAAUC,CAAA,GAEG+E,CAAQ,GAAK9E,EAG9B,SAAwB+E,IAAQ,CAC9B,KAAM,CAACC,EAAgBC,CAAiB,EAAI1E,EAAAA,SAAS,EAAK,EACpD,CAAC2E,EAAiBC,CAAkB,EAAI5E,EAAAA,SAAS,EAAK,EACtD,CAAC6E,EAAaC,CAAc,EAAI9E,EAAAA,SAAsB,IAAI,EAC1D,CAAC+E,EAAkBC,CAAmB,EAAIhF,EAAAA,SAAS,EAAK,EACxD,CAAE,MAAAkD,CAAA,EAAUC,EAAA,EACZ,CAAE,MAAA8B,EAAO,UAAAC,EAAW,QAAAC,EAAS,WAAAC,EAAY,WAAAC,CAAyB,EAAIC,GAAA,EACtE,CAAE,aAAAC,EAAc,OAAAC,EAAQ,SAAAC,EAAU,SAAAC,CAAA,EAAaC,GAAA,EAG/C,CAAE,WAAAnC,EAAY,kBAAAU,CAAgC,EAAItB,GAAoB,CAC1E,SAAU,MAAOqB,GAAe,CAC9B,MAAMoB,EAAW,YAAYpB,CAAE,CACjC,EACA,YAAa,IACb,aAAc,OACd,YAAc2B,GAAS,IAAIA,EAAK,KAAK,wDAAA,CACtC,EAGKC,EAAeC,EAAAA,QACnB,IAAMb,EAAM,OAAQW,GAAS,CAAC1B,EAAkB0B,EAAK,EAAE,CAAC,EACxD,CAACX,EAAOf,CAAiB,CAAA,EAGrB6B,EAAiB,IAAM,CAC3B,GAAI,CAACP,EAAO,OAAO,EAAG,CACpBR,EAAoB,EAAI,EACxB,MACF,CACAN,EAAkB,EAAI,CACxB,EAEMsB,EAAgB,MAAOpF,GAAuB,CAClD,GAAI,CACF,MAAMuE,EAAQ,YAAYvE,CAAI,EAC9BsC,EAAM,CACJ,MAAO,cACP,YAAa,iDAAA,CACd,CACH,MAAgB,CACdA,EAAM,CACJ,MAAO,QACP,YAAa,wCACb,QAAS,aAAA,CACV,CACH,CACF,EAEM+C,EAAkBL,GAAe,CACrCd,EAAec,CAAI,EACnBhB,EAAmB,EAAI,CACzB,EAEMsB,EAAmB,MAAOjC,EAAYrD,IAAwB,CAClE,GAAI,CACF,MAAMwE,EAAW,YAAY,CAAE,GAAAnB,EAAI,GAAGrD,EAAM,EAC5CsC,EAAM,CACJ,MAAO,gBACP,YAAa,0CAAA,CACd,CACH,MAAgB,CACdA,EAAM,CACJ,MAAO,QACP,YAAa,2CACb,QAAS,aAAA,CACV,CACH,CACF,EAEMiD,EAAqBP,GAAe,CACxCpC,EAAWoC,CAAI,CACjB,EAEA,OACE7E,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAG,EAAAA,IAAC,KAAA,CAAG,UAAU,iDAAiD,SAAA,eAAY,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,4DAA4D,SAAA,qCAAA,CAEzE,CAAA,EACF,EACAH,EAAAA,KAAC,SAAA,CACC,QAASgF,EACT,UAAU,yNAEV,SAAA,CAAA7E,EAAAA,IAACkF,GAAA,CAAK,UAAU,uBAAA,CAAwB,EACxClF,EAAAA,IAAC,OAAA,CAAK,UAAU,uBAAuB,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,CACjD,EACF,EAGCqE,GAAgBE,EAAS,OAAO,IAAM,KACrCvE,EAAAA,IAACmF,GAAA,CACC,QAAQ,QACR,QAASX,EAAS,OAAO,EACzB,MAAOD,EAAS,OAAO,CAAA,CAAA,EAK3B1E,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAG,EAAAA,IAAC,MAAA,CAAI,UAAU,gDAAiD,SAAA2E,EAAa,OAAO,EACpF3E,EAAAA,IAAC,MAAA,CAAI,UAAU,kDAAkD,SAAA,OAAA,CAAK,CAAA,EACxE,EACAH,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAG,EAAAA,IAAC,MAAA,CAAI,UAAU,+CACZ,SAAA2E,EAAa,OAAQS,GAAMA,EAAE,SAAS,EAAE,MAAA,CAC3C,EACApF,EAAAA,IAAC,MAAA,CAAI,UAAU,kDAAkD,SAAA,QAAA,CAAM,CAAA,EACzE,EACAH,EAAAA,KAAC,MAAA,CAAI,UAAU,uFACb,SAAA,CAAAG,EAAAA,IAAC,MAAA,CAAI,UAAU,6CACZ,SAAA2E,EAAa,OAAO,CAACU,EAAKD,IAAMC,EAAMD,EAAE,YAAa,CAAC,EACzD,EACApF,EAAAA,IAAC,MAAA,CAAI,UAAU,kDAAkD,SAAA,QAAA,CAAM,CAAA,CAAA,CACzE,CAAA,EACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,iEACZ,WACCA,MAAC,MAAA,CAAI,UAAU,oEAAoE,SAAA,kBAAA,CAEnF,EACE2E,EAAa,SAAW,EAC1B3E,EAAAA,IAAC,MAAA,CAAI,UAAU,oEAAoE,qEAEnF,EAEA2E,EAAa,IAAKD,GAClB7E,EAAAA,KAAC,MAAA,CAEC,UAAU,uGAGV,SAAA,CAAAG,EAAAA,IAAC,SAAA,CACC,UAAU,gGACV,aAAW,kBAEX,SAAAA,EAAAA,IAACsF,GAAA,CAAa,UAAU,+BAAA,CAAgC,CAAA,CAAA,EAI1DtF,EAAAA,IAAC,MAAA,CAAI,UAAU,gGACX,UAAA,IAAM,CACN,MAAMW,EAAgByC,GAAiBsB,EAAK,IAAI,EAChD,OAAO1E,EAAAA,IAACW,EAAA,CAAc,UAAU,uCAAA,CAAwC,CAC1E,IAAG,CACL,EAGAd,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAG,EAAAA,IAAC,KAAA,CAAG,UAAU,4DACX,SAAA0E,EAAK,MACR,EACCA,EAAK,UACJ1E,EAAAA,IAAC,OAAA,CAAK,UAAU,mGAAmG,SAAA,QAAA,CAEnH,EAEAA,EAAAA,IAAC,OAAA,CAAK,UAAU,iGAAiG,SAAA,UAAA,CAEjH,CAAA,EAEJ,EACAH,EAAAA,KAAC,IAAA,CACC,KAAM6E,EAAK,IACX,OAAO,SACP,IAAI,sBACJ,UAAU,mHAEV,SAAA,CAAA1E,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAY,SAAA0E,EAAK,IAAI,EACrC1E,EAAAA,IAACuF,GAAA,CAAa,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAAA,EAGlD1F,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAG,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAiC,SAAA0E,EAAK,YAAY,EAAO,SAAA,CAAA,CAC3E,CAAA,EACF,EAGA7E,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,CAAAG,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAA0E,EAAK,YACR,EACA1E,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,QAAA,CAAM,CAAA,EACvD,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAG,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM+E,EAAeL,CAAI,EAClC,UAAU,wIACV,aAAW,YAEX,SAAA1E,EAAAA,IAACwF,GAAA,CAAK,UAAU,+BAAA,CAAgC,CAAA,CAAA,EAElDxF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMiF,EAAkBP,CAAI,EACrC,UAAU,sIACV,aAAW,cAEX,SAAA1E,EAAAA,IAACyF,GAAA,CAAO,UAAU,sBAAA,CAAuB,CAAA,CAAA,CAC3C,CAAA,CACF,CAAA,CAAA,EA1EKf,EAAK,EAAA,CA4Eb,EAEH,QAGC,MAAA,CAAI,UAAU,mGACb,SAAA7E,EAAAA,KAAC,IAAA,CAAE,UAAU,sEACX,SAAA,CAAAG,MAAC,OAAA,CAAK,KAAK,MAAM,aAAW,MAAM,SAAA,KAAE,EAAO,IAACA,EAAAA,IAAC,UAAO,SAAA,MAAA,CAAI,EAAS,IAACA,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,uCAAoC,EAAOA,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,8CAA2C,EAAO,2DAAA,CAAA,CAChO,CAAA,CACF,EAGAA,EAAAA,IAACxB,GAAA,CACC,KAAM+E,EACN,aAAcC,EACd,OAAQsB,CAAA,CAAA,EAIV9E,EAAAA,IAACkB,GAAA,CACC,KAAMuC,EACN,aAAcC,EACd,KAAMC,EACN,OAAQqB,CAAA,CAAA,EAIVhF,EAAAA,IAAC0F,GAAA,CACC,KAAM7B,EACN,aAAcC,EACd,QAAQ,QACR,YAAaO,GAAc,WAAa,OACxC,aAAa,SAAA,CAAA,CACf,EACF,CAEJ"}