import{q as c,b4 as p,G as y,s as o}from"./index-CjfB9Lcv.js";import{u as m}from"./useMutation-T5qVTYdw.js";function w(){const{user:e}=c(),s=p(),{data:a,isLoading:n,isError:u,error:d,refetch:l}=y({queryKey:["profile",e?.id],queryFn:async()=>{if(!e?.id)return null;const{data:t,error:r}=await o.from("profiles").select("*").eq("id",e.id).single();if(r)throw r;return t},enabled:!!e?.id,staleTime:300*1e3,gcTime:600*1e3}),f=m({mutationFn:async t=>{if(!e?.id)throw new Error("User not authenticated");const{data:r,error:i}=await o.from("profiles").update(t).eq("id",e.id).select().single();if(i)throw i;return r},onSuccess:()=>{s.invalidateQueries({queryKey:["profile",e?.id]})}});return{profile:a,isLoading:n,isError:u,error:d,refetch:l,updateProfile:f}}export{w as u};
