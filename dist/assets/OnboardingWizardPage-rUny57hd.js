import{r as e,g as s,j as t}from"./react-vendor-CGQ4_CNL.js";import{j as i,P as l,C as a}from"./ui-components-C1NvMFTL.js";import{g as r,a6 as o,H as n,E as c,a7 as d,b as m,a2 as u,A as x,L as h}from"./icons-BX9Iz4zT.js";import{a as p,u as f,s as g}from"./index-CNd-jRjk.js";import"./charts-D_q0pR-d.js";import"./utils-wmY8hpgz.js";import"./supabase-D5NmozDF.js";import"./data-O5cD9hjv.js";import"./three-addons-DQ5hBofG.js";import"./three-BxgHQpUo.js";import"./forms-BzNDvv3d.js";function b({onComplete:h,userProfile:p}){const[f,g]=e.useState(1),[b,C]=e.useState({templateChoice:null,profileBasics:{photo:null,photoPreview:null,fullName:p?.full_name||"",title:"",bio:"",phone:"",location:""},firstListing:{photo:null,photoPreview:null,address:"",price:"",beds:"",baths:"",status:"active"},importOption:null});s();const B=f/5*100,P=[{number:1,title:"Choose Template",icon:r},{number:2,title:"Profile Basics",icon:o},{number:3,title:"First Listing",icon:n},{number:4,title:"Preview",icon:c},{number:5,title:"Share",icon:d}];return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Setup Your AgentBio Profile"}),t.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{h(b)},children:"Skip Setup"})]}),t.jsx(l,{value:B,className:"h-2 mb-4"}),t.jsx("div",{className:"flex items-center justify-between",children:P.map(e=>t.jsxs("div",{className:"flex items-center gap-2 "+(e.number===f?"text-blue-600 font-semibold":e.number<f?"text-green-600":"text-gray-400"),children:[e.number<f?t.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:t.jsx(m,{className:"h-5 w-5 text-white"})}):t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(e.number===f?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"),children:e.number}),t.jsx("span",{className:"hidden md:inline text-sm",children:e.title})]},e.number))})]}),t.jsxs(a,{className:"p-8 bg-white shadow-xl",children:[1===f&&t.jsx(j,{templates:[{id:"luxury",name:"Luxury",description:"High-end properties",colors:["#1e3a8a","#d4af37"]},{id:"modern",name:"Modern Clean",description:"Minimalist & professional",colors:["#2563eb","#10b981"]},{id:"coastal",name:"Coastal",description:"Beach & waterfront",colors:["#0891b2","#06b6d4"]},{id:"classic",name:"Classic",description:"Traditional & timeless",colors:["#7c3aed","#a855f7"]}],selected:b.templateChoice,onSelect:e=>C({...b,templateChoice:e})}),2===f&&t.jsx(v,{data:b.profileBasics,onChange:e=>C({...b,profileBasics:e})}),3===f&&t.jsx(N,{data:b.firstListing,onChange:e=>C({...b,firstListing:e})}),4===f&&t.jsx(y,{wizardData:b}),5===f&&t.jsx(w,{username:p?.username||"yourname"})]}),t.jsxs("div",{className:"flex items-center justify-between mt-8",children:[t.jsxs(i,{variant:"outline",onClick:()=>{f>1&&g(f-1)},disabled:1===f,children:[t.jsx(u,{className:"h-4 w-4 mr-2"}),"Back"]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Step ",f," of ",5," â€¢ ~",10-2*f," min remaining"]}),t.jsxs(i,{onClick:()=>{f<5?g(f+1):h(b)},disabled:!(()=>{switch(f){case 1:return null!==b.templateChoice;case 2:return b.profileBasics.fullName&&b.profileBasics.title;case 3:case 4:case 5:return!0;default:return!1}})(),children:[5===f?"Go to Dashboard":"Next",t.jsx(x,{className:"h-4 w-4 ml-2"})]})]})]})})}function j({templates:e,selected:s,onSelect:i}){return t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your Style"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Select a template to match your brand. You can customize it later."}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(e=>t.jsxs("button",{onClick:()=>i(e.id),className:"p-4 rounded-xl border-2 transition-all "+(s===e.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[t.jsx("div",{className:"w-full h-24 rounded-lg mb-3",style:{background:`linear-gradient(135deg, ${e.colors[0]}, ${e.colors[1]})`}}),t.jsx("div",{className:"font-semibold text-sm",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500",children:e.description})]},e.id))})]})}function v({data:e,onChange:s}){return t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your Profile Basics"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Add your photo and basic info. Takes ~2 minutes."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Profile Photo"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 overflow-hidden",children:e.photoPreview?t.jsx("img",{src:e.photoPreview,alt:"Preview",className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:t.jsx(o,{className:"h-8 w-8"})})}),t.jsxs("div",{children:[t.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:t=>{const i=t.target.files?.[0];if(i){const t=new FileReader;t.onloadend=()=>{s({...e,photo:i,photoPreview:t.result})},t.readAsDataURL(i)}},className:"hidden"}),t.jsx(i,{asChild:!0,variant:"outline",size:"sm",children:t.jsx("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:"Upload Photo"})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name *"}),t.jsx("input",{type:"text",value:e.fullName,onChange:t=>s({...e,fullName:t.target.value}),placeholder:"Sarah Johnson",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),t.jsx("input",{type:"text",value:e.title,onChange:t=>s({...e,title:t.target.value}),placeholder:"Luxury Home Specialist",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio (optional)"}),t.jsx("textarea",{value:e.bio,onChange:t=>s({...e,bio:t.target.value}),placeholder:"Helping families find their dream homes...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 h-24 resize-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone (optional)"}),t.jsx("input",{type:"tel",value:e.phone,onChange:t=>s({...e,phone:t.target.value}),placeholder:"(555) 123-4567",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location (optional)"}),t.jsx("input",{type:"text",value:e.location,onChange:t=>s({...e,location:t.target.value}),placeholder:"Austin, TX",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]})}function N({data:e,onChange:s}){return t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Add Your First Listing"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Showcase a property to make your profile pop. You can skip and add later."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Property Photo"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-32 h-24 rounded-lg bg-gray-200 overflow-hidden",children:e.photoPreview?t.jsx("img",{src:e.photoPreview,alt:"Property",className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:t.jsx(n,{className:"h-8 w-8"})})}),t.jsxs("div",{children:[t.jsx("input",{type:"file",id:"listing-photo",accept:"image/*",onChange:t=>{const i=t.target.files?.[0];if(i){const t=new FileReader;t.onloadend=()=>{s({...e,photo:i,photoPreview:t.result})},t.readAsDataURL(i)}},className:"hidden"}),t.jsx(i,{asChild:!0,variant:"outline",size:"sm",children:t.jsx("label",{htmlFor:"listing-photo",className:"cursor-pointer",children:"Upload Photo"})})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),t.jsx("input",{type:"text",value:e.address,onChange:t=>s({...e,address:t.target.value}),placeholder:"123 Main St, Austin, TX 78701",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price"}),t.jsx("input",{type:"text",value:e.price,onChange:t=>s({...e,price:t.target.value}),placeholder:"$750,000",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Beds"}),t.jsx("input",{type:"number",value:e.beds,onChange:t=>s({...e,beds:t.target.value}),placeholder:"3",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Baths"}),t.jsx("input",{type:"number",value:e.baths,onChange:t=>s({...e,baths:t.target.value}),placeholder:"2",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",checked:"active"===e.status,onChange:()=>s({...e,status:"active"}),className:"text-blue-600"}),t.jsx("span",{children:"Active Listing"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",checked:"sold"===e.status,onChange:()=>s({...e,status:"sold"}),className:"text-blue-600"}),t.jsx("span",{children:"Sold Property"})]})]})]})]})]})}function y({wizardData:e}){return t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Preview Your Profile"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Here's how your profile will look. You can edit everything later."}),t.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-8 border border-gray-200",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md mx-auto",children:[t.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.profileBasics.photoPreview?t.jsx("img",{src:e.profileBasics.photoPreview,alt:"Profile",className:"w-24 h-24 rounded-full object-cover mb-4"}):t.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-300 mb-4"}),t.jsx("h3",{className:"text-xl font-bold",children:e.profileBasics.fullName||"Your Name"}),t.jsx("p",{className:"text-sm text-gray-600",children:e.profileBasics.title||"Your Title"}),e.profileBasics.location&&t.jsx("p",{className:"text-sm text-gray-500",children:e.profileBasics.location})]}),e.profileBasics.bio&&t.jsx("p",{className:"text-sm text-gray-700 text-center mb-4",children:e.profileBasics.bio}),e.firstListing.photoPreview&&t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsx("img",{src:e.firstListing.photoPreview,alt:"Listing",className:"w-full h-48 object-cover"}),t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"font-semibold text-lg text-blue-600 mb-1",children:e.firstListing.price||"$XXX,XXX"}),t.jsx("div",{className:"text-sm text-gray-700 mb-2",children:e.firstListing.address||"Property Address"}),(e.firstListing.beds||e.firstListing.baths)&&t.jsxs("div",{className:"text-sm text-gray-600",children:[e.firstListing.beds," bd â€¢ ",e.firstListing.baths," ba"]})]})]})]})})]})}function w({username:s}){const l=`agentbio.net/${s}`,[a,r]=e.useState(!1);return t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(m,{className:"h-8 w-8 text-green-600"})}),t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ðŸŽ‰ Your Profile is Live!"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Share your link on Instagram, Facebook, business cards, and everywhere you connect with clients."}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 mb-6",children:[t.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Your AgentBio Link"}),t.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-4",children:l}),t.jsx(i,{onClick:()=>{navigator.clipboard.writeText(`https://${l}`),r(!0),setTimeout(()=>r(!1),2e3)},size:"lg",className:"mb-4",children:a?"Copied!":"Copy Link"})]}),t.jsxs("div",{className:"space-y-3 text-left max-w-md mx-auto",children:[t.jsx("h3",{className:"font-semibold text-center mb-4",children:"Next Steps:"}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:"1"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Add it to Instagram bio"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Replace your current link with your AgentBio URL"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:"2"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Add more listings"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Showcase your sold properties and active listings"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:"3"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:"Customize your theme"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Match your personal brand with colors and fonts"})]})]})]})]})}function C(){const i=s(),{user:l,profile:a}=p(),{toast:r}=f(),[o,n]=e.useState(!1);return o?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(h,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setting up your profile..."}),t.jsx("p",{className:"text-gray-600",children:"This will only take a moment"})]})}):t.jsx(b,{onComplete:async e=>{if(!l)return r({title:"Error",description:"You must be logged in to complete onboarding",variant:"destructive"}),void i("/auth/login");n(!0);try{const a={};if(e.profileBasics.fullName&&(a.full_name=e.profileBasics.fullName),e.profileBasics.title&&(a.title=e.profileBasics.title),e.profileBasics.bio&&(a.bio=e.profileBasics.bio),e.profileBasics.phone&&(a.phone=e.profileBasics.phone),e.profileBasics.location){const s=e.profileBasics.location.split(",").map(e=>e.trim());s.length>=2&&(a.city=s[0],a.license_state=s[1])}if(e.profileBasics.photo)try{const s=e.profileBasics.photo.name.split(".").pop(),t=`avatars/${`${l.id}-${Date.now()}.${s}`}`,{error:i}=await g.storage.from("avatars").upload(t,e.profileBasics.photo);if(i)throw i;const{data:{publicUrl:r}}=g.storage.from("avatars").getPublicUrl(t);a.avatar_url=r}catch(s){}e.templateChoice&&(a.theme=e.templateChoice);const{error:o}=await g.from("profiles").update(a).eq("id",l.id);if(o)throw o;if(e.firstListing.address||e.firstListing.price)try{let s=null;if(e.firstListing.photo){const t=e.firstListing.photo.name.split(".").pop(),i=`listings/${`${l.id}-listing-${Date.now()}.${t}`}`,{error:a}=await g.storage.from("listing-images").upload(i,e.firstListing.photo);if(!a){const{data:{publicUrl:e}}=g.storage.from("listing-images").getPublicUrl(i);s=e}}const t=e.firstListing.address?.split(",").map(e=>e.trim())||[],i=t[0]||"",a=t[1]||"",r=(t[2]||"").split(" "),o=r[0]||"",n=r[1]||"",c={user_id:l.id,address:i,city:a,state:o,zip_code:n,price:e.firstListing.price||"0",bedrooms:e.firstListing.beds?parseInt(e.firstListing.beds):null,bathrooms:e.firstListing.baths?parseInt(e.firstListing.baths):null,status:e.firstListing.status||"active",featured:!0,photos:s?[s]:[]},{error:d}=await g.from("listings").insert(c)}catch(s){}try{await g.functions.invoke("send-welcome-email",{body:{user_id:l.id,email:l.email,full_name:e.profileBasics.fullName||l.user_metadata?.full_name,username:l.user_metadata?.username||"agent"}})}catch(t){}r({title:"ðŸŽ‰ Welcome to AgentBio!",description:"Your profile is ready to share. Check your email for next steps!"}),i("/dashboard",{replace:!0})}catch(s){r({title:"Error",description:s.message||"Failed to save your information. Please try again.",variant:"destructive"})}finally{n(!1)}},userProfile:a||l})}export{C as default};
