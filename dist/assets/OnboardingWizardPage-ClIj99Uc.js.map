{"version":3,"file":"OnboardingWizardPage-ClIj99Uc.js","sources":["../../src/components/onboarding/OnboardingWizard.tsx","../../src/pages/onboarding/OnboardingWizardPage.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Check, ArrowRight, ArrowLeft, Sparkles, Upload, Home, Link as LinkIcon, Eye } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\n\n/**\n * OnboardingWizard Component\n * 5-step guided onboarding to get agents from signup to shareable profile in <10 minutes\n */\n\ninterface OnboardingWizardProps {\n  onComplete: () => void;\n  userProfile?: any;\n}\n\nexport function OnboardingWizard({ onComplete, userProfile }: OnboardingWizardProps) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [wizardData, setWizardData] = useState({\n    templateChoice: null as string | null,\n    profileBasics: {\n      photo: null as File | null,\n      photoPreview: null as string | null,\n      fullName: userProfile?.full_name || '',\n      title: '',\n      bio: '',\n      phone: '',\n      location: ''\n    },\n    firstListing: {\n      photo: null as File | null,\n      photoPreview: null as string | null,\n      address: '',\n      price: '',\n      beds: '',\n      baths: '',\n      status: 'active' as 'active' | 'sold'\n    },\n    importOption: null as 'scratch' | 'linktree' | null\n  });\n\n  const navigate = useNavigate();\n\n  const totalSteps = 5;\n  const progress = (currentStep / totalSteps) * 100;\n\n  const steps = [\n    { number: 1, title: 'Choose Template', icon: Sparkles },\n    { number: 2, title: 'Profile Basics', icon: Upload },\n    { number: 3, title: 'First Listing', icon: Home },\n    { number: 4, title: 'Preview', icon: Eye },\n    { number: 5, title: 'Share', icon: LinkIcon }\n  ];\n\n  const templates = [\n    { id: 'luxury', name: 'Luxury', description: 'High-end properties', colors: ['#1e3a8a', '#d4af37'] },\n    { id: 'modern', name: 'Modern Clean', description: 'Minimalist & professional', colors: ['#2563eb', '#10b981'] },\n    { id: 'coastal', name: 'Coastal', description: 'Beach & waterfront', colors: ['#0891b2', '#06b6d4'] },\n    { id: 'classic', name: 'Classic', description: 'Traditional & timeless', colors: ['#7c3aed', '#a855f7'] }\n  ];\n\n  const handleNext = () => {\n    if (currentStep < totalSteps) {\n      setCurrentStep(currentStep + 1);\n    } else {\n      onComplete(wizardData);\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const handleSkipToEnd = () => {\n    onComplete(wizardData);\n  };\n\n  const canProceed = () => {\n    switch (currentStep) {\n      case 1:\n        return wizardData.templateChoice !== null;\n      case 2:\n        return wizardData.profileBasics.fullName && wizardData.profileBasics.title;\n      case 3:\n        return true; // Optional step\n      case 4:\n        return true;\n      case 5:\n        return true;\n      default:\n        return false;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header with Progress */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">\n              Setup Your AgentBio Profile\n            </h1>\n            <Button variant=\"ghost\" size=\"sm\" onClick={handleSkipToEnd}>\n              Skip Setup\n            </Button>\n          </div>\n          <Progress value={progress} className=\"h-2 mb-4\" />\n          <div className=\"flex items-center justify-between\">\n            {steps.map((step) => (\n              <div\n                key={step.number}\n                className={`flex items-center gap-2 ${\n                  step.number === currentStep ? 'text-blue-600 font-semibold' :\n                  step.number < currentStep ? 'text-green-600' : 'text-gray-400'\n                }`}\n              >\n                {step.number < currentStep ? (\n                  <div className=\"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center\">\n                    <Check className=\"h-5 w-5 text-white\" />\n                  </div>\n                ) : (\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                    step.number === currentStep ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-500'\n                  }`}>\n                    {step.number}\n                  </div>\n                )}\n                <span className=\"hidden md:inline text-sm\">{step.title}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Step Content */}\n        <Card className=\"p-8 bg-white shadow-xl\">\n          {currentStep === 1 && (\n            <StepChooseTemplate\n              templates={templates}\n              selected={wizardData.templateChoice}\n              onSelect={(id) => setWizardData({ ...wizardData, templateChoice: id })}\n            />\n          )}\n\n          {currentStep === 2 && (\n            <StepProfileBasics\n              data={wizardData.profileBasics}\n              onChange={(data) => setWizardData({ ...wizardData, profileBasics: data })}\n            />\n          )}\n\n          {currentStep === 3 && (\n            <StepFirstListing\n              data={wizardData.firstListing}\n              onChange={(data) => setWizardData({ ...wizardData, firstListing: data })}\n            />\n          )}\n\n          {currentStep === 4 && (\n            <StepPreview wizardData={wizardData} />\n          )}\n\n          {currentStep === 5 && (\n            <StepShare username={userProfile?.username || 'yourname'} />\n          )}\n        </Card>\n\n        {/* Navigation */}\n        <div className=\"flex items-center justify-between mt-8\">\n          <Button\n            variant=\"outline\"\n            onClick={handleBack}\n            disabled={currentStep === 1}\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back\n          </Button>\n          <div className=\"text-sm text-gray-600\">\n            Step {currentStep} of {totalSteps} â€¢ ~{10 - currentStep * 2} min remaining\n          </div>\n          <Button\n            onClick={handleNext}\n            disabled={!canProceed()}\n          >\n            {currentStep === totalSteps ? 'Go to Dashboard' : 'Next'}\n            <ArrowRight className=\"h-4 w-4 ml-2\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Step Components\nfunction StepChooseTemplate({ templates, selected, onSelect }: any) {\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold mb-2\">Choose Your Style</h2>\n      <p className=\"text-gray-600 mb-6\">\n        Select a template to match your brand. You can customize it later.\n      </p>\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n        {templates.map((template: any) => (\n          <button\n            key={template.id}\n            onClick={() => onSelect(template.id)}\n            className={`p-4 rounded-xl border-2 transition-all ${\n              selected === template.id\n                ? 'border-blue-600 bg-blue-50'\n                : 'border-gray-200 hover:border-gray-300'\n            }`}\n          >\n            <div\n              className=\"w-full h-24 rounded-lg mb-3\"\n              style={{\n                background: `linear-gradient(135deg, ${template.colors[0]}, ${template.colors[1]})`\n              }}\n            />\n            <div className=\"font-semibold text-sm\">{template.name}</div>\n            <div className=\"text-xs text-gray-500\">{template.description}</div>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction StepProfileBasics({ data, onChange }: any) {\n  const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        onChange({ ...data, photo: file, photoPreview: reader.result as string });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold mb-2\">Your Profile Basics</h2>\n      <p className=\"text-gray-600 mb-6\">\n        Add your photo and basic info. Takes ~2 minutes.\n      </p>\n      <div className=\"space-y-4\">\n        {/* Photo Upload */}\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Profile Photo</label>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-24 h-24 rounded-full bg-gray-200 overflow-hidden\">\n              {data.photoPreview ? (\n                <img src={data.photoPreview} alt=\"Preview\" className=\"w-full h-full object-cover\" />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                  <Upload className=\"h-8 w-8\" />\n                </div>\n              )}\n            </div>\n            <div>\n              <input\n                type=\"file\"\n                id=\"photo-upload\"\n                accept=\"image/*\"\n                onChange={handlePhotoUpload}\n                className=\"hidden\"\n              />\n              <Button asChild variant=\"outline\" size=\"sm\">\n                <label htmlFor=\"photo-upload\" className=\"cursor-pointer\">\n                  Upload Photo\n                </label>\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Full Name *</label>\n            <input\n              type=\"text\"\n              value={data.fullName}\n              onChange={(e) => onChange({ ...data, fullName: e.target.value })}\n              placeholder=\"Sarah Johnson\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Title *</label>\n            <input\n              type=\"text\"\n              value={data.title}\n              onChange={(e) => onChange({ ...data, title: e.target.value })}\n              placeholder=\"Luxury Home Specialist\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Bio (optional)</label>\n          <textarea\n            value={data.bio}\n            onChange={(e) => onChange({ ...data, bio: e.target.value })}\n            placeholder=\"Helping families find their dream homes...\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 h-24 resize-none\"\n          />\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Phone (optional)</label>\n            <input\n              type=\"tel\"\n              value={data.phone}\n              onChange={(e) => onChange({ ...data, phone: e.target.value })}\n              placeholder=\"(555) 123-4567\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Location (optional)</label>\n            <input\n              type=\"text\"\n              value={data.location}\n              onChange={(e) => onChange({ ...data, location: e.target.value })}\n              placeholder=\"Austin, TX\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction StepFirstListing({ data, onChange }: any) {\n  const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        onChange({ ...data, photo: file, photoPreview: reader.result as string });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold mb-2\">Add Your First Listing</h2>\n      <p className=\"text-gray-600 mb-6\">\n        Showcase a property to make your profile pop. You can skip and add later.\n      </p>\n      <div className=\"space-y-4\">\n        {/* Photo Upload */}\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Property Photo</label>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-32 h-24 rounded-lg bg-gray-200 overflow-hidden\">\n              {data.photoPreview ? (\n                <img src={data.photoPreview} alt=\"Property\" className=\"w-full h-full object-cover\" />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                  <Home className=\"h-8 w-8\" />\n                </div>\n              )}\n            </div>\n            <div>\n              <input\n                type=\"file\"\n                id=\"listing-photo\"\n                accept=\"image/*\"\n                onChange={handlePhotoUpload}\n                className=\"hidden\"\n              />\n              <Button asChild variant=\"outline\" size=\"sm\">\n                <label htmlFor=\"listing-photo\" className=\"cursor-pointer\">\n                  Upload Photo\n                </label>\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Address</label>\n          <input\n            type=\"text\"\n            value={data.address}\n            onChange={(e) => onChange({ ...data, address: e.target.value })}\n            placeholder=\"123 Main St, Austin, TX 78701\"\n            className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Price</label>\n            <input\n              type=\"text\"\n              value={data.price}\n              onChange={(e) => onChange({ ...data, price: e.target.value })}\n              placeholder=\"$750,000\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Beds</label>\n            <input\n              type=\"number\"\n              value={data.beds}\n              onChange={(e) => onChange({ ...data, beds: e.target.value })}\n              placeholder=\"3\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">Baths</label>\n            <input\n              type=\"number\"\n              value={data.baths}\n              onChange={(e) => onChange({ ...data, baths: e.target.value })}\n              placeholder=\"2\"\n              className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium mb-2\">Status</label>\n          <div className=\"flex gap-4\">\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"radio\"\n                checked={data.status === 'active'}\n                onChange={() => onChange({ ...data, status: 'active' })}\n                className=\"text-blue-600\"\n              />\n              <span>Active Listing</span>\n            </label>\n            <label className=\"flex items-center gap-2\">\n              <input\n                type=\"radio\"\n                checked={data.status === 'sold'}\n                onChange={() => onChange({ ...data, status: 'sold' })}\n                className=\"text-blue-600\"\n              />\n              <span>Sold Property</span>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction StepPreview({ wizardData }: any) {\n  return (\n    <div>\n      <h2 className=\"text-2xl font-bold mb-2\">Preview Your Profile</h2>\n      <p className=\"text-gray-600 mb-6\">\n        Here's how your profile will look. You can edit everything later.\n      </p>\n      <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-8 border border-gray-200\">\n        {/* Mock Profile Preview */}\n        <div className=\"bg-white rounded-xl shadow-lg p-6 max-w-md mx-auto\">\n          <div className=\"flex flex-col items-center mb-6\">\n            {wizardData.profileBasics.photoPreview ? (\n              <img\n                src={wizardData.profileBasics.photoPreview}\n                alt=\"Profile\"\n                className=\"w-24 h-24 rounded-full object-cover mb-4\"\n              />\n            ) : (\n              <div className=\"w-24 h-24 rounded-full bg-gray-300 mb-4\" />\n            )}\n            <h3 className=\"text-xl font-bold\">{wizardData.profileBasics.fullName || 'Your Name'}</h3>\n            <p className=\"text-sm text-gray-600\">{wizardData.profileBasics.title || 'Your Title'}</p>\n            {wizardData.profileBasics.location && (\n              <p className=\"text-sm text-gray-500\">{wizardData.profileBasics.location}</p>\n            )}\n          </div>\n\n          {wizardData.profileBasics.bio && (\n            <p className=\"text-sm text-gray-700 text-center mb-4\">\n              {wizardData.profileBasics.bio}\n            </p>\n          )}\n\n          {wizardData.firstListing.photoPreview && (\n            <div className=\"border border-gray-200 rounded-lg overflow-hidden\">\n              <img\n                src={wizardData.firstListing.photoPreview}\n                alt=\"Listing\"\n                className=\"w-full h-48 object-cover\"\n              />\n              <div className=\"p-4\">\n                <div className=\"font-semibold text-lg text-blue-600 mb-1\">\n                  {wizardData.firstListing.price || '$XXX,XXX'}\n                </div>\n                <div className=\"text-sm text-gray-700 mb-2\">\n                  {wizardData.firstListing.address || 'Property Address'}\n                </div>\n                {(wizardData.firstListing.beds || wizardData.firstListing.baths) && (\n                  <div className=\"text-sm text-gray-600\">\n                    {wizardData.firstListing.beds} bd â€¢ {wizardData.firstListing.baths} ba\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction StepShare({ username }: any) {\n  const profileUrl = `agentbio.net/${username}`;\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(`https://${profileUrl}`);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <div className=\"text-center\">\n      <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <Check className=\"h-8 w-8 text-green-600\" />\n      </div>\n      <h2 className=\"text-2xl font-bold mb-2\">ðŸŽ‰ Your Profile is Live!</h2>\n      <p className=\"text-gray-600 mb-8\">\n        Share your link on Instagram, Facebook, business cards, and everywhere you connect with clients.\n      </p>\n\n      <div className=\"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 mb-6\">\n        <div className=\"text-sm text-gray-600 mb-2\">Your AgentBio Link</div>\n        <div className=\"text-2xl font-bold text-blue-600 mb-4\">{profileUrl}</div>\n        <Button onClick={handleCopy} size=\"lg\" className=\"mb-4\">\n          {copied ? 'Copied!' : 'Copy Link'}\n        </Button>\n      </div>\n\n      <div className=\"space-y-3 text-left max-w-md mx-auto\">\n        <h3 className=\"font-semibold text-center mb-4\">Next Steps:</h3>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n            1\n          </div>\n          <div>\n            <div className=\"font-medium\">Add it to Instagram bio</div>\n            <div className=\"text-sm text-gray-600\">Replace your current link with your AgentBio URL</div>\n          </div>\n        </div>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n            2\n          </div>\n          <div>\n            <div className=\"font-medium\">Add more listings</div>\n            <div className=\"text-sm text-gray-600\">Showcase your sold properties and active listings</div>\n          </div>\n        </div>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n            3\n          </div>\n          <div>\n            <div className=\"font-medium\">Customize your theme</div>\n            <div className=\"text-sm text-gray-600\">Match your personal brand with colors and fonts</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useNavigate } from 'react-router-dom';\nimport { useState } from 'react';\nimport { OnboardingWizard } from '@/components/onboarding/OnboardingWizard';\nimport { useAuthStore } from '@/stores/useAuthStore';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useToast } from '@/hooks/use-toast';\nimport { Loader2 } from 'lucide-react';\n\n/**\n * OnboardingWizardPage\n * Wraps the OnboardingWizard component and handles data persistence to database\n */\nexport default function OnboardingWizardPage() {\n  const navigate = useNavigate();\n  const { user, profile } = useAuthStore();\n  const { toast } = useToast();\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleComplete = async (wizardData: any) => {\n    if (!user) {\n      toast({\n        title: 'Error',\n        description: 'You must be logged in to complete onboarding',\n        variant: 'destructive',\n      });\n      navigate('/auth/login');\n      return;\n    }\n\n    setIsSaving(true);\n\n    try {\n      // 1. Update profile with basic info\n      const profileUpdates: any = {};\n\n      if (wizardData.profileBasics.fullName) {\n        profileUpdates.full_name = wizardData.profileBasics.fullName;\n      }\n      if (wizardData.profileBasics.title) {\n        profileUpdates.title = wizardData.profileBasics.title;\n      }\n      if (wizardData.profileBasics.bio) {\n        profileUpdates.bio = wizardData.profileBasics.bio;\n      }\n      if (wizardData.profileBasics.phone) {\n        profileUpdates.phone = wizardData.profileBasics.phone;\n      }\n      if (wizardData.profileBasics.location) {\n        // Parse location into city/state if possible\n        const parts = wizardData.profileBasics.location.split(',').map((s: string) => s.trim());\n        if (parts.length >= 2) {\n          profileUpdates.city = parts[0];\n          profileUpdates.license_state = parts[1];\n        }\n      }\n\n      // Upload profile photo if provided\n      if (wizardData.profileBasics.photo) {\n        try {\n          const fileExt = wizardData.profileBasics.photo.name.split('.').pop();\n          const fileName = `${user.id}-${Date.now()}.${fileExt}`;\n          const filePath = `avatars/${fileName}`;\n\n          const { error: uploadError } = await supabase.storage\n            .from('avatars')\n            .upload(filePath, wizardData.profileBasics.photo);\n\n          if (uploadError) throw uploadError;\n\n          const { data: { publicUrl } } = supabase.storage\n            .from('avatars')\n            .getPublicUrl(filePath);\n\n          profileUpdates.avatar_url = publicUrl;\n        } catch (error) {\n          console.error('Error uploading avatar:', error);\n          // Continue even if avatar upload fails\n        }\n      }\n\n      // Apply selected theme\n      if (wizardData.templateChoice) {\n        profileUpdates.theme = wizardData.templateChoice;\n      }\n\n      // Update profile\n      const { error: profileError } = await supabase\n        .from('profiles')\n        .update(profileUpdates)\n        .eq('id', user.id);\n\n      if (profileError) throw profileError;\n\n      // 2. Create first listing if provided\n      if (wizardData.firstListing.address || wizardData.firstListing.price) {\n        try {\n          let photoUrl = null;\n\n          // Upload listing photo if provided\n          if (wizardData.firstListing.photo) {\n            const fileExt = wizardData.firstListing.photo.name.split('.').pop();\n            const fileName = `${user.id}-listing-${Date.now()}.${fileExt}`;\n            const filePath = `listings/${fileName}`;\n\n            const { error: uploadError } = await supabase.storage\n              .from('listing-images')\n              .upload(filePath, wizardData.firstListing.photo);\n\n            if (!uploadError) {\n              const { data: { publicUrl } } = supabase.storage\n                .from('listing-images')\n                .getPublicUrl(filePath);\n\n              photoUrl = publicUrl;\n            }\n          }\n\n          // Parse address\n          const addressParts = wizardData.firstListing.address?.split(',').map((s: string) => s.trim()) || [];\n          const address = addressParts[0] || '';\n          const city = addressParts[1] || '';\n          const stateZip = addressParts[2] || '';\n          const stateParts = stateZip.split(' ');\n          const state = stateParts[0] || '';\n          const zip = stateParts[1] || '';\n\n          const listingData: any = {\n            user_id: user.id,\n            address: address,\n            city: city,\n            state: state,\n            zip_code: zip,\n            price: wizardData.firstListing.price || '0',\n            bedrooms: wizardData.firstListing.beds ? parseInt(wizardData.firstListing.beds) : null,\n            bathrooms: wizardData.firstListing.baths ? parseInt(wizardData.firstListing.baths) : null,\n            status: wizardData.firstListing.status || 'active',\n            featured: true, // Make first listing featured\n            photos: photoUrl ? [photoUrl] : [],\n          };\n\n          const { error: listingError } = await supabase\n            .from('listings')\n            .insert(listingData);\n\n          if (listingError) {\n            console.error('Error creating listing:', listingError);\n            // Don't throw - listing is optional\n          }\n        } catch (error) {\n          console.error('Error with first listing:', error);\n          // Continue even if listing creation fails\n        }\n      }\n\n      // Send welcome email (non-blocking)\n      try {\n        await edgeFunctions.invoke('send-welcome-email', {\n          body: {\n            user_id: user.id,\n            email: user.email,\n            full_name: wizardData.profileBasics.fullName || user.user_metadata?.full_name,\n            username: user.user_metadata?.username || 'agent'\n          }\n        });\n      } catch (emailError) {\n        console.error('Welcome email failed (non-critical):', emailError);\n        // Don't block navigation if email fails\n      }\n\n      // Success!\n      toast({\n        title: 'ðŸŽ‰ Welcome to AgentBio!',\n        description: 'Your profile is ready to share. Check your email for next steps!',\n      });\n\n      // Navigate to dashboard\n      navigate('/dashboard', { replace: true });\n\n    } catch (error: any) {\n      console.error('Error completing onboarding:', error);\n      toast({\n        title: 'Error',\n        description: error.message || 'Failed to save your information. Please try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  if (isSaving) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Loader2 className=\"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Setting up your profile...</h2>\n          <p className=\"text-gray-600\">This will only take a moment</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <OnboardingWizard\n      onComplete={handleComplete}\n      userProfile={profile || user}\n    />\n  );\n}\n"],"names":["OnboardingWizard","onComplete","userProfile","currentStep","setCurrentStep","useState","wizardData","setWizardData","useNavigate","totalSteps","progress","steps","Sparkles","Upload","Home","Eye","LinkIcon","templates","handleNext","handleBack","handleSkipToEnd","canProceed","jsxs","jsx","Button","Progress","step","Check","Card","StepChooseTemplate","id","StepProfileBasics","data","StepFirstListing","StepPreview","StepShare","ArrowLeft","ArrowRight","selected","onSelect","template","onChange","handlePhotoUpload","e","file","reader","username","profileUrl","copied","setCopied","handleCopy","OnboardingWizardPage","navigate","user","profile","useAuthStore","toast","useToast","isSaving","setIsSaving","handleComplete","profileUpdates","parts","s","fileExt","filePath","uploadError","supabase","publicUrl","error","profileError","photoUrl","addressParts","address","city","stateParts","state","zip","listingData","listingError","emailError","Loader2"],"mappings":"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"}