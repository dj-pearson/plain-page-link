import{b as i,u as e,d as r}from"./data-Hz84gFTE.js";import{u as o,s as n}from"./index-CbjSOmPL.js";function t(){const{user:t}=o(),a=i(),{data:d,isLoading:s}=e({queryKey:["profile",null==t?void 0:t.id],queryFn:async()=>{if(!(null==t?void 0:t.id))return null;const{data:i,error:e}=await n.from("profiles").select("*").eq("id",t.id).single();if(e)throw e;return i},enabled:!!(null==t?void 0:t.id)});return{profile:d,isLoading:s,updateProfile:r({mutationFn:async i=>{if(!(null==t?void 0:t.id))throw new Error("User not authenticated");const{data:e,error:r}=await n.from("profiles").update(i).eq("id",t.id).select().single();if(r)throw r;return e},onSuccess:()=>{a.invalidateQueries({queryKey:["profile",null==t?void 0:t.id]})}})}}export{t as u};
