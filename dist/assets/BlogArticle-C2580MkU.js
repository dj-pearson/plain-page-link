import{j as e,p as N}from"./ui-vendor-DfpuNOa7.js";import{b as f,L as x,i as E}from"./react-vendor-ctj0ExSI.js";import{u as v}from"./state-vendor-BElgh7Si.js";import{N as q,t as B,v as C,C as O,a as I,G as y,b as A,c as $,d as U,J as P,s as j,H as M,K as R,B as w,n as D,A as F,U as H,O as T,j as z,o as J}from"./index-CcQPhg_t.js";import{M as W}from"./markdown-vendor-CCoh0x3j.js";import"./supabase-GsKtvycU.js";import"./three-vendor-BsISVfAm.js";import"./charts-vendor-DGVahL1I.js";import"./date-vendor-Xm6TBh54.js";import"./form-vendor-Ce9oe0_k.js";import"./animation-vendor-OAo91Cux.js";const _=f.forwardRef(({className:r,orientation:t="horizontal",decorative:o=!0,...i},n)=>e.jsx(N,{ref:n,decorative:o,orientation:t,className:q("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...i}));_.displayName=N.displayName;function K({title:r,description:t,url:o,imageUrl:i,publishedTime:n,modifiedTime:a,author:s="Real Estate Expert",tags:l=[],category:d="Real Estate",wordCount:g,readingTime:u}){const p="AgentBio",c=C(),m=`${c}${o}`,h=i||`${c}/Cover.png`,S={"@context":"https://schema.org","@type":"BlogPosting",headline:r,description:t,image:{"@type":"ImageObject",url:h,width:1200,height:630},datePublished:n,dateModified:a||n,author:{"@type":"Person",name:s,url:c},publisher:{"@type":"Organization",name:p,logo:{"@type":"ImageObject",url:`${c}/Cover.png`},url:c},mainEntityOfPage:{"@type":"WebPage","@id":m},articleSection:d,keywords:l.join(", "),...g&&{wordCount:g},inLanguage:"en-US",isAccessibleForFree:!0,backstory:t},L={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:c},{"@type":"ListItem",position:2,name:"Blog",item:`${c}/blog`},{"@type":"ListItem",position:3,name:r,item:m}]},k={"@context":"https://schema.org","@type":"WebPage","@id":m,url:m,name:r,description:t,isPartOf:{"@type":"WebSite","@id":c,name:p,url:c},primaryImageOfPage:{"@type":"ImageObject",url:h},inLanguage:"en-US",potentialAction:{"@type":"ReadAction",target:[m]}};return e.jsxs(B,{children:[e.jsxs("title",{children:[r," | ",p]}),e.jsx("meta",{name:"description",content:t}),e.jsx("meta",{name:"keywords",content:l.join(", ")}),e.jsx("link",{rel:"canonical",href:m}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{property:"og:url",content:m}),e.jsx("meta",{property:"og:title",content:r}),e.jsx("meta",{property:"og:description",content:t}),e.jsx("meta",{property:"og:image",content:h}),e.jsx("meta",{property:"og:image:width",content:"1200"}),e.jsx("meta",{property:"og:image:height",content:"630"}),e.jsx("meta",{property:"og:site_name",content:p}),n&&e.jsx("meta",{property:"article:published_time",content:n}),a&&e.jsx("meta",{property:"article:modified_time",content:a}),d&&e.jsx("meta",{property:"article:section",content:d}),l.map(b=>e.jsx("meta",{property:"article:tag",content:b},b)),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:url",content:m}),e.jsx("meta",{name:"twitter:title",content:r}),e.jsx("meta",{name:"twitter:description",content:t}),e.jsx("meta",{name:"twitter:image",content:h}),e.jsx("meta",{name:"twitter:creator",content:s}),e.jsx("meta",{name:"twitter:label1",content:"Reading time"}),u&&e.jsx("meta",{name:"twitter:data1",content:u}),e.jsx("meta",{name:"robots",content:"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"}),e.jsx("meta",{name:"googlebot",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),e.jsx("meta",{name:"bingbot",content:"index, follow"}),e.jsx("meta",{name:"googlebot-news",content:"snippet"}),e.jsx("meta",{property:"article:author",content:s}),e.jsx("meta",{name:"author",content:s}),e.jsx("meta",{name:"article:content_tier",content:"free"}),e.jsx("meta",{name:"language",content:"English"}),e.jsx("meta",{httpEquiv:"content-language",content:"en-US"}),e.jsx("meta",{name:"citation_title",content:r}),e.jsx("meta",{name:"citation_author",content:s}),n&&e.jsx("meta",{name:"citation_publication_date",content:n}),e.jsx("meta",{name:"citation_language",content:"en"}),e.jsx("meta",{property:"og:locale",content:"en_US"}),e.jsx("meta",{property:"og:site_name",content:p}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(S)}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(L)}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(k)})]})}function G({currentArticleId:r,category:t,tags:o=[],limit:i=3}){const{data:n=[]}=v({queryKey:["similar-articles",r,t],queryFn:async()=>{let a=j.from("articles").select("*").eq("status","published").neq("id",r);o.length>0?a=a.overlaps("tags",o):a=a.eq("category",t);const{data:s,error:l}=await a.limit(i).order("published_at",{ascending:!1});if(l)throw l;if(!s||s.length<i){const{data:d,error:g}=await j.from("articles").select("*").eq("status","published").eq("category",t).neq("id",r).limit(i-(s?.length||0)).order("published_at",{ascending:!1});if(g)throw g;const u=[...s||[],...d||[]];return Array.from(new Map(u.map(c=>[c.id,c])).values()).slice(0,i)}return s}});return n.length===0?null:e.jsxs("div",{className:"mt-12 pt-8 border-t",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Similar Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map(a=>e.jsx(x,{to:`/blog/${a.slug}`,children:e.jsxs(O,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",children:[a.featured_image_url&&e.jsx("img",{src:a.featured_image_url,alt:a.title,className:"w-full h-32 object-cover rounded-t-lg"}),e.jsxs(I,{children:[e.jsx(y,{variant:"secondary",className:"w-fit mb-2",children:a.category}),e.jsx(A,{className:"text-lg line-clamp-2",children:a.title}),e.jsx($,{className:"line-clamp-2",children:a.excerpt})]}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-3 w-3"}),new Date(a.published_at).toLocaleDateString()]})})]})},a.id))})]})}function Q({items:r}){return e.jsxs("nav",{"aria-label":"Breadcrumb",className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",itemScope:!0,itemType:"https://schema.org/BreadcrumbList",children:[e.jsxs(x,{to:"/",className:"flex items-center gap-1 hover:text-foreground transition-colors",itemProp:"itemListElement",itemScope:!0,itemType:"https://schema.org/ListItem",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{itemProp:"name",children:"Home"}),e.jsx("meta",{itemProp:"position",content:"1"}),e.jsx("link",{itemProp:"item",href:window.location.origin})]}),r.map((t,o)=>{const i=o+2,n=o===r.length-1;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),t.href&&!n?e.jsxs(x,{to:t.href,className:"hover:text-foreground transition-colors",itemProp:"itemListElement",itemScope:!0,itemType:"https://schema.org/ListItem",children:[e.jsx("span",{itemProp:"name",children:t.label}),e.jsx("meta",{itemProp:"position",content:i.toString()}),e.jsx("link",{itemProp:"item",href:`${window.location.origin}${t.href}`})]}):e.jsxs("span",{className:n?"font-medium text-foreground":"",itemProp:"itemListElement",itemScope:!0,itemType:"https://schema.org/ListItem",children:[e.jsx("span",{itemProp:"name",children:t.label}),e.jsx("meta",{itemProp:"position",content:i.toString()}),t.href&&e.jsx("link",{itemProp:"item",href:`${window.location.origin}${t.href}`})]})]},o)})]})}function oe(){const{slug:r}=E(),{data:t,isLoading:o}=v({queryKey:["article",r],queryFn:async()=>{if(!r)throw new Error("No slug provided");const{data:a,error:s}=await j.from("articles").select("*").eq("slug",r).eq("status","published").single();if(s)throw s;return a},enabled:!!r}),{wordCount:i,readingTime:n}=f.useMemo(()=>{if(!t?.content)return{wordCount:0,readingTime:"1 min read"};const a=t.content.trim().split(/\s+/).length,s=Math.ceil(a/200);return{wordCount:a,readingTime:`${s} min read`}},[t?.content]);return f.useEffect(()=>{t?.id&&j.from("articles").update({view_count:(t.view_count||0)+1}).eq("id",t.id).then(()=>{console.log("View count incremented")})},[t?.id]),o?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading article..."})}):t?e.jsxs(e.Fragment,{children:[e.jsx(K,{title:t.seo_title||t.title,description:t.seo_description||t.excerpt||"",url:`/blog/${t.slug}`,imageUrl:t.featured_image_url,publishedTime:t.published_at,modifiedTime:t.updated_at,tags:t.tags||[],category:t.category,wordCount:i,readingTime:n}),e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(D,{}),e.jsx("div",{className:"bg-gray-50 border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsx(x,{to:"/blog",children:e.jsxs(w,{variant:"ghost",size:"sm",className:"gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),"Back to Blog"]})})})}),e.jsxs("article",{className:"container mx-auto px-4 py-12 max-w-4xl",itemScope:!0,itemType:"https://schema.org/BlogPosting",children:[e.jsx(Q,{items:[{label:"Blog",href:"/blog"},{label:t.title}]}),t.featured_image_url&&e.jsxs("figure",{className:"mb-8",itemProp:"image",itemScope:!0,itemType:"https://schema.org/ImageObject",children:[e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-96 object-cover rounded-lg shadow-lg",itemProp:"url"}),e.jsx("meta",{itemProp:"width",content:"1200"}),e.jsx("meta",{itemProp:"height",content:"630"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[e.jsx(y,{variant:"secondary",itemProp:"articleSection",children:t.category}),t.tags?.map(a=>e.jsx(y,{variant:"outline",itemProp:"keywords",children:a},a))]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6 leading-tight",itemProp:"headline",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-muted-foreground mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",itemProp:"author",itemScope:!0,itemType:"https://schema.org/Person",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{itemProp:"name",children:"Real Estate Expert"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("time",{dateTime:t.published_at,itemProp:"datePublished",children:new Date(t.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:n})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.view_count," views"]})]})]}),e.jsx("meta",{itemProp:"dateModified",content:t.updated_at}),e.jsx("meta",{itemProp:"wordCount",content:i.toString()}),e.jsx("meta",{itemProp:"description",content:t.excerpt||""}),e.jsx(_,{className:"mb-8"}),e.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none prose-headings:scroll-mt-20",itemProp:"articleBody",children:e.jsx(W,{components:{h2:({children:a,...s})=>{const l=String(a).toLowerCase().replace(/\s+/g,"-");return e.jsx("h2",{...s,id:l,className:"text-3xl font-bold mt-12 mb-4 scroll-mt-20",children:a})},h3:({children:a,...s})=>{const l=String(a).toLowerCase().replace(/\s+/g,"-");return e.jsx("h3",{...s,id:l,className:"text-2xl font-semibold mt-8 mb-3 scroll-mt-20",children:a})},p:({children:a,...s})=>e.jsx("p",{...s,className:"mb-6 leading-relaxed text-lg",children:a}),ul:({children:a,...s})=>e.jsx("ul",{...s,className:"space-y-2 my-6",children:a}),ol:({children:a,...s})=>e.jsx("ol",{...s,className:"space-y-2 my-6",children:a}),li:({children:a,...s})=>e.jsx("li",{...s,className:"leading-relaxed",children:a}),blockquote:({children:a,...s})=>e.jsx("blockquote",{...s,className:"border-l-4 border-primary pl-6 py-2 my-6 italic bg-muted/50 rounded-r",children:a}),a:({href:a,children:s,...l})=>a?.startsWith("/")?e.jsx(x,{to:a,className:"text-primary hover:underline font-medium",children:s}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",...l,children:s}),code:({children:a,...s})=>e.jsx("code",{...s,className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",children:a}),pre:({children:a,...s})=>e.jsx("pre",{...s,className:"bg-muted p-4 rounded-lg overflow-x-auto my-6",children:a})},children:t.content})}),e.jsx(G,{currentArticleId:t.id,category:t.category,tags:t.tags||[]})]}),e.jsx(J,{})]})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Article Not Found"}),e.jsx(x,{to:"/blog",children:e.jsx(w,{children:"Back to Blog"})})]})})}export{oe as default};
