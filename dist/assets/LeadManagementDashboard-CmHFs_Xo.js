import{r as e,j as s}from"./react-vendor-CGQ4_CNL.js";import{c as a,S as t,a as l,b as n,d as i,e as r,I as c,B as o,j as d,D as m,a7 as x,l as h,m as u,n as g,L as p,T as j,J as w,K as v,M as N,N as f}from"./ui-components-BBur-bM0.js";import{S as b,M as y,P as C,p as S,a8 as k,T,q as A,aw as D,b as I,ae as L,aS as P,az as R,aT as z,X as O,E as M,V as E,e as q,H as V,h as H,aU as U}from"./icons-BX9Iz4zT.js";import{b as Q,u as $,a as B}from"./utils-wmY8hpgz.js";import"./charts-D_q0pR-d.js";import"./supabase-C4LM9fgr.js";import"./data-O5cD9hjv.js";function F({leads:o,onLeadClick:d,onQuickReply:m,onMarkAsRead:x,className:h}){const[u,g]=e.useState(""),[p,j]=e.useState("all"),[w,v]=e.useState("all"),[N,f]=e.useState("all"),[C,S]=e.useState("date"),k=e.useMemo(()=>{let e=o.filter(e=>{const s=""===u||e.name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())||e.message.toLowerCase().includes(u.toLowerCase()),a="all"===p||e.status===p,t="all"===w||e.priority===w,l="all"===N||e.source===N;return s&&a&&t&&l});return e.sort((e,s)=>{switch(C){case"score":return s.score-e.score;case"priority":const a={hot:3,warm:2,cold:1};return a[s.priority]-a[e.priority];default:return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()}}),e},[o,u,p,w,N,C]),T={total:o.length,new:o.filter(e=>"new"===e.status).length,hot:o.filter(e=>"hot"===e.priority).length,avgScore:Math.round(o.reduce((e,s)=>e+s.score,0)/o.length)},A=Array.from(new Set(o.map(e=>e.source)));return s.jsxs("div",{className:a("space-y-4",h),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Lead Inbox"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[T.new," new leads • ",T.hot," hot • Avg score:"," ",T.avgScore]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(t,{value:C,onValueChange:e=>S(e),children:[s.jsx(l,{className:"w-32",children:s.jsx(n,{})}),s.jsxs(i,{children:[s.jsx(r,{value:"date",children:"Latest"}),s.jsx(r,{value:"score",children:"Score"}),s.jsx(r,{value:"priority",children:"Priority"})]})]})})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(c,{placeholder:"Search leads...",value:u,onChange:e=>g(e.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(t,{value:p,onValueChange:j,children:[s.jsx(l,{className:"w-32",children:s.jsx(n,{placeholder:"Status"})}),s.jsxs(i,{children:[s.jsx(r,{value:"all",children:"All Status"}),s.jsx(r,{value:"new",children:"New"}),s.jsx(r,{value:"contacted",children:"Contacted"}),s.jsx(r,{value:"qualified",children:"Qualified"}),s.jsx(r,{value:"converted",children:"Converted"})]})]}),s.jsxs(t,{value:w,onValueChange:v,children:[s.jsx(l,{className:"w-32",children:s.jsx(n,{placeholder:"Priority"})}),s.jsxs(i,{children:[s.jsx(r,{value:"all",children:"All Priority"}),s.jsx(r,{value:"hot",children:"Hot"}),s.jsx(r,{value:"warm",children:"Warm"}),s.jsx(r,{value:"cold",children:"Cold"})]})]}),s.jsxs(t,{value:N,onValueChange:f,children:[s.jsx(l,{className:"w-32",children:s.jsx(n,{placeholder:"Source"})}),s.jsxs(i,{children:[s.jsx(r,{value:"all",children:"All Sources"}),A.map(e=>s.jsx(r,{value:e,children:e},e))]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[k.map(e=>s.jsx(G,{lead:e,onClick:()=>d(e),onQuickReply:()=>m(e.id),onMarkAsRead:()=>x(e.id)},e.id)),0===k.length&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(y,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"No leads found"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})]})}function G({lead:e,onClick:t,onQuickReply:l,onMarkAsRead:n}){const i="new"===e.status,r="hot"===e.priority;return s.jsx("div",{onClick:t,className:a("relative p-4 rounded-lg border-2 transition-all cursor-pointer","hover:shadow-md hover:border-gray-300",i&&"bg-blue-50 border-blue-200",!i&&"bg-white border-gray-200",r&&"border-l-4 border-l-red-500"),children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:a("font-semibold truncate",i&&"text-primary"),children:e.name}),i&&s.jsx(o,{variant:"outline",className:"bg-blue-100",children:"NEW"}),s.jsx(o,{variant:"outline",className:{hot:"bg-red-100 text-red-800 border-red-300",warm:"bg-yellow-100 text-yellow-800 border-yellow-300",cold:"bg-blue-100 text-blue-800 border-blue-300"}[e.priority],children:e.priority.toUpperCase()}),s.jsx(o,{className:{new:"bg-green-100 text-green-800",contacted:"bg-blue-100 text-blue-800",qualified:"bg-purple-100 text-purple-800",unqualified:"bg-gray-100 text-gray-800",converted:"bg-emerald-100 text-emerald-800"}[e.status],children:e.status})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(y,{className:"w-3 h-3"}),e.email]}),e.phone&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(C,{className:"w-3 h-3"}),e.phone]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(S,{className:"w-3 h-3"}),e.source]})]}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:e.message}),e.listingTitle&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Interested in:"," ",s.jsx("span",{className:"font-medium",children:e.listingTitle})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(k,{className:"w-3 h-3"}),Q(new Date(e.createdAt),{addSuffix:!0})]}),e.lastContactedAt&&s.jsxs("span",{children:["Last contacted:"," ",Q(new Date(e.lastContactedAt),{addSuffix:!0})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(T,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"text-lg font-bold text-primary",children:e.score})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(d,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),l()},children:s.jsx(A,{className:"w-4 h-4"})}),s.jsx(d,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),n()},children:s.jsx(y,{className:"w-4 h-4"})})]})]})]})})}function W({templates:t,onSelectTemplate:l,onCreateTemplate:n,onUpdateTemplate:i,onDeleteTemplate:r,className:c}){const[o,p]=e.useState("all"),[j,w]=e.useState(""),[v,N]=e.useState(!1),f=t.filter(e=>{const s="all"===o||e.category===o,a=""===j||e.name.toLowerCase().includes(j.toLowerCase())||e.body.toLowerCase().includes(j.toLowerCase());return s&&a});return s.jsxs("div",{className:a("space-y-4",c),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Quick Response Templates"}),n&&s.jsxs(m,{open:v,onOpenChange:N,children:[s.jsx(x,{asChild:!0,children:s.jsxs(d,{size:"sm",className:"gap-2",children:[s.jsx(D,{className:"w-4 h-4"}),"New Template"]})}),s.jsxs(h,{children:[s.jsx(u,{children:s.jsx(g,{children:"Create New Template"})}),s.jsx(K,{onSave:e=>{n(e),N(!1),$.success("Template created")},onCancel:()=>N(!1)})]})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{value:"all",label:"All Templates"},{value:"initial",label:"Initial Response"},{value:"followup",label:"Follow-up"},{value:"showing",label:"Property Showing"},{value:"offer",label:"Offer Discussion"},{value:"general",label:"General"}].map(e=>s.jsx(d,{variant:o===e.value?"default":"outline",size:"sm",onClick:()=>p(e.value),children:e.label},e.value))}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(e=>s.jsx(J,{template:e,onUse:()=>l(e),onEdit:i?s=>i(e.id,s):void 0,onDelete:r?()=>r(e.id):void 0},e.id))}),0===f.length&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No templates found"})]})]})}function J({template:a,onUse:t,onEdit:l,onDelete:n}){const[i,r]=e.useState(!1),[c,x]=e.useState(!1);return s.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:a.name}),s.jsx(o,{className:{initial:"bg-green-100 text-green-800",followup:"bg-blue-100 text-blue-800",showing:"bg-purple-100 text-purple-800",offer:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"}[a.category],children:a.category})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(d,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(a.body),x(!0),setTimeout(()=>x(!1),2e3),$.success("Template copied to clipboard")},className:"h-8 w-8 p-0",children:c?s.jsx(I,{className:"w-4 h-4 text-green-600"}):s.jsx(L,{className:"w-4 h-4"})}),l&&s.jsx(d,{size:"sm",variant:"ghost",onClick:()=>r(!0),className:"h-8 w-8 p-0",children:s.jsx(P,{className:"w-4 h-4"})}),n&&s.jsx(d,{size:"sm",variant:"ghost",onClick:n,className:"h-8 w-8 p-0 text-red-600",children:s.jsx(R,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:a.subject}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-3 mb-3",children:a.body}),a.variables.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:a.variables.map(e=>s.jsx(o,{variant:"outline",className:"text-xs",children:`{${e}}`},e))}),s.jsx(d,{size:"sm",onClick:t,className:"w-full",children:"Use Template"}),i&&l&&s.jsx(m,{open:i,onOpenChange:r,children:s.jsxs(h,{children:[s.jsx(u,{children:s.jsx(g,{children:"Edit Template"})}),s.jsx(K,{initialData:a,onSave:e=>{l(e),r(!1),$.success("Template updated")},onCancel:()=>r(!1)})]})})]})}function K({initialData:a,onSave:t,onCancel:l}){const[n,i]=e.useState(a?.name||""),[r,o]=e.useState(a?.subject||""),[m,x]=e.useState(a?.body||""),[h,u]=e.useState(a?.category||"general");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(p,{children:"Template Name"}),s.jsx(c,{value:n,onChange:e=>i(e.target.value),placeholder:"e.g., Initial Response - Listing Inquiry"})]}),s.jsxs("div",{children:[s.jsx(p,{children:"Category"}),s.jsxs("select",{value:h,onChange:e=>u(e.target.value),className:"w-full p-2 border rounded",children:[s.jsx("option",{value:"initial",children:"Initial Response"}),s.jsx("option",{value:"followup",children:"Follow-up"}),s.jsx("option",{value:"showing",children:"Property Showing"}),s.jsx("option",{value:"offer",children:"Offer Discussion"}),s.jsx("option",{value:"general",children:"General"})]})]}),s.jsxs("div",{children:[s.jsx(p,{children:"Subject Line"}),s.jsx(c,{value:r,onChange:e=>o(e.target.value),placeholder:"e.g., Re: {listingAddress}"})]}),s.jsxs("div",{children:[s.jsx(p,{children:"Message Body"}),s.jsx(j,{value:m,onChange:e=>x(e.target.value),placeholder:"Use {variable} for dynamic fields like {leadName}, {listingAddress}, etc.",rows:8}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use curly braces for variables: ","{leadName}",","," ","{listingAddress}",", ","{price}"]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(d,{variant:"outline",onClick:l,children:"Cancel"}),s.jsx(d,{onClick:()=>{if(!n||!r||!m)return void $.error("Please fill in all fields");const e=[...m.matchAll(/\{(\w+)\}/g)].map(e=>e[1]);t({name:n,subject:r,body:m,category:h,variables:e})},children:"Save Template"})]})]})}const Y=[{id:"1",name:"Initial Response - Listing Inquiry",subject:"Re: {listingAddress}",body:"Hi {leadName},\n\nThank you for your interest in {listingAddress}! I'd love to help you learn more about this property.\n\nThis {bedrooms}-bedroom, {bathrooms}-bathroom home is priced at {price} and features:\n• {feature1}\n• {feature2}\n• {feature3}\n\nI'm available to schedule a showing at your convenience. What days/times work best for you this week?\n\nBest regards,\n{agentName}\n{agentPhone}",category:"initial",variables:["leadName","listingAddress","bedrooms","bathrooms","price","feature1","feature2","feature3","agentName","agentPhone"]},{id:"2",name:"Follow-up - No Response",subject:"Following up on {listingAddress}",body:"Hi {leadName},\n\nI wanted to follow up on your interest in {listingAddress}. I know finding the right home can take time, and I'm here to help.\n\nAre you still interested in viewing this property? Or would you like me to send you similar listings that might fit your needs?\n\nFeel free to call/text me anytime at {agentPhone}.\n\nBest regards,\n{agentName}",category:"followup",variables:["leadName","listingAddress","agentPhone","agentName"]},{id:"3",name:"Showing Confirmation",subject:"Confirmed: Property Showing at {listingAddress}",body:"Hi {leadName},\n\nGreat news! Your showing for {listingAddress} is confirmed for {showingDate} at {showingTime}.\n\nProperty Address:\n{listingAddress}\n\nI'll meet you at the property. If you need to reschedule, please let me know as soon as possible.\n\nLooking forward to showing you this home!\n\nBest regards,\n{agentName}\n{agentPhone}",category:"showing",variables:["leadName","listingAddress","showingDate","showingTime","agentName","agentPhone"]}];function _({hotLeads:t,onView:l,onDismiss:n,onQuickCall:i,autoHide:r=!1,autoHideDelay:c=3e4,soundEnabled:o=!0,className:d}){const[m,x]=e.useState(new Set),[h,u]=e.useState(new Set);e.useEffect(()=>{const e=t.map(e=>e.id),a=new Set(m),l=e.filter(e=>!a.has(e)&&!h.has(e));l.length>0&&($.success(`${l.length} hot lead(s) just arrived!`,{icon:s.jsx(z,{className:"w-4 h-4 text-orange-600"})}),o&&function(){try{const e=new(window.AudioContext||window.webkitAudioContext),s=e.createOscillator(),a=e.createGain();s.connect(a),a.connect(e.destination),s.frequency.value=800,s.type="sine",a.gain.setValueAtTime(.3,e.currentTime),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),s.start(e.currentTime),s.stop(e.currentTime+.5)}catch(e){}}(),l.forEach(e=>a.add(e)),x(a),r&&setTimeout(()=>{l.forEach(e=>g(e))},c))},[t]);const g=e=>{u(s=>new Set(s).add(e)),n(e)},p=t.filter(e=>!h.has(e.id));return 0===p.length?null:s.jsx("div",{className:a("space-y-2",d),children:p.map(e=>s.jsx(X,{lead:e,onView:()=>l(e.id),onDismiss:()=>g(e.id),onQuickCall:i?()=>i(e.id):void 0},e.id))})}function X({lead:t,onView:l,onDismiss:n,onQuickCall:i}){const[r,c]=e.useState(!0);return e.useEffect(()=>{const e=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(e)},[]),s.jsxs("div",{className:a("relative p-4 rounded-lg border-2 border-orange-500 bg-orange-50 shadow-lg","animate-in slide-in-from-top-5 duration-300",r&&"animate-pulse"),children:[s.jsx("div",{className:"absolute -top-2 -right-2",children:s.jsxs(o,{className:"bg-orange-600 text-white gap-1 animate-bounce",children:[s.jsx(z,{className:"w-3 h-3"}),"HOT LEAD"]})}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg",children:t.name}),s.jsxs(o,{variant:"outline",className:"bg-red-100 text-red-800",children:["Score: ",t.score]})]}),s.jsxs("div",{className:"space-y-1 text-sm mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(y,{className:"w-3 h-3"}),t.email]}),t.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(C,{className:"w-3 h-3"}),t.phone]}),s.jsxs("div",{className:"text-gray-600",children:["From: ",t.source]})]}),t.listingTitle&&s.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Interested in: ",t.listingTitle]}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:t.message}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Received"," ",Q(new Date(t.createdAt),{addSuffix:!0})]})]}),s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(d,{size:"sm",onClick:n,variant:"ghost",className:"h-8 w-8 p-0",children:s.jsx(O,{className:"w-4 h-4"})})})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[i&&t.phone&&s.jsxs(d,{size:"sm",onClick:i,className:"flex-1 bg-green-600 hover:bg-green-700 gap-1",children:[s.jsx(C,{className:"w-4 h-4"}),"Call Now"]}),s.jsxs(d,{size:"sm",onClick:l,className:"flex-1 bg-orange-600 hover:bg-orange-700 gap-1",children:[s.jsx(M,{className:"w-4 h-4"}),"View Details",s.jsx(E,{className:"w-4 h-4"})]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200 rounded-b-lg overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-600 animate-pulse",style:{width:`${t.score}%`}})})]})}function Z({count:e,onClick:a}){return 0===e?null:s.jsxs(d,{variant:"outline",size:"sm",onClick:a,className:"relative gap-2 border-orange-500 bg-orange-50 hover:bg-orange-100 text-orange-900 animate-pulse",children:[s.jsx(z,{className:"w-4 h-4 text-orange-600"}),s.jsxs("span",{className:"font-bold",children:[e," Hot Lead",e>1?"s":""]}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]})}function ee({lead:c,onClose:m,onUpdateStatus:x,onAddNote:h,onSendEmail:u,onScheduleCall:g,className:p}){const[w,v]=e.useState("overview"),[N,f]=e.useState(""),[b,D]=e.useState(!1);return s.jsx("div",{className:a("fixed inset-0 bg-black/50 z-50 overflow-y-auto",p),children:s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl",children:[s.jsxs("div",{className:"p-6 border-b",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h2",{className:"text-2xl font-bold",children:c.name}),s.jsx(o,{variant:"outline",className:{hot:"bg-red-100 text-red-800 border-red-300",warm:"bg-yellow-100 text-yellow-800 border-yellow-300",cold:"bg-blue-100 text-blue-800 border-blue-300"}[c.priority],children:c.priority.toUpperCase()}),s.jsx(o,{className:{new:"bg-green-100 text-green-800",contacted:"bg-blue-100 text-blue-800",qualified:"bg-purple-100 text-purple-800",unqualified:"bg-gray-100 text-gray-800",converted:"bg-emerald-100 text-emerald-800"}[c.status],children:c.status})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(y,{className:"w-4 h-4"}),c.email]}),c.phone&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(C,{className:"w-4 h-4"}),c.phone]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(S,{className:"w-4 h-4"}),c.source]})]})]}),s.jsx(d,{variant:"ghost",size:"sm",onClick:m,children:s.jsx(O,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T,{className:"w-5 h-5 text-primary"}),s.jsx("span",{className:"font-medium",children:"Lead Score:"}),s.jsx("span",{className:"text-2xl font-bold text-primary",children:c.score}),s.jsx("span",{className:"text-sm text-gray-600",children:"/100"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Created"," ",Q(new Date(c.createdAt),{addSuffix:!0})]})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsxs(d,{className:"gap-2",onClick:()=>window.open(`mailto:${c.email}`),children:[s.jsx(y,{className:"w-4 h-4"}),"Email"]}),c.phone&&s.jsxs(d,{variant:"outline",className:"gap-2",onClick:()=>window.open(`tel:${c.phone}`),children:[s.jsx(C,{className:"w-4 h-4"}),"Call"]}),g&&s.jsxs(d,{variant:"outline",className:"gap-2",onClick:g,children:[s.jsx(q,{className:"w-4 h-4"}),"Schedule"]}),s.jsxs(t,{value:c.status,onValueChange:e=>x(e),children:[s.jsx(l,{className:"w-40",children:s.jsx(n,{})}),s.jsxs(i,{children:[s.jsx(r,{value:"new",children:"New"}),s.jsx(r,{value:"contacted",children:"Contacted"}),s.jsx(r,{value:"qualified",children:"Qualified"}),s.jsx(r,{value:"unqualified",children:"Unqualified"}),s.jsx(r,{value:"converted",children:"Converted"})]})]})]})]}),s.jsx("div",{className:"border-b",children:s.jsx("div",{className:"flex gap-4 px-6",children:["overview","timeline","notes"].map(e=>s.jsx("button",{onClick:()=>v(e),className:a("py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors",w===e?"border-primary text-primary":"border-transparent text-gray-600 hover:text-gray-900"),children:e},e))})}),s.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:["overview"===w&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(A,{className:"w-4 h-4"}),"Original Message"]}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-700",children:c.message})})]}),c.listingTitle&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(V,{className:"w-4 h-4"}),"Interested Property"]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center gap-4",children:[c.listingImage&&s.jsx("img",{src:c.listingImage,alt:c.listingTitle,className:"w-24 h-24 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:c.listingTitle}),s.jsxs(d,{variant:"link",size:"sm",className:"gap-1 p-0 h-auto",onClick:()=>{},children:["View Listing",s.jsx(H,{className:"w-3 h-3"})]})]})]})]}),c.tags&&c.tags.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(U,{className:"w-4 h-4"}),"Tags"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(e=>s.jsx(o,{variant:"outline",children:e},e))})]})]}),"timeline"===w&&s.jsx("div",{className:"space-y-4",children:c.timeline&&c.timeline.length>0?c.timeline.map(e=>s.jsx(se,{event:e},e.id)):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(k,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No timeline events yet"})]})}),"notes"===w&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(j,{value:N,onChange:e=>f(e.target.value),placeholder:"Add a note about this lead...",rows:3}),s.jsx(d,{onClick:async()=>{if(N.trim()){D(!0);try{await h(N),f(""),$.success("Note added")}catch(e){$.error("Failed to add note")}finally{D(!1)}}else $.error("Please enter a note")},disabled:b||!N.trim(),className:"w-full",children:"Add Note"})]}),c.notes&&s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:c.notes})})]})]})]})})})}function se({event:e}){return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:(()=>{switch(e.type){case"email":return s.jsx(y,{className:"w-4 h-4"});case"call":return s.jsx(C,{className:"w-4 h-4"});case"meeting":return s.jsx(q,{className:"w-4 h-4"});case"status_change":return s.jsx(T,{className:"w-4 h-4"});default:return s.jsx(A,{className:"w-4 h-4"})}})()}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-700",children:e.content}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[B(new Date(e.timestamp),"MMM d, yyyy 'at' h:mm a"),e.user&&` • ${e.user}`]})]})]})}const ae=[{id:"1",name:"Sarah Johnson",email:"sarah.j@email.com",phone:"+1 (555) 123-4567",message:"Hi, I'm very interested in the 3BR house in Downtown. I'd like to schedule a viewing this week if possible. I'm pre-approved and ready to move quickly. Can you provide more details about the HOA fees and recent renovations?",listingTitle:"Modern 3BR House in Downtown",listingId:"listing-1",source:"zillow",score:85,status:"new",priority:"hot",createdAt:new Date(Date.now()-9e5).toISOString(),tags:["pre-approved","quick-move"]},{id:"2",name:"Michael Chen",email:"mchen@email.com",phone:"+1 (555) 987-6543",message:"Looking for properties in the $400-500k range. Interested in your luxury condo listing.",listingTitle:"Luxury Condo with Ocean View",listingId:"listing-2",source:"realtor",score:72,status:"new",priority:"hot",createdAt:new Date(Date.now()-18e5).toISOString(),tags:["investor"]},{id:"3",name:"Emily Rodriguez",email:"emily.r@email.com",message:"What's the monthly HOA fee for the apartment near the park?",listingTitle:"Cozy 2BR Apartment Near Park",listingId:"listing-3",source:"facebook",score:58,status:"contacted",priority:"warm",createdAt:new Date(Date.now()-72e5).toISOString(),lastContactedAt:new Date(Date.now()-18e5).toISOString(),tags:["first-time-buyer"]},{id:"4",name:"David Kim",email:"dkim@email.com",phone:"+1 (555) 234-5678",message:"I saw your listing for the family home with pool. Is it still available?",listingTitle:"Spacious Family Home with Pool",listingId:"listing-4",source:"website",score:45,status:"contacted",priority:"warm",createdAt:new Date(Date.now()-18e6).toISOString(),lastContactedAt:new Date(Date.now()-108e5).toISOString()},{id:"5",name:"Lisa Anderson",email:"lisa.a@email.com",message:"Info please",listingTitle:"Renovated Townhouse in Suburbs",listingId:"listing-5",source:"instagram",score:28,status:"new",priority:"cold",createdAt:new Date(Date.now()-432e5).toISOString()}];function te(){const[a,t]=e.useState(ae),[l,n]=e.useState(Y),[i,r]=e.useState(null),[c,d]=e.useState(!0),m=a.filter(e=>e.score>=70&&"new"===e.status),x={total:a.length,new:a.filter(e=>"new"===e.status).length,hot:m.length,contacted:a.filter(e=>"contacted"===e.status).length,avgScore:Math.round(a.reduce((e,s)=>e+s.score,0)/a.length)},h=e=>{r(e)};return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Lead Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your leads efficiently with smart scoring and quick responses"})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx(Z,{count:m.length,onClick:()=>d(!c)})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsx(le,{label:"Total Leads",value:x.total,icon:s.jsx(y,{className:"w-5 h-5"})}),s.jsx(le,{label:"New",value:x.new,icon:s.jsx(A,{className:"w-5 h-5"}),color:"green"}),s.jsx(le,{label:"Hot Leads",value:x.hot,icon:s.jsx(T,{className:"w-5 h-5"}),color:"red",pulse:x.hot>0}),s.jsx(le,{label:"Contacted",value:x.contacted,icon:s.jsx(y,{className:"w-5 h-5"}),color:"blue"}),s.jsx(le,{label:"Avg Score",value:x.avgScore,icon:s.jsx(T,{className:"w-5 h-5"})})]}),c&&m.length>0&&s.jsx(_,{hotLeads:m,onView:e=>{const s=a.find(s=>s.id===e);s&&h(s)},onDismiss:e=>{},soundEnabled:!0}),s.jsxs(w,{defaultValue:"inbox",className:"w-full",children:[s.jsxs(v,{className:"grid w-full grid-cols-2 max-w-md",children:[s.jsxs(N,{value:"inbox",children:["Lead Inbox",x.new>0&&s.jsx(o,{variant:"outline",className:"ml-2 bg-green-100",children:x.new})]}),s.jsx(N,{value:"templates",children:"Response Templates"})]}),s.jsx(f,{value:"inbox",className:"mt-6",children:s.jsx(F,{leads:a,onLeadClick:h,onQuickReply:e=>{const s=a.find(s=>s.id===e);s&&(r(s),$.info("Opening quick reply for "+s.name))},onMarkAsRead:async e=>{t(s=>s.map(s=>s.id===e?{...s,status:"contacted"}:s)),$.success("Lead marked as contacted")}})}),s.jsx(f,{value:"templates",className:"mt-6",children:s.jsx(W,{templates:l,onSelectTemplate:e=>{if(!i)return void $.info("Please select a lead first");let s=e.body;s=s.replace("{leadName}",i.name),s=s.replace("{listingAddress}",i.listingTitle||"the property"),s=s.replace("{agentName}","Your Name"),s=s.replace("{agentPhone}","(555) 123-4567"),$.success("Template loaded! Ready to send.")},onCreateTemplate:e=>{const s={...e,id:`custom-${Date.now()}`};n(e=>[...e,s])},onUpdateTemplate:(e,s)=>{n(a=>a.map(a=>a.id===e?{...a,...s}:a))},onDeleteTemplate:e=>{n(s=>s.filter(s=>s.id!==e)),$.success("Template deleted")}})})]}),i&&s.jsx(ee,{lead:i,onClose:()=>{r(null)},onUpdateStatus:async e=>{i&&(t(s=>s.map(s=>s.id===i.id?{...s,status:e}:s)),r(s=>s?{...s,status:e}:null),$.success(`Status updated to ${e}`))},onAddNote:async e=>{await new Promise(e=>setTimeout(e,500))},onSendEmail:async(e,s)=>{await new Promise(e=>setTimeout(e,500)),$.success("Email sent!")}})]})}function le({label:e,value:a,icon:t,color:l,pulse:n}){return s.jsxs("div",{className:"p-4 bg-white rounded-lg border hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:`p-2 rounded ${l?{green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",red:"bg-red-100 text-red-600"}[l]:"bg-gray-100 text-gray-600"}`,children:t}),n&&s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),s.jsx("div",{className:"text-2xl font-bold",children:a}),s.jsx("div",{className:"text-sm text-gray-600",children:e})]})}export{te as default};
