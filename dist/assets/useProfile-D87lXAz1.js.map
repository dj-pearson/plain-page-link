{"version":3,"file":"useProfile-D87lXAz1.js","sources":["../../src/hooks/useProfile.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuthStore } from \"@/stores/useAuthStore\";\n\nexport interface Profile {\n  id: string;\n  username: string;\n  full_name?: string;\n  bio?: string;\n  avatar_url?: string;\n  theme?: string;\n\n  // Professional Information\n  title?: string;\n  license_number?: string;\n  license_state?: string;\n  brokerage_name?: string;\n  brokerage_logo?: string;\n  years_experience?: number;\n  specialties?: string[];\n  certifications?: string[];\n\n  // Contact Information\n  phone?: string;\n  email_display?: string;\n  website_url?: string;\n\n  // Service Areas\n  service_cities?: string[];\n  service_zip_codes?: string[];\n\n  // Social Media URLs\n  facebook_url?: string;\n  instagram_url?: string;\n  linkedin_url?: string;\n  tiktok_url?: string;\n  youtube_url?: string;\n  zillow_url?: string;\n  realtor_com_url?: string;\n\n  created_at: string;\n  updated_at: string;\n}\n\nexport function useProfile() {\n  const { user } = useAuthStore();\n  const queryClient = useQueryClient();\n\n  const { data: profile, isLoading, isError, error, refetch } = useQuery({\n    queryKey: [\"profile\", user?.id],\n    queryFn: async () => {\n      if (!user?.id) return null;\n\n      const { data, error } = await supabase\n        .from(\"profiles\")\n        .select(\"*\")\n        .eq(\"id\", user.id)\n        .single();\n\n      if (error) throw error;\n      return data as Profile;\n    },\n    enabled: !!user?.id,\n    staleTime: 5 * 60 * 1000, // 5 minutes - data considered fresh\n    gcTime: 10 * 60 * 1000, // 10 minutes - cache retention\n  });\n\n  const updateProfile = useMutation({\n    mutationFn: async (updates: Partial<Profile>) => {\n      if (!user?.id) throw new Error(\"User not authenticated\");\n\n      const { data, error } = await supabase\n        .from(\"profiles\")\n        .update(updates)\n        .eq(\"id\", user.id)\n        .select()\n        .single();\n\n      if (error) throw error;\n      return data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"profile\", user?.id] });\n    },\n  });\n\n  return {\n    profile,\n    isLoading,\n    isError,\n    error,\n    refetch,\n    updateProfile,\n  };\n}\n"],"names":["useProfile","user","useAuthStore","queryClient","useQueryClient","profile","isLoading","isError","error","refetch","useQuery","data","supabase","updateProfile","useMutation","updates"],"mappings":"4GA4CO,SAASA,GAAa,CAC3B,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EACXC,EAAcC,EAAA,EAEd,CAAE,KAAMC,EAAS,UAAAC,EAAW,QAAAC,EAAS,MAAAC,EAAO,QAAAC,CAAA,EAAYC,EAAS,CACrE,SAAU,CAAC,UAAWT,GAAM,EAAE,EAC9B,QAAS,SAAY,CACnB,GAAI,CAACA,GAAM,GAAI,OAAO,KAEtB,KAAM,CAAE,KAAAU,EAAM,MAAAH,GAAU,MAAMI,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,KAAMX,EAAK,EAAE,EAChB,OAAA,EAEH,GAAIO,EAAO,MAAMA,EACjB,OAAOG,CACT,EACA,QAAS,CAAC,CAACV,GAAM,GACjB,UAAW,IAAS,IACpB,OAAQ,IAAU,GAAA,CACnB,EAEKY,EAAgBC,EAAY,CAChC,WAAY,MAAOC,GAA8B,CAC/C,GAAI,CAACd,GAAM,GAAI,MAAM,IAAI,MAAM,wBAAwB,EAEvD,KAAM,CAAE,KAAAU,EAAM,MAAAH,CAAAA,EAAU,MAAMI,EAC3B,KAAK,UAAU,EACf,OAAOG,CAAO,EACd,GAAG,KAAMd,EAAK,EAAE,EAChB,OAAA,EACA,OAAA,EAEH,GAAIO,EAAO,MAAMA,EACjB,OAAOG,CACT,EACA,UAAW,IAAM,CACfR,EAAY,kBAAkB,CAAE,SAAU,CAAC,UAAWF,GAAM,EAAE,EAAG,CACnE,CAAA,CACD,EAED,MAAO,CACL,QAAAI,EACA,UAAAC,EACA,QAAAC,EACA,MAAAC,EACA,QAAAC,EACA,cAAAI,CAAA,CAEJ"}