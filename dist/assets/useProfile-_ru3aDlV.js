import{b as e,u as r,d as i}from"./data-DkeJbMsV.js";import{e as t,s as a}from"./index-bNgPkIHN.js";function o(){const{user:o}=t(),s=e(),{data:n,isLoading:d}=r({queryKey:["profile",o?.id],queryFn:async()=>{if(!o?.id)return null;const{data:e,error:r}=await a.from("profiles").select("*").eq("id",o.id).single();if(r)throw r;return e},enabled:!!o?.id});return{profile:n,isLoading:d,updateProfile:i({mutationFn:async e=>{if(!o?.id)throw new Error("User not authenticated");const{data:r,error:i}=await a.from("profiles").update(e).eq("id",o.id).select().single();if(i)throw i;return r},onSuccess:()=>{s.invalidateQueries({queryKey:["profile",o?.id]})}})}}export{o as u};
