import{r as j,j as e}from"./vendor-react-Vgz0BWSF.js";import{W as q,B as g,G as A,e as Q,H as M,a3 as w,z as B,X as H,L as R,t as P,v as U,w as z,x as E,y as N,I as G,N as W,i as J,K as X}from"./index-C6E-HzGX.js";import{R as V}from"./refresh-cw-CTEA0B1_.js";import{C as F}from"./clock-DSZwtExH.js";import{C as Y}from"./circle-x-BnlXNMTS.js";import{f as K}from"./formatDistanceToNow-7YROT4Uc.js";import{T as I}from"./triangle-alert-BWkajVti.js";import{S as Z}from"./square-check-big-C_ZtzG6s.js";import{S as _}from"./square-YFn-xIVT.js";import{S as ee}from"./square-pen-C9mYQ9C_.js";import{T as se}from"./trash-2-DQFEYFNu.js";import{S as te}from"./save-D1dkt-9d.js";import{K as ae}from"./KeyboardShortcutsHelper-9DN234YV.js";import{T as re,a as ne,b as O,c as $}from"./tabs-CN9-OzRb.js";import"./vendor-charts-DwHIVLWv.js";import"./vendor-data-D8Q-8Ib3.js";import"./vendor-three-4sb3k4hC.js";import"./vendor-ui-B_M8o0qd.js";import"./vendor-animation-DTV5ZUuA.js";const le=q("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const ie=q("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);function ce({listings:s,onStatusChange:l,onRefresh:i,isLoading:d=!1}){const[m,u]=j.useState(new Set),[b,f]=j.useState(new Set),[h,x]=j.useState("all"),k=t=>Math.floor((Date.now()-new Date(t.updatedAt).getTime())/864e5)>=7&&t.status==="active",y=s.filter(t=>h==="all"?!0:h==="stale"?k(t):t.status===h),v={total:s.length,active:s.filter(t=>t.status==="active").length,pending:s.filter(t=>t.status==="pending").length,sold:s.filter(t=>t.status==="sold").length,stale:s.filter(t=>k(t)).length},p=async(t,n)=>{f(o=>new Set(o).add(t));try{await l(t,n),w.success(`Listing updated to ${n}`)}catch(o){console.error("Failed to update status:",o),w.error("Failed to update listing")}finally{f(o=>{const L=new Set(o);return L.delete(t),L})}},c=async t=>{if(m.size===0){w.warning("No listings selected");return}const n=m.size;w.info(`Updating ${n} listing(s)...`);const o=Array.from(m).map(L=>p(L,t));await Promise.all(o),u(new Set),w.success(`${n} listing(s) updated to ${t}`)},S=t=>{u(n=>{const o=new Set(n);return o.has(t)?o.delete(t):o.add(t),o})},D=()=>{u(new Set(y.map(t=>t.id)))},a=()=>{u(new Set)};return j.useEffect(()=>{const t=n=>{if(!(n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement)&&m.size!==0)switch(n.key.toLowerCase()){case"s":n.preventDefault(),c("sold");break;case"p":n.preventDefault(),c("pending");break;case"a":n.preventDefault(),c("active");break;case"escape":a();break}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[m]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Quick Status Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click listings to select, then use buttons or keyboard shortcuts"})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:i,disabled:d,className:"gap-2",children:[e.jsx(V,{className:A("w-4 h-4",d&&"animate-spin")}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx(T,{label:"Total",count:v.total,active:h==="all",onClick:()=>x("all")}),e.jsx(T,{label:"Active",count:v.active,active:h==="active",onClick:()=>x("active"),color:"green"}),e.jsx(T,{label:"Pending",count:v.pending,active:h==="pending",onClick:()=>x("pending"),color:"yellow"}),e.jsx(T,{label:"Sold",count:v.sold,color:"blue"}),e.jsx(T,{label:"Stale",count:v.stale,active:h==="stale",onClick:()=>x("stale"),color:"orange",alert:v.stale>0})]}),m.size>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold",children:[m.size," selected"]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:D,children:"Select All"}),e.jsx(g,{variant:"ghost",size:"sm",onClick:a,children:"Clear"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>c("active"),className:"gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),"Active ",e.jsx("kbd",{className:"ml-1 text-xs",children:"A"})]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>c("pending"),className:"gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),"Pending ",e.jsx("kbd",{className:"ml-1 text-xs",children:"P"})]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>c("sold"),className:"gap-1",children:[e.jsx(Y,{className:"w-4 h-4"}),"Sold ",e.jsx("kbd",{className:"ml-1 text-xs",children:"S"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(t=>e.jsx(de,{listing:t,isSelected:m.has(t.id),isUpdating:b.has(t.id),onSelect:()=>S(t.id),onStatusChange:p,isStale:k(t)},t.id))}),y.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No listings found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})}function T({label:s,count:l,active:i,onClick:d,color:m,alert:u}){const b={green:"text-green-600 bg-green-50 border-green-200",yellow:"text-yellow-600 bg-yellow-50 border-yellow-200",blue:"text-blue-600 bg-blue-50 border-blue-200",orange:"text-orange-600 bg-orange-50 border-orange-200"};return e.jsxs("button",{onClick:d,disabled:!d,className:A("relative p-4 rounded-lg border-2 transition-all",i?"border-primary bg-primary/5":"border-gray-200 bg-white",d&&"hover:border-primary/50 cursor-pointer",!d&&"cursor-default"),children:[u&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),e.jsx("div",{className:"text-3xl font-bold",children:l}),e.jsx("div",{className:A("text-sm font-medium",m&&b[m]),children:s})]})}function de({listing:s,isSelected:l,isUpdating:i,onSelect:d,onStatusChange:m,isStale:u}){const b={active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",sold:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"};return e.jsxs("div",{onClick:d,className:A("relative group p-4 rounded-lg border-2 transition-all cursor-pointer",l?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-gray-300",i&&"opacity-50 pointer-events-none",u&&"border-l-4 border-l-orange-500"),children:[e.jsx("div",{className:A("absolute top-2 left-2 w-5 h-5 rounded border-2 flex items-center justify-center",l?"bg-primary border-primary":"border-gray-300 group-hover:border-primary"),children:l&&e.jsx(Q,{className:"w-4 h-4 text-white"})}),u&&e.jsxs(B,{variant:"outline",className:"absolute top-2 right-2 bg-orange-100 text-orange-800 border-orange-300",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Stale"]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold text-sm truncate mb-1",children:s.title}),e.jsxs("p",{className:"text-lg font-bold text-primary mb-2",children:["$",s.price.toLocaleString()]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(B,{className:b[s.status],children:s.status.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:K(new Date(s.updatedAt),{addSuffix:!0})})]}),(s.views!==void 0||s.leads!==void 0)&&e.jsxs("div",{className:"flex gap-3 text-xs text-gray-600 mb-3",children:[s.views!==void 0&&e.jsxs("span",{children:["ðŸ‘ï¸ ",s.views," views"]}),s.leads!==void 0&&e.jsxs("span",{children:["ðŸ‘¥ ",s.leads," leads"]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status!=="sold"&&e.jsx(g,{size:"sm",variant:"outline",onClick:f=>{f.stopPropagation(),m(s.id,"sold")},className:"flex-1 text-xs",children:"Mark Sold"}),s.status!=="pending"&&e.jsx(g,{size:"sm",variant:"outline",onClick:f=>{f.stopPropagation(),m(s.id,"pending")},className:"flex-1 text-xs",children:"Pending"})]})]}),i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 rounded-lg",children:e.jsx(V,{className:"w-6 h-6 animate-spin text-primary"})})]})}function oe({staleListings:s,onDismiss:l,onRefresh:i,onDismissAll:d,className:m}){const[u,b]=j.useState(!0),[f,h]=j.useState(new Set);j.useEffect(()=>{const c=localStorage.getItem("dismissed-stale-alerts");if(c)try{h(new Set(JSON.parse(c)))}catch(S){console.error("Failed to parse dismissed alerts:",S)}},[]),j.useEffect(()=>{localStorage.setItem("dismissed-stale-alerts",JSON.stringify(Array.from(f)))},[f]);const x=s.filter(c=>!f.has(c.id));if(x.length===0)return null;const k=c=>{h(S=>new Set(S).add(c)),l?.(c)},y=()=>{h(new Set(s.map(c=>c.id))),d?.()},v=x.filter(c=>c.daysSinceUpdate>=14).length,p=x.length-v;return e.jsxs("div",{className:A("bg-orange-50 border-2 border-orange-200 rounded-lg",m),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",onClick:()=>b(!u),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"w-6 h-6 text-orange-600"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-600 text-white text-xs rounded-full flex items-center justify-center font-bold",children:x.length})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900",children:"Stale Listings Need Attention"}),e.jsxs("p",{className:"text-sm text-orange-700",children:[v>0&&e.jsxs("span",{className:"font-medium",children:[v," critical (14+ days)"]}),v>0&&p>0&&" Â· ",p>0&&e.jsxs("span",{children:[p," warning (7+ days)"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{size:"sm",variant:"ghost",onClick:c=>{c.stopPropagation(),y()},className:"text-orange-700 hover:text-orange-900",children:"Dismiss All"}),e.jsx(g,{size:"sm",variant:"ghost",className:"text-orange-700",onClick:c=>c.stopPropagation(),children:u?"â–¼":"â–¶"})]})]}),u&&e.jsx("div",{className:"border-t border-orange-200 divide-y divide-orange-200",children:x.map(c=>e.jsx(me,{listing:c,onDismiss:()=>k(c.id),onRefresh:()=>i?.(c.id)},c.id))}),u&&e.jsxs("div",{className:"p-4 bg-orange-100/50 border-t border-orange-200",children:[e.jsx("p",{className:"text-xs text-orange-800 mb-2 font-medium",children:"ðŸ’¡ Quick Tips:"}),e.jsxs("ul",{className:"text-xs text-orange-700 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Update listing descriptions with recent improvements or price changes"}),e.jsx("li",{children:"Add new photos to refresh your listing's appeal"}),e.jsx("li",{children:"Verify pricing is still competitive in current market"}),e.jsx("li",{children:"Check if property status has changed"})]})]})]})}function me({listing:s,onDismiss:l,onRefresh:i}){const d=s.daysSinceUpdate>=14;return e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-orange-100/30 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsx(B,{variant:"outline",className:A("text-xs",d?"bg-red-100 text-red-800 border-red-300":"bg-yellow-100 text-yellow-800 border-yellow-300"),children:d?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"CRITICAL"]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"WARNING"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Status: ",s.status]}),e.jsxs("span",{children:["Last updated:"," ",K(new Date(s.updatedAt),{addSuffix:!0})]}),e.jsxs("span",{className:"font-medium text-orange-700",children:[s.daysSinceUpdate," days old"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(g,{size:"sm",variant:"outline",onClick:i,className:"gap-1 bg-white",children:[e.jsx(V,{className:"w-3 h-3"}),"Update"]}),e.jsx(g,{size:"sm",variant:"ghost",onClick:l,children:e.jsx(H,{className:"w-4 h-4"})})]})]})}function he({count:s}){return s===0?null:e.jsxs(B,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300 animate-pulse",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),s," Stale"]})}function ue({listings:s,selectedIds:l,onToggleSelect:i,onSelectAll:d,onClearSelection:m,onBulkUpdate:u,onBulkDelete:b}){const[f,h]=j.useState(!1),[x,k]=j.useState({}),[y,v]=j.useState("increase"),[p,c]=j.useState(""),[S,D]=j.useState("percent"),a=s.filter(r=>l.includes(r.id)),t=s.length>0&&l.length===s.length,n=async()=>{if(l.length===0){w.error("No listings selected");return}const r={...x};if(p&&(r.priceAdjustment={type:y,value:parseFloat(p),unit:S}),Object.keys(r).length===0){w.warning("No changes to apply");return}try{await u(r),w.success(`${l.length} listing(s) updated`),h(!1),k({}),c("")}catch(C){console.error("Bulk update failed:",C),w.error("Failed to update listings")}},o=async()=>{if(l.length===0){w.error("No listings selected");return}if(confirm(`Delete ${l.length} listing(s)? This cannot be undone.`))try{await b(l),w.success(`${l.length} listing(s) deleted`),m()}catch(r){console.error("Bulk delete failed:",r),w.error("Failed to delete listings")}},L=r=>{if(!p)return r.price;const C=parseFloat(p);if(isNaN(C))return r.price;switch(y){case"increase":return S==="percent"?r.price*(1+C/100):r.price+C;case"decrease":return S==="percent"?r.price*(1-C/100):r.price-C;case"set":return C;default:return r.price}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:t?m:d,className:"gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-4 h-4"}),"Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4"}),"Select All"]})}),e.jsxs("span",{className:"text-sm font-medium",children:[l.length," of ",s.length," selected"]})]}),e.jsx("div",{className:"flex gap-2",children:l.length>0&&!f&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"Bulk Edit"]}),e.jsxs(g,{variant:"destructive",size:"sm",onClick:o,className:"gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"Delete Selected"]})]})})]}),f&&l.length>0&&e.jsxs("div",{className:"p-6 bg-white rounded-lg border-2 border-primary shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Bulk Edit ",l.length," Listings"]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:"Update Status"}),e.jsxs(P,{value:x.status||"",onValueChange:r=>k({...x,status:r}),children:[e.jsx(U,{children:e.jsx(z,{placeholder:"Keep current status"})}),e.jsxs(E,{children:[e.jsx(N,{value:"active",children:"Active"}),e.jsx(N,{value:"pending",children:"Pending"}),e.jsx(N,{value:"sold",children:"Sold"}),e.jsx(N,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:"Update Category"}),e.jsxs(P,{value:x.category||"",onValueChange:r=>k({...x,category:r}),children:[e.jsx(U,{children:e.jsx(z,{placeholder:"Keep current category"})}),e.jsxs(E,{children:[e.jsx(N,{value:"residential",children:"Residential"}),e.jsx(N,{value:"commercial",children:"Commercial"}),e.jsx(N,{value:"land",children:"Land"}),e.jsx(N,{value:"rental",children:"Rental"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(R,{children:"Price Adjustment"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(P,{value:y,onValueChange:r=>v(r),children:[e.jsx(U,{children:e.jsx(z,{})}),e.jsxs(E,{children:[e.jsx(N,{value:"increase",children:"Increase"}),e.jsx(N,{value:"decrease",children:"Decrease"}),e.jsx(N,{value:"set",children:"Set to"})]})]}),e.jsx(G,{type:"number",placeholder:"Value",value:p,onChange:r=>c(r.target.value)}),e.jsxs(P,{value:S,onValueChange:r=>D(r),children:[e.jsx(U,{children:e.jsx(z,{})}),e.jsxs(E,{children:[e.jsx(N,{value:"percent",children:"Percent"}),e.jsx(N,{value:"amount",children:"Amount"})]})]})]})]})]}),a.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Preview Changes"}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[a.slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-white rounded",children:[e.jsx("span",{className:"truncate flex-1",children:r.title}),p&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 line-through",children:["$",r.price.toLocaleString()]}),e.jsxs("span",{className:"font-medium text-primary",children:["$",L(r).toLocaleString()]})]})]},r.id)),a.length>5&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["... and ",a.length-5," ","more"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(g,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(g,{onClick:n,className:"gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Apply Changes"]})]})]})]})}function xe({stats:s,period:l="Last 30 days",className:i}){return e.jsxs("div",{className:A("space-y-4",i),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quick Analytics"}),e.jsx("span",{className:"text-sm text-gray-600",children:l})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map((d,m)=>e.jsx(ge,{stat:d},m))})]})}function ge({stat:s}){const l=s.icon||M,i=s.trend==="up",d=s.trend==="down";return e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:A("p-2 rounded-lg",i&&"bg-green-100",d&&"bg-red-100",!i&&!d&&"bg-gray-100"),children:e.jsx(l,{className:A("w-4 h-4",i&&"text-green-600",d&&"text-red-600",!i&&!d&&"text-gray-600")})}),s.change!==void 0&&e.jsxs("div",{className:A("flex items-center gap-1 text-xs font-medium",i&&"text-green-600",d&&"text-red-600",!i&&!d&&"text-gray-600"),children:[i&&e.jsx(ie,{className:"w-3 h-3"}),d&&e.jsx(le,{className:"w-3 h-3"}),Math.abs(s.change),"%"]})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:s.value}),e.jsx("div",{className:"text-sm text-gray-600",children:s.label}),s.changeLabel&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.changeLabel})]})}const pe=s=>[{label:"Total Listings",value:s.totalListings,icon:M,trend:"neutral"},{label:"Active Listings",value:s.activeListings,icon:W,trend:"up"},{label:"Total Views",value:s.totalViews.toLocaleString(),change:s.viewsChange,changeLabel:s.viewsChange?"vs last period":void 0,icon:J,trend:s.viewsChange&&s.viewsChange>0?"up":s.viewsChange&&s.viewsChange<0?"down":"neutral"},{label:"Total Leads",value:s.totalLeads,change:s.leadsChange,changeLabel:s.leadsChange?"vs last period":void 0,icon:X,trend:s.leadsChange&&s.leadsChange>0?"up":s.leadsChange&&s.leadsChange<0?"down":"neutral"}],je=[{id:"1",title:"Modern 3BR House in Downtown",price:45e4,status:"active",updatedAt:new Date(Date.now()-1e3*60*60*24*9).toISOString(),views:156,leads:12},{id:"2",title:"Luxury Condo with Ocean View",price:85e4,status:"pending",updatedAt:new Date(Date.now()-1e3*60*60*24*2).toISOString(),views:243,leads:18},{id:"3",title:"Cozy 2BR Apartment Near Park",price:325e3,status:"active",updatedAt:new Date(Date.now()-1e3*60*60*24*15).toISOString(),views:89,leads:5},{id:"4",title:"Spacious Family Home with Pool",price:675e3,status:"active",updatedAt:new Date(Date.now()-1e3*60*60*24*12).toISOString(),views:198,leads:22},{id:"5",title:"Renovated Townhouse in Suburbs",price:425e3,status:"sold",updatedAt:new Date(Date.now()-1e3*60*60*24*1).toISOString(),views:312,leads:28},{id:"6",title:"Charming Cottage with Garden",price:385e3,status:"active",updatedAt:new Date(Date.now()-1e3*60*60*24*20).toISOString(),views:67,leads:3}];function Me(){const[s,l]=j.useState(je),[i,d]=j.useState([]),[m,u]=j.useState(!1),b=s.filter(a=>Math.floor((Date.now()-new Date(a.updatedAt).getTime())/864e5)>=7&&a.status==="active").map(a=>({id:a.id,title:a.title,status:a.status,updatedAt:a.updatedAt,daysSinceUpdate:Math.floor((Date.now()-new Date(a.updatedAt).getTime())/(1e3*60*60*24))})),f=pe({totalListings:s.length,activeListings:s.filter(a=>a.status==="active").length,totalViews:s.reduce((a,t)=>a+(t.views||0),0),totalLeads:s.reduce((a,t)=>a+(t.leads||0),0),avgPrice:Math.floor(s.reduce((a,t)=>a+t.price,0)/s.length),viewsChange:12.5,leadsChange:8.3}),h=async(a,t)=>{await new Promise(n=>setTimeout(n,500)),l(n=>n.map(o=>o.id===a?{...o,status:t,updatedAt:new Date().toISOString()}:o))},x=async()=>{u(!0),await new Promise(a=>setTimeout(a,1e3)),u(!1),w.success("Listings refreshed")},k=async a=>{const t=s.find(n=>n.id===a);t&&w.info(`Opening editor for "${t.title}"`)},y=a=>{d(t=>t.includes(a)?t.filter(n=>n!==a):[...t,a])},v=()=>{d(s.map(a=>a.id))},p=()=>{d([])},c=async a=>{await new Promise(t=>setTimeout(t,1e3)),l(t=>t.map(n=>{if(!i.includes(n.id))return n;let o={...n,updatedAt:new Date().toISOString()};if(a.status&&(o.status=a.status),a.priceAdjustment){const{type:L,value:r,unit:C}=a.priceAdjustment;L==="increase"?o.price=C==="percent"?n.price*(1+r/100):n.price+r:L==="decrease"?o.price=C==="percent"?n.price*(1-r/100):n.price-r:L==="set"&&(o.price=r)}return o})),p()},S=async a=>{await new Promise(t=>setTimeout(t,800)),l(t=>t.filter(n=>!a.includes(n.id)))},D=[{key:"?",description:"Show keyboard shortcuts",action:()=>{},category:"General"},{key:"s",description:"Mark selected as Sold",action:()=>{i.length>0&&i.forEach(a=>h(a,"sold"))},category:"Status"},{key:"p",description:"Mark selected as Pending",action:()=>{i.length>0&&i.forEach(a=>h(a,"pending"))},category:"Status"},{key:"a",description:"Mark selected as Active",action:()=>{i.length>0&&i.forEach(a=>h(a,"active"))},category:"Status"},{key:"Escape",description:"Clear selection",action:p,category:"Selection"}];return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Quick Actions Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your listings efficiently with keyboard shortcuts and bulk actions"})]}),b.length>0&&e.jsx(he,{count:b.length})]}),e.jsx(xe,{stats:f,period:"Last 30 days"}),b.length>0&&e.jsx(oe,{staleListings:b,onRefresh:k}),e.jsxs(re,{defaultValue:"quick-status",className:"w-full",children:[e.jsxs(ne,{className:"grid w-full grid-cols-2 max-w-md",children:[e.jsx(O,{value:"quick-status",children:"Quick Status"}),e.jsx(O,{value:"bulk-edit",children:"Bulk Edit"})]}),e.jsx($,{value:"quick-status",className:"mt-6",children:e.jsx(ce,{listings:s,onStatusChange:h,onRefresh:x,isLoading:m})}),e.jsxs($,{value:"bulk-edit",className:"mt-6",children:[e.jsx(ue,{listings:s,selectedIds:i,onToggleSelect:y,onSelectAll:v,onClearSelection:p,onBulkUpdate:c,onBulkDelete:S}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:s.map(a=>e.jsxs("div",{onClick:()=>y(a.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${i.includes(a.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm",children:a.title}),e.jsx("input",{type:"checkbox",checked:i.includes(a.id),onChange:()=>y(a.id),className:"mt-1"})]}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",a.price.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:a.status})]},a.id))})]})]}),e.jsx(ae,{shortcuts:D})]})}export{Me as default};
