import{a9 as J,r as d,j as e,W as I,G as M,J as E,K as O,N as z,O as v,F as ne,I as $,M as L,Q as k,a8 as R,a6 as K,_ as Y,a3 as F,B as f,ab as V,ah as X,bn as re,ai as Z,au as ee,aj as se,ag as C,L as q,T as ae,i as oe,a1 as te,m as ce,U as de,R as le,H as me,av as he,bN as xe}from"./index-BYoWZjze.js";import{f as U}from"./formatDistanceToNow-y6qqthoR.js";import{P as ue}from"./plus-DBr6jWHn.js";import{C as ge}from"./copy-DqrJunVY.js";import{T as pe}from"./trash-2-BruuVXyf.js";import{T as je}from"./tag-QSgIPzAu.js";import{T as fe,a as we,b as W,c as _}from"./tabs-enSHE4Fl.js";import"./index-CaX-TB8g.js";const G=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const Ne=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);function ve({leads:s,onLeadClick:n,onQuickReply:c,onMarkAsRead:r,className:m}){const[i,g]=d.useState(""),[u,p]=d.useState("all"),[h,w]=d.useState("all"),[b,j]=d.useState("all"),[S,t]=d.useState("date"),y=d.useMemo(()=>{let x=s.filter(T=>{const D=i===""||T.name.toLowerCase().includes(i.toLowerCase())||T.email.toLowerCase().includes(i.toLowerCase())||T.message.toLowerCase().includes(i.toLowerCase()),P=u==="all"||T.status===u,B=h==="all"||T.priority===h,a=b==="all"||T.source===b;return D&&P&&B&&a});return x.sort((T,D)=>{switch(S){case"score":return D.score-T.score;case"priority":const P={hot:3,warm:2,cold:1};return P[D.priority]-P[T.priority];case"date":default:return new Date(D.createdAt).getTime()-new Date(T.createdAt).getTime()}}),x},[s,i,u,h,b,S]),o={total:s.length,new:s.filter(x=>x.status==="new").length,hot:s.filter(x=>x.priority==="hot").length,avgScore:Math.round(s.reduce((x,T)=>x+T.score,0)/s.length)},A=Array.from(new Set(s.map(x=>x.source)));return e.jsxs("div",{className:I("space-y-4",m),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Lead Inbox"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o.new," new leads • ",o.hot," hot • Avg score:"," ",o.avgScore]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{value:S,onValueChange:x=>t(x),children:[e.jsx(E,{className:"w-32",children:e.jsx(O,{})}),e.jsxs(z,{children:[e.jsx(v,{value:"date",children:"Latest"}),e.jsx(v,{value:"score",children:"Score"}),e.jsx(v,{value:"priority",children:"Priority"})]})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx($,{placeholder:"Search leads...",value:i,onChange:x=>g(x.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{value:u,onValueChange:p,children:[e.jsx(E,{className:"w-32",children:e.jsx(O,{placeholder:"Status"})}),e.jsxs(z,{children:[e.jsx(v,{value:"all",children:"All Status"}),e.jsx(v,{value:"new",children:"New"}),e.jsx(v,{value:"contacted",children:"Contacted"}),e.jsx(v,{value:"qualified",children:"Qualified"}),e.jsx(v,{value:"converted",children:"Converted"})]})]}),e.jsxs(M,{value:h,onValueChange:w,children:[e.jsx(E,{className:"w-32",children:e.jsx(O,{placeholder:"Priority"})}),e.jsxs(z,{children:[e.jsx(v,{value:"all",children:"All Priority"}),e.jsx(v,{value:"hot",children:"Hot"}),e.jsx(v,{value:"warm",children:"Warm"}),e.jsx(v,{value:"cold",children:"Cold"})]})]}),e.jsxs(M,{value:b,onValueChange:j,children:[e.jsx(E,{className:"w-32",children:e.jsx(O,{placeholder:"Source"})}),e.jsxs(z,{children:[e.jsx(v,{value:"all",children:"All Sources"}),A.map(x=>e.jsx(v,{value:x,children:x},x))]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[y.map(x=>e.jsx(be,{lead:x,onClick:()=>n(x),onQuickReply:()=>c(x.id),onMarkAsRead:()=>r(x.id)},x.id)),y.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No leads found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})]})}function be({lead:s,onClick:n,onQuickReply:c,onMarkAsRead:r}){const m={hot:"bg-red-100 text-red-800 border-red-300",warm:"bg-yellow-100 text-yellow-800 border-yellow-300",cold:"bg-blue-100 text-blue-800 border-blue-300"},i={new:"bg-green-100 text-green-800",contacted:"bg-blue-100 text-blue-800",qualified:"bg-purple-100 text-purple-800",unqualified:"bg-gray-100 text-gray-800",converted:"bg-emerald-100 text-emerald-800"},g=s.status==="new",u=s.priority==="hot";return e.jsx("div",{onClick:n,className:I("relative p-4 rounded-lg border-2 transition-all cursor-pointer","hover:shadow-md hover:border-gray-300",g&&"bg-blue-50 border-blue-200",!g&&"bg-white border-gray-200",u&&"border-l-4 border-l-red-500"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:I("font-semibold truncate",g&&"text-primary"),children:s.name}),g&&e.jsx(k,{variant:"outline",className:"bg-blue-100",children:"NEW"}),e.jsx(k,{variant:"outline",className:m[s.priority],children:s.priority.toUpperCase()}),e.jsx(k,{className:i[s.status],children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),s.email]}),s.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),s.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),s.source]})]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:s.message}),s.listingTitle&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Interested in:"," ",e.jsx("span",{className:"font-medium",children:s.listingTitle})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),U(new Date(s.createdAt),{addSuffix:!0})]}),s.lastContactedAt&&e.jsxs("span",{children:["Last contacted:"," ",U(new Date(s.lastContactedAt),{addSuffix:!0})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:s.score})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{size:"sm",variant:"outline",onClick:p=>{p.stopPropagation(),c()},children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx(f,{size:"sm",variant:"outline",onClick:p=>{p.stopPropagation(),r()},children:e.jsx(L,{className:"w-4 h-4"})})]})]})]})})}function ye({templates:s,onSelectTemplate:n,onCreateTemplate:c,onUpdateTemplate:r,onDeleteTemplate:m,className:i}){const[g,u]=d.useState("all"),[p,h]=d.useState(""),[w,b]=d.useState(!1),j=s.filter(t=>{const y=g==="all"||t.category===g,o=p===""||t.name.toLowerCase().includes(p.toLowerCase())||t.body.toLowerCase().includes(p.toLowerCase());return y&&o}),S=[{value:"all",label:"All Templates"},{value:"initial",label:"Initial Response"},{value:"followup",label:"Follow-up"},{value:"showing",label:"Property Showing"},{value:"offer",label:"Offer Discussion"},{value:"general",label:"General"}];return e.jsxs("div",{className:I("space-y-4",i),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quick Response Templates"}),c&&e.jsxs(X,{open:w,onOpenChange:b,children:[e.jsx(re,{asChild:!0,children:e.jsxs(f,{size:"sm",className:"gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"New Template"]})}),e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsx(se,{children:"Create New Template"})}),e.jsx(ie,{onSave:t=>{c(t),b(!1),C.success("Template created")},onCancel:()=>b(!1)})]})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:S.map(t=>e.jsx(f,{variant:g===t.value?"default":"outline",size:"sm",onClick:()=>u(t.value),children:t.label},t.value))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:j.map(t=>e.jsx(Ce,{template:t,onUse:()=>n(t),onEdit:r?y=>r(t.id,y):void 0,onDelete:m?()=>m(t.id):void 0},t.id))}),j.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No templates found"})]})]})}function Ce({template:s,onUse:n,onEdit:c,onDelete:r}){const[m,i]=d.useState(!1),[g,u]=d.useState(!1),p={initial:"bg-green-100 text-green-800",followup:"bg-blue-100 text-blue-800",showing:"bg-purple-100 text-purple-800",offer:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"},h=()=>{navigator.clipboard.writeText(s.body),u(!0),setTimeout(()=>u(!1),2e3),C.success("Template copied to clipboard")};return e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.name}),e.jsx(k,{className:p[s.category],children:s.category})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{size:"sm",variant:"ghost",onClick:h,className:"h-8 w-8 p-0",children:g?e.jsx(oe,{className:"w-4 h-4 text-green-600"}):e.jsx(ge,{className:"w-4 h-4"})}),c&&e.jsx(f,{size:"sm",variant:"ghost",onClick:()=>i(!0),className:"h-8 w-8 p-0",children:e.jsx(Ne,{className:"w-4 h-4"})}),r&&e.jsx(f,{size:"sm",variant:"ghost",onClick:r,className:"h-8 w-8 p-0 text-red-600",children:e.jsx(pe,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:s.subject}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3 mb-3",children:s.body}),s.variables.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.variables.map(w=>e.jsx(k,{variant:"outline",className:"text-xs",children:`{${w}}`},w))}),e.jsx(f,{size:"sm",onClick:n,className:"w-full",children:"Use Template"}),m&&c&&e.jsx(X,{open:m,onOpenChange:i,children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsx(se,{children:"Edit Template"})}),e.jsx(ie,{initialData:s,onSave:w=>{c(w),i(!1),C.success("Template updated")},onCancel:()=>i(!1)})]})})]})}function ie({initialData:s,onSave:n,onCancel:c}){const[r,m]=d.useState(s?.name||""),[i,g]=d.useState(s?.subject||""),[u,p]=d.useState(s?.body||""),[h,w]=d.useState(s?.category||"general"),b=()=>{if(!r||!i||!u){C.error("Please fill in all fields");return}const j=[...u.matchAll(/\{(\w+)\}/g)].map(S=>S[1]);n({name:r,subject:i,body:u,category:h,variables:j})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Template Name"}),e.jsx($,{value:r,onChange:j=>m(j.target.value),placeholder:"e.g., Initial Response - Listing Inquiry"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Category"}),e.jsxs("select",{value:h,onChange:j=>w(j.target.value),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"initial",children:"Initial Response"}),e.jsx("option",{value:"followup",children:"Follow-up"}),e.jsx("option",{value:"showing",children:"Property Showing"}),e.jsx("option",{value:"offer",children:"Offer Discussion"}),e.jsx("option",{value:"general",children:"General"})]})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Subject Line"}),e.jsx($,{value:i,onChange:j=>g(j.target.value),placeholder:"e.g., Re: {listingAddress}"})]}),e.jsxs("div",{children:[e.jsx(q,{children:"Message Body"}),e.jsx(ae,{value:u,onChange:j=>p(j.target.value),placeholder:"Use {variable} for dynamic fields like {leadName}, {listingAddress}, etc.",rows:8}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use curly braces for variables: ","{leadName}",","," ","{listingAddress}",", ","{price}"]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(f,{variant:"outline",onClick:c,children:"Cancel"}),e.jsx(f,{onClick:b,children:"Save Template"})]})]})}const Se=[{id:"1",name:"Initial Response - Listing Inquiry",subject:"Re: {listingAddress}",body:`Hi {leadName},

Thank you for your interest in {listingAddress}! I'd love to help you learn more about this property.

This {bedrooms}-bedroom, {bathrooms}-bathroom home is priced at {price} and features:
• {feature1}
• {feature2}
• {feature3}

I'm available to schedule a showing at your convenience. What days/times work best for you this week?

Best regards,
{agentName}
{agentPhone}`,category:"initial",variables:["leadName","listingAddress","bedrooms","bathrooms","price","feature1","feature2","feature3","agentName","agentPhone"]},{id:"2",name:"Follow-up - No Response",subject:"Following up on {listingAddress}",body:`Hi {leadName},

I wanted to follow up on your interest in {listingAddress}. I know finding the right home can take time, and I'm here to help.

Are you still interested in viewing this property? Or would you like me to send you similar listings that might fit your needs?

Feel free to call/text me anytime at {agentPhone}.

Best regards,
{agentName}`,category:"followup",variables:["leadName","listingAddress","agentPhone","agentName"]},{id:"3",name:"Showing Confirmation",subject:"Confirmed: Property Showing at {listingAddress}",body:`Hi {leadName},

Great news! Your showing for {listingAddress} is confirmed for {showingDate} at {showingTime}.

Property Address:
{listingAddress}

I'll meet you at the property. If you need to reschedule, please let me know as soon as possible.

Looking forward to showing you this home!

Best regards,
{agentName}
{agentPhone}`,category:"showing",variables:["leadName","listingAddress","showingDate","showingTime","agentName","agentPhone"]}];function Te({hotLeads:s,onView:n,onDismiss:c,onQuickCall:r,autoHide:m=!1,autoHideDelay:i=3e4,soundEnabled:g=!0,className:u}){const[p,h]=d.useState(new Set),[w,b]=d.useState(new Set);d.useEffect(()=>{const t=s.map(A=>A.id),y=new Set(p),o=t.filter(A=>!y.has(A)&&!w.has(A));o.length>0&&(C.success(`${o.length} hot lead(s) just arrived!`,{icon:e.jsx(G,{className:"w-4 h-4 text-orange-600"})}),g&&Le(),o.forEach(A=>y.add(A)),h(y),m&&setTimeout(()=>{o.forEach(A=>j(A))},i))},[s]);const j=t=>{b(y=>new Set(y).add(t)),c(t)},S=s.filter(t=>!w.has(t.id));return S.length===0?null:e.jsx("div",{className:I("space-y-2",u),children:S.map(t=>e.jsx(Ae,{lead:t,onView:()=>n(t.id),onDismiss:()=>j(t.id),onQuickCall:r?()=>r(t.id):void 0},t.id))})}function Ae({lead:s,onView:n,onDismiss:c,onQuickCall:r}){const[m,i]=d.useState(!0);return d.useEffect(()=>{const g=setTimeout(()=>i(!1),3e3);return()=>clearTimeout(g)},[]),e.jsxs("div",{className:I("relative p-4 rounded-lg border-2 border-orange-500 bg-orange-50 shadow-lg","animate-in slide-in-from-top-5 duration-300",m&&"animate-pulse"),children:[e.jsx("div",{className:"absolute -top-2 -right-2",children:e.jsxs(k,{className:"bg-orange-600 text-white gap-1 animate-bounce",children:[e.jsx(G,{className:"w-3 h-3"}),"HOT LEAD"]})}),e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-bold text-lg",children:s.name}),e.jsxs(k,{variant:"outline",className:"bg-red-100 text-red-800",children:["Score: ",s.score]})]}),e.jsxs("div",{className:"space-y-1 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(L,{className:"w-3 h-3"}),s.email]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(R,{className:"w-3 h-3"}),s.phone]}),e.jsxs("div",{className:"text-gray-600",children:["From: ",s.source]})]}),s.listingTitle&&e.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Interested in: ",s.listingTitle]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:s.message}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Received"," ",U(new Date(s.createdAt),{addSuffix:!0})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx(f,{size:"sm",onClick:c,variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(te,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[r&&s.phone&&e.jsxs(f,{size:"sm",onClick:r,className:"flex-1 bg-green-600 hover:bg-green-700 gap-1",children:[e.jsx(R,{className:"w-4 h-4"}),"Call Now"]}),e.jsxs(f,{size:"sm",onClick:n,className:"flex-1 bg-orange-600 hover:bg-orange-700 gap-1",children:[e.jsx(ce,{className:"w-4 h-4"}),"View Details",e.jsx(de,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200 rounded-b-lg overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-600 animate-pulse",style:{width:`${s.score}%`}})})]})}function ke({count:s,onClick:n}){return s===0?null:e.jsxs(f,{variant:"outline",size:"sm",onClick:n,className:"relative gap-2 border-orange-500 bg-orange-50 hover:bg-orange-100 text-orange-900 animate-pulse",children:[e.jsx(G,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"font-bold",children:[s," Hot Lead",s>1?"s":""]}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]})}function Le(){try{const s=new(window.AudioContext||window.webkitAudioContext),n=s.createOscillator(),c=s.createGain();n.connect(c),c.connect(s.destination),n.frequency.value=800,n.type="sine",c.gain.setValueAtTime(.3,s.currentTime),c.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),n.start(s.currentTime),n.stop(s.currentTime+.5)}catch(s){console.warn("Could not play notification sound:",s)}}function Ie({lead:s,onClose:n,onUpdateStatus:c,onAddNote:r,onSendEmail:m,onScheduleCall:i,className:g}){const[u,p]=d.useState("overview"),[h,w]=d.useState(""),[b,j]=d.useState(!1),S={hot:"bg-red-100 text-red-800 border-red-300",warm:"bg-yellow-100 text-yellow-800 border-yellow-300",cold:"bg-blue-100 text-blue-800 border-blue-300"},t={new:"bg-green-100 text-green-800",contacted:"bg-blue-100 text-blue-800",qualified:"bg-purple-100 text-purple-800",unqualified:"bg-gray-100 text-gray-800",converted:"bg-emerald-100 text-emerald-800"},y=async()=>{if(!h.trim()){C.error("Please enter a note");return}j(!0);try{await r(h),w(""),C.success("Note added")}catch{C.error("Failed to add note")}finally{j(!1)}};return e.jsx("div",{className:I("fixed inset-0 bg-black/50 z-50 overflow-y-auto",g),children:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.name}),e.jsx(k,{variant:"outline",className:S[s.priority],children:s.priority.toUpperCase()}),e.jsx(k,{className:t[s.status],children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4"}),s.email]}),s.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4"}),s.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),s.source]})]})]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Lead Score:"}),e.jsx("span",{className:"text-2xl font-bold text-primary",children:s.score}),e.jsx("span",{className:"text-sm text-gray-600",children:"/100"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Created"," ",U(new Date(s.createdAt),{addSuffix:!0})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsxs(f,{className:"gap-2",onClick:()=>window.open(`mailto:${s.email}`),children:[e.jsx(L,{className:"w-4 h-4"}),"Email"]}),s.phone&&e.jsxs(f,{variant:"outline",className:"gap-2",onClick:()=>window.open(`tel:${s.phone}`),children:[e.jsx(R,{className:"w-4 h-4"}),"Call"]}),i&&e.jsxs(f,{variant:"outline",className:"gap-2",onClick:i,children:[e.jsx(le,{className:"w-4 h-4"}),"Schedule"]}),e.jsxs(M,{value:s.status,onValueChange:o=>c(o),children:[e.jsx(E,{className:"w-40",children:e.jsx(O,{})}),e.jsxs(z,{children:[e.jsx(v,{value:"new",children:"New"}),e.jsx(v,{value:"contacted",children:"Contacted"}),e.jsx(v,{value:"qualified",children:"Qualified"}),e.jsx(v,{value:"unqualified",children:"Unqualified"}),e.jsx(v,{value:"converted",children:"Converted"})]})]})]})]}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex gap-4 px-6",children:["overview","timeline","notes"].map(o=>e.jsx("button",{onClick:()=>p(o),className:I("py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors",u===o?"border-primary text-primary":"border-transparent text-gray-600 hover:text-gray-900"),children:o},o))})}),e.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[u==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Original Message"]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-700",children:s.message})})]}),s.listingTitle&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Interested Property"]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg flex items-center gap-4",children:[s.listingImage&&e.jsx("img",{src:s.listingImage,alt:s.listingTitle,className:"w-24 h-24 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.listingTitle}),e.jsxs(f,{variant:"link",size:"sm",className:"gap-1 p-0 h-auto",onClick:()=>{},children:["View Listing",e.jsx(he,{className:"w-3 h-3"})]})]})]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Tags"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(o=>e.jsx(k,{variant:"outline",children:o},o))})]})]}),u==="timeline"&&e.jsx("div",{className:"space-y-4",children:s.timeline&&s.timeline.length>0?s.timeline.map(o=>e.jsx(De,{event:o},o.id)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Y,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No timeline events yet"})]})}),u==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{value:h,onChange:o=>w(o.target.value),placeholder:"Add a note about this lead...",rows:3}),e.jsx(f,{onClick:y,disabled:b||!h.trim(),className:"w-full",children:"Add Note"})]}),s.notes&&e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.notes})})]})]})]})})})}function De({event:s}){const n=()=>{switch(s.type){case"email":return e.jsx(L,{className:"w-4 h-4"});case"call":return e.jsx(R,{className:"w-4 h-4"});case"meeting":return e.jsx(le,{className:"w-4 h-4"});case"status_change":return e.jsx(F,{className:"w-4 h-4"});case"note":default:return e.jsx(V,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:n()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-700",children:s.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[xe(new Date(s.timestamp),"MMM d, yyyy 'at' h:mm a"),s.user&&` • ${s.user}`]})]})]})}const Pe=[{id:"1",name:"Sarah Johnson",email:"sarah.j@email.com",phone:"+1 (555) 123-4567",message:"Hi, I'm very interested in the 3BR house in Downtown. I'd like to schedule a viewing this week if possible. I'm pre-approved and ready to move quickly. Can you provide more details about the HOA fees and recent renovations?",listingTitle:"Modern 3BR House in Downtown",listingId:"listing-1",source:"zillow",score:85,status:"new",priority:"hot",createdAt:new Date(Date.now()-1e3*60*15).toISOString(),tags:["pre-approved","quick-move"]},{id:"2",name:"Michael Chen",email:"mchen@email.com",phone:"+1 (555) 987-6543",message:"Looking for properties in the $400-500k range. Interested in your luxury condo listing.",listingTitle:"Luxury Condo with Ocean View",listingId:"listing-2",source:"realtor",score:72,status:"new",priority:"hot",createdAt:new Date(Date.now()-1e3*60*30).toISOString(),tags:["investor"]},{id:"3",name:"Emily Rodriguez",email:"emily.r@email.com",message:"What's the monthly HOA fee for the apartment near the park?",listingTitle:"Cozy 2BR Apartment Near Park",listingId:"listing-3",source:"facebook",score:58,status:"contacted",priority:"warm",createdAt:new Date(Date.now()-1e3*60*60*2).toISOString(),lastContactedAt:new Date(Date.now()-1e3*60*30).toISOString(),tags:["first-time-buyer"]},{id:"4",name:"David Kim",email:"dkim@email.com",phone:"+1 (555) 234-5678",message:"I saw your listing for the family home with pool. Is it still available?",listingTitle:"Spacious Family Home with Pool",listingId:"listing-4",source:"website",score:45,status:"contacted",priority:"warm",createdAt:new Date(Date.now()-1e3*60*60*5).toISOString(),lastContactedAt:new Date(Date.now()-1e3*60*60*3).toISOString()},{id:"5",name:"Lisa Anderson",email:"lisa.a@email.com",message:"Info please",listingTitle:"Renovated Townhouse in Suburbs",listingId:"listing-5",source:"instagram",score:28,status:"new",priority:"cold",createdAt:new Date(Date.now()-1e3*60*60*12).toISOString()}];function qe(){const[s,n]=d.useState(Pe),[c,r]=d.useState(Se),[m,i]=d.useState(null),[g,u]=d.useState(!0),p=s.filter(a=>a.score>=70&&a.status==="new"),h={total:s.length,new:s.filter(a=>a.status==="new").length,hot:p.length,contacted:s.filter(a=>a.status==="contacted").length,avgScore:Math.round(s.reduce((a,l)=>a+l.score,0)/s.length)},w=a=>{i(a)},b=()=>{i(null)},j=a=>{const l=s.find(N=>N.id===a);l&&(i(l),C.info("Opening quick reply for "+l.name))},S=async a=>{n(l=>l.map(N=>N.id===a?{...N,status:"contacted"}:N)),C.success("Lead marked as contacted")},t=async a=>{m&&(n(l=>l.map(N=>N.id===m.id?{...N,status:a}:N)),i(l=>l?{...l,status:a}:null),C.success(`Status updated to ${a}`))},y=async a=>{await new Promise(l=>setTimeout(l,500)),console.log("Adding note:",a)},o=async(a,l)=>{await new Promise(N=>setTimeout(N,500)),console.log("Sending email:",{subject:a,body:l}),C.success("Email sent!")},A=a=>{console.log("Dismissed hot lead:",a)},x=a=>{const l=s.find(N=>N.id===a);l&&w(l)},T=a=>{if(!m){C.info("Please select a lead first");return}let l=a.body;l=l.replace("{leadName}",m.name),l=l.replace("{listingAddress}",m.listingTitle||"the property"),l=l.replace("{agentName}","Your Name"),l=l.replace("{agentPhone}","(555) 123-4567"),C.success("Template loaded! Ready to send."),console.log("Using template:",{subject:a.subject,body:l})},D=a=>{const l={...a,id:`custom-${Date.now()}`};r(N=>[...N,l])},P=(a,l)=>{r(N=>N.map(Q=>Q.id===a?{...Q,...l}:Q))},B=a=>{r(l=>l.filter(N=>N.id!==a)),C.success("Template deleted")};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Lead Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your leads efficiently with smart scoring and quick responses"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(ke,{count:p.length,onClick:()=>u(!g)})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(H,{label:"Total Leads",value:h.total,icon:e.jsx(L,{className:"w-5 h-5"})}),e.jsx(H,{label:"New",value:h.new,icon:e.jsx(V,{className:"w-5 h-5"}),color:"green"}),e.jsx(H,{label:"Hot Leads",value:h.hot,icon:e.jsx(F,{className:"w-5 h-5"}),color:"red",pulse:h.hot>0}),e.jsx(H,{label:"Contacted",value:h.contacted,icon:e.jsx(L,{className:"w-5 h-5"}),color:"blue"}),e.jsx(H,{label:"Avg Score",value:h.avgScore,icon:e.jsx(F,{className:"w-5 h-5"})})]}),g&&p.length>0&&e.jsx(Te,{hotLeads:p,onView:x,onDismiss:A,soundEnabled:!0}),e.jsxs(fe,{defaultValue:"inbox",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-2 max-w-md",children:[e.jsxs(W,{value:"inbox",children:["Lead Inbox",h.new>0&&e.jsx(k,{variant:"outline",className:"ml-2 bg-green-100",children:h.new})]}),e.jsx(W,{value:"templates",children:"Response Templates"})]}),e.jsx(_,{value:"inbox",className:"mt-6",children:e.jsx(ve,{leads:s,onLeadClick:w,onQuickReply:j,onMarkAsRead:S})}),e.jsx(_,{value:"templates",className:"mt-6",children:e.jsx(ye,{templates:c,onSelectTemplate:T,onCreateTemplate:D,onUpdateTemplate:P,onDeleteTemplate:B})})]}),m&&e.jsx(Ie,{lead:m,onClose:b,onUpdateStatus:t,onAddNote:y,onSendEmail:o})]})}function H({label:s,value:n,icon:c,color:r,pulse:m}){const i={green:"bg-green-100 text-green-600",blue:"bg-blue-100 text-blue-600",red:"bg-red-100 text-red-600"};return e.jsxs("div",{className:"p-4 bg-white rounded-lg border hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`p-2 rounded ${r?i[r]:"bg-gray-100 text-gray-600"}`,children:c}),m&&e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-2xl font-bold",children:n}),e.jsx("div",{className:"text-sm text-gray-600",children:s})]})}export{qe as default};
