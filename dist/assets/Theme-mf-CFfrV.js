import{j as e,r as x}from"./react-vendor-CotwlNTQ.js";import{C as b,c as se,o as y,B as S,j as p,L as T,U as ae,V as te,W as re,I as A,X as le,Y as f,s as v,t as oe,J as ie,K as ne,M as O,N as $,f as N,g as w,h as C,S as D,a as I,b as R,d as H,e as V}from"./ui-components-XxFWEsul.js";import{b as ce,E as _,aG as de,aE as me,am as xe,aH as he,aI as pe}from"./icons-CcUX9GkC.js";import{u as ue}from"./index-sCAK2lXW.js";import{s as k}from"./supabase-Ba7v9dZh.js";import{u as ge}from"./state-stores-BuSRU7CA.js";import{u as fe,U as je}from"./UpgradeModal-D_pdeQ4u.js";import"./charts-hR54p0E0.js";import"./utils-BpArqNZu.js";import"./data-15YcDnrk.js";import"./three-addons-CjyX6BZ_.js";import"./three-D6omocmH.js";import"./forms-Dr9C5XML.js";function U({theme:a,isSelected:l,onSelect:c,onPreview:m}){return e.jsxs(b,{className:se("relative cursor-pointer transition-all hover:shadow-lg",l&&"ring-2 ring-primary"),onClick:()=>c(a),children:[l&&e.jsx("div",{className:"absolute top-2 right-2 z-10 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),e.jsxs(y,{className:"p-0",children:[e.jsxs("div",{className:"h-32 p-4 rounded-t-lg relative overflow-hidden",style:{backgroundColor:a.colors.background},children:[a.has3D&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-pink-500/10 animate-pulse"}),e.jsxs("div",{className:"flex items-start gap-2 mb-3 relative z-10",children:[e.jsx("div",{className:"w-16 h-16 rounded-full",style:{backgroundColor:a.colors.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 rounded",style:{backgroundColor:a.colors.foreground,opacity:.8,width:"70%"}}),e.jsx("div",{className:"h-2 rounded",style:{backgroundColor:a.colors.muted,width:"90%"}})]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:a.colors.primary},title:"Primary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:a.colors.secondary},title:"Secondary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:a.colors.accent},title:"Accent"})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:a.description})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[a.isPremium&&e.jsx(S,{variant:"secondary",className:"text-xs",children:"Pro"}),a.has3D&&e.jsx(S,{variant:"outline",className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:"3D"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Fonts:"})," ",a.fonts.heading,a.fonts.heading!==a.fonts.body&&` / ${a.fonts.body}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:l?"default":"outline",size:"sm",className:"flex-1",onClick:t=>{t.stopPropagation(),c(a)},children:l?"Selected":"Apply"}),m&&e.jsx(p,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),m(a)},children:"Preview"})]})]})]})]})}const be=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#1F2937","#6B7280"];function j({label:a,value:l,onChange:c,description:m}){const[t,h]=x.useState(!1),i=r=>{c(r)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:a,children:a}),m&&e.jsx("p",{className:"text-xs text-muted-foreground",children:m}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{open:t,onOpenChange:h,children:[e.jsx(te,{asChild:!0,children:e.jsx(p,{variant:"outline",className:"w-12 h-10 p-0 border-2",style:{backgroundColor:l},"aria-label":`Pick ${a}`})}),e.jsx(re,{className:"w-64 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Preset Colors"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:be.map(r=>e.jsx("button",{className:"w-10 h-10 rounded border-2 hover:scale-110 transition-transform",style:{backgroundColor:r},onClick:()=>{i(r),h(!1)},"aria-label":`Select ${r}`},r))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:l,onChange:r=>i(r.target.value),className:"w-12 h-10 rounded border cursor-pointer"}),e.jsx(A,{type:"text",value:l,onChange:r=>i(r.target.value),placeholder:"#000000",className:"flex-1 font-mono text-sm"})]})]})]})})]}),e.jsx(A,{type:"text",value:l,onChange:r=>i(r.target.value),placeholder:"#000000",className:"flex-1 font-mono"})]})]})}const Y=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Playfair Display","Merriweather","Bebas Neue","Source Sans Pro"];function Me(){const{toast:a}=ue(),{user:l}=ge(),[c,m]=x.useState(le()),[t,h]=x.useState(c.colors),[i,r]=x.useState(c.fonts),[q,u]=x.useState(!1),[P,F]=x.useState(!1),[J,z]=x.useState(!1),[n,E]=x.useState("desktop"),{subscription:B}=fe();x.useEffect(()=>{W()},[l]);const W=async()=>{if(l)try{const{data:s,error:o}=await k.from("profiles").select("theme").eq("id",l.id).single();if(o)throw o;if(s?.theme){let d;typeof s.theme=="string"?s.theme.startsWith("{")?d=JSON.parse(s.theme):d=f.find(ee=>ee.id===s.theme)||f[0]:d=s.theme,m(d),h(d.colors),r(d.fonts),v(d)}}catch(s){console.error("Failed to load saved theme:",s);const o=f[0];m(o),h(o.colors),r(o.fonts)}},L=async s=>{if(s.isPremium&&B?.plan_name==="free"){z(!0);return}m(s),h(s.colors),r(s.fonts),u(!1),v(s)},G=async()=>{if(!l){a({title:"Error",description:"You must be logged in to save themes",variant:"destructive"});return}F(!0);try{const s={...c,colors:t,fonts:i},{error:o}=await k.from("profiles").update({theme:JSON.stringify(s)}).eq("id",l.id);if(o)throw o;v(s),a({title:"Theme saved!",description:"Your profile theme has been updated successfully."}),u(!1)}catch(s){console.error("Failed to save theme:",s),a({title:"Error",description:"Failed to save theme. Please try again.",variant:"destructive"})}finally{F(!1)}},K=async()=>{if(!l){a({title:"Error",description:"You must be logged in to preview",variant:"destructive"});return}try{const{data:s,error:o}=await k.from("profiles").select("username").eq("id",l.id).single();if(o)throw o;s?.username&&window.open(`/${s.username}`,"_blank")}catch{a({title:"Error",description:"Failed to open preview",variant:"destructive"})}},X=()=>{h(c.colors),r(c.fonts),u(!1),a({title:"Reset to default",description:"Theme has been reset to its default settings."})},g=(s,o)=>{h(d=>({...d,[s]:o})),u(!0)},M=(s,o)=>{r(d=>({...d,[s]:o})),u(!0)},Q=f.filter(s=>!s.isPremium),Z=f.filter(s=>s.isPremium);return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Theme Customization"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1",children:"Customize your profile's look and feel"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:K,title:"Open your public profile in a new tab to see your theme",className:"flex-1 sm:flex-none",children:[e.jsx(_,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Preview Live"})]}),q&&e.jsxs(p,{variant:"outline",size:"sm",onClick:X,className:"flex-1 sm:flex-none",children:[e.jsx(de,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),e.jsxs(p,{size:"sm",onClick:G,disabled:P,className:"flex-1 sm:flex-none",children:[P?e.jsx(oe,{size:"sm",className:"mr-2"}):e.jsx(me,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Save Theme"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"text-xl sm:text-2xl flex-shrink-0",children:"‚ú®"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to see your theme changes:"}),e.jsxs("ol",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 space-y-0.5 sm:space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Select a theme below and click ",e.jsx("strong",{children:'"Save Theme"'})]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:'"Preview Live"'})," button above to open your public profile in a new tab"]}),e.jsx("li",{children:"Premium themes with 3D effects will show animated backgrounds on your public page!"})]}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1 sm:mt-2",children:["üí° Note: Theme effects only appear on your ",e.jsx("strong",{children:"public profile page"}),", not in this dashboard."]})]})]})}),e.jsxs(ie,{defaultValue:"presets",className:"space-y-6",children:[e.jsxs(ne,{children:[e.jsxs(O,{value:"presets",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Theme Presets"]}),e.jsxs(O,{value:"customize",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Customize"]})]}),e.jsxs($,{value:"presets",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Free Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Q.map(s=>e.jsx(U,{theme:s,isSelected:c.id===s.id,onSelect:L},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Premium Themes"}),e.jsx(S,{children:"Pro"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Z.map(s=>e.jsx(U,{theme:s,isSelected:c.id===s.id,onSelect:L},s.id))})]})]}),e.jsxs($,{value:"customize",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(b,{children:[e.jsxs(N,{className:"pb-3 sm:pb-4",children:[e.jsx(w,{className:"text-base sm:text-lg",children:"Colors"}),e.jsx(C,{className:"text-xs sm:text-sm",children:"Customize the color scheme of your profile"})]}),e.jsxs(y,{className:"space-y-3 sm:space-y-4",children:[e.jsx(j,{label:"Primary Color",value:t.primary,onChange:s=>g("primary",s),description:"Main brand color (buttons, links)"}),e.jsx(j,{label:"Secondary Color",value:t.secondary,onChange:s=>g("secondary",s),description:"Secondary accent color"}),e.jsx(j,{label:"Accent Color",value:t.accent,onChange:s=>g("accent",s),description:"Highlights and CTAs"}),e.jsx(j,{label:"Background Color",value:t.background,onChange:s=>g("background",s),description:"Page background"}),e.jsx(j,{label:"Text Color",value:t.foreground,onChange:s=>g("foreground",s),description:"Primary text color"})]})]}),e.jsxs(b,{children:[e.jsxs(N,{className:"pb-3 sm:pb-4",children:[e.jsx(w,{className:"text-base sm:text-lg",children:"Typography"}),e.jsx(C,{className:"text-xs sm:text-sm",children:"Select fonts for headings and body text"})]}),e.jsxs(y,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"heading-font",children:"Heading Font"}),e.jsxs(D,{value:i.heading,onValueChange:s=>M("heading",s),children:[e.jsx(I,{id:"heading-font",children:e.jsx(R,{})}),e.jsx(H,{children:Y.map(s=>e.jsx(V,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for titles and headings"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"body-font",children:"Body Font"}),e.jsxs(D,{value:i.body,onValueChange:s=>M("body",s),children:[e.jsx(I,{id:"body-font",children:e.jsx(R,{})}),e.jsx(H,{children:Y.map(s=>e.jsx(V,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for paragraphs and text"})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Preview"}),e.jsx("h3",{className:"text-2xl font-bold",style:{fontFamily:i.heading,color:t.primary},children:"Your Profile Heading"}),e.jsx("p",{className:"text-sm",style:{fontFamily:i.body,color:t.foreground},children:"This is how your body text will appear on your profile. It should be readable and professional."})]})]})]})]}),e.jsxs(b,{children:[e.jsx(N,{className:"pb-3 sm:pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-base sm:text-lg",children:"Live Preview"}),e.jsx(C,{className:"text-xs sm:text-sm",children:"See how your theme will look on different devices"})]}),e.jsxs("div",{className:"flex gap-1 bg-muted p-1 rounded-lg",children:[e.jsxs(p,{variant:n==="desktop"?"default":"ghost",size:"sm",onClick:()=>E("desktop"),className:"gap-1.5",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Desktop"})]}),e.jsxs(p,{variant:n==="mobile"?"default":"ghost",size:"sm",onClick:()=>E("mobile"),className:"gap-1.5",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Mobile"})]})]})]})}),e.jsxs(y,{children:[e.jsx("div",{className:"flex justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-lg p-4 sm:p-8",children:e.jsxs("div",{className:`rounded-lg p-4 sm:p-6 space-y-3 sm:space-y-4 transition-all duration-300 ${n==="mobile"?"w-full max-w-[375px]":"w-full"}`,style:{backgroundColor:t.background,boxShadow:n==="mobile"?"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)":"none"},children:[e.jsxs("div",{className:`flex items-start ${n==="mobile"?"flex-col items-center text-center":"gap-4"}`,children:[e.jsx("div",{className:`rounded-full ${n==="mobile"?"w-16 h-16 mb-3":"w-20 h-20"}`,style:{backgroundColor:t.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:`font-bold ${n==="mobile"?"text-xl":"text-2xl"}`,style:{fontFamily:i.heading,color:t.foreground},children:"Agent Name"}),e.jsx("p",{className:"text-sm",style:{fontFamily:i.body,color:t.mutedForeground},children:"Realtor¬Æ | Luxury Home Specialist"})]})]}),e.jsxs("div",{className:`flex ${n==="mobile"?"flex-col w-full":"flex-wrap"} gap-2`,children:[e.jsx("button",{className:`py-2 rounded-lg text-white text-xs sm:text-sm font-medium min-h-[44px] ${n==="mobile"?"w-full px-4":"px-3 sm:px-4"}`,style:{backgroundColor:t.primary},children:"Primary Button"}),e.jsx("button",{className:`py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px] ${n==="mobile"?"w-full px-4":"px-3 sm:px-4"}`,style:{backgroundColor:t.secondary,color:"white"},children:"Secondary Button"}),n==="desktop"&&e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px]",style:{backgroundColor:t.accent,color:"white"},children:"Accent Button"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:t.card},children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{fontFamily:i.heading,color:t.cardForeground},children:"Property Card"}),e.jsx("p",{className:"text-xs",style:{fontFamily:i.body,color:t.mutedForeground},children:n==="mobile"?"Mobile view":"This is how property cards will appear with your selected theme."})]})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:n==="mobile"?"üì± Viewing mobile preview (375px wide)":"üñ•Ô∏è Viewing desktop preview (full width)"})})]})]})]})]}),e.jsx(je,{open:J,onOpenChange:z,feature:"premium_themes",currentPlan:B?.plan_name||"Free",requiredPlan:"Professional"})]})}export{Me as default};
