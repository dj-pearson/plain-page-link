import{G as n,s as i}from"./index-l1qzSSVt.js";const d=()=>{const{data:t}=n({queryKey:["session"],queryFn:async()=>{const{data:r}=await i.auth.getSession();return r.session}}),{data:e,isLoading:u}=n({queryKey:["user-subscription",t?.user?.id],queryFn:async()=>{if(!t?.user?.id)return null;const{data:r,error:s}=await i.rpc("get_user_plan",{_user_id:t.user.id});if(s)throw s;return r},enabled:!!t?.user?.id}),{data:o}=n({queryKey:["subscription-plans"],queryFn:async()=>{const{data:r,error:s}=await i.from("subscription_plans").select("*").eq("is_active",!0).order("sort_order");if(s)throw s;return r}});return{subscription:e,plans:o,isLoading:u,checkLimit:(r,s)=>{if(!e?.limits)return s<3;const a=e.limits[r];return a===-1?!0:a===void 0?!1:s<a},hasFeature:r=>e?.features?e.features[r]===!0:!1,isPro:e?.plan_name==="professional"||e?.plan_name==="team"||e?.plan_name==="enterprise",isTeam:e?.plan_name==="team"||e?.plan_name==="enterprise"}};export{d as u};
