import{j as e}from"./ui-components-ClhKjEhW.js";import{a as s,j as t}from"./react-vendor-CmKLYqnR.js";import{B as i,C as l,e as a,u as r,s as o}from"./index-DX7NeIxk.js";import{P as n}from"./progress-D0MrEmdX.js";import{g as c,a1 as d,H as m,E as u,a2 as x,d as h,V as p,A as f,L as g}from"./icons--vfrx8Ku.js";import"./three-DMNeqvYw.js";import"./charts-D6IDAGAX.js";import"./utils-CwVVV8W2.js";import"./data-DkeJbMsV.js";import"./supabase-Bu2D04vJ.js";import"./forms-BQFHsYzL.js";function b({onComplete:a,userProfile:r}){const[o,g]=s.useState(1),[b,C]=s.useState({templateChoice:null,profileBasics:{photo:null,photoPreview:null,fullName:r?.full_name||"",title:"",bio:"",phone:"",location:""},firstListing:{photo:null,photoPreview:null,address:"",price:"",beds:"",baths:"",status:"active"},importOption:null});t();const B=o/5*100,P=[{number:1,title:"Choose Template",icon:c},{number:2,title:"Profile Basics",icon:d},{number:3,title:"First Listing",icon:m},{number:4,title:"Preview",icon:u},{number:5,title:"Share",icon:x}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Setup Your AgentBio Profile"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{a(b)},children:"Skip Setup"})]}),e.jsx(n,{value:B,className:"h-2 mb-4"}),e.jsx("div",{className:"flex items-center justify-between",children:P.map(s=>e.jsxs("div",{className:"flex items-center gap-2 "+(s.number===o?"text-blue-600 font-semibold":s.number<o?"text-green-600":"text-gray-400"),children:[s.number<o?e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(h,{className:"h-5 w-5 text-white"})}):e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(s.number===o?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"),children:s.number}),e.jsx("span",{className:"hidden md:inline text-sm",children:s.title})]},s.number))})]}),e.jsxs(l,{className:"p-8 bg-white shadow-xl",children:[1===o&&e.jsx(j,{templates:[{id:"luxury",name:"Luxury",description:"High-end properties",colors:["#1e3a8a","#d4af37"]},{id:"modern",name:"Modern Clean",description:"Minimalist & professional",colors:["#2563eb","#10b981"]},{id:"coastal",name:"Coastal",description:"Beach & waterfront",colors:["#0891b2","#06b6d4"]},{id:"classic",name:"Classic",description:"Traditional & timeless",colors:["#7c3aed","#a855f7"]}],selected:b.templateChoice,onSelect:e=>C({...b,templateChoice:e})}),2===o&&e.jsx(v,{data:b.profileBasics,onChange:e=>C({...b,profileBasics:e})}),3===o&&e.jsx(N,{data:b.firstListing,onChange:e=>C({...b,firstListing:e})}),4===o&&e.jsx(y,{wizardData:b}),5===o&&e.jsx(w,{username:r?.username||"yourname"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs(i,{variant:"outline",onClick:()=>{o>1&&g(o-1)},disabled:1===o,children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Step ",o," of ",5," â€¢ ~",10-2*o," min remaining"]}),e.jsxs(i,{onClick:()=>{o<5?g(o+1):a(b)},disabled:!(()=>{switch(o){case 1:return null!==b.templateChoice;case 2:return b.profileBasics.fullName&&b.profileBasics.title;case 3:case 4:case 5:return!0;default:return!1}})(),children:[5===o?"Go to Dashboard":"Next",e.jsx(f,{className:"h-4 w-4 ml-2"})]})]})]})})}function j({templates:s,selected:t,onSelect:i}){return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your Style"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Select a template to match your brand. You can customize it later."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map(s=>e.jsxs("button",{onClick:()=>i(s.id),className:"p-4 rounded-xl border-2 transition-all "+(t===s.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-full h-24 rounded-lg mb-3",style:{background:`linear-gradient(135deg, ${s.colors[0]}, ${s.colors[1]})`}}),e.jsx("div",{className:"font-semibold text-sm",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]},s.id))})]})}function v({data:s,onChange:t}){return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your Profile Basics"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add your photo and basic info. Takes ~2 minutes."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 overflow-hidden",children:s.photoPreview?e.jsx("img",{src:s.photoPreview,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(d,{className:"h-8 w-8"})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:e=>{const i=e.target.files?.[0];if(i){const e=new FileReader;e.onloadend=()=>{t({...s,photo:i,photoPreview:e.result})},e.readAsDataURL(i)}},className:"hidden"}),e.jsx(i,{asChild:!0,variant:"outline",size:"sm",children:e.jsx("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:"Upload Photo"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:s.fullName,onChange:e=>t({...s,fullName:e.target.value}),placeholder:"Sarah Johnson",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:e=>t({...s,title:e.target.value}),placeholder:"Luxury Home Specialist",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio (optional)"}),e.jsx("textarea",{value:s.bio,onChange:e=>t({...s,bio:e.target.value}),placeholder:"Helping families find their dream homes...",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 h-24 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone (optional)"}),e.jsx("input",{type:"tel",value:s.phone,onChange:e=>t({...s,phone:e.target.value}),placeholder:"(555) 123-4567",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location (optional)"}),e.jsx("input",{type:"text",value:s.location,onChange:e=>t({...s,location:e.target.value}),placeholder:"Austin, TX",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]})}function N({data:s,onChange:t}){return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Add Your First Listing"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Showcase a property to make your profile pop. You can skip and add later."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Property Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-32 h-24 rounded-lg bg-gray-200 overflow-hidden",children:s.photoPreview?e.jsx("img",{src:s.photoPreview,alt:"Property",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(m,{className:"h-8 w-8"})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"listing-photo",accept:"image/*",onChange:e=>{const i=e.target.files?.[0];if(i){const e=new FileReader;e.onloadend=()=>{t({...s,photo:i,photoPreview:e.result})},e.readAsDataURL(i)}},className:"hidden"}),e.jsx(i,{asChild:!0,variant:"outline",size:"sm",children:e.jsx("label",{htmlFor:"listing-photo",className:"cursor-pointer",children:"Upload Photo"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),e.jsx("input",{type:"text",value:s.address,onChange:e=>t({...s,address:e.target.value}),placeholder:"123 Main St, Austin, TX 78701",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price"}),e.jsx("input",{type:"text",value:s.price,onChange:e=>t({...s,price:e.target.value}),placeholder:"$750,000",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Beds"}),e.jsx("input",{type:"number",value:s.beds,onChange:e=>t({...s,beds:e.target.value}),placeholder:"3",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Baths"}),e.jsx("input",{type:"number",value:s.baths,onChange:e=>t({...s,baths:e.target.value}),placeholder:"2",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:"active"===s.status,onChange:()=>t({...s,status:"active"}),className:"text-blue-600"}),e.jsx("span",{children:"Active Listing"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:"sold"===s.status,onChange:()=>t({...s,status:"sold"}),className:"text-blue-600"}),e.jsx("span",{children:"Sold Property"})]})]})]})]})]})}function y({wizardData:s}){return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Preview Your Profile"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Here's how your profile will look. You can edit everything later."}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-8 border border-gray-200",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s.profileBasics.photoPreview?e.jsx("img",{src:s.profileBasics.photoPreview,alt:"Profile",className:"w-24 h-24 rounded-full object-cover mb-4"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-bold",children:s.profileBasics.fullName||"Your Name"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.profileBasics.title||"Your Title"}),s.profileBasics.location&&e.jsx("p",{className:"text-sm text-gray-500",children:s.profileBasics.location})]}),s.profileBasics.bio&&e.jsx("p",{className:"text-sm text-gray-700 text-center mb-4",children:s.profileBasics.bio}),s.firstListing.photoPreview&&e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.firstListing.photoPreview,alt:"Listing",className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"font-semibold text-lg text-blue-600 mb-1",children:s.firstListing.price||"$XXX,XXX"}),e.jsx("div",{className:"text-sm text-gray-700 mb-2",children:s.firstListing.address||"Property Address"}),(s.firstListing.beds||s.firstListing.baths)&&e.jsxs("div",{className:"text-sm text-gray-600",children:[s.firstListing.beds," bd â€¢ ",s.firstListing.baths," ba"]})]})]})]})})]})}function w({username:t}){const l=`agentbio.net/${t}`,[a,r]=s.useState(!1);return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(h,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ðŸŽ‰ Your Profile is Live!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Share your link on Instagram, Facebook, business cards, and everywhere you connect with clients."}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 mb-6",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Your AgentBio Link"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-4",children:l}),e.jsx(i,{onClick:()=>{navigator.clipboard.writeText(`https://${l}`),r(!0),setTimeout(()=>r(!1),2e3)},size:"lg",className:"mb-4",children:a?"Copied!":"Copy Link"})]}),e.jsxs("div",{className:"space-y-3 text-left max-w-md mx-auto",children:[e.jsx("h3",{className:"font-semibold text-center mb-4",children:"Next Steps:"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Add it to Instagram bio"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Replace your current link with your AgentBio URL"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Add more listings"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Showcase your sold properties and active listings"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Customize your theme"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Match your personal brand with colors and fonts"})]})]})]})]})}function C(){const i=t(),{user:l,profile:n}=a(),{toast:c}=r(),[d,m]=s.useState(!1);return d?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Setting up your profile..."}),e.jsx("p",{className:"text-gray-600",children:"This will only take a moment"})]})}):e.jsx(b,{onComplete:async e=>{if(!l)return c({title:"Error",description:"You must be logged in to complete onboarding",variant:"destructive"}),void i("/auth/login");m(!0);try{const a={};if(e.profileBasics.fullName&&(a.full_name=e.profileBasics.fullName),e.profileBasics.title&&(a.title=e.profileBasics.title),e.profileBasics.bio&&(a.bio=e.profileBasics.bio),e.profileBasics.phone&&(a.phone=e.profileBasics.phone),e.profileBasics.location){const s=e.profileBasics.location.split(",").map(e=>e.trim());s.length>=2&&(a.city=s[0],a.license_state=s[1])}if(e.profileBasics.photo)try{const s=e.profileBasics.photo.name.split(".").pop(),t=`avatars/${`${l.id}-${Date.now()}.${s}`}`,{error:i}=await o.storage.from("avatars").upload(t,e.profileBasics.photo);if(i)throw i;const{data:{publicUrl:r}}=o.storage.from("avatars").getPublicUrl(t);a.avatar_url=r}catch(s){}e.templateChoice&&(a.theme=e.templateChoice);const{error:r}=await o.from("profiles").update(a).eq("id",l.id);if(r)throw r;if(e.firstListing.address||e.firstListing.price)try{let s=null;if(e.firstListing.photo){const t=e.firstListing.photo.name.split(".").pop(),i=`listings/${`${l.id}-listing-${Date.now()}.${t}`}`,{error:a}=await o.storage.from("listing-images").upload(i,e.firstListing.photo);if(!a){const{data:{publicUrl:e}}=o.storage.from("listing-images").getPublicUrl(i);s=e}}const t=e.firstListing.address?.split(",").map(e=>e.trim())||[],i=t[0]||"",a=t[1]||"",r=(t[2]||"").split(" "),n=r[0]||"",c=r[1]||"",d={user_id:l.id,address:i,city:a,state:n,zip_code:c,price:e.firstListing.price||"0",bedrooms:e.firstListing.beds?parseInt(e.firstListing.beds):null,bathrooms:e.firstListing.baths?parseInt(e.firstListing.baths):null,status:e.firstListing.status||"active",featured:!0,photos:s?[s]:[]},{error:m}=await o.from("listings").insert(d)}catch(s){}try{await o.functions.invoke("send-welcome-email",{body:{user_id:l.id,email:l.email,full_name:e.profileBasics.fullName||l.user_metadata?.full_name,username:l.user_metadata?.username||"agent"}})}catch(t){}c({title:"ðŸŽ‰ Welcome to AgentBio!",description:"Your profile is ready to share. Check your email for next steps!"}),i("/dashboard",{replace:!0})}catch(s){c({title:"Error",description:s.message||"Failed to save your information. Please try again.",variant:"destructive"})}finally{m(!1)}},userProfile:n||l})}export{C as default};
