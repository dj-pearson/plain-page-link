import{F as y,K as k,u as h,s as m,a2 as d,Z as j,j as e,Q as w,R as b,T as L,V as F,a3 as S,o as f,a7 as _,B as N,L as C}from"./index-CH8a_jH7.js";/**
 * @license lucide-react v0.354.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=y("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);function D(){const{user:s}=k(),{data:t,isLoading:a}=h({queryKey:["subscription",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return null;const{data:i,error:n}=await m.from("subscriptions").select("*").eq("user_id",s.id).single();if(n)throw n;return i},enabled:!!(s!=null&&s.id)}),{data:l,isLoading:x}=h({queryKey:["usage",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return{listings:0,links:0,testimonials:0};const[i,n,r]=await Promise.all([m.from("listings").select("id",{count:"exact"}).eq("user_id",s.id),m.from("links").select("id",{count:"exact"}).eq("user_id",s.id),m.from("testimonials").select("id",{count:"exact"}).eq("user_id",s.id)]);return{listings:i.count||0,links:n.count||0,testimonials:r.count||0}},enabled:!!(s!=null&&s.id)}),c=i=>{if(!t||!l)return!1;const n=t[`max_${i}`],r=l[i];return n===-1?!0:r<n},g=i=>(t==null?void 0:t[i])||!1,o=i=>{if(!t)return 0;const n=t[`max_${i}`];return n===-1?1/0:n},u=i=>(l==null?void 0:l[i])||0;return{subscription:t,usage:l,isLoading:a||x,canAdd:c,hasFeature:g,getLimit:o,getUsage:u,getRemainingCount:i=>{const n=o(i),r=u(i);return n===1/0?1/0:Math.max(0,n-r)}}}const v={listings:{plan:"Starter",icon:d},testimonials:{plan:"Starter",icon:p},links:{plan:"Starter",icon:d},custom_domain:{plan:"Professional",icon:p},lead_export:{plan:"Starter",icon:d},analytics:{plan:"Professional",icon:d},premium_themes:{plan:"Professional",icon:p}};function P({open:s,onOpenChange:t,feature:a,currentPlan:l="Free",requiredPlan:x}){const c=v[a]||{plan:"Professional",icon:j},g=c.icon,o=x||c.plan;return e.jsx(w,{open:s,onOpenChange:t,children:e.jsxs(b,{className:"sm:max-w-md",children:[e.jsxs(L,{children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mx-auto mb-4",children:e.jsx(g,{className:"w-6 h-6 text-primary"})}),e.jsxs(F,{className:"text-center text-2xl",children:["Upgrade to unlock ",a.replace(/_/g," ")]}),e.jsxs(S,{className:"text-center pt-2",children:["You've reached the limit of your ",e.jsx(f,{variant:"secondary",children:l})," plan. Upgrade to ",e.jsx(f,{variant:"default",children:o})," to unlock this feature."]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 my-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"What you'll get:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[a==="listings"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex items-center gap-2",children:"✓ Up to 20 active listings (Starter)"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Featured property showcase"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Sold properties tracking"})]}),a==="testimonials"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex items-center gap-2",children:"✓ Up to 10 testimonials (Starter)"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Client reviews showcase"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Rating display"})]}),a==="links"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex items-center gap-2",children:"✓ Up to 15 custom links (Starter)"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Link analytics"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Custom icons"})]}),a==="lead_export"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex items-center gap-2",children:"✓ Export all leads to CSV"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ CRM integration ready"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Lead management tools"})]}),a==="custom_domain"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex items-center gap-2",children:"✓ Connect your own domain"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Professional branding"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ SSL certificate included"})]}),a==="premium_themes"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"flex items-center gap-2",children:"✓ 10+ premium themes"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ 3D animated backgrounds"}),e.jsx("li",{className:"flex items-center gap-2",children:"✓ Advanced customization"})]})]})]}),e.jsxs(_,{className:"gap-2 sm:gap-0",children:[e.jsx(N,{variant:"outline",onClick:()=>t(!1),children:"Maybe Later"}),e.jsx(C,{to:"/pricing",children:e.jsxs(N,{className:"w-full sm:w-auto",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"View Plans"]})})]})]})})}export{P as U,D as u};
