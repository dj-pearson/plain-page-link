import{j as e,r as j}from"./vendor-react-Vgz0BWSF.js";import{T as U,a as W,b as S,c as D}from"./tabs-Ykcy0_ED.js";import{aH as M,as as H,G as f,N as R,aE as X,K as q,Q as Y,ac as Q,a1 as J,e as Z,aF as _,L as T,t as V,v as $,w as k,x as F,y as P,D as ee,B as se,aa as te,a3 as B,aI as z,z as ae,$ as E}from"./index-B5HCdaX7.js";import{M as ne}from"./minus-DxW2nxiB.js";import{T as re}from"./trending-down-XMSJFW3U.js";import{L as A}from"./lightbulb-d37qMJ7-.js";import{F as K}from"./file-text-BFtIMNRA.js";import"./vendor-charts-DwHIVLWv.js";import"./vendor-ui-B_M8o0qd.js";import"./vendor-data-D8Q-8Ib3.js";import"./vendor-three-4sb3k4hC.js";import"./vendor-animation-DTV5ZUuA.js";function le(t,a){const s=M(t);return isNaN(a)?H(t,NaN):(a&&s.setDate(s.getDate()+a),s)}function ie(t,a){const s=M(t.start),n=M(t.end);let i=+s>+n;const o=i?+s:+n,l=i?n:s;l.setHours(0,0,0,0);let m=1;const u=[];for(;+l<=o;)u.push(M(l)),l.setDate(l.getDate()+m),l.setHours(0,0,0,0);return i?u.reverse():u}function I(t){const a=M(t);return a.setDate(1),a.setHours(0,0,0,0),a}function b(t,a){return le(t,-a)}function ce({metrics:t,className:a}){return e.jsx("div",{className:f("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",a),children:t.map(s=>e.jsx(oe,{metric:s},s.name))})}function oe({metric:t}){const a=()=>{switch(t.trend){case"up":return e.jsx(R,{className:"w-4 h-4"});case"down":return e.jsx(re,{className:"w-4 h-4"});case"flat":return e.jsx(ne,{className:"w-4 h-4"})}},s=()=>{switch(t.trend){case"up":return"text-green-600 bg-green-100";case"down":return"text-red-600 bg-red-100";case"flat":return"text-gray-600 bg-gray-100"}},n=()=>t.unit==="$"?`$${t.value.toLocaleString()}`:t.unit==="%"?`${t.value.toFixed(1)}%`:t.unit==="min"?`${Math.round(t.value)} min`:t.value.toLocaleString();return e.jsxs("div",{className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:t.name}),e.jsx("div",{className:f("p-2 rounded-full",s()),children:a()})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n()})}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsxs("span",{className:f("text-sm font-medium",t.trend==="up"?"text-green-600":t.trend==="down"?"text-red-600":"text-gray-600"),children:[t.change>0?"+":"",t.change.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"vs last period"})]}),t.benchmark&&e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Benchmark: ",t.unit==="$"?"$":"",t.benchmark.toLocaleString(),t.unit==="%"?"%":""]})})]})}function de({data:t,title:a,color:s="#2563eb",height:n=300,showPredictions:i=!1,className:o}){const{actualData:l,predictedData:m,maxValue:u,minValue:d}=j.useMemo(()=>{const c=t.filter(p=>!p.label),r=t.filter(p=>p.label==="predicted"),x=t.map(p=>p.value);return{actualData:c,predictedData:r,maxValue:Math.max(...x),minValue:Math.min(...x)}},[t]),v=c=>{const x=n-40,p=u-d||1;return 20+x-(c-d)/p*x},g=(c,r)=>40+c/(r-1)*720,N=(c,r=!1)=>c.length===0?"":c.map((y,C)=>({x:g(C,c.length),y:v(y.value)})).map((y,C)=>`${C===0?"M":"L"} ${y.x} ${y.y}`).join(" "),h=c=>{if(c.length===0)return"";const r=N(c),x=g(c.length-1,c.length),p=g(0,c.length),y=n-20;return`${r} L ${x} ${y} L ${p} ${y} Z`};return e.jsxs("div",{className:o,children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:a}),e.jsxs("svg",{width:"100%",height:n,viewBox:"0 0 800 300",className:"bg-white rounded-lg border",children:[e.jsx("g",{className:"grid-lines",children:[0,25,50,75,100].map(c=>{const r=20+(n-40)*(c/100);return e.jsxs("g",{children:[e.jsx("line",{x1:40,y1:r,x2:760,y2:r,stroke:"#e5e7eb",strokeWidth:1}),e.jsx("text",{x:25,y:r+4,fontSize:10,fill:"#6b7280",textAnchor:"end",children:Math.round(u-c/100*(u-d))})]},c)})}),e.jsx("path",{d:h(l),fill:s,fillOpacity:.1}),e.jsx("path",{d:N(l),fill:"none",stroke:s,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),i&&m.length>0&&e.jsx("path",{d:N(m),fill:"none",stroke:s,strokeWidth:2,strokeDasharray:"5,5",strokeOpacity:.5,strokeLinecap:"round",strokeLinejoin:"round"}),l.map((c,r)=>e.jsx("circle",{cx:g(r,l.length),cy:v(c.value),r:4,fill:"white",stroke:s,strokeWidth:2},r)),e.jsx("g",{className:"x-axis-labels",children:l.map((c,r)=>r%Math.ceil(l.length/7)===0?e.jsx("text",{x:g(r,l.length),y:n-5,fontSize:10,fill:"#6b7280",textAnchor:"middle",children:c.date},r):null)})]}),i&&m.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:s}}),e.jsx("span",{children:"Actual"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:s,opacity:.5,borderTop:`2px dashed ${s}`}}),e.jsx("span",{children:"Predicted"})]})]})]})}function ue({stages:t,className:a}){const s=t[0]?.count||1;return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Conversion Funnel"}),e.jsx("div",{className:"space-y-2",children:t.map((n,i)=>e.jsxs("div",{children:[e.jsx(me,{stage:n,maxCount:s,isFirst:i===0,isLast:i===t.length-1}),!isLast&&n.dropoff!==void 0&&n.dropoff>0&&e.jsx(xe,{count:n.dropoff,percentage:he(n,t[i+1])})]},n.name))}),e.jsxs("div",{className:"mt-6 pt-6 border-t grid grid-cols-3 gap-4",children:[e.jsx(O,{label:"Overall Conversion",value:`${t[t.length-1].percentage.toFixed(1)}%`}),e.jsx(O,{label:"Total Conversions",value:t[t.length-1].count.toLocaleString()}),e.jsx(O,{label:"Total Dropoff",value:pe(t).toLocaleString()})]})]})}function me({stage:t,maxCount:a,isFirst:s,isLast:n}){const i=t.count/a*100,o=()=>t.percentage>=75?"bg-green-500":t.percentage>=50?"bg-yellow-500":t.percentage>=25?"bg-orange-500":"bg-red-500";return e.jsx("div",{className:"relative",children:e.jsx("div",{className:f("relative mx-auto rounded-lg p-4 transition-all duration-300 hover:shadow-md",o()),style:{width:`${Math.max(i,20)}%`},children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.name}),e.jsxs("p",{className:"text-sm opacity-90",children:[t.count.toLocaleString()," leads"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[t.percentage.toFixed(1),"%"]}),!s&&e.jsx("p",{className:"text-xs opacity-90",children:"of total"})]})]})})})}function xe({count:t,percentage:a}){return e.jsx("div",{className:"flex items-center justify-center py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium text-red-600",children:t.toLocaleString()})," ","dropped off (",a.toFixed(1),"%)"]})]})})}function O({label:t,value:a}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t})]})}function he(t,a){return t.count===0?0:(t.count-a.count)/t.count*100}function pe(t){return t.length<2?0:t[0].count-t[t.length-1].count}function ge({sources:t,className:a}){const s=t.reduce((o,l)=>o+l.leads,0),n=t.reduce((o,l)=>o+l.revenue,0),i=[...t].sort((o,l)=>l.conversionRate-o.conversionRate);return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lead Sources"}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),s," leads"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-4 h-4"}),"$",n.toLocaleString()]})]})]}),e.jsx("div",{className:"space-y-4",children:i.map(o=>e.jsx(ve,{source:o,totalLeads:s},o.source))}),i.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No lead source data available"})]})]})}function ve({source:t,totalLeads:a}){const s=t.leads/a*100,n=i=>i>=20?"text-green-600":i>=10?"text-yellow-600":"text-gray-600";return e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 capitalize",children:t.source}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:f("text-lg font-bold",n(t.conversionRate)),children:[t.conversionRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"conversion"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Lead share"}),e.jsxs("span",{className:"font-medium",children:[s.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 transition-all duration-500",style:{width:`${s}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Leads"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:t.leads})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversions"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:t.conversions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",t.revenue.toLocaleString()]})]})]}),t.roi!==void 0&&e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ROI"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:f("font-semibold",t.roi>0?"text-green-600":"text-red-600"),children:[t.roi>0?"+":"",t.roi.toFixed(1),"%"]})]})]})]})}function G({insights:t,className:a}){return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(A,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Key Insights"})]}),e.jsx("div",{className:"space-y-3",children:t.map((s,n)=>e.jsx(je,{insight:s},n))}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No insights available yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Check back when you have more data"})]})]})}function je({insight:t}){const a=()=>t.includes("ðŸ“ˆ")||t.includes("ðŸš€")||t.includes("ðŸŽ¯")?e.jsx(R,{className:"w-5 h-5 text-green-600"}):t.includes("âš ï¸")||t.includes("ðŸŒ")?e.jsx(J,{className:"w-5 h-5 text-orange-600"}):t.includes("âš¡")||t.includes("ðŸŒŸ")?e.jsx(Z,{className:"w-5 h-5 text-blue-600"}):e.jsx(A,{className:"w-5 h-5 text-yellow-600"}),s=()=>t.includes("ðŸ“ˆ")||t.includes("ðŸš€")||t.includes("ðŸŽ¯")?"bg-green-50 border-green-200":t.includes("âš ï¸")||t.includes("ðŸŒ")?"bg-orange-50 border-orange-200":t.includes("âš¡")||t.includes("ðŸŒŸ")?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200";return e.jsx("div",{className:f("p-4 rounded-lg border",s()),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a()}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t})]})})}class w{static calculateKPIs(a,s){return[this.createMetric("Total Page Views",a.pageViews,"",s.pageViews),this.createMetric("Unique Visitors",a.uniqueVisitors,"",s.uniqueVisitors),this.createMetric("Total Leads",a.leads,"",s.leads),this.createMetric("Conversions",a.conversions,"",s.conversions),this.createMetric("Revenue",a.revenue,"$",s.revenue),this.createMetric("Avg Response Time",a.avgResponseTime,"min",s.avgResponseTime,!0),this.createMetric("Conversion Rate",this.calculateConversionRate(a.leads,a.conversions),"%",this.calculateConversionRate(s.leads,s.conversions)),this.createMetric("Lead-to-Visitor Rate",this.calculateConversionRate(a.uniqueVisitors,a.leads),"%",this.calculateConversionRate(s.uniqueVisitors,s.leads))]}static createMetric(a,s,n,i,o=!1){const l=this.calculatePercentageChange(s,i),m=this.determineTrend(l,o);return{name:a,value:s,unit:n,change:l,trend:m}}static calculatePercentageChange(a,s){return s===0?a>0?100:0:(a-s)/s*100}static determineTrend(a,s=!1){return Math.abs(a)<2?"flat":s?a<0?"up":"down":a>0?"up":"down"}static calculateConversionRate(a,s){return a===0?0:s/a*100}static generateTimeSeries(a,s,n){return ie({start:a,end:s}).map(o=>({date:_(o,"MMM d"),value:n(o)}))}static calculateFunnel(a){const{visitors:s,viewed:n,contacted:i,qualified:o,converted:l}=a;return[{name:"Visitors",count:s,percentage:100},{name:"Viewed Listing",count:n,percentage:this.calculateConversionRate(s,n),dropoff:s-n},{name:"Contacted",count:i,percentage:this.calculateConversionRate(s,i),dropoff:n-i},{name:"Qualified",count:o,percentage:this.calculateConversionRate(s,o),dropoff:i-o},{name:"Converted",count:l,percentage:this.calculateConversionRate(s,l),dropoff:o-l}]}static analyzeLeadSources(a){return a.map(s=>({source:s.source,leads:s.leads,conversions:s.conversions,conversionRate:this.calculateConversionRate(s.leads,s.conversions),revenue:s.revenue,roi:s.cost?(s.revenue-s.cost)/s.cost*100:void 0}))}static rankListings(a){return a.map(s=>({...s,conversionRate:this.calculateConversionRate(s.views,s.leads)})).sort((s,n)=>n.conversionRate-s.conversionRate)}static predictTrend(a,s=7){if(a.length<2)return[];const n=a.length,i=a.map((c,r)=>r),o=a.map(c=>c.value),l=i.reduce((c,r)=>c+r,0),m=o.reduce((c,r)=>c+r,0),u=i.reduce((c,r,x)=>c+r*o[x],0),d=i.reduce((c,r)=>c+r*r,0),v=(n*u-l*m)/(n*d-l*l),g=(m-v*l)/n,N=[],h=new Date(a[a.length-1].date);for(let c=1;c<=s;c++){const r=n+c-1,x=Math.max(0,Math.round(v*r+g)),p=new Date(h);p.setDate(p.getDate()+c),N.push({date:_(p,"MMM d"),value:x,label:"predicted"})}return N}static calculateEngagementScore(a){const{avgTimeOnPage:s,bounceRate:n,pagesPerSession:i,returnVisitorRate:o}=a,l=Math.min(s/180*25,25),m=Math.max((100-n)/4,0),u=Math.min(i/5*25,25),d=o/100*25;return Math.round(l+m+u+d)}static generateInsights(a,s,n){const i=[],o=this.calculatePercentageChange(a.leads,s.leads);o>20?i.push(`ðŸ“ˆ Lead generation is up ${Math.round(o)}% compared to last period`):o<-20&&i.push(`âš ï¸ Lead generation is down ${Math.abs(Math.round(o))}% - consider increasing marketing efforts`);const l=this.calculateConversionRate(a.leads,a.conversions),m=this.calculateConversionRate(s.leads,s.conversions);if(l>m+5&&i.push(`ðŸŽ¯ Conversion rate improved to ${l.toFixed(1)}% - keep up the good work!`),a.avgResponseTime<5?i.push("âš¡ Excellent response time! You're responding in under 5 minutes"):a.avgResponseTime>60&&i.push(`ðŸŒ Response time is high (${Math.round(a.avgResponseTime)} min) - faster responses increase conversions`),n.length>0){const d=n.reduce((v,g)=>g.conversionRate>v.conversionRate?g:v);d.conversionRate>15&&i.push(`ðŸŒŸ ${d.source} is your best performing source at ${d.conversionRate.toFixed(1)}% conversion rate`)}const u=this.calculatePercentageChange(a.uniqueVisitors,s.uniqueVisitors);return u>30&&i.push(`ðŸš€ Traffic is surging! Up ${Math.round(u)}% - great time to capture leads`),i}static exportToCSV(a,s){if(a.length===0)return;const n=Object.keys(a[0]),i=[n.join(","),...a.map(u=>n.map(d=>JSON.stringify(u[d]||"")).join(","))].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),m=URL.createObjectURL(o);l.setAttribute("href",m),l.setAttribute("download",`${s}_${Date.now()}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}const fe=w.calculateKPIs,Ne=w.generateTimeSeries,be=w.calculateFunnel,ye=w.analyzeLeadSources,we=w.predictTrend,Re=w.generateInsights,Ce=w.exportToCSV;function Me({onGenerateReport:t,className:a}){const[s,n]=j.useState("leads"),[i,o]=j.useState("30d"),[l,m]=j.useState("csv"),[u,d]=j.useState(!1),v=[{value:"leads",label:"Leads Report"},{value:"listings",label:"Listings Performance"},{value:"conversions",label:"Conversion Analytics"},{value:"sources",label:"Lead Sources"},{value:"performance",label:"Overall Performance"}],g=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}],N=[{value:"csv",label:"CSV"},{value:"pdf",label:"PDF (Coming Soon)",disabled:!0},{value:"excel",label:"Excel (Coming Soon)",disabled:!0}],h=()=>{const r=new Date;switch(i){case"7d":return{start:b(r,7),end:r};case"30d":return{start:b(r,30),end:r};case"90d":return{start:b(r,90),end:r};case"this_month":return{start:I(r),end:z(r)};case"last_month":const x=b(I(r),1);return{start:I(x),end:z(x)};default:return{start:b(r,30),end:r}}},c=async()=>{d(!0);try{const{start:r,end:x}=h(),y=await t({reportType:s,dateRange:i,metrics:[],format:l,startDate:r,endDate:x});if(l==="csv"){const C=`${s}_report_${l(r,"yyyy-MM-dd")}_to_${l(x,"yyyy-MM-dd")}`;Ce(y,C),B.success("Report exported successfully!")}}catch(r){console.error("Report generation error:",r),B.error("Failed to generate report")}finally{d(!1)}};return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(K,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Custom Report Builder"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Report Type"}),e.jsxs(V,{value:s,onValueChange:r=>n(r),children:[e.jsx($,{children:e.jsx(k,{})}),e.jsx(F,{children:v.map(r=>e.jsx(P,{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"Date Range"]}),e.jsxs(V,{value:i,onValueChange:r=>o(r),children:[e.jsx($,{children:e.jsx(k,{})}),e.jsx(F,{children:g.map(r=>e.jsx(P,{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Export Format"}),e.jsxs(V,{value:l,onValueChange:r=>m(r),children:[e.jsx($,{children:e.jsx(k,{})}),e.jsx(F,{children:N.map(r=>e.jsx(P,{value:r.value,disabled:r.disabled,children:r.label},r.value))})]})]}),e.jsxs(se,{onClick:c,disabled:u,className:"w-full gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),u?"Generating...":"Generate Report"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Report Preview"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Type: ",e.jsx("span",{className:"font-medium",children:s})]}),e.jsxs("p",{children:["Range:"," ",e.jsxs("span",{className:"font-medium",children:[l(h().start,"MMM d, yyyy")," ","-"," ",l(h().end,"MMM d, yyyy")]})]}),e.jsxs("p",{children:["Format:"," ",e.jsx("span",{className:"font-medium uppercase",children:l})]})]})]})]})}const Se=()=>{const t=new Date;return{current:{pageViews:3542,uniqueVisitors:1876,leads:156,conversions:23,revenue:156e3,avgResponseTime:12,period:"month",startDate:b(t,30),endDate:t},previous:{pageViews:2890,uniqueVisitors:1520,leads:128,conversions:18,revenue:122e3,avgResponseTime:18,period:"month",startDate:b(t,60),endDate:b(t,30)}}},De=()=>{const t=new Date;return Ne(b(t,30),t,a=>{const n=Math.random()*8,i=(a.getTime()-b(t,30).getTime())/(1e3*60*60*24*30);return Math.round(5+n+i*5)})},Le=()=>[{source:"zillow",leads:45,conversions:12,revenue:85e3,cost:5e3},{source:"realtor",leads:38,conversions:8,revenue:62e3,cost:4e3},{source:"facebook",leads:32,conversions:5,revenue:38e3,cost:3500},{source:"google",leads:28,conversions:4,revenue:31e3,cost:4500},{source:"website",leads:25,conversions:3,revenue:28e3,cost:1e3},{source:"referral",leads:18,conversions:4,revenue:45e3,cost:0}];function ze(){const[t,a]=j.useState(!0),{current:s,previous:n}=j.useMemo(()=>Se(),[]),i=j.useMemo(()=>De(),[]),o=j.useMemo(()=>we(i,7),[i]),l=[...i,...t?o:[]],m=j.useMemo(()=>fe(s,n),[s,n]),u=j.useMemo(()=>be({visitors:s.uniqueVisitors,viewed:Math.round(s.uniqueVisitors*.7),contacted:s.leads,qualified:Math.round(s.leads*.4),converted:s.conversions}),[s]),d=j.useMemo(()=>ye(Le()),[]),v=j.useMemo(()=>Re(s,n,d),[s,n,d]),g=async N=>{switch(await new Promise(h=>setTimeout(h,1e3)),N.reportType){case"leads":return Array.from({length:50},(h,c)=>({id:`L${c+1}`,name:`Lead ${c+1}`,email:`lead${c+1}@example.com`,source:d[c%d.length].source,status:["new","contacted","qualified","converted"][Math.floor(Math.random()*4)],score:Math.floor(Math.random()*100),created:new Date().toISOString()}));case"sources":return d.map(h=>({source:h.source,leads:h.leads,conversions:h.conversions,conversion_rate:`${h.conversionRate.toFixed(1)}%`,revenue:h.revenue,roi:h.roi?`${h.roi.toFixed(1)}%`:"N/A"}));default:return[{metric:"Page Views",current:s.pageViews,previous:n.pageViews,change:`${((s.pageViews-n.pageViews)/n.pageViews*100).toFixed(1)}%`},{metric:"Leads",current:s.leads,previous:n.leads,change:`${((s.leads-n.leads)/n.leads*100).toFixed(1)}%`},{metric:"Conversions",current:s.conversions,previous:n.conversions,change:`${((s.conversions-n.conversions)/n.conversions*100).toFixed(1)}%`}]}};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your performance and gain insights"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(ae,{variant:"outline",className:"px-4 py-2",children:"Last 30 Days"})})]}),e.jsx(ce,{metrics:m}),e.jsxs(U,{defaultValue:"overview",className:"w-full",children:[e.jsxs(W,{className:"grid w-full grid-cols-4 max-w-2xl",children:[e.jsxs(S,{value:"overview",className:"gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Overview"]}),e.jsxs(S,{value:"funnel",className:"gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Funnel"]}),e.jsxs(S,{value:"sources",className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Sources"]}),e.jsxs(S,{value:"reports",className:"gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Reports"]})]}),e.jsx(D,{value:"overview",className:"mt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(de,{data:l,title:"Lead Generation Trend",color:"#2563eb",showPredictions:t})}),e.jsx(G,{insights:v})]})}),e.jsx(D,{value:"funnel",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ue,{stages:u}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(G,{insights:v}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Optimization Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Improve Viewed â†’ Contacted rate with clearer CTAs"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Reduce dropoff with faster response times"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Qualify leads better with targeted questions"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Nurture qualified leads with follow-ups"})]})]})]})]})]})}),e.jsx(D,{value:"sources",className:"mt-6",children:e.jsx(ge,{sources:d})}),e.jsx(D,{value:"reports",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Reports"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(L,{title:"Leads Report",description:"Detailed lead data with scores and sources",icon:e.jsx(q,{className:"w-6 h-6"})}),e.jsx(L,{title:"Performance Report",description:"Overall performance metrics and trends",icon:e.jsx(R,{className:"w-6 h-6"})}),e.jsx(L,{title:"Sources Report",description:"Lead source analysis with ROI",icon:e.jsx(E,{className:"w-6 h-6"})}),e.jsx(L,{title:"Conversion Report",description:"Conversion funnel and rates",icon:e.jsx(R,{className:"w-6 h-6"})})]})]})}),e.jsx(Me,{onGenerateReport:g})]})})]})]})}function L({title:t,description:a,icon:s}){return e.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:s}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-600",children:a})]})]})})}export{ze as default};
