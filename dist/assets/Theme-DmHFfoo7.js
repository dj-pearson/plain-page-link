import{j as e,r as s}from"./react-vendor-CGQ4_CNL.js";import{C as a,c as l,n as t,B as r,j as i,L as o,O as n,Q as d,R as c,I as m,U as x,V as h,r as p,s as u,z as j,G as f,H as g,J as b,f as y,g as N,h as v,S as w,a as C,b as k,d as P,e as S}from"./ui-components-BfOVGuaI.js";import{b as F,E as z,aG as T,aE as B,am as E,aH as D,aI as H}from"./icons-BX9Iz4zT.js";import{u as O,a as A,s as L}from"./index--qMdoTQh.js";import{u as M,U as V}from"./UpgradeModal-vYg5mrW8.js";import"./charts-D_q0pR-d.js";import"./utils-wmY8hpgz.js";import"./supabase-D5NmozDF.js";import"./data-O5cD9hjv.js";import"./three-addons-DQ5hBofG.js";import"./three-BxgHQpUo.js";import"./forms-BzNDvv3d.js";function R({theme:s,isSelected:o,onSelect:n,onPreview:d}){return e.jsxs(a,{className:l("relative cursor-pointer transition-all hover:shadow-lg",o&&"ring-2 ring-primary"),onClick:()=>n(s),children:[o&&e.jsx("div",{className:"absolute top-2 right-2 z-10 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:e.jsx(F,{className:"w-4 h-4 text-white"})}),e.jsxs(t,{className:"p-0",children:[e.jsxs("div",{className:"h-32 p-4 rounded-t-lg relative overflow-hidden",style:{backgroundColor:s.colors.background},children:[s.has3D&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-pink-500/10 animate-pulse"}),e.jsxs("div",{className:"flex items-start gap-2 mb-3 relative z-10",children:[e.jsx("div",{className:"w-16 h-16 rounded-full",style:{backgroundColor:s.colors.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 rounded",style:{backgroundColor:s.colors.foreground,opacity:.8,width:"70%"}}),e.jsx("div",{className:"h-2 rounded",style:{backgroundColor:s.colors.muted,width:"90%"}})]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.primary},title:"Primary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.secondary},title:"Secondary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.accent},title:"Accent"})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[s.isPremium&&e.jsx(r,{variant:"secondary",className:"text-xs",children:"Pro"}),s.has3D&&e.jsx(r,{variant:"outline",className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:"3D"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Fonts:"})," ",s.fonts.heading,s.fonts.heading!==s.fonts.body&&` / ${s.fonts.body}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:o?"default":"outline",size:"sm",className:"flex-1",onClick:e=>{e.stopPropagation(),n(s)},children:o?"Selected":"Apply"}),d&&e.jsx(i,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),d(s)},children:"Preview"})]})]})]})]})}const $=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#1F2937","#6B7280"];function q({label:a,value:l,onChange:t,description:r}){const[x,h]=s.useState(!1),p=e=>{t(e)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:a,children:a}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{open:x,onOpenChange:h,children:[e.jsx(d,{asChild:!0,children:e.jsx(i,{variant:"outline",className:"w-12 h-10 p-0 border-2",style:{backgroundColor:l},"aria-label":`Pick ${a}`})}),e.jsx(c,{className:"w-64 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Preset Colors"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:$.map(s=>e.jsx("button",{className:"w-10 h-10 rounded border-2 hover:scale-110 transition-transform",style:{backgroundColor:s},onClick:()=>{p(s),h(!1)},"aria-label":`Select ${s}`},s))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:l,onChange:e=>p(e.target.value),className:"w-12 h-10 rounded border cursor-pointer"}),e.jsx(m,{type:"text",value:l,onChange:e=>p(e.target.value),placeholder:"#000000",className:"flex-1 font-mono text-sm"})]})]})]})})]}),e.jsx(m,{type:"text",value:l,onChange:e=>p(e.target.value),placeholder:"#000000",className:"flex-1 font-mono"})]})]})}const I=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Playfair Display","Merriweather","Bebas Neue","Source Sans Pro"];function Y(){const{toast:l}=O(),{user:n}=A(),[d,c]=s.useState(x()),[m,F]=s.useState(d.colors),[$,Y]=s.useState(d.fonts),[_,J]=s.useState(!1),[U,G]=s.useState(!1),[Q,W]=s.useState(!1),[K,X]=s.useState("desktop"),{subscription:Z}=M();s.useEffect(()=>{ee()},[n]);const ee=async()=>{if(n)try{const{data:e,error:s}=await L.from("profiles").select("theme").eq("id",n.id).single();if(s)throw s;if(e?.theme){let s;if("string"==typeof e.theme)if(e.theme.startsWith("{"))s=JSON.parse(e.theme);else{s=h.find(s=>s.id===e.theme)||h[0]}else s=e.theme;c(s),F(s.colors),Y(s.fonts),p(s)}}catch(e){const s=h[0];c(s),F(s.colors),Y(s.fonts)}},se=async e=>{e.isPremium&&"free"===Z?.plan_name?W(!0):(c(e),F(e.colors),Y(e.fonts),J(!1),p(e))},ae=(e,s)=>{F(a=>({...a,[e]:s})),J(!0)},le=(e,s)=>{Y(a=>({...a,[e]:s})),J(!0)},te=h.filter(e=>!e.isPremium),re=h.filter(e=>e.isPremium);return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Theme Customization"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1",children:"Customize your profile's look and feel"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:async()=>{if(n)try{const{data:e,error:s}=await L.from("profiles").select("username").eq("id",n.id).single();if(s)throw s;e?.username&&window.open(`/${e.username}`,"_blank")}catch(e){l({title:"Error",description:"Failed to open preview",variant:"destructive"})}else l({title:"Error",description:"You must be logged in to preview",variant:"destructive"})},title:"Open your public profile in a new tab to see your theme",className:"flex-1 sm:flex-none",children:[e.jsx(z,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Preview Live"})]}),_&&e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>{F(d.colors),Y(d.fonts),J(!1),l({title:"Reset to default",description:"Theme has been reset to its default settings."})},className:"flex-1 sm:flex-none",children:[e.jsx(T,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),e.jsxs(i,{size:"sm",onClick:async()=>{if(n){G(!0);try{const e={...d,colors:m,fonts:$},{error:s}=await L.from("profiles").update({theme:JSON.stringify(e)}).eq("id",n.id);if(s)throw s;p(e),l({title:"Theme saved!",description:"Your profile theme has been updated successfully."}),J(!1)}catch(e){l({title:"Error",description:"Failed to save theme. Please try again.",variant:"destructive"})}finally{G(!1)}}else l({title:"Error",description:"You must be logged in to save themes",variant:"destructive"})},disabled:U,className:"flex-1 sm:flex-none",children:[U?e.jsx(u,{size:"sm",className:"mr-2"}):e.jsx(B,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Save Theme"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"text-xl sm:text-2xl flex-shrink-0",children:"‚ú®"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to see your theme changes:"}),e.jsxs("ol",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 space-y-0.5 sm:space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Select a theme below and click ",e.jsx("strong",{children:'"Save Theme"'})]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:'"Preview Live"'})," button above to open your public profile in a new tab"]}),e.jsx("li",{children:"Premium themes with 3D effects will show animated backgrounds on your public page!"})]}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1 sm:mt-2",children:["üí° Note: Theme effects only appear on your ",e.jsx("strong",{children:"public profile page"}),", not in this dashboard."]})]})]})}),e.jsxs(j,{defaultValue:"presets",className:"space-y-6",children:[e.jsxs(f,{children:[e.jsxs(g,{value:"presets",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Theme Presets"]}),e.jsxs(g,{value:"customize",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Customize"]})]}),e.jsxs(b,{value:"presets",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Free Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:te.map(s=>e.jsx(R,{theme:s,isSelected:d.id===s.id,onSelect:se},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Premium Themes"}),e.jsx(r,{children:"Pro"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:re.map(s=>e.jsx(R,{theme:s,isSelected:d.id===s.id,onSelect:se},s.id))})]})]}),e.jsxs(b,{value:"customize",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(a,{children:[e.jsxs(y,{className:"pb-3 sm:pb-4",children:[e.jsx(N,{className:"text-base sm:text-lg",children:"Colors"}),e.jsx(v,{className:"text-xs sm:text-sm",children:"Customize the color scheme of your profile"})]}),e.jsxs(t,{className:"space-y-3 sm:space-y-4",children:[e.jsx(q,{label:"Primary Color",value:m.primary,onChange:e=>ae("primary",e),description:"Main brand color (buttons, links)"}),e.jsx(q,{label:"Secondary Color",value:m.secondary,onChange:e=>ae("secondary",e),description:"Secondary accent color"}),e.jsx(q,{label:"Accent Color",value:m.accent,onChange:e=>ae("accent",e),description:"Highlights and CTAs"}),e.jsx(q,{label:"Background Color",value:m.background,onChange:e=>ae("background",e),description:"Page background"}),e.jsx(q,{label:"Text Color",value:m.foreground,onChange:e=>ae("foreground",e),description:"Primary text color"})]})]}),e.jsxs(a,{children:[e.jsxs(y,{className:"pb-3 sm:pb-4",children:[e.jsx(N,{className:"text-base sm:text-lg",children:"Typography"}),e.jsx(v,{className:"text-xs sm:text-sm",children:"Select fonts for headings and body text"})]}),e.jsxs(t,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"heading-font",children:"Heading Font"}),e.jsxs(w,{value:$.heading,onValueChange:e=>le("heading",e),children:[e.jsx(C,{id:"heading-font",children:e.jsx(k,{})}),e.jsx(P,{children:I.map(s=>e.jsx(S,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for titles and headings"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"body-font",children:"Body Font"}),e.jsxs(w,{value:$.body,onValueChange:e=>le("body",e),children:[e.jsx(C,{id:"body-font",children:e.jsx(k,{})}),e.jsx(P,{children:I.map(s=>e.jsx(S,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for paragraphs and text"})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Preview"}),e.jsx("h3",{className:"text-2xl font-bold",style:{fontFamily:$.heading,color:m.primary},children:"Your Profile Heading"}),e.jsx("p",{className:"text-sm",style:{fontFamily:$.body,color:m.foreground},children:"This is how your body text will appear on your profile. It should be readable and professional."})]})]})]})]}),e.jsxs(a,{children:[e.jsx(y,{className:"pb-3 sm:pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base sm:text-lg",children:"Live Preview"}),e.jsx(v,{className:"text-xs sm:text-sm",children:"See how your theme will look on different devices"})]}),e.jsxs("div",{className:"flex gap-1 bg-muted p-1 rounded-lg",children:[e.jsxs(i,{variant:"desktop"===K?"default":"ghost",size:"sm",onClick:()=>X("desktop"),className:"gap-1.5",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Desktop"})]}),e.jsxs(i,{variant:"mobile"===K?"default":"ghost",size:"sm",onClick:()=>X("mobile"),className:"gap-1.5",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Mobile"})]})]})]})}),e.jsxs(t,{children:[e.jsx("div",{className:"flex justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-lg p-4 sm:p-8",children:e.jsxs("div",{className:"rounded-lg p-4 sm:p-6 space-y-3 sm:space-y-4 transition-all duration-300 "+("mobile"===K?"w-full max-w-[375px]":"w-full"),style:{backgroundColor:m.background,boxShadow:"mobile"===K?"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)":"none"},children:[e.jsxs("div",{className:"flex items-start "+("mobile"===K?"flex-col items-center text-center":"gap-4"),children:[e.jsx("div",{className:"rounded-full "+("mobile"===K?"w-16 h-16 mb-3":"w-20 h-20"),style:{backgroundColor:m.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"font-bold "+("mobile"===K?"text-xl":"text-2xl"),style:{fontFamily:$.heading,color:m.foreground},children:"Agent Name"}),e.jsx("p",{className:"text-sm",style:{fontFamily:$.body,color:m.mutedForeground},children:"Realtor¬Æ | Luxury Home Specialist"})]})]}),e.jsxs("div",{className:`flex ${"mobile"===K?"flex-col w-full":"flex-wrap"} gap-2`,children:[e.jsx("button",{className:"py-2 rounded-lg text-white text-xs sm:text-sm font-medium min-h-[44px] "+("mobile"===K?"w-full px-4":"px-3 sm:px-4"),style:{backgroundColor:m.primary},children:"Primary Button"}),e.jsx("button",{className:"py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px] "+("mobile"===K?"w-full px-4":"px-3 sm:px-4"),style:{backgroundColor:m.secondary,color:"white"},children:"Secondary Button"}),"desktop"===K&&e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px]",style:{backgroundColor:m.accent,color:"white"},children:"Accent Button"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:m.card},children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",style:{fontFamily:$.heading,color:m.cardForeground},children:"Property Card"}),e.jsx("p",{className:"text-xs",style:{fontFamily:$.body,color:m.mutedForeground},children:"mobile"===K?"Mobile view":"This is how property cards will appear with your selected theme."})]})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"mobile"===K?"üì± Viewing mobile preview (375px wide)":"üñ•Ô∏è Viewing desktop preview (full width)"})})]})]})]})]}),e.jsx(V,{open:Q,onOpenChange:W,feature:"premium_themes",currentPlan:Z?.plan_name||"Free",requiredPlan:"Professional"})]})}export{Y as default};
