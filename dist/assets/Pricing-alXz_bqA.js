import{u as f,s as d,r as y,j as e,S as N,P as b,C as o,Z as w,b as _,c as v,d as k,e as C,f as m,g as P,B as $,L as F,a as q}from"./index-CH8a_jH7.js";import{S}from"./switch-BZnz4g4b.js";import{u as U}from"./use-toast-DTZfmZso.js";const A=()=>{var x,h;const{data:a}=f({queryKey:["session"],queryFn:async()=>{const{data:i}=await d.auth.getSession();return i.session}}),{data:t,isLoading:l}=f({queryKey:["user-subscription",(x=a==null?void 0:a.user)==null?void 0:x.id],queryFn:async()=>{var s;if(!((s=a==null?void 0:a.user)!=null&&s.id))return null;const{data:i,error:r}=await d.rpc("get_user_plan",{_user_id:a.user.id});if(r)throw r;return i},enabled:!!((h=a==null?void 0:a.user)!=null&&h.id)}),{data:c}=f({queryKey:["subscription-plans"],queryFn:async()=>{const{data:i,error:r}=await d.from("subscription_plans").select("*").eq("is_active",!0).order("sort_order");if(r)throw r;return i}});return{subscription:t,plans:c,isLoading:l,checkLimit:(i,r)=>{if(!(t!=null&&t.limits))return r<3;const s=t.limits[i];return s===-1?!0:s===void 0?!1:r<s},hasFeature:i=>t!=null&&t.features?t.features[i]===!0:!1,isPro:(t==null?void 0:t.plan_name)==="professional"||(t==null?void 0:t.plan_name)==="team"||(t==null?void 0:t.plan_name)==="enterprise",isTeam:(t==null?void 0:t.plan_name)==="team"||(t==null?void 0:t.plan_name)==="enterprise"}};function E(){const[a,t]=y.useState(!1),{plans:l,subscription:c}=A(),{toast:p}=U(),g={"@context":"https://schema.org","@type":"ProductGroup",name:"AgentBio Subscription Plans",description:"Choose the perfect plan for your real estate business"},x=async s=>{try{const{data:{session:n}}=await d.auth.getSession();if(!n){p({title:"Authentication required",description:"Please sign in to subscribe",variant:"destructive"});return}const{data:u,error:j}=await d.functions.invoke("create-checkout-session",{body:{priceId:a?s.replace("monthly","yearly"):s,successUrl:`${window.location.origin}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/pricing`}});if(j)throw j;u.url&&(window.location.href=u.url)}catch{p({title:"Error",description:"Failed to create checkout session",variant:"destructive"})}},h=s=>{const n=a?s.price_yearly:s.price_monthly;return n===0?"Free":`$${n}`},i=()=>a?"/year":"/month",r=s=>(c==null?void 0:c.plan_name)===s;return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Pricing - AgentBio Professional Plans",description:"Choose the perfect plan for your real estate business. Start free and scale as you grow with AgentBio.",keywords:["real estate pricing","agent subscriptions","link in bio plans"],canonicalUrl:`${window.location.origin}/pricing`,schema:g}),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(b,{}),e.jsx("div",{className:"bg-gradient-to-br from-background via-background to-primary/5 py-20 px-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Choose Your Plan"}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Start free and scale as you grow"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("span",{className:a?"text-muted-foreground":"font-semibold",children:"Monthly"}),e.jsx(S,{checked:a,onCheckedChange:t}),e.jsxs("span",{className:a?"font-semibold":"text-muted-foreground",children:["Yearly ",e.jsx("span",{className:"text-primary text-sm",children:"(Save 17%)"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:l==null?void 0:l.map(s=>e.jsxs(o,{className:`relative ${s.name==="professional"?"border-primary shadow-lg shadow-primary/20 scale-105":""}`,children:[s.name==="professional"&&e.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-4 py-1 rounded-full text-sm font-semibold flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Most Popular"]}),e.jsxs(_,{children:[e.jsx(v,{className:"text-2xl capitalize",children:s.name}),e.jsxs(k,{children:[e.jsx("span",{className:"text-4xl font-bold text-foreground",children:h(s)}),s.price_monthly>0&&e.jsx("span",{className:"text-muted-foreground",children:i()}),s.name==="team"&&e.jsx("div",{className:"text-sm mt-2",children:"per agent (5 minimum)"})]})]}),e.jsx(C,{children:e.jsxs("ul",{className:"space-y-3",children:[s.limits.listings!==void 0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm",children:[s.limits.listings===-1?"Unlimited":s.limits.listings," active listings"]})]}),s.limits.links!==void 0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm",children:[s.limits.links===-1?"Unlimited":s.limits.links," custom links"]})]}),s.limits.testimonials!==void 0&&s.limits.testimonials>0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm",children:[s.limits.testimonials===-1?"Unlimited":s.limits.testimonials," testimonials"]})]}),s.limits.analytics_days&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm",children:[s.limits.analytics_days===-1?"Unlimited":`${s.limits.analytics_days}-day`," analytics"]})]}),Object.entries(s.features).map(([n,u])=>u&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm capitalize",children:n.replace(/_/g," ")})]},n))]})}),e.jsx(P,{children:e.jsx($,{className:"w-full",variant:s.name==="professional"?"default":"outline",disabled:r(s.name)||s.name==="enterprise"||!s.stripe_price_id,onClick:()=>s.stripe_price_id&&x(s.stripe_price_id),asChild:s.name==="free",children:s.name==="free"?e.jsx(F,{to:"/register",children:"Get Started"}):r(s.name)?"Current Plan":s.name==="enterprise"?"Contact Sales":s.stripe_price_id?"Subscribe":"Coming Soon"})})]},s.id))}),e.jsxs("div",{className:"mt-16 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Add-Ons Available"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:[e.jsxs(o,{className:"p-4",children:[e.jsx("p",{className:"font-semibold",children:"Premium Themes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"$15 one-time"})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("p",{className:"font-semibold",children:"MLS Integration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"$25/month"})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("p",{className:"font-semibold",children:"CRM Connectors"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"$20/month each"})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("p",{className:"font-semibold",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"$15/month"})]})]})]})]})}),e.jsx(q,{})]})]})}export{E as default};
