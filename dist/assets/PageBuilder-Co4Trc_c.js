import{a5 as U,s as b,bt as ve,ac as x,a as fe,p as ee,r as w,j as e,B as j,C as H,bg as te,N as E,aY as J,m as G,aq as je,ad as be,ae as we,ap as ke,af as Ne,ag as Se,n as Ce,L as u,T as K,D as C,F as P,G as B,J as T,K as m,I as y,A as Pe,E as Be}from"./index-C8-3SfN2.js";import{P as q}from"./plus-DslOnaEv.js";import{S as Te}from"./square-pen-mLT50dSR.js";import{T as W}from"./trash-2-Bh7l43Cd.js";import{p as Ie,g as Fe,B as Le}from"./themeUtils-P8gRF9P_.js";import{S as F}from"./switch-CafbPkce.js";import{T as Me,a as De,b as X,c as Q}from"./tabs-6q3lkOY5.js";import{S as ze}from"./settings-CjA9If-o.js";import{M as Ae}from"./monitor-DVyT9FJU.js";import{S as Ee}from"./smartphone-CdaZANPQ.js";import{S as qe}from"./save-B9_ib3Ma.js";import{G as _e}from"./grip-vertical-CC0sxLu1.js";import{C as He}from"./copy-qNKKIF4-.js";import"./square-B35CbPXa.js";import"./checkbox-B2bv9NoZ.js";import"./twitter-8AACRdZH.js";import"./play---SNR-FN.js";import"./image-DQSZKXWR.js";const Ve=U("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);const Re=U("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);async function Ye(a){const{data:s,error:t}=await b.from("profiles").select("*").eq("id",a).single();return t?(console.error("Error fetching profile:",t),null):s}async function Oe(a){const{data:s,error:t}=await b.from("links").select("*").eq("user_id",a).eq("is_active",!0).order("position");return t?(console.error("Error fetching links:",t),[]):s||[]}function $e(a){const s=a.toLowerCase();return s.includes("instagram.com")?"instagram":s.includes("facebook.com")?"facebook":s.includes("twitter.com")||s.includes("x.com")?"twitter":s.includes("linkedin.com")?"linkedin":s.includes("youtube.com")?"youtube":s.includes("tiktok.com")?"tiktok":s.includes("zillow.com")?"zillow":s.includes("realtor.com")?"realtor":null}function Ge(a){return a.map(s=>{const t=$e(s.url);return t?{id:s.id,platform:t,url:s.url,username:s.title}:null}).filter(s=>s!==null)}async function We(a,s){const t=await Ye(s);return t?{...a,title:t.full_name||t.username||a.title,subtitle:a.subtitle,description:t.bio||a.description,avatarUrl:t.avatar_url||a.avatarUrl}:a}async function Ke(a,s){const t=await Oe(s),i=Ge(t);return i.length>0?{...a,links:i}:a}async function Je(a,s){return{...a,title:"My Featured Properties",filter:"active",maxItems:6}}async function Xe(a,s){return a}async function Qe(a,s){try{switch(a.type){case"bio":return await We(a,s);case"social":return await Ke(a,s);case"listings":return await Je(a,s);case"contact":return await Xe(a,s);default:return a}}catch(t){return console.error("Error auto-populating block:",t),a}}class Ze{createNewPage(s,t){return{id:this.generateId(),userId:s,slug:t,title:"My Link-in-Bio Page",description:"Real Estate Professional",blocks:[],theme:this.getDefaultTheme(),seo:{title:"My Link-in-Bio Page",description:"Real Estate Professional",keywords:["real estate","agent","properties"],twitterCard:"summary_large_image"},published:!1,createdAt:new Date,updatedAt:new Date}}getDefaultTheme(){return{name:"Default",preset:"modern",colors:{primary:"#2563eb",secondary:"#10b981",background:"#ffffff",text:"#1f2937",accent:"#f59e0b"},fonts:{heading:"Inter",body:"Inter"},borderRadius:"medium",spacing:"normal"}}async addBlock(s,t,i,l){const r=this.getBlockTemplate(t);if(!r)throw new Error(`Unknown block type: ${t}`);let o=r.defaultConfig;l&&(o=await Qe(r.defaultConfig,l));const c={id:this.generateId(),type:t,order:i!==void 0?i:s.blocks.length,visible:!0,config:o},h=[...s.blocks];return i!==void 0?(h.splice(i,0,c),h.forEach((k,L)=>{k.order=L})):h.push(c),{...s,blocks:h,updatedAt:new Date}}removeBlock(s,t){const i=s.blocks.filter(l=>l.id!==t).map((l,r)=>({...l,order:r}));return{...s,blocks:i,updatedAt:new Date}}updateBlock(s,t,i){const l=s.blocks.map(r=>r.id===t?{...r,config:{...r.config,...i}}:r);return{...s,blocks:l,updatedAt:new Date}}reorderBlocks(s,t,i){const l=[...s.blocks],[r]=l.splice(t,1);return l.splice(i,0,r),l.forEach((o,c)=>{o.order=c}),{...s,blocks:l,updatedAt:new Date}}toggleBlockVisibility(s,t){const i=s.blocks.map(l=>l.id===t?{...l,visible:!l.visible}:l);return{...s,blocks:i,updatedAt:new Date}}duplicateBlock(s,t){const i=s.blocks.find(o=>o.id===t);if(!i)return s;const l={...i,id:this.generateId(),order:i.order+1},r=[...s.blocks];return r.splice(i.order+1,0,l),r.forEach((o,c)=>{c>i.order&&(o.order=c)}),{...s,blocks:r,updatedAt:new Date}}getBlockTemplates(){return[{type:"bio",name:"Bio Section",description:"Your profile and introduction",icon:"User",category:"content",defaultConfig:{type:"bio",title:"Your Name",subtitle:"Real Estate Professional",description:"Helping clients find their dream homes in [Your City]. Licensed agent with [X] years of experience.",showSocialLinks:!0,showContactButton:!0}},{type:"listings",name:"Property Listings",description:"Showcase your active listings",icon:"Home",category:"content",defaultConfig:{type:"listings",title:"Featured Properties",layout:"grid",filter:"active",maxItems:6,showPrices:!0,showStatus:!0}},{type:"link",name:"Link Button",description:"Add a custom link",icon:"Link",category:"content",defaultConfig:{type:"link",title:"Click Here",url:"https://example.com",style:"button",openInNewTab:!0}},{type:"contact",name:"Contact Form",description:"Let visitors reach out",icon:"Mail",category:"engagement",defaultConfig:{type:"contact",title:"Get In Touch",fields:[{id:"name",type:"text",label:"Name",placeholder:"Your name",required:!0},{id:"email",type:"email",label:"Email",placeholder:"your@email.com",required:!0},{id:"message",type:"textarea",label:"Message",placeholder:"How can I help you?",required:!0}],submitButtonText:"Send Message",successMessage:"Thank you! I'll get back to you soon."}},{type:"social",name:"Social Links",description:"Connect on social media",icon:"Share2",category:"engagement",defaultConfig:{type:"social",title:"Follow Me",links:[],layout:"horizontal",iconSize:"medium"}},{type:"video",name:"Video",description:"Embed a video",icon:"Video",category:"media",defaultConfig:{type:"video",title:"Watch My Introduction",videoUrl:"",autoplay:!1,muted:!0}},{type:"testimonial",name:"Testimonials",description:"Client reviews",icon:"MessageSquare",category:"content",defaultConfig:{type:"testimonial",title:"What Clients Say",testimonials:[],layout:"slider"}},{type:"spacer",name:"Spacer",description:"Add vertical space",icon:"MoveVertical",category:"content",defaultConfig:{type:"spacer",height:40}},{type:"image",name:"Image",description:"Add an image",icon:"Image",category:"media",defaultConfig:{type:"image",imageUrl:"",alt:"Image",size:"medium"}},{type:"text",name:"Text Block",description:"Add custom text",icon:"Type",category:"content",defaultConfig:{type:"text",content:"Your text here...",align:"left",fontSize:"medium"}}]}getBlockTemplate(s){return this.getBlockTemplates().find(t=>t.type===s)}generateId(){return`block_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}validatePage(s){const t=[];(!s.slug||s.slug.trim()==="")&&t.push("Page slug is required"),(!s.title||s.title.trim()==="")&&t.push("Page title is required"),/^[a-z0-9-]+$/i.test(s.slug)||t.push("Page slug must contain only letters, numbers, and hyphens");const i=s.blocks.map(r=>r.id),l=new Set(i);return i.length!==l.size&&t.push("Duplicate block IDs detected"),{valid:t.length===0,errors:t}}}const v=new Ze,Ue=v.createNewPage.bind(v),et=v.addBlock.bind(v),tt=v.removeBlock.bind(v),st=v.updateBlock.bind(v),at=v.reorderBlocks.bind(v),it=v.toggleBlockVisibility.bind(v),lt=v.duplicateBlock.bind(v),rt=v.getBlockTemplates.bind(v);v.validatePage.bind(v);const se=ve((a,s)=>({page:null,selectedBlockId:null,isDragging:!1,history:[],historyIndex:-1,isPreviewMode:!1,isSaving:!1,setPage:t=>{a({page:t,history:[t],historyIndex:0,selectedBlockId:null})},loadPage:async t=>{try{const{data:i,error:l}=await b.from("custom_pages").select("*").eq("id",t).single();if(l)throw l;if(!i)throw new Error("Page not found");const r={id:i.id,userId:i.user_id,slug:i.slug,title:i.title,description:i.description||"",blocks:i.blocks,theme:i.theme,seo:i.seo,published:i.published,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)};s().setPage(r)}catch(i){throw console.error("Failed to load page:",i),x.error("Failed to load page"),i}},loadUserPages:async()=>{try{const{data:{user:t}}=await b.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:i,error:l}=await b.from("custom_pages").select("*").eq("user_id",t.id).order("updated_at",{ascending:!1});if(l)throw l;return(i||[]).map(r=>({id:r.id,userId:r.user_id,slug:r.slug,title:r.title,description:r.description||"",blocks:r.blocks,theme:r.theme,seo:r.seo,published:r.published,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)}))}catch(t){return console.error("Failed to load user pages:",t),[]}},selectBlock:t=>{a({selectedBlockId:t})},setIsDragging:t=>{a({isDragging:t})},addBlockToPage:async(t,i)=>{const{page:l,history:r,historyIndex:o}=s();if(l)try{const{data:{user:c}}=await b.auth.getUser(),h=await et(l,t,i,c?.id),k=r.slice(0,o+1);k.push(h),a({page:h,history:k,historyIndex:k.length-1,selectedBlockId:h.blocks[h.blocks.length-1]?.id})}catch(c){console.error("Error adding block:",c),x.error("Failed to add block")}},removeBlockFromPage:t=>{const{page:i,history:l,historyIndex:r}=s();if(!i)return;const o=tt(i,t),c=l.slice(0,r+1);c.push(o),a({page:o,history:c,historyIndex:c.length-1,selectedBlockId:null})},updateBlockConfig:(t,i)=>{const{page:l,history:r,historyIndex:o}=s();if(!l)return;const c=st(l,t,i),h=r.slice(0,o+1);h.push(c),a({page:c,history:h,historyIndex:h.length-1})},reorderPageBlocks:(t,i)=>{const{page:l,history:r,historyIndex:o}=s();if(!l)return;const c=at(l,t,i),h=r.slice(0,o+1);h.push(c),a({page:c,history:h,historyIndex:h.length-1})},toggleBlockVisible:t=>{const{page:i,history:l,historyIndex:r}=s();if(!i)return;const o=it(i,t),c=l.slice(0,r+1);c.push(o),a({page:o,history:c,historyIndex:c.length-1})},duplicatePageBlock:t=>{const{page:i,history:l,historyIndex:r}=s();if(!i)return;const o=lt(i,t),c=l.slice(0,r+1);c.push(o),a({page:o,history:c,historyIndex:c.length-1})},updatePageMeta:t=>{const{page:i,history:l,historyIndex:r}=s();if(!i)return;const o={...i,...t,updatedAt:new Date},c=l.slice(0,r+1);c.push(o),a({page:o,history:c,historyIndex:c.length-1})},undo:()=>{const{history:t,historyIndex:i}=s();i>0&&a({page:t[i-1],historyIndex:i-1})},redo:()=>{const{history:t,historyIndex:i}=s();i<t.length-1&&a({page:t[i+1],historyIndex:i+1})},canUndo:()=>{const{historyIndex:t}=s();return t>0},canRedo:()=>{const{history:t,historyIndex:i}=s();return i<t.length-1},togglePreviewMode:()=>{a(t=>({isPreviewMode:!t.isPreviewMode,selectedBlockId:null}))},savePage:async()=>{const{page:t}=s();if(t){a({isSaving:!0});try{const{data:{user:i}}=await b.auth.getUser();if(!i)throw new Error("Not authenticated");const l={user_id:i.id,slug:t.slug,title:t.title,description:t.description,blocks:t.blocks,theme:t.theme,seo:t.seo,published:t.published},{data:r}=await b.from("custom_pages").select("id").eq("id",t.id).single();if(r){const{error:o}=await b.from("custom_pages").update(l).eq("id",t.id);if(o)throw o}else{const{error:o}=await b.from("custom_pages").insert({...l,id:t.id});if(o)throw o}x.success("Page saved successfully")}catch(i){throw console.error("Failed to save page:",i),x.error("Failed to save page"),i}finally{a({isSaving:!1})}}},publishPage:async()=>{const{page:t,updatePageMeta:i,savePage:l}=s();t&&(i({published:!0}),await l(),x.success("Page published successfully!"))},setAsActivePage:async t=>{try{const{data:{user:i}}=await b.auth.getUser();if(!i)throw new Error("Not authenticated");const{error:l}=await b.from("custom_pages").update({is_active:!0}).eq("id",t).eq("user_id",i.id);if(l)throw l;x.success("This page is now your active profile")}catch(i){throw console.error("Failed to set active page:",i),x.error("Failed to set active page"),i}},resetBuilder:()=>{a({page:null,selectedBlockId:null,isDragging:!1,history:[],historyIndex:-1,isPreviewMode:!1,isSaving:!1})}})),ot={id:"luxury-agent",name:"Luxury Agent",description:"Professional layout for luxury real estate specialists",category:"real-estate",blocks:[{type:"bio",visible:!0,config:{type:"bio",title:"Your Name",subtitle:"Luxury Real Estate Specialist",description:"Specializing in high-end properties and exclusive listings. Let me help you find your dream home in the most prestigious neighborhoods.",showSocialLinks:!0,showContactButton:!0}},{type:"listings",visible:!0,config:{type:"listings",title:"Featured Luxury Properties",layout:"grid",filter:"featured",maxItems:6,showPrices:!0,showStatus:!0}},{type:"social",visible:!0,config:{type:"social",title:"Connect With Me",links:[],layout:"horizontal",iconSize:"medium"}},{type:"contact",visible:!0,config:{type:"contact",title:"Schedule a Consultation",fields:[{id:"name",type:"text",label:"Name",placeholder:"Your name",required:!0},{id:"email",type:"email",label:"Email",placeholder:"your@email.com",required:!0},{id:"phone",type:"phone",label:"Phone",placeholder:"(555) 555-5555",required:!1},{id:"interest",type:"select",label:"I'm interested in",placeholder:"Select one",required:!0,options:["Buying","Selling","Both"]},{id:"message",type:"textarea",label:"Tell me about your goals",placeholder:"What can I help you with?",required:!0}],submitButtonText:"Request Consultation",successMessage:"Thank you! I'll be in touch within 24 hours."}}]},nt={id:"first-time-buyer",name:"First-Time Buyer Specialist",description:"Friendly layout for agents helping first-time buyers",category:"real-estate",blocks:[{type:"bio",visible:!0,config:{type:"bio",title:"Your Name",subtitle:"First-Time Homebuyer Specialist",description:"Making your first home purchase stress-free! I guide first-time buyers through every step of the process with patience and expertise.",showSocialLinks:!0,showContactButton:!0}},{type:"text",visible:!0,config:{type:"text",content:"ðŸ  New to homebuying? You're in the right place! I'll walk you through every step, from getting pre-approved to closing day.",align:"center",fontSize:"medium"}},{type:"listings",visible:!0,config:{type:"listings",title:"Starter Homes & Condos",layout:"grid",filter:"active",maxItems:6,showPrices:!0,showStatus:!0}},{type:"link",visible:!0,config:{type:"link",title:"ðŸ“š First-Time Buyer Guide (Free Download)",url:"#",style:"button",openInNewTab:!1}},{type:"contact",visible:!0,config:{type:"contact",title:"Let's Get Started!",fields:[{id:"name",type:"text",label:"Name",placeholder:"Your name",required:!0},{id:"email",type:"email",label:"Email",placeholder:"your@email.com",required:!0},{id:"phone",type:"phone",label:"Phone",placeholder:"(555) 555-5555",required:!1},{id:"timeline",type:"select",label:"When are you looking to buy?",placeholder:"Select timeframe",required:!0,options:["1-3 months","3-6 months","6-12 months","Just exploring"]}],submitButtonText:"Start My Journey",successMessage:"Exciting! I'll reach out soon to help you find your first home."}},{type:"social",visible:!0,config:{type:"social",title:"Follow for Home Buying Tips",links:[],layout:"horizontal",iconSize:"large"}}]},ct={id:"investor-focused",name:"Investment Property Specialist",description:"Perfect for agents working with real estate investors",category:"real-estate",blocks:[{type:"bio",visible:!0,config:{type:"bio",title:"Your Name",subtitle:"Investment Property Specialist",description:"Helping investors build wealth through strategic real estate acquisitions. Data-driven analysis and proven ROI.",showSocialLinks:!0,showContactButton:!0}},{type:"listings",visible:!0,config:{type:"listings",title:"Investment Opportunities",layout:"list",filter:"active",maxItems:8,showPrices:!0,showStatus:!0}},{type:"text",visible:!0,config:{type:"text",content:"ðŸ’° All properties analyzed for cap rate, cash-on-cash return, and appreciation potential.",align:"center",fontSize:"medium"}},{type:"link",visible:!0,config:{type:"link",title:"ðŸ“Š Market Analysis Report",url:"#",style:"button",openInNewTab:!1}},{type:"contact",visible:!0,config:{type:"contact",title:"Discuss Investment Strategy",fields:[{id:"name",type:"text",label:"Name",placeholder:"Your name",required:!0},{id:"email",type:"email",label:"Email",placeholder:"your@email.com",required:!0},{id:"investment_type",type:"select",label:"Investment Type",placeholder:"Select type",required:!0,options:["Single Family Rental","Multi-Family","Commercial","Fix & Flip","Mixed Use"]},{id:"budget",type:"select",label:"Investment Budget",placeholder:"Select range",required:!1,options:["Under $250K","$250K - $500K","$500K - $1M","Over $1M"]}],submitButtonText:"Get Investment Analysis",successMessage:"I'll prepare a custom market analysis for you."}},{type:"social",visible:!0,config:{type:"social",title:"Connect for Market Insights",links:[],layout:"horizontal",iconSize:"medium"}}]},dt={id:"simple-clean",name:"Simple & Clean",description:"Minimalist layout that works for any real estate professional",category:"general",blocks:[{type:"bio",visible:!0,config:{type:"bio",title:"Your Name",subtitle:"Real Estate Professional",description:"Helping clients buy and sell properties with expertise and dedication.",showSocialLinks:!1,showContactButton:!0}},{type:"listings",visible:!0,config:{type:"listings",title:"Current Listings",layout:"grid",filter:"active",maxItems:6,showPrices:!0,showStatus:!1}},{type:"contact",visible:!0,config:{type:"contact",title:"Get in Touch",fields:[{id:"name",type:"text",label:"Name",placeholder:"Your name",required:!0},{id:"email",type:"email",label:"Email",placeholder:"your@email.com",required:!0},{id:"message",type:"textarea",label:"Message",placeholder:"How can I help?",required:!0}],submitButtonText:"Send Message",successMessage:"Thanks! I'll get back to you soon."}}]},Z=[ot,nt,ct,dt];function ut(a,s,t){return a.blocks.map((l,r)=>({...l,id:`block_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,order:r}))}function ht(){const a=fe(),{user:s,profile:t}=ee(),{setPage:i,loadUserPages:l,setAsActivePage:r}=se(),[o,c]=w.useState([]),[h,k]=w.useState(!0),[L,I]=w.useState(null),[p,M]=w.useState(!1);w.useEffect(()=>{N()},[]);const N=async()=>{try{const d=await l();c(d)}catch(d){console.error("Failed to load pages:",d),x.error("Failed to load pages")}finally{k(!1)}},S=()=>{if(!s||!t){x.error("Please log in to create a page");return}M(!0)},_=d=>{if(!s||!t){x.error("Please log in to create a page");return}const f=Ue(s.id,t.username||"my-page");if(d){const D=Z.find(O=>O.id===d);D&&(f.blocks=ut(D,s.id,f.slug),x.success(`Created page from "${D.name}" template!`))}i(f),M(!1),a("/dashboard/page-builder")},V=d=>{i(d),a("/dashboard/page-builder")},R=async d=>{I(d);try{await r(d),await N()}catch(f){console.error("Failed to set active page:",f)}finally{I(null)}},Y=async d=>{if(confirm("Are you sure you want to delete this page?"))try{const{error:f}=await b.from("custom_pages").delete().eq("id",d);if(f)throw f;x.success("Page deleted successfully"),await N()}catch(f){console.error("Failed to delete page:",f),x.error("Failed to delete page")}};return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading pages..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Your Pages"}),e.jsx("p",{className:"text-muted-foreground",children:"Create custom link-in-bio pages"})]}),e.jsxs(j,{onClick:S,className:"gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Create New Page"]})]}),o.length===0?e.jsx(H,{className:"p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(te,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No pages yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first custom page to get started"}),e.jsxs(j,{onClick:S,className:"gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Create Your First Page"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(d=>{const f=d.is_active||!1;return e.jsxs(H,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:d.title}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["/",d.slug]})]}),f&&e.jsxs(E,{variant:"default",className:"gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),"Active"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:d.published?"default":"secondary",children:d.published?"Published":"Draft"}),e.jsxs(E,{variant:"outline",children:[d.blocks.length," blocks"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>V(d),className:"gap-2 w-full",children:[e.jsx(Te,{className:"h-4 w-4"}),"Edit"]}),d.published&&e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"outline",size:"sm",asChild:!0,className:"gap-2 w-full",children:e.jsxs("a",{href:`/p/${d.slug}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(G,{className:"h-4 w-4"}),"Preview",e.jsx(je,{className:"h-3 w-3 ml-auto"})]})}),!f&&e.jsxs(j,{variant:"default",size:"sm",onClick:()=>R(d.id),disabled:L===d.id,className:"gap-2 w-full",children:[e.jsx(J,{className:"h-4 w-4"}),L===d.id?"Setting...":"Set as Active"]})]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>Y(d.id),className:"gap-2 w-full text-destructive hover:text-destructive",children:[e.jsx(W,{className:"h-4 w-4"}),"Delete"]})]}),d.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:d.description})]},d.id)})}),e.jsx(be,{open:p,onOpenChange:M,children:e.jsxs(we,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(ke,{children:[e.jsx(Ne,{children:"Choose a Template"}),e.jsx(Se,{children:"Start with a pre-built template or create a blank page"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.jsx(H,{className:"p-6 cursor-pointer hover:border-primary transition-colors",onClick:()=>_(null),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded",children:e.jsx(q,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Blank Page"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start from scratch"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground flex-1",children:"Create a completely custom page by adding blocks one at a time."})]})}),Z.map(d=>e.jsx(H,{className:"p-6 cursor-pointer hover:border-primary transition-colors",onClick:()=>_(d.id),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded",children:e.jsx(Ce,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:d.name}),e.jsxs(E,{variant:"outline",className:"mt-1",children:[d.blocks.length," blocks"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground flex-1",children:d.description})]})},d.id))]})]})})]})}function mt({block:a,onUpdate:s}){const t=a.config;switch(a.type){case"bio":return e.jsx(pt,{config:t,onUpdate:s});case"link":return e.jsx(gt,{config:t,onUpdate:s});case"listings":return e.jsx(xt,{config:t,onUpdate:s});case"contact":return e.jsx(yt,{config:t,onUpdate:s});case"social":return e.jsx(vt,{config:t,onUpdate:s});case"video":return e.jsx(ft,{config:t,onUpdate:s});case"testimonial":return e.jsx(jt,{config:t,onUpdate:s});case"spacer":return e.jsx(bt,{config:t,onUpdate:s});case"image":return e.jsx(wt,{config:t,onUpdate:s});case"text":return e.jsx(kt,{config:t,onUpdate:s});default:return e.jsx("div",{className:"text-sm text-muted-foreground",children:"No settings available for this block type"})}}function pt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bio-title",children:"Name"}),e.jsx(y,{id:"bio-title",value:a.title,onChange:t=>s({title:t.target.value}),placeholder:"Your Name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bio-subtitle",children:"Job Title"}),e.jsx(y,{id:"bio-subtitle",value:a.subtitle||"",onChange:t=>s({subtitle:t.target.value}),placeholder:"Real Estate Professional"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bio-description",children:"Bio"}),e.jsx(K,{id:"bio-description",value:a.description,onChange:t=>s({description:t.target.value}),placeholder:"Tell visitors about yourself...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"bio-avatar",children:"Avatar URL"}),e.jsx(y,{id:"bio-avatar",value:a.avatarUrl||"",onChange:t=>s({avatarUrl:t.target.value}),placeholder:"https://example.com/avatar.jpg"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to use your profile photo"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"bio-social",children:"Show Social Links"}),e.jsx(F,{id:"bio-social",checked:a.showSocialLinks,onCheckedChange:t=>s({showSocialLinks:t})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"bio-contact",children:"Show Contact Button"}),e.jsx(F,{id:"bio-contact",checked:a.showContactButton,onCheckedChange:t=>s({showContactButton:t})})]})]})}function gt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"link-title",children:"Button Text"}),e.jsx(y,{id:"link-title",value:a.title,onChange:t=>s({title:t.target.value}),placeholder:"Click Here"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"link-url",children:"URL"}),e.jsx(y,{id:"link-url",type:"url",value:a.url,onChange:t=>s({url:t.target.value}),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"link-style",children:"Style"}),e.jsxs(C,{value:a.style,onValueChange:t=>s({style:t}),children:[e.jsx(P,{id:"link-style",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"button",children:"Button"}),e.jsx(m,{value:"card",children:"Card"}),e.jsx(m,{value:"minimal",children:"Minimal"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"link-newtab",children:"Open in New Tab"}),e.jsx(F,{id:"link-newtab",checked:a.openInNewTab,onCheckedChange:t=>s({openInNewTab:t})})]})]})}function xt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"listings-title",children:"Section Title"}),e.jsx(y,{id:"listings-title",value:a.title,onChange:t=>s({title:t.target.value}),placeholder:"Featured Properties"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"listings-layout",children:"Layout"}),e.jsxs(C,{value:a.layout,onValueChange:t=>s({layout:t}),children:[e.jsx(P,{id:"listings-layout",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"grid",children:"Grid"}),e.jsx(m,{value:"list",children:"List"}),e.jsx(m,{value:"carousel",children:"Carousel"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"listings-filter",children:"Show"}),e.jsxs(C,{value:a.filter,onValueChange:t=>s({filter:t}),children:[e.jsx(P,{id:"listings-filter",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"all",children:"All Listings"}),e.jsx(m,{value:"active",children:"Active Only"}),e.jsx(m,{value:"featured",children:"Featured Only"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"listings-max",children:"Max Items"}),e.jsx(y,{id:"listings-max",type:"number",min:"1",max:"20",value:a.maxItems||6,onChange:t=>s({maxItems:parseInt(t.target.value)||6})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"listings-prices",children:"Show Prices"}),e.jsx(F,{id:"listings-prices",checked:a.showPrices,onCheckedChange:t=>s({showPrices:t})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"listings-status",children:"Show Status"}),e.jsx(F,{id:"listings-status",checked:a.showStatus,onCheckedChange:t=>s({showStatus:t})})]})]})}function yt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contact-title",children:"Form Title"}),e.jsx(y,{id:"contact-title",value:a.title,onChange:t=>s({title:t.target.value}),placeholder:"Get In Touch"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contact-button",children:"Submit Button Text"}),e.jsx(y,{id:"contact-button",value:a.submitButtonText,onChange:t=>s({submitButtonText:t.target.value}),placeholder:"Send Message"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"contact-success",children:"Success Message"}),e.jsx(K,{id:"contact-success",value:a.successMessage,onChange:t=>s({successMessage:t.target.value}),placeholder:"Thank you! I'll get back to you soon.",rows:2})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Form fields (name, email, message) are automatically included"})})]})}function vt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"social-title",children:"Section Title (Optional)"}),e.jsx(y,{id:"social-title",value:a.title||"",onChange:t=>s({title:t.target.value}),placeholder:"Follow Me"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"social-layout",children:"Layout"}),e.jsxs(C,{value:a.layout,onValueChange:t=>s({layout:t}),children:[e.jsx(P,{id:"social-layout",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"horizontal",children:"Horizontal"}),e.jsx(m,{value:"vertical",children:"Vertical"}),e.jsx(m,{value:"grid",children:"Grid"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"social-size",children:"Icon Size"}),e.jsxs(C,{value:a.iconSize,onValueChange:t=>s({iconSize:t}),children:[e.jsx(P,{id:"social-size",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"small",children:"Small"}),e.jsx(m,{value:"medium",children:"Medium"}),e.jsx(m,{value:"large",children:"Large"})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Social links are pulled from your profile settings"})})]})}function ft({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"video-title",children:"Section Title (Optional)"}),e.jsx(y,{id:"video-title",value:a.title||"",onChange:t=>s({title:t.target.value}),placeholder:"Watch My Introduction"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"video-url",children:"Video URL"}),e.jsx(y,{id:"video-url",type:"url",value:a.videoUrl,onChange:t=>s({videoUrl:t.target.value}),placeholder:"https://youtube.com/watch?v=..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video URLs"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"video-autoplay",children:"Autoplay"}),e.jsx(F,{id:"video-autoplay",checked:a.autoplay,onCheckedChange:t=>s({autoplay:t})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"video-muted",children:"Start Muted"}),e.jsx(F,{id:"video-muted",checked:a.muted,onCheckedChange:t=>s({muted:t})})]})]})}function jt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"testimonial-title",children:"Section Title (Optional)"}),e.jsx(y,{id:"testimonial-title",value:a.title||"",onChange:t=>s({title:t.target.value}),placeholder:"What Clients Say"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"testimonial-layout",children:"Layout"}),e.jsxs(C,{value:a.layout,onValueChange:t=>s({layout:t}),children:[e.jsx(P,{id:"testimonial-layout",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"slider",children:"Slider"}),e.jsx(m,{value:"grid",children:"Grid"})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Testimonials are pulled from your testimonials library"})})]})}function bt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"spacer-height",children:"Height (pixels)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{id:"spacer-height",type:"range",min:10,max:200,step:10,value:a.height,onChange:t=>s({height:parseInt(t.target.value)}),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium w-12 text-right",children:[a.height,"px"]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use spacers to add vertical spacing between blocks"})})]})}function wt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"image-url",children:"Image URL"}),e.jsx(y,{id:"image-url",type:"url",value:a.imageUrl,onChange:t=>s({imageUrl:t.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"image-alt",children:"Alt Text"}),e.jsx(y,{id:"image-alt",value:a.alt,onChange:t=>s({alt:t.target.value}),placeholder:"Describe the image"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"image-caption",children:"Caption (Optional)"}),e.jsx(y,{id:"image-caption",value:a.caption||"",onChange:t=>s({caption:t.target.value}),placeholder:"Image caption"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"image-link",children:"Link (Optional)"}),e.jsx(y,{id:"image-link",type:"url",value:a.link||"",onChange:t=>s({link:t.target.value}),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"image-size",children:"Size"}),e.jsxs(C,{value:a.size,onValueChange:t=>s({size:t}),children:[e.jsx(P,{id:"image-size",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"small",children:"Small"}),e.jsx(m,{value:"medium",children:"Medium"}),e.jsx(m,{value:"large",children:"Large"}),e.jsx(m,{value:"full",children:"Full Width"})]})]})]})]})}function kt({config:a,onUpdate:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"text-content",children:"Text Content"}),e.jsx(K,{id:"text-content",value:a.content,onChange:t=>s({content:t.target.value}),placeholder:"Enter your text here...",rows:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"text-align",children:"Text Alignment"}),e.jsxs(C,{value:a.align,onValueChange:t=>s({align:t}),children:[e.jsx(P,{id:"text-align",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"left",children:"Left"}),e.jsx(m,{value:"center",children:"Center"}),e.jsx(m,{value:"right",children:"Right"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"text-size",children:"Font Size"}),e.jsxs(C,{value:a.fontSize,onValueChange:t=>s({fontSize:t}),children:[e.jsx(P,{id:"text-size",children:e.jsx(B,{})}),e.jsxs(T,{children:[e.jsx(m,{value:"small",children:"Small"}),e.jsx(m,{value:"medium",children:"Medium"}),e.jsx(m,{value:"large",children:"Large"})]})]})]})]})}function Rt(){const{user:a,profile:s}=ee(),[t,i]=w.useState(!0),[l,r]=w.useState(null),[o,c]=w.useState(!1),[h,k]=w.useState(null),[L,I]=w.useState(null),{page:p,selectedBlockId:M,isPreviewMode:N,isSaving:S,canUndo:_,canRedo:V,setPage:R,selectBlock:Y,addBlockToPage:d,removeBlockFromPage:f,updateBlockConfig:D,reorderPageBlocks:O,duplicatePageBlock:ae,toggleBlockVisible:ie,undo:le,redo:re,togglePreviewMode:oe,savePage:$,publishPage:ne,updatePageMeta:ce}=se();w.useEffect(()=>{i(!p)},[p]),w.useEffect(()=>{p?.theme&&Ie(p.theme)},[p?.theme]),w.useEffect(()=>{if(!p||S)return;const n=setTimeout(async()=>{try{await $();const g=new Date;r(g),console.log("Auto-saved at",g.toLocaleTimeString())}catch(g){console.error("Auto-save failed:",g),x.error("Auto-save failed - please save manually")}},3e3);return()=>clearTimeout(n)},[p,S,$]);const de=async()=>{try{await $(),r(new Date),x.success("Page saved successfully!")}catch{x.error("Failed to save page")}},ue=async()=>{try{await ne(),x.success("Page published successfully!")}catch{x.error("Failed to publish page")}},he=(n,g)=>{k(g),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/html",n.currentTarget.innerHTML),n.currentTarget instanceof HTMLElement&&(n.currentTarget.style.opacity="0.5")},me=n=>{k(null),I(null),n.currentTarget instanceof HTMLElement&&(n.currentTarget.style.opacity="1")},pe=(n,g)=>{n.preventDefault(),n.dataTransfer.dropEffect="move",h!==null&&h!==g&&I(g)},ge=()=>{I(null)},xe=(n,g)=>{n.preventDefault(),n.stopPropagation(),h!==null&&h!==g&&(O(h,g),x.success("Block reordered")),k(null),I(null)},z=p?.blocks.find(n=>n.id===M),ye=rt();return t||!p?e.jsx("div",{className:"container mx-auto py-8",children:e.jsx(ht,{})}):e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[!N&&e.jsxs("div",{className:"w-64 bg-white border-r flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h2",{className:"font-semibold text-lg",children:"Add Blocks"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:ye.map(n=>e.jsx("button",{onClick:()=>d(n.type),className:"w-full p-3 text-left rounded-lg border hover:border-primary hover:bg-primary/5 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-gray-400 group-hover:text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500",children:n.description})]})]})},n.type))})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"bg-white border-b p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:()=>{R(null),i(!0)},children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Back to Pages"]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(j,{variant:"outline",size:"sm",onClick:le,disabled:!_(),children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:re,disabled:!V(),children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx(y,{type:"text",value:p.title,onChange:n=>ce({title:n.target.value}),className:"w-64",placeholder:"Page Title"}),e.jsx(E,{variant:p.published?"default":"secondary",children:p.published?"Published":"Draft"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:oe,children:N?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Edit"]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Preview"]})}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(j,{variant:o?"ghost":"default",size:"sm",onClick:()=>c(!1),className:"rounded-r-none",title:"Desktop Preview",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx(j,{variant:o?"default":"ghost",size:"sm",onClick:()=>c(!0),className:"rounded-l-none",title:"Mobile Preview",children:e.jsx(Ee,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:de,disabled:S,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),S?"Saving...":"Save"]}),l&&!S&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Saved ",l.toLocaleTimeString()]})]}),e.jsxs(j,{size:"sm",onClick:ue,disabled:S,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Publish"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsx("div",{className:"mx-auto rounded-lg shadow-lg min-h-full transition-all duration-300",style:{...Fe(p.theme),backgroundColor:p.theme.colors.background,color:p.theme.colors.text,fontFamily:`'${p.theme.fonts.body}', sans-serif`,maxWidth:o?"375px":"672px"},children:e.jsx("div",{className:"p-8",style:{display:"flex",flexDirection:"column",gap:p.theme.spacing==="compact"?"1rem":p.theme.spacing==="spacious"?"3rem":"2rem"},children:p.blocks.length===0?e.jsxs("div",{className:"text-center py-20 text-gray-500",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"Your page is empty"}),e.jsx("p",{className:"text-sm mt-1",children:"Add blocks from the left sidebar to get started"})]}):p.blocks.map((n,g)=>e.jsxs("div",{draggable:!N,onDragStart:A=>he(A,g),onDragEnd:me,onDragOver:A=>pe(A,g),onDragLeave:ge,onDrop:A=>xe(A,g),className:`relative group transition-all ${h===g?"opacity-50":""} ${L===g&&h!==g?"border-t-4 border-primary pt-4":""}`,children:[!N&&e.jsxs("div",{className:"absolute -left-12 top-0 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col gap-1",children:[e.jsx("div",{className:"p-1 bg-white border rounded hover:bg-gray-50 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ae(n.id),className:"p-1 bg-white border rounded hover:bg-gray-50",title:"Duplicate",children:e.jsx(He,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ie(n.id),className:"p-1 bg-white border rounded hover:bg-gray-50",title:n.visible?"Hide":"Show",children:n.visible?e.jsx(G,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(n.id),className:"p-1 bg-white border rounded hover:bg-red-50 text-red-600",title:"Delete",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsx(Le,{block:n,isEditing:!N,isSelected:M===n.id,onSelect:()=>Y(n.id),userId:p.userId})]},n.id))})})})]}),!N&&z&&e.jsxs("div",{className:"w-80 bg-white border-l flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Block Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:z.type})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs(Me,{defaultValue:"content",className:"w-full",children:[e.jsxs(De,{className:"grid w-full grid-cols-2",children:[e.jsx(X,{value:"content",children:"Content"}),e.jsx(X,{value:"style",children:"Style"})]}),e.jsx(Q,{value:"content",className:"space-y-4 mt-4",children:e.jsx(mt,{block:z,onUpdate:n=>D(z.id,n)})}),e.jsx(Q,{value:"style",className:"space-y-4 mt-4",children:e.jsx("div",{className:"p-4 bg-gray-50 rounded text-sm text-gray-600",children:"Style settings coming soon"})})]})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs(j,{variant:"outline",className:"w-full",onClick:()=>f(z.id),children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Delete Block"]})})]})]})}export{Rt as default};
