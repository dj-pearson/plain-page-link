{"version":3,"file":"Testimonials-D-NGmAx-.js","sources":["../../src/components/modals/AddTestimonialModal.tsx","../../src/components/modals/EditTestimonialModal.tsx","../../src/components/testimonials/RequestTestimonialModal.tsx","../../src/pages/dashboard/Testimonials.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Star, Upload, X } from \"lucide-react\";\n\nconst testimonialSchema = z.object({\n  clientName: z.string().min(2, \"Client name must be at least 2 characters\"),\n  rating: z.number().min(1, \"Rating is required\").max(5, \"Rating must be between 1 and 5\"),\n  review: z.string().min(10, \"Review must be at least 10 characters\").max(500, \"Review must be less than 500 characters\"),\n  propertyType: z.string().min(1, \"Property type is required\"),\n  clientPhoto: z.instanceof(File).optional(),\n  featured: z.boolean(),\n});\n\nexport type TestimonialFormData = z.infer<typeof testimonialSchema>;\n\ninterface AddTestimonialModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSave?: (data: TestimonialFormData) => void;\n}\n\nexport function AddTestimonialModal({\n  open,\n  onOpenChange,\n  onSave,\n}: AddTestimonialModalProps) {\n  const [error, setError] = useState<string | null>(null);\n  const [photoPreview, setPhotoPreview] = useState<string | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    setValue,\n    watch,\n  } = useForm<TestimonialFormData>({\n    resolver: zodResolver(testimonialSchema),\n    defaultValues: {\n      clientName: \"\",\n      rating: 5,\n      review: \"\",\n      propertyType: \"\",\n      featured: false,\n    },\n  });\n\n  const rating = watch(\"rating\");\n  const review = watch(\"review\");\n  const featured = watch(\"featured\");\n\n  const handlePhotoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setValue(\"clientPhoto\", file);\n\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPhotoPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const removePhoto = () => {\n    setValue(\"clientPhoto\", undefined);\n    setPhotoPreview(null);\n  };\n\n  const onSubmit = async (data: TestimonialFormData) => {\n    try {\n      setError(null);\n      await onSave?.(data);\n      onOpenChange(false);\n      reset();\n      setPhotoPreview(null);\n    } catch (err) {\n      console.error(\"Failed to add testimonial:\", err);\n      setError(\"Failed to add testimonial. Please try again.\");\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Add Client Testimonial</DialogTitle>\n          <DialogDescription>\n            Share feedback from satisfied clients to build credibility\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg text-sm\">\n              {error}\n            </div>\n          )}\n\n          {/* Client Information */}\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"clientName\">Client Name *</Label>\n              <Input\n                id=\"clientName\"\n                {...register(\"clientName\")}\n                placeholder=\"John Smith\"\n              />\n              {errors.clientName && (\n                <p className=\"text-sm text-red-600 mt-1\">{errors.clientName.message}</p>\n              )}\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                You can use initials for privacy (e.g., \"John S.\")\n              </p>\n            </div>\n\n            <div>\n              <Label htmlFor=\"propertyType\">Property Type *</Label>\n              <Input\n                id=\"propertyType\"\n                {...register(\"propertyType\")}\n                placeholder=\"Single Family Home, Condo, etc.\"\n              />\n              {errors.propertyType && (\n                <p className=\"text-sm text-red-600 mt-1\">{errors.propertyType.message}</p>\n              )}\n            </div>\n          </div>\n\n          {/* Rating */}\n          <div>\n            <Label>Rating *</Label>\n            <div className=\"flex gap-2 mt-2\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <button\n                  key={star}\n                  type=\"button\"\n                  onClick={() => setValue(\"rating\", star)}\n                  className=\"focus:outline-none\"\n                >\n                  <Star\n                    className={`h-8 w-8 transition-colors ${\n                      star <= rating\n                        ? \"fill-yellow-400 text-yellow-400\"\n                        : \"text-gray-300\"\n                    }`}\n                  />\n                </button>\n              ))}\n            </div>\n            {errors.rating && (\n              <p className=\"text-sm text-red-600 mt-1\">{errors.rating.message}</p>\n            )}\n          </div>\n\n          {/* Review Text */}\n          <div>\n            <Label htmlFor=\"review\">Testimonial Text *</Label>\n            <Textarea\n              id=\"review\"\n              {...register(\"review\")}\n              rows={6}\n              maxLength={500}\n              placeholder=\"Share what the client said about working with you...\"\n            />\n            {errors.review && (\n              <p className=\"text-sm text-red-600 mt-1\">{errors.review.message}</p>\n            )}\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {review?.length || 0}/500 characters\n            </p>\n          </div>\n\n          {/* Client Photo */}\n          <div className=\"space-y-3\">\n            <Label>Client Photo (Optional)</Label>\n            {!photoPreview ? (\n              <div className=\"border-2 border-dashed border-border rounded-lg p-6 text-center hover:bg-accent/50 transition-colors cursor-pointer\">\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handlePhotoUpload}\n                  className=\"hidden\"\n                  id=\"photo-upload\"\n                />\n                <label htmlFor=\"photo-upload\" className=\"cursor-pointer\">\n                  <Upload className=\"h-8 w-8 mx-auto mb-2 text-muted-foreground\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Upload client photo\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    PNG, JPG up to 2MB\n                  </p>\n                </label>\n              </div>\n            ) : (\n              <div className=\"relative inline-block\">\n                <img\n                  src={photoPreview}\n                  alt=\"Client preview\"\n                  className=\"w-24 h-24 rounded-full object-cover\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={removePhoto}\n                  className=\"absolute top-0 right-0 p-1 bg-red-500 text-white rounded-full\"\n                >\n                  <X className=\"h-3 w-3\" />\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Featured Toggle */}\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"checkbox\"\n              id=\"featured\"\n              checked={featured}\n              onChange={(e) => setValue(\"featured\", e.target.checked)}\n              className=\"rounded border-border\"\n            />\n            <Label htmlFor=\"featured\" className=\"cursor-pointer\">\n              Feature this testimonial on my profile\n            </Label>\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\">Add Testimonial</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nexport interface EditTestimonialFormData {\n  client_name: string;\n  review: string;\n  rating: number;\n  client_title?: string;\n  property_type?: string;\n  transaction_type?: string;\n}\n\ninterface EditTestimonialModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: EditTestimonialFormData) => void;\n  initialData: EditTestimonialFormData;\n}\n\nexport function EditTestimonialModal({ isOpen, onClose, onSubmit, initialData }: EditTestimonialModalProps) {\n  const [formData, setFormData] = useState<EditTestimonialFormData>(initialData);\n\n  useEffect(() => {\n    setFormData(initialData);\n  }, [initialData]);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-card border-b border-border p-4 flex items-center justify-between\">\n          <h2 className=\"text-xl font-semibold\">Edit Testimonial</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-accent rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          <div>\n            <Label htmlFor=\"client_name\">Client Name *</Label>\n            <Input\n              id=\"client_name\"\n              value={formData.client_name}\n              onChange={(e) => setFormData({ ...formData, client_name: e.target.value })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"client_title\">Client Title</Label>\n            <Input\n              id=\"client_title\"\n              value={formData.client_title || ''}\n              onChange={(e) => setFormData({ ...formData, client_title: e.target.value })}\n              placeholder=\"e.g., First-Time Homebuyer\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"rating\">Rating *</Label>\n            <Input\n              id=\"rating\"\n              type=\"number\"\n              min=\"1\"\n              max=\"5\"\n              value={formData.rating}\n              onChange={(e) => setFormData({ ...formData, rating: parseInt(e.target.value) })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"review\">Review *</Label>\n            <Textarea\n              id=\"review\"\n              value={formData.review}\n              onChange={(e) => setFormData({ ...formData, review: e.target.value })}\n              rows={6}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"property_type\">Property Type</Label>\n            <Input\n              id=\"property_type\"\n              value={formData.property_type || ''}\n              onChange={(e) => setFormData({ ...formData, property_type: e.target.value })}\n              placeholder=\"e.g., Single Family Home\"\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"transaction_type\">Transaction Type</Label>\n            <select\n              id=\"transaction_type\"\n              value={formData.transaction_type || ''}\n              onChange={(e) => setFormData({ ...formData, transaction_type: e.target.value })}\n              className=\"w-full px-3 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary\"\n            >\n              <option value=\"\">Select type</option>\n              <option value=\"buyer\">Buyer</option>\n              <option value=\"seller\">Seller</option>\n            </select>\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} className=\"flex-1\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" className=\"flex-1\">\n              Save Changes\n            </Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { Copy, Check, Mail, MessageSquare, Share2, ExternalLink } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface RequestTestimonialModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  username: string;\n  agentName: string;\n}\n\nexport function RequestTestimonialModal({\n  open,\n  onOpenChange,\n  username,\n  agentName,\n}: RequestTestimonialModalProps) {\n  const [copied, setCopied] = useState(false);\n  const [emailCopied, setEmailCopied] = useState(false);\n  const { toast } = useToast();\n\n  const reviewURL = `${window.location.origin}/${username}/review`;\n  const emailTemplate = `Hi there!\n\nI hope you've been enjoying your new home! I wanted to reach out and ask if you'd be willing to share a brief review of your experience working with me.\n\nYour feedback helps me improve my services and helps other clients find the right agent for their needs.\n\nYou can leave a review here:\n${reviewURL}\n\nIt only takes a couple of minutes, and I really appreciate your time!\n\nBest regards,\n${agentName}`;\n\n  const smsTemplate = `Hi! Would you mind leaving a quick review of your experience? It helps me serve clients better: ${reviewURL} Thanks! - ${agentName}`;\n\n  const copyToClipboard = async (text: string, type: 'url' | 'email' = 'url') => {\n    try {\n      await navigator.clipboard.writeText(text);\n      if (type === 'url') {\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n      } else {\n        setEmailCopied(true);\n        setTimeout(() => setEmailCopied(false), 2000);\n      }\n      toast({\n        title: \"Copied!\",\n        description: `${type === 'url' ? 'Review link' : 'Email template'} copied to clipboard`,\n      });\n    } catch (err) {\n      toast({\n        title: \"Failed to copy\",\n        description: \"Please copy manually\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const shareViaEmail = () => {\n    const subject = encodeURIComponent(`Request for Testimonial - ${agentName}`);\n    const body = encodeURIComponent(emailTemplate);\n    window.open(`mailto:?subject=${subject}&body=${body}`);\n  };\n\n  const shareViaSMS = () => {\n    const sms = encodeURIComponent(smsTemplate);\n    window.open(`sms:?&body=${sms}`);\n  };\n\n  const shareNative = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: \"Leave a Review\",\n          text: `I'd appreciate if you could leave a review of your experience!`,\n          url: reviewURL,\n        });\n      } catch (err) {\n        // User cancelled or error occurred\n        console.log(\"Share cancelled\");\n      }\n    } else {\n      // Fallback to copy\n      copyToClipboard(reviewURL);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">Request Client Testimonial</DialogTitle>\n          <DialogDescription>\n            Share this link with clients to collect reviews and testimonials\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Review Link */}\n          <div>\n            <Label className=\"text-base font-semibold\">Your Review Link</Label>\n            <p className=\"text-sm text-muted-foreground mb-2\">\n              Send this link to clients so they can leave a review\n            </p>\n            <div className=\"flex gap-2\">\n              <Input\n                value={reviewURL}\n                readOnly\n                className=\"font-mono text-sm\"\n              />\n              <Button\n                onClick={() => copyToClipboard(reviewURL)}\n                variant=\"outline\"\n                size=\"icon\"\n              >\n                {copied ? (\n                  <Check className=\"h-4 w-4 text-green-600\" />\n                ) : (\n                  <Copy className=\"h-4 w-4\" />\n                )}\n              </Button>\n              <Button\n                onClick={shareNative}\n                variant=\"outline\"\n                size=\"icon\"\n                title=\"Share via...\"\n              >\n                <Share2 className=\"h-4 w-4\" />\n              </Button>\n              <Button\n                asChild\n                variant=\"outline\"\n                size=\"icon\"\n                title=\"Preview review page\"\n              >\n                <a\n                  href={reviewURL}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <ExternalLink className=\"h-4 w-4\" />\n                </a>\n              </Button>\n            </div>\n          </div>\n\n          {/* Quick Actions */}\n          <div>\n            <Label className=\"text-base font-semibold mb-3 block\">Quick Send Options</Label>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <Button\n                onClick={shareViaEmail}\n                variant=\"outline\"\n                className=\"justify-start\"\n              >\n                <Mail className=\"h-4 w-4 mr-2\" />\n                Send via Email\n              </Button>\n              <Button\n                onClick={shareViaSMS}\n                variant=\"outline\"\n                className=\"justify-start\"\n              >\n                <MessageSquare className=\"h-4 w-4 mr-2\" />\n                Send via SMS\n              </Button>\n            </div>\n          </div>\n\n          {/* Email Template */}\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <Label className=\"text-base font-semibold\">Email Template</Label>\n              <Button\n                onClick={() => copyToClipboard(emailTemplate, 'email')}\n                variant=\"ghost\"\n                size=\"sm\"\n              >\n                {emailCopied ? (\n                  <>\n                    <Check className=\"h-4 w-4 mr-2 text-green-600\" />\n                    Copied\n                  </>\n                ) : (\n                  <>\n                    <Copy className=\"h-4 w-4 mr-2\" />\n                    Copy\n                  </>\n                )}\n              </Button>\n            </div>\n            <Textarea\n              value={emailTemplate}\n              readOnly\n              rows={12}\n              className=\"font-mono text-sm resize-none\"\n            />\n            <p className=\"text-xs text-muted-foreground mt-2\">\n              ðŸ’¡ Tip: Customize this template to match your personal style\n            </p>\n          </div>\n\n          {/* SMS Template */}\n          <div>\n            <Label className=\"text-base font-semibold mb-2 block\">SMS Template</Label>\n            <Textarea\n              value={smsTemplate}\n              readOnly\n              rows={3}\n              className=\"font-mono text-sm resize-none\"\n            />\n          </div>\n\n          {/* Best Practices */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-semibold text-sm mb-2 text-blue-900\">\n              ðŸ“‹ Best Practices for Requesting Reviews\n            </h4>\n            <ul className=\"text-sm text-blue-800 space-y-1\">\n              <li>â€¢ Wait 1-2 weeks after closing for best results</li>\n              <li>â€¢ Send a personalized message, not just the link</li>\n              <li>â€¢ Follow up once if no response after 1 week</li>\n              <li>â€¢ Thank clients regardless of whether they leave a review</li>\n              <li>â€¢ Make it easy - include the direct link</li>\n            </ul>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { useState } from \"react\";\nimport { Plus, Star, Edit, Trash2, Quote, Share2, AlertCircle, RefreshCw } from \"lucide-react\";\nimport { AddTestimonialModal } from \"@/components/modals/AddTestimonialModal\";\nimport { EditTestimonialModal, EditTestimonialFormData } from \"@/components/modals/EditTestimonialModal\";\nimport type { TestimonialFormData } from \"@/components/modals/AddTestimonialModal\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useTestimonials, type Testimonial } from \"@/hooks/useTestimonials\";\nimport { useSubscriptionLimits } from \"@/hooks/useSubscriptionLimits\";\nimport { UpgradeModal } from \"@/components/UpgradeModal\";\nimport { LimitBanner } from \"@/components/LimitBanner\";\nimport { RequestTestimonialModal } from \"@/components/testimonials/RequestTestimonialModal\";\nimport { useProfile } from \"@/hooks/useProfile\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\nexport default function Testimonials() {\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [editingTestimonial, setEditingTestimonial] = useState<Testimonial | null>(null);\n  const [showUpgradeModal, setShowUpgradeModal] = useState(false);\n  const [showRequestModal, setShowRequestModal] = useState(false);\n  const { toast } = useToast();\n  const { testimonials, isLoading, isError, error, refetch, addTestimonial, updateTestimonial, deleteTestimonial } = useTestimonials();\n  const { subscription, canAdd, getLimit, getUsage } = useSubscriptionLimits();\n  const { profile } = useProfile();\n\n  const handleAddClick = () => {\n    if (!canAdd('testimonials')) {\n      setShowUpgradeModal(true);\n      return;\n    }\n    setIsAddModalOpen(true);\n  };\n\n  const handleAddTestimonial = async (data: TestimonialFormData) => {\n    try {\n      await addTestimonial.mutateAsync(data);\n      toast({\n        title: \"Testimonial added!\",\n        description: \"Client review has been added successfully.\",\n      });\n      setIsAddModalOpen(false);\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add testimonial. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDeleteTestimonial = async (id: string) => {\n    if (!confirm(\"Are you sure you want to delete this testimonial?\")) return;\n    \n    try {\n      await deleteTestimonial.mutateAsync(id);\n      toast({\n        title: \"Testimonial deleted\",\n        description: \"Client review has been removed.\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete testimonial.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleEditTestimonial = async (data: EditTestimonialFormData) => {\n    if (!editingTestimonial) return;\n\n    try {\n      await updateTestimonial.mutateAsync({\n        id: editingTestimonial.id,\n        client_name: data.client_name,\n        client_title: data.client_title,\n        rating: data.rating,\n        review: data.review,\n        property_type: data.property_type,\n        transaction_type: data.transaction_type,\n        updated_at: new Date().toISOString()\n      });\n\n      setEditingTestimonial(null);\n    } catch (error) {\n      // Error toast is already handled by the mutation\n      console.error('Failed to update testimonial:', error);\n    }\n  };\n\n  const averageRating = testimonials.length > 0\n    ? (testimonials.reduce((sum, t) => sum + t.rating, 0) / testimonials.length).toFixed(1)\n    : \"0.0\";\n\n  const renderStars = (rating: number) => {\n    return (\n      <div className=\"flex gap-1\">\n        {[...Array(5)].map((_, i) => (\n          <Star\n            key={i}\n            className={`h-4 w-4 ${\n              i < rating ? \"fill-yellow-400 text-yellow-400\" : \"text-gray-300\"\n            }`}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-foreground\">Testimonials</h1>\n          <p className=\"text-muted-foreground mt-1\">\n            Showcase client reviews and success stories\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowRequestModal(true)}\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors font-medium border border-border\"\n          >\n            <Share2 className=\"h-4 w-4\" />\n            Request Testimonial\n          </button>\n          <button\n            onClick={handleAddClick}\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            Add Testimonial\n          </button>\n        </div>\n      </div>\n\n      {/* Limit Banner */}\n      {subscription && getLimit('testimonials') !== Infinity && (\n        <LimitBanner\n          feature=\"testimonials\"\n          current={getUsage('testimonials')}\n          limit={getLimit('testimonials')}\n        />\n      )}\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n        <div className=\"bg-card border border-border rounded-lg p-4\">\n          <div className=\"text-2xl font-bold text-foreground\">\n            {testimonials.length}\n          </div>\n          <div className=\"text-sm text-muted-foreground\">Total Reviews</div>\n        </div>\n        <div className=\"bg-card border border-border rounded-lg p-4\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"text-2xl font-bold text-foreground\">{averageRating}</div>\n            <div className=\"flex\">\n              {renderStars(Math.round(parseFloat(averageRating)))}\n            </div>\n          </div>\n          <div className=\"text-sm text-muted-foreground\">Average Rating</div>\n        </div>\n        <div className=\"bg-card border border-border rounded-lg p-4\">\n          <div className=\"text-2xl font-bold text-primary\">\n            {testimonials.length}\n          </div>\n          <div className=\"text-sm text-muted-foreground\">Total Reviews</div>\n        </div>\n      </div>\n\n      {/* Error State */}\n      {isError && (\n        <Card>\n          <CardContent className=\"p-6 sm:p-8 text-center\">\n            <div className=\"inline-flex items-center justify-center w-14 h-14 sm:w-16 sm:h-16 bg-red-100 rounded-full mb-3 sm:mb-4\">\n              <AlertCircle className=\"h-7 w-7 sm:h-8 sm:w-8 text-red-600\" />\n            </div>\n            <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-1 sm:mb-2\">\n              Failed to load testimonials\n            </h3>\n            <p className=\"text-sm sm:text-base text-muted-foreground mb-4 max-w-sm mx-auto\">\n              {error instanceof Error ? error.message : \"An unexpected error occurred. Please try again.\"}\n            </p>\n            <Button onClick={() => refetch()} variant=\"outline\" className=\"gap-2\">\n              <RefreshCw className=\"h-4 w-4\" />\n              Try Again\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Testimonials Grid */}\n      {!isError && (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {testimonials.map((testimonial) => (\n          <div\n            key={testimonial.id}\n            className=\"bg-card border border-border rounded-lg p-6 hover:shadow-lg transition-shadow relative\"\n          >\n            {/* Quote Icon */}\n            <div className=\"mb-4\">\n              <Quote className=\"h-8 w-8 text-primary opacity-20\" />\n            </div>\n\n            {/* Review */}\n            <p className=\"text-foreground mb-6 leading-relaxed\">\n              \"{testimonial.review}\"\n            </p>\n\n            {/* Rating */}\n            <div className=\"mb-4\">{renderStars(testimonial.rating)}</div>\n\n            {/* Client Info */}\n            <div className=\"flex items-center justify-between pt-4 border-t border-border\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-semibold\">\n                  {testimonial.client_name.split(' ').map(n => n[0]).join('')}\n                </div>\n                <div>\n                  <div className=\"font-medium text-foreground\">\n                    {testimonial.client_name}\n                  </div>\n                  <div className=\"text-sm text-muted-foreground\">\n                    {testimonial.property_type || \"Client\"}\n                  </div>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex items-center gap-1\">\n                <button \n                  onClick={() => setEditingTestimonial(testimonial)}\n                  className=\"p-2 hover:bg-accent rounded-lg transition-colors\"\n                >\n                  <Edit className=\"h-4 w-4 text-muted-foreground\" />\n                </button>\n                <button \n                  onClick={() => handleDeleteTestimonial(testimonial.id)}\n                  className=\"p-2 hover:bg-red-50 rounded-lg transition-colors\"\n                >\n                  <Trash2 className=\"h-4 w-4 text-red-500\" />\n                </button>\n              </div>\n            </div>\n          </div>\n          ))}\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!isError && testimonials.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-accent rounded-full mb-4\">\n            <Star className=\"h-8 w-8 text-muted-foreground\" />\n          </div>\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">\n            No testimonials yet\n          </h3>\n          <p className=\"text-muted-foreground mb-6\">\n            Start building social proof by adding client reviews\n          </p>\n          <button className=\"inline-flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium\">\n            <Plus className=\"h-5 w-5\" />\n            Add Your First Testimonial\n          </button>\n        </div>\n      )}\n\n      {/* Help Text */}\n      <div className=\"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-4\">\n        <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n          <span role=\"img\" aria-label=\"Tip\">ðŸ’¡</span> <strong>Tip:</strong> Featured testimonials will be prominently\n          displayed on your public profile. Ask satisfied clients for reviews\n          after successful transactions!\n        </p>\n      </div>\n\n      {/* Add Testimonial Modal */}\n      <AddTestimonialModal\n        open={isAddModalOpen}\n        onOpenChange={setIsAddModalOpen}\n        onSave={handleAddTestimonial}\n      />\n\n      {/* Edit Testimonial Modal */}\n      {editingTestimonial && (\n        <EditTestimonialModal\n          isOpen={!!editingTestimonial}\n          onClose={() => setEditingTestimonial(null)}\n          onSubmit={handleEditTestimonial}\n          initialData={{\n            client_name: editingTestimonial.client_name,\n            review: editingTestimonial.review,\n            rating: editingTestimonial.rating,\n            client_title: editingTestimonial.client_title,\n            property_type: editingTestimonial.property_type,\n            transaction_type: editingTestimonial.transaction_type,\n          }}\n        />\n      )}\n\n      {/* Upgrade Modal */}\n      <UpgradeModal\n        open={showUpgradeModal}\n        onOpenChange={setShowUpgradeModal}\n        feature=\"testimonials\"\n        currentPlan={subscription?.plan_name || \"Free\"}\n        requiredPlan=\"Starter\"\n      />\n\n      {/* Request Testimonial Modal */}\n      {profile && (\n        <RequestTestimonialModal\n          open={showRequestModal}\n          onOpenChange={setShowRequestModal}\n          username={profile.username || ''}\n          agentName={profile.full_name || ''}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["testimonialSchema","z.object","z.string","z.number","z.instanceof","z.boolean","AddTestimonialModal","open","onOpenChange","onSave","error","setError","useState","photoPreview","setPhotoPreview","register","handleSubmit","errors","reset","setValue","watch","useForm","zodResolver","rating","review","featured","handlePhotoUpload","e","file","reader","removePhoto","onSubmit","data","err","Dialog","jsxs","DialogContent","DialogHeader","jsx","DialogTitle","DialogDescription","Label","Input","star","Star","Textarea","X","Upload","DialogFooter","Button","EditTestimonialModal","isOpen","onClose","initialData","formData","setFormData","useEffect","RequestTestimonialModal","username","agentName","copied","setCopied","emailCopied","setEmailCopied","toast","useToast","reviewURL","emailTemplate","smsTemplate","copyToClipboard","text","type","shareViaEmail","subject","body","shareViaSMS","sms","shareNative","Check","Copy","Share2","ExternalLink","Mail","MessageSquare","Fragment","Testimonials","isAddModalOpen","setIsAddModalOpen","editingTestimonial","setEditingTestimonial","showUpgradeModal","setShowUpgradeModal","showRequestModal","setShowRequestModal","testimonials","isError","refetch","addTestimonial","updateTestimonial","deleteTestimonial","useTestimonials","subscription","canAdd","getLimit","getUsage","useSubscriptionLimits","profile","useProfile","handleAddClick","handleAddTestimonial","handleDeleteTestimonial","id","handleEditTestimonial","averageRating","sum","t","renderStars","_","i","Plus","LimitBanner","Card","CardContent","AlertCircle","RefreshCw","testimonial","Quote","n","Edit","Trash2","UpgradeModal"],"mappings":"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"}