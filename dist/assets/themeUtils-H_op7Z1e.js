import{j as e}from"./ui-components-ClhKjEhW.js";import{F as s,G as t,J as a,B as r,n as i,s as l,L as n,I as c,T as o,i as d,j as m,k as u,l as x,m as h}from"./index-DbJL4fXl.js";import{M as g,P as p,j as f,o as j,p as b,aG as y,h as v,x as N,u as w,L as k,n as $,H as E,m as S,Y as C,f as q,ac as I,I as z,F as U,aQ as T,aR as _}from"./icons--vfrx8Ku.js";import{a as F}from"./react-vendor-CmKLYqnR.js";import{C as L}from"./checkbox-BsMVipDR.js";import{u as R}from"./utils-CwVVV8W2.js";function M({config:i,isEditing:l=!1}){return e.jsxs("div",{className:"text-center space-y-4 p-6",style:{fontFamily:"var(--theme-font-body, inherit)"},children:[i.avatarUrl&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(s,{className:"w-24 h-24",children:[e.jsx(t,{src:i.avatarUrl,alt:i.title}),e.jsx(a,{className:"text-2xl",children:i.title.charAt(0)})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--theme-text, #1f2937)",fontFamily:"var(--theme-font-heading, inherit)"},children:i.title}),i.subtitle&&e.jsx("p",{className:"text-lg text-gray-600 mt-1",children:i.subtitle})]}),i.description&&e.jsx("p",{className:"text-gray-700 max-w-2xl mx-auto whitespace-pre-wrap",children:i.description}),i.showContactButton&&!l&&e.jsxs("div",{className:"flex gap-3 justify-center pt-2",children:[e.jsxs(r,{className:"gap-2",style:{backgroundColor:"var(--theme-primary, #2563eb)",borderRadius:"var(--theme-border-radius, 0.5rem)"},children:[e.jsx(g,{className:"w-4 h-4"}),"Contact Me"]}),e.jsxs(r,{variant:"outline",className:"gap-2",style:{borderRadius:"var(--theme-border-radius, 0.5rem)",borderColor:"var(--theme-primary, #2563eb)",color:"var(--theme-primary, #2563eb)"},children:[e.jsx(p,{className:"w-4 h-4"}),"Call Now"]})]})]})}function A({config:s,isEditing:t=!1,userId:a}){const[r,n]=F.useState([]),[c,o]=F.useState(!0);F.useEffect(()=>{!async function(){if(a)try{let e=l.from("listings").select("*").eq("user_id",a).order("created_at",{ascending:!1});"active"===s.filter?e=e.eq("status","active"):"featured"===s.filter&&(e=e.eq("is_featured",!0)),s.maxItems&&(e=e.limit(s.maxItems));const{data:t,error:r}=await e;if(r)throw r;n(t||[])}catch(e){n([])}finally{o(!1)}else o(!1)}()},[a,s.filter,s.maxItems]);const d=e=>e.photos&&Array.isArray(e.photos)&&e.photos.length>0?e.photos[0]:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800",m=e=>`${e.address}, ${e.city}, ${e.state}`;return c?e.jsxs("div",{className:"space-y-6",children:[s.title&&e.jsx("h2",{className:"text-2xl font-bold text-center",children:s.title}),e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"Loading listings..."})})]}):e.jsxs("div",{className:"space-y-6",children:[s.title&&e.jsx("h2",{className:"text-2xl font-bold text-center",children:s.title}),e.jsx("div",{className:(()=>{switch(s.layout){case"list":return"grid grid-cols-1 gap-4";case"carousel":return"flex overflow-x-auto gap-4 snap-x";default:return"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"}})(),children:r.map(t=>e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:d(t),alt:m(t),className:"w-full h-full object-cover"}),s.showStatus&&e.jsx(i,{className:"absolute top-2 right-2 capitalize",variant:"active"===t.status?"default":"secondary",children:t.status})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[s.showPrices&&e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",t.price.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[e.jsx(f,{className:"w-4 h-4"}),m(t)]}),(t.bedrooms||t.bathrooms||t.square_feet)&&e.jsxs("div",{className:"flex items-center gap-4 text-gray-700 text-sm pt-2",children:[t.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-4 h-4"}),t.bedrooms," bd"]}),t.bathrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-4 h-4"}),t.bathrooms," ba"]}),t.square_feet&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-4 h-4"}),t.square_feet.toLocaleString()," sqft"]})]})]})]},t.id))}),0===r.length&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{children:"No listings to display"}),t&&e.jsx("p",{className:"text-sm mt-1",children:"Add some properties in the Listings dashboard to see them here"})]})]})}function B({config:s,isEditing:t=!1}){const a=()=>{t||(s.openInNewTab?window.open(s.url,"_blank","noopener,noreferrer"):window.location.href=s.url)};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:["button"===s.style&&e.jsxs(r,{onClick:a,disabled:t,className:"w-full gap-2 justify-between",variant:"minimal"===s.style?"ghost":"default",size:"lg",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[s.icon&&e.jsx("span",{children:s.icon}),s.title]}),s.openInNewTab?e.jsx(v,{className:"w-4 h-4"}):e.jsx(N,{className:"w-4 h-4"})]}),"card"===s.style&&e.jsx("div",{onClick:a,className:`\n                p-4 rounded-lg border bg-white hover:shadow-md transition-all\n                ${!t&&"cursor-pointer hover:border-primary"}\n            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.icon&&e.jsx("div",{className:"text-2xl",children:s.icon}),e.jsx("span",{className:"font-semibold",children:s.title})]}),s.openInNewTab?e.jsx(v,{className:"w-5 h-5 text-gray-400"}):e.jsx(N,{className:"w-5 h-5 text-gray-400"})]})}),"minimal"===s.style&&e.jsx("div",{onClick:a,className:`\n                py-3 px-4 text-center\n                ${!t&&"cursor-pointer hover:text-primary"}\n                transition-colors\n            `,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.icon&&e.jsx("span",{children:s.icon}),e.jsx("span",{className:"font-medium",children:s.title}),s.openInNewTab&&e.jsx(v,{className:"w-4 h-4"})]})})]})}function P({config:s,isEditing:t=!1}){const[a,i]=F.useState({}),[l,g]=F.useState(!1),[p,f]=F.useState(!1),j=(e,s)=>{i(t=>({...t,[e]:s}))};return p?e.jsx("div",{className:"max-w-md mx-auto p-8 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(w,{className:"w-12 h-12 text-green-600 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Message Sent!"}),e.jsx("p",{className:"text-green-700",children:s.successMessage})]})}):e.jsxs("div",{className:"max-w-md mx-auto",children:[s.title&&e.jsx("h3",{className:"text-2xl font-bold text-center mb-6",children:s.title}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!t){g(!0);try{await new Promise(e=>setTimeout(e,1500)),f(!0),R.success(s.successMessage||"Message sent successfully!"),setTimeout(()=>{i({}),f(!1)},3e3)}catch(a){R.error("Failed to send message. Please try again.")}finally{g(!1)}}},className:"space-y-4",children:[s.fields.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:s.id,children:[s.label,s.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),"text"===s.type&&e.jsx(c,{id:s.id,type:"text",placeholder:s.placeholder,required:s.required,disabled:t||l,value:a[s.id]||"",onChange:e=>j(s.id,e.target.value)}),"email"===s.type&&e.jsx(c,{id:s.id,type:"email",placeholder:s.placeholder,required:s.required,disabled:t||l,value:a[s.id]||"",onChange:e=>j(s.id,e.target.value)}),"phone"===s.type&&e.jsx(c,{id:s.id,type:"tel",placeholder:s.placeholder,required:s.required,disabled:t||l,value:a[s.id]||"",onChange:e=>j(s.id,e.target.value)}),"textarea"===s.type&&e.jsx(o,{id:s.id,placeholder:s.placeholder,required:s.required,disabled:t||l,value:a[s.id]||"",onChange:e=>j(s.id,e.target.value),rows:4}),"select"===s.type&&s.options&&e.jsxs(d,{disabled:t||l,value:a[s.id],onValueChange:e=>j(s.id,e),children:[e.jsx(m,{children:e.jsx(u,{placeholder:s.placeholder})}),e.jsx(x,{children:s.options.map(s=>e.jsx(h,{value:s,children:s},s))})]}),"checkbox"===s.type&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{id:s.id,disabled:t||l,checked:a[s.id]||!1,onCheckedChange:e=>j(s.id,e)}),e.jsx("label",{htmlFor:s.id,className:"text-sm cursor-pointer",children:s.label})]})]},s.id)),e.jsxs(r,{type:"submit",className:"w-full gap-2",disabled:t||l,children:[l&&e.jsx(k,{className:"w-4 h-4 animate-spin"}),l?"Sending...":s.submitButtonText||"Submit"]})]})]})}function V({config:s,isEditing:t=!1}){const a=t=>{const a=`w-${"small"===s.iconSize?"5":"large"===s.iconSize?"8":"6"} h-${"small"===s.iconSize?"5":"large"===s.iconSize?"8":"6"}`;switch(t){case"facebook":return e.jsx(U,{className:a});case"instagram":return e.jsx(z,{className:a});case"twitter":return e.jsx(I,{className:a});case"linkedin":return e.jsx(q,{className:a});case"youtube":return e.jsx(C,{className:a});case"tiktok":return e.jsx(S,{className:a});case"zillow":return e.jsx(E,{className:a});case"realtor":return e.jsx($,{className:a});default:return null}};return e.jsxs("div",{className:"space-y-4",children:[s.title&&e.jsx("h3",{className:"text-xl font-semibold text-center",children:s.title}),e.jsx("div",{className:`flex gap-3 ${(()=>{switch(s.layout){case"vertical":return"flex-col items-center";case"grid":return"grid grid-cols-4 gap-3";default:return"flex-row justify-center"}})()}`,children:s.links.map(s=>{return e.jsx("button",{onClick:()=>{return e=s.url,void(t||window.open(e,"_blank","noopener,noreferrer"));var e},disabled:t,className:`\n                            p-3 rounded-full bg-gray-800 text-white\n                            transition-all hover:scale-110\n                            ${r=s.platform,{facebook:"hover:bg-blue-600",instagram:"hover:bg-pink-600",twitter:"hover:bg-sky-500",linkedin:"hover:bg-blue-700",youtube:"hover:bg-red-600",tiktok:"hover:bg-black",zillow:"hover:bg-blue-800",realtor:"hover:bg-red-700"}[r]||"hover:bg-gray-700"}\n                            ${t?"cursor-default":"cursor-pointer"}\n                        `,title:s.username||s.platform,children:a(s.platform)},s.id);var r})}),0===s.links.length&&t&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No social links added yet"})})]})}function G({config:s,isEditing:t=!1}){const[a,r]=F.useState(!1);return!s.videoUrl&&t?e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(T,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"No video URL"}),e.jsx("p",{className:"text-sm",children:"Add a YouTube or Vimeo URL"})]})}):e.jsxs("div",{className:"space-y-3",children:[s.title&&e.jsx("h3",{className:"text-xl font-semibold text-center",children:s.title}),e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-black",children:!a&&s.thumbnail?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:s.thumbnail,alt:s.title||"Video",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>{t||r(!0)},disabled:t,className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition-colors group",children:e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(T,{className:"w-8 h-8 text-primary ml-1"})})})]}):e.jsx("iframe",{src:(()=>{const e=s.videoUrl;if(e.includes("youtube.com")||e.includes("youtu.be")){let t="";return e.includes("youtube.com/watch?v=")?t=e.split("v=")[1]?.split("&")[0]:e.includes("youtu.be/")&&(t=e.split("youtu.be/")[1]?.split("?")[0]),`https://www.youtube.com/embed/${t}?autoplay=${s.autoplay?"1":"0"}&mute=${s.muted?"1":"0"}`}if(e.includes("vimeo.com")){const t=e.split("vimeo.com/")[1]?.split("?")[0];return`https://player.vimeo.com/video/${t}?autoplay=${s.autoplay?"1":"0"}&muted=${s.muted?"1":"0"}`}return e})(),title:s.title||"Video",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}function Y({config:s,isEditing:t=!1}){return e.jsx("div",{style:{height:`${s.height}px`},className:t?"border-2 border-dashed border-gray-300 rounded":"",children:t&&e.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:[s.height,"px spacer"]})})}function D({config:s,isEditing:t=!1}){return e.jsx("div",{className:`${(()=>{switch(s.align){case"center":return"text-center";case"right":return"text-right";default:return"text-left"}})()} ${(()=>{switch(s.fontSize){case"small":return"text-sm";case"large":return"text-lg";default:return"text-base"}})()}`,children:s.content?e.jsx("p",{className:"whitespace-pre-wrap text-gray-700",children:s.content}):t&&e.jsx("p",{className:"text-gray-400 italic",children:"Enter your text here..."})})}function H({config:s,isEditing:t=!1}){const a=()=>{switch(s.size){case"small":return"max-w-sm";case"medium":default:return"max-w-md";case"large":return"max-w-2xl";case"full":return"w-full"}};return!s.imageUrl&&t?e.jsx("div",{className:`${a()} mx-auto`,children:e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(_,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"No image"}),e.jsx("p",{className:"text-sm",children:"Upload an image"})]})})}):e.jsxs("div",{className:`${a()} mx-auto space-y-2`,children:[e.jsx("div",{onClick:()=>{!t&&s.link&&window.open(s.link,"_blank","noopener,noreferrer")},className:`\n                    rounded-lg overflow-hidden\n                    ${s.link&&!t?"cursor-pointer hover:opacity-90 transition-opacity":""}\n                `,children:e.jsx("img",{src:s.imageUrl,alt:s.alt,className:"w-full h-auto"})}),s.caption&&e.jsx("p",{className:"text-sm text-gray-600 text-center italic",children:s.caption})]})}function J({block:s,isEditing:t=!1,isSelected:a=!1,onSelect:r,userId:i}){const l=()=>{switch(s.type){case"bio":return e.jsx(M,{config:s.config,isEditing:t});case"listings":return e.jsx(A,{config:s.config,isEditing:t,userId:i});case"link":return e.jsx(B,{config:s.config,isEditing:t});case"contact":return e.jsx(P,{config:s.config,isEditing:t});case"social":return e.jsx(V,{config:s.config,isEditing:t});case"video":return e.jsx(G,{config:s.config,isEditing:t});case"spacer":return e.jsx(Y,{config:s.config,isEditing:t});case"text":return e.jsx(D,{config:s.config,isEditing:t});case"image":return e.jsx(H,{config:s.config,isEditing:t});default:return e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded text-center",children:e.jsxs("p",{className:"text-yellow-800",children:["Unknown block type: ",s.type]})})}};return t?e.jsxs("div",{onClick:r,className:`\n                relative group transition-all\n                ${a?"ring-2 ring-primary ring-offset-2":""}\n                ${s.visible?"":"opacity-50"}\n                ${r?"cursor-pointer":""}\n            `,children:[l(),r&&e.jsx("div",{className:`\n                        absolute inset-0 pointer-events-none\n                        ${a?"":"group-hover:ring-1 group-hover:ring-gray-300"}\n                    `})]}):e.jsx("div",{className:s.visible?"":"hidden",children:l()})}function Q(e){return{"--theme-primary":e.colors.primary,"--theme-secondary":e.colors.secondary,"--theme-background":e.colors.background,"--theme-text":e.colors.text,"--theme-accent":e.colors.accent,"--theme-font-heading":`'${e.fonts.heading}', sans-serif`,"--theme-font-body":`'${e.fonts.body}', sans-serif`,"--theme-border-radius":(t=e.borderRadius,{none:"0",small:"0.25rem",medium:"0.5rem",large:"1rem",full:"9999px"}[t]),"--theme-spacing":(s=e.spacing,{compact:"1rem",normal:"2rem",spacious:"3rem"}[s])};var s,t}function K(e){if(document.querySelector(`link[href*="${e.replace(/\s+/g,"+")}"]`))return;const s=document.createElement("link");s.href=`https://fonts.googleapis.com/css2?family=${e.replace(/\s+/g,"+")}:wght@400;500;600;700&display=swap`,s.rel="stylesheet",document.head.appendChild(s)}function O(e){K(e.fonts.heading),e.fonts.body!==e.fonts.heading&&K(e.fonts.body)}export{J as B,Q as g,O as p};
