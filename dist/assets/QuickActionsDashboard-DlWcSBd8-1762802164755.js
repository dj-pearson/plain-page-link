import{j as e}from"./ui-components-cnQr7CF8-1762802164755.js";import{a as s}from"./react-vendor-CmKLYqnR-1762802164755.js";import{B as t,o as a,n as i,L as l,i as n,j as r,k as c,l as d,m as o,I as g}from"./index-CJpEzai_-1762802164755.js";import{u as m,b as h}from"./utils-BEAgWB1B-1762802164755.js";import{aE as x,u,a3 as p,ar as j,H as v,ay as f,X as b,aF as w,aG as N,ap as y,aq as S,as as k,T as C,E as A,U as D,aH as L,aI as z}from"./icons-DrcTsquU-1762802164755.js";import{K as T}from"./KeyboardShortcutsHelper-C2P_2S_z-1762802164755.js";import{T as P,a as I,b as U,c as E}from"./tabs-D2xB4nZ2-1762802164755.js";import"./three-addons-DjCF8854-1762802164755.js";import"./three-BxgHQpUo-1762802164755.js";import"./charts-wuw5sxMV-1762802164755.js";import"./data-CuF6D63I-1762802164755.js";import"./supabase-C2TWteSX-1762802164755.js";import"./forms-uHc451s7-1762802164755.js";function R({listings:i,onStatusChange:l,onRefresh:n,isLoading:r=!1}){const[c,d]=s.useState(new Set),[o,g]=s.useState(new Set),[h,f]=s.useState("all"),b=e=>Math.floor((Date.now()-new Date(e.updatedAt).getTime())/864e5)>=7&&"active"===e.status,w=i.filter(e=>"all"===h||("stale"===h?b(e):e.status===h)),N={total:i.length,active:i.filter(e=>"active"===e.status).length,pending:i.filter(e=>"pending"===e.status).length,sold:i.filter(e=>"sold"===e.status).length,stale:i.filter(e=>b(e)).length},y=async(e,s)=>{g(s=>new Set(s).add(e));try{await l(e,s),m.success(`Listing updated to ${s}`)}catch(t){m.error("Failed to update listing")}finally{g(s=>{const t=new Set(s);return t.delete(e),t})}},S=async e=>{if(0===c.size)return void m.warning("No listings selected");const s=c.size;m.info(`Updating ${s} listing(s)...`);const t=Array.from(c).map(s=>y(s,e));await Promise.all(t),d(new Set),m.success(`${s} listing(s) updated to ${e}`)},k=()=>{d(new Set)};return s.useEffect(()=>{const e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&0!==c.size)switch(e.key.toLowerCase()){case"s":e.preventDefault(),S("sold");break;case"p":e.preventDefault(),S("pending");break;case"a":e.preventDefault(),S("active");break;case"escape":k()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Quick Status Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click listings to select, then use buttons or keyboard shortcuts"})]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:n,disabled:r,className:"gap-2",children:[e.jsx(x,{className:a("w-4 h-4",r&&"animate-spin")}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx(M,{label:"Total",count:N.total,active:"all"===h,onClick:()=>f("all")}),e.jsx(M,{label:"Active",count:N.active,active:"active"===h,onClick:()=>f("active"),color:"green"}),e.jsx(M,{label:"Pending",count:N.pending,active:"pending"===h,onClick:()=>f("pending"),color:"yellow"}),e.jsx(M,{label:"Sold",count:N.sold,color:"blue"}),e.jsx(M,{label:"Stale",count:N.stale,active:"stale"===h,onClick:()=>f("stale"),color:"orange",alert:N.stale>0})]}),c.size>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold",children:[c.size," selected"]}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>{d(new Set(w.map(e=>e.id)))},children:"Select All"}),e.jsx(t,{variant:"ghost",size:"sm",onClick:k,children:"Clear"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>S("active"),className:"gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),"Active ",e.jsx("kbd",{className:"ml-1 text-xs",children:"A"})]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>S("pending"),className:"gap-1",children:[e.jsx(p,{className:"w-4 h-4"}),"Pending ",e.jsx("kbd",{className:"ml-1 text-xs",children:"P"})]}),e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>S("sold"),className:"gap-1",children:[e.jsx(j,{className:"w-4 h-4"}),"Sold ",e.jsx("kbd",{className:"ml-1 text-xs",children:"S"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(s=>e.jsx(O,{listing:s,isSelected:c.has(s.id),isUpdating:o.has(s.id),onSelect:()=>{return e=s.id,void d(s=>{const t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t});var e},onStatusChange:y,isStale:b(s)},s.id))}),0===w.length&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No listings found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})]})}function M({label:s,count:t,active:i,onClick:l,color:n,alert:r}){return e.jsxs("button",{onClick:l,disabled:!l,className:a("relative p-4 rounded-lg border-2 transition-all",i?"border-primary bg-primary/5":"border-gray-200 bg-white",l&&"hover:border-primary/50 cursor-pointer",!l&&"cursor-default"),children:[r&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),e.jsx("div",{className:"text-3xl font-bold",children:t}),e.jsx("div",{className:a("text-sm font-medium",n&&{green:"text-green-600 bg-green-50 border-green-200",yellow:"text-yellow-600 bg-yellow-50 border-yellow-200",blue:"text-blue-600 bg-blue-50 border-blue-200",orange:"text-orange-600 bg-orange-50 border-orange-200"}[n]),children:s})]})}function O({listing:s,isSelected:l,isUpdating:n,onSelect:r,onStatusChange:c,isStale:d}){return e.jsxs("div",{onClick:r,className:a("relative group p-4 rounded-lg border-2 transition-all cursor-pointer",l?"border-primary bg-primary/5 shadow-md":"border-gray-200 bg-white hover:border-gray-300",n&&"opacity-50 pointer-events-none",d&&"border-l-4 border-l-orange-500"),children:[e.jsx("div",{className:a("absolute top-2 left-2 w-5 h-5 rounded border-2 flex items-center justify-center",l?"bg-primary border-primary":"border-gray-300 group-hover:border-primary"),children:l&&e.jsx(u,{className:"w-4 h-4 text-white"})}),d&&e.jsxs(i,{variant:"outline",className:"absolute top-2 right-2 bg-orange-100 text-orange-800 border-orange-300",children:[e.jsx(p,{className:"w-3 h-3 mr-1"}),"Stale"]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold text-sm truncate mb-1",children:s.title}),e.jsxs("p",{className:"text-lg font-bold text-primary mb-2",children:["$",s.price.toLocaleString()]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(i,{className:{active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",sold:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"}[s.status],children:s.status.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:h(new Date(s.updatedAt),{addSuffix:!0})})]}),(void 0!==s.views||void 0!==s.leads)&&e.jsxs("div",{className:"flex gap-3 text-xs text-gray-600 mb-3",children:[void 0!==s.views&&e.jsxs("span",{children:["ðŸ‘ï¸ ",s.views," views"]}),void 0!==s.leads&&e.jsxs("span",{children:["ðŸ‘¥ ",s.leads," leads"]})]}),e.jsxs("div",{className:"flex gap-2",children:["sold"!==s.status&&e.jsx(t,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),c(s.id,"sold")},className:"flex-1 text-xs",children:"Mark Sold"}),"pending"!==s.status&&e.jsx(t,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),c(s.id,"pending")},className:"flex-1 text-xs",children:"Pending"})]})]}),n&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 rounded-lg",children:e.jsx(x,{className:"w-6 h-6 animate-spin text-primary"})})]})}function F({staleListings:i,onDismiss:l,onRefresh:n,onDismissAll:r,className:c}){const[d,o]=s.useState(!0),[g,m]=s.useState(new Set);s.useEffect(()=>{const e=localStorage.getItem("dismissed-stale-alerts");if(e)try{m(new Set(JSON.parse(e)))}catch(s){}},[]),s.useEffect(()=>{localStorage.setItem("dismissed-stale-alerts",JSON.stringify(Array.from(g)))},[g]);const h=i.filter(e=>!g.has(e.id));if(0===h.length)return null;const x=h.filter(e=>e.daysSinceUpdate>=14).length,u=h.length-x;return e.jsxs("div",{className:a("bg-orange-50 border-2 border-orange-200 rounded-lg",c),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",onClick:()=>o(!d),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"w-6 h-6 text-orange-600"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-600 text-white text-xs rounded-full flex items-center justify-center font-bold",children:h.length})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900",children:"Stale Listings Need Attention"}),e.jsxs("p",{className:"text-sm text-orange-700",children:[x>0&&e.jsxs("span",{className:"font-medium",children:[x," critical (14+ days)"]}),x>0&&u>0&&" Â· ",u>0&&e.jsxs("span",{children:[u," warning (7+ days)"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),m(new Set(i.map(e=>e.id))),r?.()},className:"text-orange-700 hover:text-orange-900",children:"Dismiss All"}),e.jsx(t,{size:"sm",variant:"ghost",className:"text-orange-700",onClick:e=>e.stopPropagation(),children:d?"â–¼":"â–¶"})]})]}),d&&e.jsx("div",{className:"border-t border-orange-200 divide-y divide-orange-200",children:h.map(s=>e.jsx($,{listing:s,onDismiss:()=>{return e=s.id,m(s=>new Set(s).add(e)),void l?.(e);var e},onRefresh:()=>n?.(s.id)},s.id))}),d&&e.jsxs("div",{className:"p-4 bg-orange-100/50 border-t border-orange-200",children:[e.jsx("p",{className:"text-xs text-orange-800 mb-2 font-medium",children:"ðŸ’¡ Quick Tips:"}),e.jsxs("ul",{className:"text-xs text-orange-700 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Update listing descriptions with recent improvements or price changes"}),e.jsx("li",{children:"Add new photos to refresh your listing's appeal"}),e.jsx("li",{children:"Verify pricing is still competitive in current market"}),e.jsx("li",{children:"Check if property status has changed"})]})]})]})}function $({listing:s,onDismiss:l,onRefresh:n}){const r=s.daysSinceUpdate>=14;return e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-orange-100/30 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsx(i,{variant:"outline",className:a("text-xs",r?"bg-red-100 text-red-800 border-red-300":"bg-yellow-100 text-yellow-800 border-yellow-300"),children:r?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),"CRITICAL"]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-3 h-3 mr-1"}),"WARNING"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Status: ",s.status]}),e.jsxs("span",{children:["Last updated:"," ",h(new Date(s.updatedAt),{addSuffix:!0})]}),e.jsxs("span",{className:"font-medium text-orange-700",children:[s.daysSinceUpdate," days old"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(t,{size:"sm",variant:"outline",onClick:n,className:"gap-1 bg-white",children:[e.jsx(x,{className:"w-3 h-3"}),"Update"]}),e.jsx(t,{size:"sm",variant:"ghost",onClick:l,children:e.jsx(b,{className:"w-4 h-4"})})]})]})}function V({count:s}){return 0===s?null:e.jsxs(i,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300 animate-pulse",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),s," Stale"]})}function B({listings:a,selectedIds:i,onToggleSelect:h,onSelectAll:x,onClearSelection:u,onBulkUpdate:p,onBulkDelete:j}){const[v,f]=s.useState(!1),[C,A]=s.useState({}),[D,L]=s.useState("increase"),[z,T]=s.useState(""),[P,I]=s.useState("percent"),U=a.filter(e=>i.includes(e.id)),E=a.length>0&&i.length===a.length,R=e=>{if(!z)return e.price;const s=parseFloat(z);if(isNaN(s))return e.price;switch(D){case"increase":return"percent"===P?e.price*(1+s/100):e.price+s;case"decrease":return"percent"===P?e.price*(1-s/100):e.price-s;case"set":return s;default:return e.price}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:E?u:x,className:"gap-2",children:E?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4"}),"Deselect All"]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4"}),"Select All"]})}),e.jsxs("span",{className:"text-sm font-medium",children:[i.length," of ",a.length," selected"]})]}),e.jsx("div",{className:"flex gap-2",children:i.length>0&&!v&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Bulk Edit"]}),e.jsxs(t,{variant:"destructive",size:"sm",onClick:async()=>{if(0!==i.length){if(confirm(`Delete ${i.length} listing(s)? This cannot be undone.`))try{await j(i),m.success(`${i.length} listing(s) deleted`),u()}catch(e){m.error("Failed to delete listings")}}else m.error("No listings selected")},className:"gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Delete Selected"]})]})})]}),v&&i.length>0&&e.jsxs("div",{className:"p-6 bg-white rounded-lg border-2 border-primary shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Bulk Edit ",i.length," Listings"]}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:e.jsx(b,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Update Status"}),e.jsxs(n,{value:C.status||"",onValueChange:e=>A({...C,status:e}),children:[e.jsx(r,{children:e.jsx(c,{placeholder:"Keep current status"})}),e.jsxs(d,{children:[e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"pending",children:"Pending"}),e.jsx(o,{value:"sold",children:"Sold"}),e.jsx(o,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Update Category"}),e.jsxs(n,{value:C.category||"",onValueChange:e=>A({...C,category:e}),children:[e.jsx(r,{children:e.jsx(c,{placeholder:"Keep current category"})}),e.jsxs(d,{children:[e.jsx(o,{value:"residential",children:"Residential"}),e.jsx(o,{value:"commercial",children:"Commercial"}),e.jsx(o,{value:"land",children:"Land"}),e.jsx(o,{value:"rental",children:"Rental"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(l,{children:"Price Adjustment"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(n,{value:D,onValueChange:e=>L(e),children:[e.jsx(r,{children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(o,{value:"increase",children:"Increase"}),e.jsx(o,{value:"decrease",children:"Decrease"}),e.jsx(o,{value:"set",children:"Set to"})]})]}),e.jsx(g,{type:"number",placeholder:"Value",value:z,onChange:e=>T(e.target.value)}),e.jsxs(n,{value:P,onValueChange:e=>I(e),children:[e.jsx(r,{children:e.jsx(c,{})}),e.jsxs(d,{children:[e.jsx(o,{value:"percent",children:"Percent"}),e.jsx(o,{value:"amount",children:"Amount"})]})]})]})]})]}),U.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Preview Changes"}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[U.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-white rounded",children:[e.jsx("span",{className:"truncate flex-1",children:s.title}),z&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-500 line-through",children:["$",s.price.toLocaleString()]}),e.jsxs("span",{className:"font-medium text-primary",children:["$",R(s).toLocaleString()]})]})]},s.id)),U.length>5&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["... and ",U.length-5," ","more"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(t,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsxs(t,{onClick:async()=>{if(0===i.length)return void m.error("No listings selected");const e={...C};if(z&&(e.priceAdjustment={type:D,value:parseFloat(z),unit:P}),0!==Object.keys(e).length)try{await p(e),m.success(`${i.length} listing(s) updated`),f(!1),A({}),T("")}catch(s){m.error("Failed to update listings")}else m.warning("No changes to apply")},className:"gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Apply Changes"]})]})]})]})}function H({stats:s,period:t="Last 30 days",className:i}){return e.jsxs("div",{className:a("space-y-4",i),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quick Analytics"}),e.jsx("span",{className:"text-sm text-gray-600",children:t})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map((s,t)=>e.jsx(Q,{stat:s},t))})]})}function Q({stat:s}){const t=s.icon||v,i="up"===s.trend,l="down"===s.trend;return e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:a("p-2 rounded-lg",i&&"bg-green-100",l&&"bg-red-100",!i&&!l&&"bg-gray-100"),children:e.jsx(t,{className:a("w-4 h-4",i&&"text-green-600",l&&"text-red-600",!i&&!l&&"text-gray-600")})}),void 0!==s.change&&e.jsxs("div",{className:a("flex items-center gap-1 text-xs font-medium",i&&"text-green-600",l&&"text-red-600",!i&&!l&&"text-gray-600"),children:[i&&e.jsx(L,{className:"w-3 h-3"}),l&&e.jsx(z,{className:"w-3 h-3"}),Math.abs(s.change),"%"]})]}),e.jsx("div",{className:"text-2xl font-bold mb-1",children:s.value}),e.jsx("div",{className:"text-sm text-gray-600",children:s.label}),s.changeLabel&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.changeLabel})]})}const q=[{id:"1",title:"Modern 3BR House in Downtown",price:45e4,status:"active",updatedAt:new Date(Date.now()-7776e5).toISOString(),views:156,leads:12},{id:"2",title:"Luxury Condo with Ocean View",price:85e4,status:"pending",updatedAt:new Date(Date.now()-1728e5).toISOString(),views:243,leads:18},{id:"3",title:"Cozy 2BR Apartment Near Park",price:325e3,status:"active",updatedAt:new Date(Date.now()-1296e6).toISOString(),views:89,leads:5},{id:"4",title:"Spacious Family Home with Pool",price:675e3,status:"active",updatedAt:new Date(Date.now()-10368e5).toISOString(),views:198,leads:22},{id:"5",title:"Renovated Townhouse in Suburbs",price:425e3,status:"sold",updatedAt:new Date(Date.now()-864e5).toISOString(),views:312,leads:28},{id:"6",title:"Charming Cottage with Garden",price:385e3,status:"active",updatedAt:new Date(Date.now()-1728e6).toISOString(),views:67,leads:3}];function G(){const[t,a]=s.useState(q),[i,l]=s.useState([]),[n,r]=s.useState(!1),c=t.filter(e=>Math.floor((Date.now()-new Date(e.updatedAt).getTime())/864e5)>=7&&"active"===e.status).map(e=>({id:e.id,title:e.title,status:e.status,updatedAt:e.updatedAt,daysSinceUpdate:Math.floor((Date.now()-new Date(e.updatedAt).getTime())/864e5)})),d=[{label:"Total Listings",value:(o={totalListings:t.length,activeListings:t.filter(e=>"active"===e.status).length,totalViews:t.reduce((e,s)=>e+(s.views||0),0),totalLeads:t.reduce((e,s)=>e+(s.leads||0),0),avgPrice:Math.floor(t.reduce((e,s)=>e+s.price,0)/t.length),viewsChange:12.5,leadsChange:8.3}).totalListings,icon:v,trend:"neutral"},{label:"Active Listings",value:o.activeListings,icon:C,trend:"up"},{label:"Total Views",value:o.totalViews.toLocaleString(),change:o.viewsChange,changeLabel:o.viewsChange?"vs last period":void 0,icon:A,trend:o.viewsChange&&o.viewsChange>0?"up":o.viewsChange&&o.viewsChange<0?"down":"neutral"},{label:"Total Leads",value:o.totalLeads,change:o.leadsChange,changeLabel:o.leadsChange?"vs last period":void 0,icon:D,trend:o.leadsChange&&o.leadsChange>0?"up":o.leadsChange&&o.leadsChange<0?"down":"neutral"}];var o;const g=async(e,s)=>{await new Promise(e=>setTimeout(e,500)),a(t=>t.map(t=>t.id===e?{...t,status:s,updatedAt:(new Date).toISOString()}:t))},h=e=>{l(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},x=()=>{l([])},u=[{key:"?",description:"Show keyboard shortcuts",action:()=>{},category:"General"},{key:"s",description:"Mark selected as Sold",action:()=>{i.length>0&&i.forEach(e=>g(e,"sold"))},category:"Status"},{key:"p",description:"Mark selected as Pending",action:()=>{i.length>0&&i.forEach(e=>g(e,"pending"))},category:"Status"},{key:"a",description:"Mark selected as Active",action:()=>{i.length>0&&i.forEach(e=>g(e,"active"))},category:"Status"},{key:"Escape",description:"Clear selection",action:x,category:"Selection"}];return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Quick Actions Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your listings efficiently with keyboard shortcuts and bulk actions"})]}),c.length>0&&e.jsx(V,{count:c.length})]}),e.jsx(H,{stats:d,period:"Last 30 days"}),c.length>0&&e.jsx(F,{staleListings:c,onRefresh:async e=>{const s=t.find(s=>s.id===e);s&&m.info(`Opening editor for "${s.title}"`)}}),e.jsxs(P,{defaultValue:"quick-status",className:"w-full",children:[e.jsxs(I,{className:"grid w-full grid-cols-2 max-w-md",children:[e.jsx(U,{value:"quick-status",children:"Quick Status"}),e.jsx(U,{value:"bulk-edit",children:"Bulk Edit"})]}),e.jsx(E,{value:"quick-status",className:"mt-6",children:e.jsx(R,{listings:t,onStatusChange:g,onRefresh:async()=>{r(!0),await new Promise(e=>setTimeout(e,1e3)),r(!1),m.success("Listings refreshed")},isLoading:n})}),e.jsxs(E,{value:"bulk-edit",className:"mt-6",children:[e.jsx(B,{listings:t,selectedIds:i,onToggleSelect:h,onSelectAll:()=>{l(t.map(e=>e.id))},onClearSelection:x,onBulkUpdate:async e=>{await new Promise(e=>setTimeout(e,1e3)),a(s=>s.map(s=>{if(!i.includes(s.id))return s;let t={...s,updatedAt:(new Date).toISOString()};if(e.status&&(t.status=e.status),e.priceAdjustment){const{type:a,value:i,unit:l}=e.priceAdjustment;"increase"===a?t.price="percent"===l?s.price*(1+i/100):s.price+i:"decrease"===a?t.price="percent"===l?s.price*(1-i/100):s.price-i:"set"===a&&(t.price=i)}return t})),x()},onBulkDelete:async e=>{await new Promise(e=>setTimeout(e,800)),a(s=>s.filter(s=>!e.includes(s.id)))}}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:t.map(s=>e.jsxs("div",{onClick:()=>h(s.id),className:"p-4 rounded-lg border-2 cursor-pointer transition-all "+(i.includes(s.id)?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm",children:s.title}),e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>h(s.id),className:"mt-1"})]}),e.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",s.price.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.status})]},s.id))})]})]}),e.jsx(T,{shortcuts:u})]})}export{G as default};
