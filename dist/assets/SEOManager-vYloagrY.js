import{j as e}from"./ui-components-ClhKjEhW.js";import{a as s}from"./react-vendor-CmKLYqnR.js";import{T as a,a as t,b as i,c as r}from"./tabs-BcP80Awz.js";import{u as l,s as n,B as c,C as d,a as o,b as x,d as h,c as m,n as j,D as u,M as p,p as g,t as N,q as f,r as v,L as y,I as _,T as w,i as b,j as k,k as C,l as S,m as A,v as R}from"./index-DbJL4fXl.js";import{aE as q,C as F,ay as T,T as D,aB as E,aC as I,X as L,b0 as P,an as M,aQ as O,b1 as K,aq as B,ar as z,a3 as H,S as U,a4 as V,aN as G,U as W,h as Y,B as $,ab as J,b2 as Q,b3 as X,b4 as Z,a_ as ee,Z as se,a2 as ae,G as te,aR as ie,b5 as re,a6 as le,ah as ne,aw as ce,b6 as de}from"./icons--vfrx8Ku.js";import{b as oe}from"./utils-CwVVV8W2.js";import{S as xe}from"./switch-UDCmKqGz.js";import{T as he,a as me,b as je,c as ue,d as pe,e as ge}from"./table-XzXBZugN.js";import{R as Ne,L as fe,X as ve,Y as ye,T as _e,a as we}from"./charts-D6IDAGAX.js";const be=()=>{const{toast:u}=l(),[p,g]=s.useState(!1),[N,f]=s.useState([]),[v,y]=s.useState([]),[_,w]=s.useState(0),[b,k]=s.useState(0),[C,S]=s.useState(0);s.useEffect(()=>{A(),R();const e=n.channel("seo_notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"seo_notification_queue"},e=>{f(s=>[e.new,...s]),L([e.new,...N])}).subscribe();return()=>{e.unsubscribe()}},[]);const A=async()=>{try{const{data:e,error:s}=await n.from("seo_notification_queue").select("*").order("created_at",{ascending:!1}).limit(50);if(s)throw s;f(e||[]),L(e||[])}catch(e){}},R=async()=>{try{const{data:e,error:s}=await n.from("seo_audit_schedules").select("*").not("last_run_at","is",null).order("last_run_at",{ascending:!1}).limit(5);if(s)throw s;y(e||[])}catch(e){}},L=e=>{const s=e.filter(e=>"critical"===e.severity&&"pending"===e.status).length,a=e.filter(e=>"medium"===e.severity&&"pending"===e.status).length,t=e.filter(e=>"opportunity"===e.notification_type&&"pending"===e.status).length;w(s),k(a),S(t)},P=async e=>{try{const{error:s}=await n.from("seo_notification_queue").update({status:"sent"}).eq("id",e);if(s)throw s;f(s=>s.filter(s=>s.id!==e)),L(N.filter(s=>s.id!==e)),u({title:"Notification dismissed",description:"The notification has been marked as read"})}catch(s){u({title:"Error",description:s.message,variant:"destructive"})}},M=s=>{switch(s){case"critical":return e.jsx(F,{className:"h-5 w-5 text-red-500"});case"high":case"medium":return e.jsx(T,{className:"h-5 w-5 text-yellow-500"});case"low":return e.jsx(D,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(I,{className:"h-5 w-5 text-gray-500"})}},O=s=>e.jsx(j,{variant:{critical:"destructive",high:"destructive",medium:"default",low:"secondary"}[s]||"default",children:s}),K=N.filter(e=>("critical"===e.severity||"high"===e.severity)&&"critical_issue"===e.notification_type&&"pending"===e.status),B=N.filter(e=>"medium"===e.severity&&"warning"===e.notification_type&&"pending"===e.status),z=N.filter(e=>"opportunity"===e.notification_type&&"pending"===e.status),H=N.filter(e=>"competitor_alert"===e.notification_type&&"pending"===e.status);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"SEO Alerts Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring of SEO issues, warnings, and opportunities"})]}),e.jsxs(c,{onClick:async()=>{g(!0),await A(),await R(),g(!1),u({title:"Alerts refreshed",description:"Latest alerts and audit results loaded"})},disabled:p,variant:"outline",children:[e.jsx(q,{className:"h-4 w-4 mr-2 "+(p?"animate-spin":"")}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(d,{className:"border-red-500",children:[e.jsx(o,{className:"pb-2",children:e.jsxs(x,{className:"text-sm flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-red-500"}),"Critical Issues"]})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:_}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Require immediate attention"})]})]}),e.jsxs(d,{className:"border-yellow-500",children:[e.jsx(o,{className:"pb-2",children:e.jsxs(x,{className:"text-sm flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-yellow-500"}),"Warnings"]})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:b}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Should be addressed soon"})]})]}),e.jsxs(d,{className:"border-blue-500",children:[e.jsx(o,{className:"pb-2",children:e.jsxs(x,{className:"text-sm flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-blue-500"}),"Opportunities"]})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:C}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Potential improvements"})]})]}),e.jsxs(d,{className:"border-green-500",children:[e.jsx(o,{className:"pb-2",children:e.jsxs(x,{className:"text-sm flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-green-500"}),"Health Score"]})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:v[0]?.last_run_results?.overall_score||"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Latest audit score"})]})]})]}),e.jsxs(a,{defaultValue:"critical",className:"w-full",children:[e.jsxs(t,{className:"grid w-full grid-cols-4",children:[e.jsxs(i,{value:"critical",children:["Critical (",K.length,")"]}),e.jsxs(i,{value:"warnings",children:["Warnings (",B.length,")"]}),e.jsxs(i,{value:"opportunities",children:["Opportunities (",z.length,")"]}),e.jsxs(i,{value:"competitor",children:["Competitors (",H.length,")"]})]}),e.jsx(r,{value:"critical",className:"space-y-4",children:0===K.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"No critical issues detected"})]})}):K.map(s=>e.jsx(ke,{notification:s,onDismiss:P,getSeverityIcon:M,getSeverityBadge:O},s.id))}),e.jsx(r,{value:"warnings",className:"space-y-4",children:0===B.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"No warnings at this time"})]})}):B.map(s=>e.jsx(ke,{notification:s,onDismiss:P,getSeverityIcon:M,getSeverityBadge:O},s.id))}),e.jsx(r,{value:"opportunities",className:"space-y-4",children:0===z.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(D,{className:"h-12 w-12 mx-auto mb-2 text-blue-500"}),e.jsx("p",{children:"No new opportunities identified"})]})}):z.map(s=>e.jsx(ke,{notification:s,onDismiss:P,getSeverityIcon:M,getSeverityBadge:O},s.id))}),e.jsx(r,{value:"competitor",className:"space-y-4",children:0===H.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(I,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No competitor alerts"})]})}):H.map(s=>e.jsx(ke,{notification:s,onDismiss:P,getSeverityIcon:M,getSeverityBadge:O},s.id))})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Recent Audits"}),e.jsx(m,{children:"Latest automated audit results"})]}),e.jsx(h,{children:0===v.length?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No recent audits found"}):e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.last_run_at&&`Ran ${oe(new Date(s.last_run_at),{addSuffix:!0})}`})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.last_run_results&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.last_run_results.overall_score||"N/A"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Score"})]}),e.jsx(j,{variant:"success"===s.last_run_status?"default":"destructive",children:s.last_run_status})]})]},s.id))})})]})]})},ke=({notification:s,onDismiss:a,getSeverityIcon:t,getSeverityBadge:i})=>e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t(s.severity),e.jsxs("div",{children:[e.jsx(x,{className:"text-lg",children:s.title}),e.jsx(m,{children:oe(new Date(s.created_at),{addSuffix:!0})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i(s.severity),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>a(s.id),children:e.jsx(L,{className:"h-4 w-4"})})]})]})}),e.jsxs(h,{children:[e.jsx("p",{className:"text-sm mb-4",children:s.message}),s.data&&e.jsxs("div",{className:"space-y-2",children:[s.data.critical_issues&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-sm mb-1",children:"Critical Issues:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:s.data.critical_issues.slice(0,3).map((s,a)=>e.jsx("li",{children:s},a))})]}),s.data.warnings&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-sm mb-1",children:"Warnings:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground",children:s.data.warnings.slice(0,3).map((s,a)=>e.jsx("li",{children:s},a))})]}),s.data.overall_score&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Overall Score:"}),e.jsxs("span",{className:"text-lg font-bold",children:[s.data.overall_score,"/100"]})]})]})]})]}),Ce=[{value:"missing_meta_description",label:"Missing Meta Description"},{value:"missing_alt_text",label:"Missing Alt Text"},{value:"broken_link",label:"Broken Link"},{value:"missing_h1",label:"Missing H1"},{value:"duplicate_title",label:"Duplicate Title"},{value:"thin_content",label:"Thin Content"},{value:"slow_page",label:"Slow Page Speed"},{value:"missing_schema",label:"Missing Schema Markup"}],Se=[{value:"generate_meta_description",label:"Generate Meta Description (AI)"},{value:"generate_alt_text",label:"Generate Alt Text (AI)"},{value:"update_link",label:"Update Link"},{value:"add_schema_markup",label:"Add Schema Markup"},{value:"optimize_image",label:"Optimize Image"},{value:"fix_heading_structure",label:"Fix Heading Structure"}],Ae=()=>{const{toast:q}=l(),[F,T]=s.useState([]),[D,I]=s.useState([]),[L,U]=s.useState([]),[V,G]=s.useState(!1),[W,Y]=s.useState(!1),[$,J]=s.useState({name:"",description:"",issue_type:"",fix_action:"",requires_approval:!0,auto_apply:!1,priority:50});s.useEffect(()=>{Q(),X(),Z()},[]);const Q=async()=>{try{const{data:e,error:s}=await n.from("seo_autofix_rules").select("*").order("priority",{ascending:!1});if(s)throw s;T(e||[])}catch(e){}},X=async()=>{try{const{data:e,error:s}=await n.from("seo_autofix_history").select("*").order("applied_at",{ascending:!1}).limit(50);if(s)throw s;I(e||[])}catch(e){}},Z=async()=>{try{const{data:e,error:s}=await n.from("seo_autofix_history").select("*").eq("result","pending_approval").order("applied_at",{ascending:!1});if(s)throw s;U(e||[])}catch(e){}},ee=s=>{switch(s){case"success":return e.jsx(E,{className:"h-5 w-5 text-green-500"});case"failed":return e.jsx(z,{className:"h-5 w-5 text-red-500"});case"pending_approval":return e.jsx(H,{className:"h-5 w-5 text-yellow-500"});default:return e.jsx(H,{className:"h-5 w-5 text-gray-500"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(P,{className:"h-6 w-6"}),"Auto-Fix Engine"]}),e.jsx("p",{className:"text-muted-foreground",children:"Automatically detect and fix common SEO issues"})]}),e.jsxs(u,{open:W,onOpenChange:Y,children:[e.jsx(p,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Create Rule"]})}),e.jsxs(g,{className:"max-w-2xl",children:[e.jsxs(N,{children:[e.jsx(f,{children:"Create Auto-Fix Rule"}),e.jsx(v,{children:"Define a rule to automatically fix SEO issues"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"rule-name",children:"Rule Name *"}),e.jsx(_,{id:"rule-name",placeholder:"e.g., Auto-generate missing alt text",value:$.name,onChange:e=>J({...$,name:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"rule-description",children:"Description"}),e.jsx(w,{id:"rule-description",placeholder:"Describe what this rule does...",value:$.description,onChange:e=>J({...$,description:e.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"issue-type",children:"Issue Type *"}),e.jsxs(b,{value:$.issue_type,onValueChange:e=>J({...$,issue_type:e}),children:[e.jsx(k,{children:e.jsx(C,{placeholder:"Select issue type"})}),e.jsx(S,{children:Ce.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"fix-action",children:"Fix Action *"}),e.jsxs(b,{value:$.fix_action,onValueChange:e=>J({...$,fix_action:e}),children:[e.jsx(k,{children:e.jsx(C,{placeholder:"Select fix action"})}),e.jsx(S,{children:Se.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"priority",children:"Priority (0-100)"}),e.jsx(_,{id:"priority",type:"number",min:"0",max:"100",value:$.priority,onChange:e=>J({...$,priority:parseInt(e.target.value)||50})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Higher priority rules are executed first"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"requires-approval",checked:$.requires_approval,onCheckedChange:e=>J({...$,requires_approval:e})}),e.jsx(y,{htmlFor:"requires-approval",children:"Requires Approval"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"auto-apply",checked:$.auto_apply,onCheckedChange:e=>J({...$,auto_apply:e}),disabled:$.requires_approval}),e.jsx(y,{htmlFor:"auto-apply",children:"Auto Apply"})]})]})]}),e.jsxs(R,{children:[e.jsx(c,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),e.jsx(c,{onClick:async()=>{if($.name&&$.issue_type&&$.fix_action){G(!0);try{const{data:e,error:s}=await n.from("seo_autofix_rules").insert([{name:$.name,description:$.description,issue_type:$.issue_type,conditions:{},fix_action:{action:$.fix_action},requires_approval:$.requires_approval,auto_apply:$.auto_apply,priority:$.priority}]).select();if(s)throw s;q({title:"Rule Created",description:"Auto-fix rule has been created successfully"}),Y(!1),J({name:"",description:"",issue_type:"",fix_action:"",requires_approval:!0,auto_apply:!1,priority:50}),await Q()}catch(e){q({title:"Error",description:e.message,variant:"destructive"})}finally{G(!1)}}else q({title:"Missing Fields",description:"Please fill in all required fields",variant:"destructive"})},disabled:V,children:V?"Creating...":"Create Rule"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Active Rules"})}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold",children:F.filter(e=>e.active).length})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Pending Approvals"})}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:L.length})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Total Fixes Applied"})}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:F.reduce((e,s)=>e+s.applied_count,0)})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Success Rate"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[F.reduce((e,s)=>e+s.applied_count,0)>0?Math.round(F.reduce((e,s)=>e+s.success_count,0)/F.reduce((e,s)=>e+s.applied_count,0)*100):0,"%"]})})]})]}),e.jsxs(a,{defaultValue:"rules",className:"w-full",children:[e.jsxs(t,{className:"grid w-full grid-cols-3",children:[e.jsxs(i,{value:"rules",children:["Rules (",F.length,")"]}),e.jsxs(i,{value:"approvals",children:["Pending Approvals (",L.length,")"]}),e.jsxs(i,{value:"history",children:["History (",D.length,")"]})]}),e.jsx(r,{value:"rules",className:"space-y-4",children:0===F.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(P,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No auto-fix rules created yet"}),e.jsxs(c,{className:"mt-4",onClick:()=>Y(!0),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Create Your First Rule"]})]})}):F.map(s=>e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(x,{className:"flex items-center gap-2",children:[s.name,e.jsxs(j,{variant:s.active?"default":"secondary",children:[s.active?e.jsx(O,{className:"h-3 w-3 mr-1"}):e.jsx(K,{className:"h-3 w-3 mr-1"}),s.active?"Active":"Inactive"]}),e.jsxs(j,{variant:"outline",children:["Priority: ",s.priority]})]}),e.jsx(m,{children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>(async(e,s)=>{try{const{error:a}=await n.from("seo_autofix_rules").update({active:!s}).eq("id",e);if(a)throw a;q({title:s?"Rule Disabled":"Rule Enabled",description:"Auto-fix rule has been "+(s?"disabled":"enabled")}),await Q()}catch(a){q({title:"Error",description:a.message,variant:"destructive"})}})(s.id,s.active),children:s.active?e.jsx(K,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this rule?"))try{const{error:s}=await n.from("seo_autofix_rules").delete().eq("id",e);if(s)throw s;q({title:"Rule Deleted",description:"Auto-fix rule has been deleted"}),await Q()}catch(s){q({title:"Error",description:s.message,variant:"destructive"})}})(s.id),children:e.jsx(B,{className:"h-4 w-4"})})]})]})}),e.jsxs(h,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Issue Type"}),e.jsx("p",{className:"font-semibold",children:Ce.find(e=>e.value===s.issue_type)?.label||s.issue_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Applied"}),e.jsx("p",{className:"font-semibold",children:s.applied_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Success"}),e.jsx("p",{className:"font-semibold text-green-600",children:s.success_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Failed"}),e.jsx("p",{className:"font-semibold text-red-600",children:s.failure_count})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[s.requires_approval&&e.jsx(j,{variant:"outline",children:"Requires Approval"}),s.auto_apply&&e.jsx(j,{variant:"outline",children:"Auto Apply"})]})]})]},s.id))}),e.jsx(r,{value:"approvals",className:"space-y-4",children:0===L.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-2 text-green-500"}),e.jsx("p",{children:"No pending approvals"})]})}):L.map(s=>e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[ee(s.result),"Pending Fix Approval"]}),e.jsx(m,{children:oe(new Date(s.applied_at),{addSuffix:!0})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>approveFiximestamp(s.id),children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(c,{size:"sm",variant:"destructive",onClick:()=>(async e=>{try{const{error:s}=await n.from("seo_autofix_history").update({result:"failed",error_message:"Rejected by admin"}).eq("id",e);if(s)throw s;q({title:"Fix Rejected",description:"The fix has been rejected"}),Z(),X()}catch(s){q({title:"Error",description:s.message,variant:"destructive"})}})(s.id),children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Issue Type:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.issue_type})]}),s.fix_applied&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:"Proposed Fix:"}),e.jsx("pre",{className:"text-xs bg-muted p-2 rounded-md mt-1 overflow-auto",children:JSON.stringify(s.fix_applied,null,2)})]})]})})]},s.id))}),e.jsx(r,{value:"history",className:"space-y-4",children:0===D.length?e.jsx(d,{children:e.jsxs(h,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(H,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No fix history yet"})]})}):D.map(s=>e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[ee(s.result),s.issue_type]}),e.jsx(m,{children:oe(new Date(s.applied_at),{addSuffix:!0})})]}),e.jsx(j,{variant:"success"===s.result?"default":"failed"===s.result?"destructive":"secondary",children:s.result})]})}),s.error_message&&e.jsx(h,{children:e.jsx("p",{className:"text-sm text-red-600",children:s.error_message})})]},s.id))})]})]})},Re=()=>{const{toast:a}=l(),[t,i]=s.useState([]),[r,u]=s.useState(!1),[p,g]=s.useState(""),[N,f]=s.useState(null),[v,y]=s.useState([]);s.useEffect(()=>{w()},[]);const w=async()=>{u(!0);try{const{data:e,error:s}=await n.from("seo_keywords").select("*").order("current_position",{ascending:!0});if(s)throw s;i(e||[])}catch(e){a({title:"Error",description:e.message,variant:"destructive"})}finally{u(!1)}},b=(s,a)=>s<a?e.jsx(D,{className:"h-4 w-4 text-green-500"}):s>a?e.jsx(V,{className:"h-4 w-4 text-red-500"}):e.jsx(G,{className:"h-4 w-4 text-gray-500"}),k=(s,a)=>{const t=a-s;return t>0?e.jsxs("span",{className:"text-green-600",children:["+",t]}):t<0?e.jsx("span",{className:"text-red-600",children:t}):e.jsx("span",{className:"text-gray-500",children:"0"})},C=t.filter(e=>e.keyword.toLowerCase().includes(p.toLowerCase())),S=t.filter(e=>e.previous_position&&e.current_position!==e.previous_position).sort((e,s)=>s.previous_position-s.current_position-(e.previous_position-e.current_position)).slice(0,5),A=t.filter(e=>e.current_position<=10),R=t.filter(e=>e.current_position>20&&e.search_volume>100);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Keywords Tracker"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor keyword rankings and track position changes"})]}),e.jsxs(c,{onClick:async()=>{u(!0);try{const{error:e}=await n.functions.invoke("check-keyword-positions",{body:{}});if(e)throw e;a({title:"Positions Updated",description:"Keyword positions have been refreshed"}),await w()}catch(e){a({title:"Error",description:e.message,variant:"destructive"})}finally{u(!1)}},disabled:r,children:[e.jsx(q,{className:"h-4 w-4 mr-2 "+(r?"animate-spin":"")}),"Check Positions"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Total Keywords"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Being tracked"})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Top 10 Rankings"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:A.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keywords in top 10"})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Biggest Gain"})}),e.jsx(h,{children:S.length>0&&S[0].current_position<S[0].previous_position?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["+",S[0].previous_position-S[0].current_position]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:S[0].keyword})]}):e.jsx("div",{className:"text-3xl font-bold text-gray-400",children:"-"})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsxs(x,{className:"text-sm flex items-center gap-1",children:[e.jsx(F,{className:"h-4 w-4"}),"Needs Attention"]})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:R.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keywords to optimize"})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(_,{placeholder:"Search keywords...",value:p,onChange:e=>g(e.target.value),className:"pl-9"})]})}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"All Keywords"}),e.jsxs(m,{children:[C.length," keywords found"]})]}),e.jsx(h,{children:e.jsx("div",{className:"overflow-auto",children:e.jsxs(he,{children:[e.jsx(me,{children:e.jsxs(je,{children:[e.jsx(ue,{children:"Keyword"}),e.jsx(ue,{children:"Position"}),e.jsx(ue,{children:"Change"}),e.jsx(ue,{children:"Search Volume"}),e.jsx(ue,{children:"Difficulty"}),e.jsx(ue,{children:"URL"}),e.jsx(ue,{children:"Last Checked"}),e.jsx(ue,{children:"Actions"})]})}),e.jsx(pe,{children:0===C.length?e.jsx(je,{children:e.jsx(ge,{colSpan:8,className:"text-center text-muted-foreground",children:"No keywords found"})}):C.map(s=>{return e.jsxs(je,{children:[e.jsx(ge,{className:"font-medium",children:s.keyword}),e.jsx(ge,{children:e.jsxs(j,{variant:s.current_position<=10?"default":"outline",children:["#",s.current_position]})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[b(s.current_position,s.previous_position||s.current_position),k(s.current_position,s.previous_position||s.current_position)]})}),e.jsx(ge,{children:s.search_volume?.toLocaleString()||"N/A"}),e.jsx(ge,{children:(a=s.difficulty||0,a>=70?e.jsx(j,{variant:"destructive",children:"Hard"}):a>=40?e.jsx(j,{variant:"default",children:"Medium"}):e.jsx(j,{variant:"secondary",children:"Easy"}))}),e.jsx(ge,{className:"max-w-xs truncate",children:s.url||"-"}),e.jsx(ge,{children:s.last_checked?new Date(s.last_checked).toLocaleDateString():"Never"}),e.jsx(ge,{children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{f(s),(async e=>{try{const{data:s,error:a}=await n.from("seo_keyword_history").select("keyword, position, checked_at").eq("keyword",e).order("checked_at",{ascending:!0}).limit(30);if(a)throw a;y(s||[])}catch(s){}})(s.keyword)},children:"View History"})})]},s.id);var a})})]})})})]}),N&&e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsxs(x,{children:["Position History: ",N.keyword]}),e.jsx(m,{children:"Ranking positions over the last 30 checks"})]}),e.jsxs(h,{children:[v.length>0?e.jsx(Ne,{width:"100%",height:300,children:e.jsxs(fe,{data:v,children:[e.jsx(ve,{dataKey:"checked_at",tickFormatter:e=>new Date(e).toLocaleDateString()}),e.jsx(ye,{reversed:!0,domain:[0,100]}),e.jsx(_e,{labelFormatter:e=>new Date(e).toLocaleDateString(),formatter:e=>[`Position ${e}`,"Rank"]}),e.jsx(we,{type:"monotone",dataKey:"position",stroke:"#2563eb",strokeWidth:2,dot:{r:4}})]})}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No history available for this keyword"}),e.jsx("div",{className:"mt-4",children:e.jsx(c,{variant:"outline",onClick:()=>f(null),children:"Close"})})]})]}),S.length>0&&e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Top Movers"}),e.jsx(m,{children:"Keywords with the biggest position changes"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:S.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:s.keyword}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Position: #",s.current_position]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b(s.current_position,s.previous_position),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:k(s.current_position,s.previous_position)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.previous_position," â†’ ",s.current_position]})]})]})]},s.id))})})]})]})},qe=()=>{const{toast:a}=l(),[t,i]=s.useState([]),[r,w]=s.useState([]),[b,k]=s.useState(!1),[C,S]=s.useState(!1),[A,T]=s.useState({competitor_domain:"",competitor_name:"",keywords:"",check_frequency:"weekly",alert_on_rank_change:!0,alert_on_new_backlinks:!0,rank_change_threshold:5});s.useEffect(()=>{E(),I()},[]);const E=async()=>{try{const{data:e,error:s}=await n.from("seo_competitor_tracking").select("*").order("created_at",{ascending:!1});if(s)throw s;i(e||[])}catch(e){}},I=async()=>{try{const{data:e,error:s}=await n.from("seo_competitor_analysis").select("*").order("analyzed_at",{ascending:!1}).limit(100);if(s)throw s;w(e||[])}catch(e){}},L=r.filter(e=>e.gap<0&&Math.abs(e.gap)<=10),P=r.filter(e=>e.gap>0&&e.our_position<=10),O=r.filter(e=>e.their_position<=10&&e.our_position>10&&e.search_volume>100);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(W,{className:"h-6 w-6"}),"Competitor Matrix"]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor competitor rankings and identify opportunities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",onClick:async()=>{k(!0);try{a({title:"Analysis Refreshing",description:"Competitor analysis is being updated..."}),await new Promise(e=>setTimeout(e,2e3)),await I(),a({title:"Analysis Complete",description:"Competitor data has been refreshed"})}catch(e){a({title:"Error",description:e.message,variant:"destructive"})}finally{k(!1)}},disabled:b,children:[e.jsx(q,{className:"h-4 w-4 mr-2 "+(b?"animate-spin":"")}),"Refresh"]}),e.jsxs(u,{open:C,onOpenChange:S,children:[e.jsx(p,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Competitor"]})}),e.jsxs(g,{children:[e.jsxs(N,{children:[e.jsx(f,{children:"Add Competitor"}),e.jsx(v,{children:"Configure automated competitor tracking"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"domain",children:"Competitor Domain *"}),e.jsx(_,{id:"domain",placeholder:"competitor.com",value:A.competitor_domain,onChange:e=>T({...A,competitor_domain:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"name",children:"Competitor Name"}),e.jsx(_,{id:"name",placeholder:"Competitor Inc.",value:A.competitor_name,onChange:e=>T({...A,competitor_name:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"keywords",children:"Keywords to Track"}),e.jsx(_,{id:"keywords",placeholder:"keyword1, keyword2, keyword3",value:A.keywords,onChange:e=>T({...A,keywords:e.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of keywords"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"threshold",children:"Rank Change Alert Threshold"}),e.jsx(_,{id:"threshold",type:"number",value:A.rank_change_threshold,onChange:e=>T({...A,rank_change_threshold:parseInt(e.target.value)||5})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert when position changes by more than this number"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"rank-alert",children:"Alert on Rank Changes"}),e.jsx(xe,{id:"rank-alert",checked:A.alert_on_rank_change,onCheckedChange:e=>T({...A,alert_on_rank_change:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"backlink-alert",children:"Alert on New Backlinks"}),e.jsx(xe,{id:"backlink-alert",checked:A.alert_on_new_backlinks,onCheckedChange:e=>T({...A,alert_on_new_backlinks:e})})]})]}),e.jsxs(R,{children:[e.jsx(c,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(c,{onClick:async()=>{if(A.competitor_domain){k(!0);try{const e=A.keywords.split(",").map(e=>e.trim()).filter(e=>e.length>0),{error:s}=await n.from("seo_competitor_tracking").insert([{competitor_domain:A.competitor_domain,competitor_name:A.competitor_name||A.competitor_domain,keywords:e,check_frequency:A.check_frequency,alert_on_rank_change:A.alert_on_rank_change,alert_on_new_backlinks:A.alert_on_new_backlinks,rank_change_threshold:A.rank_change_threshold}]);if(s)throw s;a({title:"Competitor Added",description:"Competitor tracking has been configured"}),S(!1),T({competitor_domain:"",competitor_name:"",keywords:"",check_frequency:"weekly",alert_on_rank_change:!0,alert_on_new_backlinks:!0,rank_change_threshold:5}),await E()}catch(e){a({title:"Error",description:e.message,variant:"destructive"})}finally{k(!1)}}else a({title:"Domain Required",description:"Please enter a competitor domain",variant:"destructive"})},disabled:b,children:b?"Adding...":"Add Competitor"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Tracked Competitors"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Being monitored"})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Keyword Gaps"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:L.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Close to outranking"})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Winning Keywords"})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:P.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Outranking competitors"})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsxs(x,{className:"text-sm flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4"}),"Opportunities"]})}),e.jsxs(h,{children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:O.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"High-value targets"})]})]})]}),e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Tracked Competitors"}),e.jsxs(m,{children:[t.length," competitors being monitored"]})]}),e.jsx(h,{children:0===t.length?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No competitors tracked yet"}),e.jsxs(c,{className:"mt-4",onClick:()=>S(!0),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Your First Competitor"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold",children:s.competitor_name}),e.jsx("a",{href:`https://${s.competitor_domain}`,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(j,{variant:s.active?"default":"secondary",children:s.active?"Active":"Paused"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.competitor_domain}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(j,{variant:"outline",children:[s.keywords?.length||0," keywords"]}),e.jsxs(j,{variant:"outline",children:["Check ",s.check_frequency]}),s.alert_on_rank_change&&e.jsxs(j,{variant:"outline",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"Rank alerts"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-right mr-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last checked"}),e.jsx("p",{className:"text-sm font-semibold",children:s.last_checked_at?new Date(s.last_checked_at).toLocaleDateString():"Never"})]}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>(async e=>{if(confirm("Are you sure you want to stop tracking this competitor?"))try{const{error:s}=await n.from("seo_competitor_tracking").delete().eq("id",e);if(s)throw s;a({title:"Competitor Removed",description:"Competitor tracking has been stopped"}),await E()}catch(s){a({title:"Error",description:s.message,variant:"destructive"})}})(s.id),children:e.jsx(B,{className:"h-4 w-4"})})]})]},s.id))})})]}),O.length>0&&e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Top Opportunities"}),e.jsx(m,{children:"High-value keywords where competitors rank well and you don't"})]}),e.jsx(h,{children:e.jsxs(he,{children:[e.jsx(me,{children:e.jsxs(je,{children:[e.jsx(ue,{children:"Keyword"}),e.jsx(ue,{children:"Competitor"}),e.jsx(ue,{children:"Their Position"}),e.jsx(ue,{children:"Your Position"}),e.jsx(ue,{children:"Gap"}),e.jsx(ue,{children:"Search Volume"})]})}),e.jsx(pe,{children:O.slice(0,10).map(s=>e.jsxs(je,{children:[e.jsx(ge,{className:"font-medium",children:s.keyword}),e.jsx(ge,{children:s.competitor_domain}),e.jsx(ge,{children:e.jsxs(j,{variant:"default",children:["#",s.their_position]})}),e.jsx(ge,{children:e.jsxs(j,{variant:"outline",children:["#",s.our_position]})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(V,{className:"h-4 w-4"}),s.gap]})}),e.jsx(ge,{children:s.search_volume?.toLocaleString()||"N/A"})]},s.id))})]})})]}),L.length>0&&e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Close Keyword Gaps"}),e.jsx(m,{children:"Keywords where you're close to outranking competitors"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:L.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:s.keyword}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["vs ",s.competitor_domain]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"You"}),e.jsxs(j,{variant:"outline",children:["#",s.our_position]})]}),e.jsxs("div",{className:"text-yellow-600 font-bold",children:[Math.abs(s.gap)," positions"]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Them"}),e.jsxs(j,{variant:"default",children:["#",s.their_position]})]})]})]},s.id))})})]})]})},Fe=()=>{const{toast:j}=l(),[u,p]=s.useState(!1),[g,N]=s.useState(""),[f,v]=s.useState(null);return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"SEO Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive SEO tools and analytics for your website"})]}),e.jsxs(a,{defaultValue:"alerts",className:"w-full",children:[e.jsxs(t,{className:"grid grid-cols-4 lg:grid-cols-4 gap-2 h-auto mb-2",children:[e.jsxs(i,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Alerts"})]}),e.jsxs(i,{value:"autofix",className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Auto-Fix"})]}),e.jsxs(i,{value:"keywords",className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Keywords"})]}),e.jsxs(i,{value:"competitors",className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Competitors"})]})]}),e.jsxs(t,{className:"grid grid-cols-6 lg:grid-cols-11 gap-2 h-auto",children:[e.jsxs(i,{value:"audit",className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Audit"})]}),e.jsxs(i,{value:"pages",className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Pages"})]}),e.jsxs(i,{value:"monitoring",className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Monitoring"})]}),e.jsxs(i,{value:"meta",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Meta Tags"})]}),e.jsxs(i,{value:"robots",className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"robots.txt"})]}),e.jsxs(i,{value:"sitemap",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Sitemap"})]}),e.jsxs(i,{value:"structured",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Schema"})]}),e.jsxs(i,{value:"performance",className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Performance"})]}),e.jsxs(i,{value:"backlinks",className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Backlinks"})]})]}),e.jsxs(t,{className:"grid grid-cols-6 lg:grid-cols-11 gap-2 h-auto mt-2",children:[e.jsxs(i,{value:"broken-links",className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Broken Links"})]}),e.jsxs(i,{value:"link-structure",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Links"})]}),e.jsxs(i,{value:"content",className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Content"})]}),e.jsxs(i,{value:"crawler",className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Crawler"})]}),e.jsxs(i,{value:"images",className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Images"})]}),e.jsxs(i,{value:"redirects",className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Redirects"})]}),e.jsxs(i,{value:"duplicate",className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Duplicates"})]}),e.jsxs(i,{value:"security",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),e.jsxs(i,{value:"mobile",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Mobile"})]}),e.jsxs(i,{value:"budget",className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Budget"})]}),e.jsxs(i,{value:"semantic",className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Semantic"})]})]}),e.jsx(r,{value:"audit",children:e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"SEO Audit"}),e.jsx(m,{children:"Run a comprehensive SEO audit on any URL"})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(y,{htmlFor:"audit-url",children:"URL to Audit"}),e.jsx(_,{id:"audit-url",placeholder:"https://example.com",value:g,onChange:e=>N(e.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(c,{onClick:async()=>{if(g){p(!0);try{const{data:e,error:s}=await n.functions.invoke("seo-audit",{body:{url:g,auditType:"full",saveResults:!0}});if(s)throw s;v(e.audit),j({title:"Audit Complete",description:`Overall score: ${e.audit.overallScore}/100`})}catch(e){j({title:"Audit Failed",description:e.message,variant:"destructive"})}finally{p(!1)}}else j({title:"URL Required",description:"Please enter a URL to audit",variant:"destructive"})},disabled:u,children:u?"Running...":"Run Audit"})})]}),f&&e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-4",children:[e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Overall Score"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-3xl font-bold",children:[f.overallScore,"/100"]})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"SEO Score"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-3xl font-bold",children:[f.seoScore,"/100"]})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Performance"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-3xl font-bold",children:[f.performanceScore,"/100"]})})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-2",children:e.jsx(x,{className:"text-sm",children:"Accessibility"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-3xl font-bold",children:[f.accessibilityScore,"/100"]})})]})]}),f&&e.jsxs("div",{className:"mt-6 space-y-4",children:[f.criticalIssues.length>0&&e.jsxs(d,{className:"border-red-500",children:[e.jsx(o,{children:e.jsxs(x,{className:"text-red-600",children:["Critical Issues (",f.criticalIssues.length,")"]})}),e.jsx(h,{children:e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:f.criticalIssues.map((s,a)=>e.jsx("li",{className:"text-red-600",children:s},a))})})]}),f.warnings.length>0&&e.jsxs(d,{className:"border-yellow-500",children:[e.jsx(o,{children:e.jsxs(x,{className:"text-yellow-600",children:["Warnings (",f.warnings.length,")"]})}),e.jsx(h,{children:e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:f.warnings.map((s,a)=>e.jsx("li",{className:"text-yellow-600",children:s},a))})})]}),f.recommendations.length>0&&e.jsxs(d,{className:"border-blue-500",children:[e.jsx(o,{children:e.jsxs(x,{className:"text-blue-600",children:["Recommendations (",f.recommendations.length,")"]})}),e.jsx(h,{children:e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:f.recommendations.map((s,a)=>e.jsx("li",{className:"text-blue-600",children:s},a))})})]})]})]})})]})}),e.jsx(r,{value:"alerts",children:e.jsx(be,{})}),e.jsx(r,{value:"autofix",children:e.jsx(Ae,{})}),e.jsx(r,{value:"keywords",children:e.jsx(Re,{})}),e.jsx(r,{value:"competitors",children:e.jsx(qe,{})}),["pages","monitoring","meta","robots","sitemap","structured","performance","backlinks","broken-links","link-structure","content","crawler","images","redirects","duplicate","security","mobile","budget","semantic"].map(s=>e.jsx(r,{value:s,children:e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{className:"capitalize",children:s.replace("-"," ")}),e.jsxs(m,{children:[s.charAt(0).toUpperCase()+s.slice(1).replace("-"," ")," management and analysis"]})]}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"This feature is under development."}),e.jsx("p",{className:"text-sm mt-2",children:"The backend functions are ready. UI coming soon!"})]})})]})},s))]})]})};export{Fe as S};
