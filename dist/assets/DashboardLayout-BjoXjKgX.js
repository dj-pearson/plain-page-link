import{j as e}from"./ui-components-DtyTDbSg.js";import{u as s,h as a,r as t,L as l,O as r}from"./react-vendor-B_Chv4nK.js";import{u as i,m as n,D as o,n as c,o as d,p as m,l as x}from"./index-DxTo7WPx.js";import{H as h,$ as b,U as f,B as u,z as p,s as g,a0 as j,Z as y,a1 as N,J as v,a2 as w,a3 as k,N as O,a4 as C,a5 as P,a6 as L,p as A}from"./icons-K_BhWJ_Z.js";import"./three-t2PEh41g.js";import"./charts-CeHnXkIf.js";import"./utils-D6PrBqaA.js";import"./data-ChU7VID-.js";import"./supabase-D4JaKbf_.js";import"./forms-yc2f2ZZT.js";function T(){const r=s(),L=a(),{profile:A,signOut:T,role:z}=i(),[M,S]=t.useState(!1),$=[{label:"Home",icon:h,href:"/dashboard"},{label:"Listings",icon:b,href:"/dashboard/listings"},{label:"Leads",icon:f,href:"/dashboard/leads"},{label:"Analytics",icon:u,href:"/dashboard/analytics"}],B=[{label:"Testimonials",icon:g,href:"/dashboard/testimonials"},{label:"Custom Links",icon:j,href:"/dashboard/links"},{label:"Quick Actions",icon:y,href:"/dashboard/quick-actions"},{label:"Page Builder",icon:N,href:"/dashboard/page-builder"},{label:"Profile",icon:v,href:"/dashboard/profile"},{label:"Theme",icon:w,href:"/dashboard/theme"},{label:"Settings",icon:k,href:"/dashboard/settings"}],q=e=>{S(!1),L(e)},D=e=>r.pathname===e||r.pathname.startsWith(e+"/");return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden safe-area-inset-bottom shadow-lg","aria-label":"Mobile navigation",children:e.jsxs("div",{className:"flex justify-around items-center h-16 px-1",children:[$.map(s=>{const a=D(s.href),t=s.icon;return e.jsxs(l,{to:s.href,className:n("flex flex-col items-center justify-center flex-1 h-full relative","transition-all duration-200 rounded-lg mx-0.5","min-w-[44px] min-h-[44px]","active:scale-95 active:bg-gray-100",a?"text-primary bg-primary/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":s.label,"aria-current":a?"page":void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(t,{className:n("w-6 h-6 transition-transform",a&&"scale-110")}),s.badge&&s.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold animate-pulse","aria-label":`${s.badge} unread`,children:s.badge>99?"99+":s.badge})]}),e.jsx("span",{className:n("text-xs mt-1 font-medium transition-all",a&&"font-semibold"),children:s.label})]},s.href)}),e.jsxs("button",{onClick:()=>S(!0),className:n("flex flex-col items-center justify-center flex-1 h-full relative","transition-all duration-200 rounded-lg mx-0.5","min-w-[44px] min-h-[44px]","active:scale-95 active:bg-gray-100","text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":"Open menu with more options","aria-expanded":M,children:[e.jsx(p,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs mt-1 font-medium",children:"More"})]})]})}),e.jsx(o,{open:M,onOpenChange:S,children:e.jsxs(c,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(d,{children:e.jsx(m,{children:"Menu"})}),e.jsxs("div",{className:"space-y-1 py-2",children:[e.jsxs(l,{to:`/${(null==A?void 0:A.username)||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors min-h-[44px]",onClick:()=>S(!1),children:[e.jsx(O,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:"View My Public Profile"}),e.jsx("p",{className:"text-xs text-gray-500",children:"See how visitors see your page"})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),"admin"===z&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>q("/admin"),className:n("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors w-full text-left min-h-[44px]",D("/admin")?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(C,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{children:"Admin Panel"}),e.jsx(x,{variant:"secondary",className:"text-xs",children:"ROOT"})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"})]}),B.map(s=>{const a=s.icon,t=D(s.href);return e.jsxs("button",{onClick:()=>q(s.href),className:n("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors w-full text-left min-h-[44px]",t?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(a,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:s.label})]},s.href)}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:async()=>{S(!1),await T(),L("/auth/login")},className:"flex items-center gap-3 px-3 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full text-left min-h-[44px]",children:[e.jsx(P,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:"Log Out"})]})]})]})})]})}function z({href:s="#main-content",children:a="Skip to main content"}){return e.jsx("a",{href:s,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-lg focus:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:a})}function M(){const t=s(),n=a(),{profile:o,signOut:c,role:d}=i(),m=e=>t.pathname===e;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(z,{}),e.jsxs("aside",{className:"hidden md:fixed md:block left-0 top-0 h-full w-64 bg-white border-r border-gray-200 z-40",children:[e.jsx("div",{className:"p-6",children:e.jsxs(l,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-gray-900",children:[e.jsx(h,{className:"h-6 w-6 text-blue-600"}),"AgentBio.net"]})}),e.jsxs("nav",{className:"px-3 space-y-1",children:[e.jsx(S,{to:"/dashboard",icon:e.jsx(L,{className:"h-5 w-5"}),label:"Dashboard",active:m("/dashboard")}),e.jsx(S,{to:"/dashboard/listings",icon:e.jsx(A,{className:"h-5 w-5"}),label:"Listings",active:m("/dashboard/listings")}),e.jsx(S,{to:"/dashboard/leads",icon:e.jsx(f,{className:"h-5 w-5"}),label:"Leads",active:m("/dashboard/leads")}),e.jsx(S,{to:"/dashboard/testimonials",icon:e.jsx(g,{className:"h-5 w-5"}),label:"Testimonials",active:m("/dashboard/testimonials")}),e.jsx(S,{to:"/dashboard/links",icon:e.jsx(j,{className:"h-5 w-5"}),label:"Custom Links",active:m("/dashboard/links")}),e.jsx(S,{to:"/dashboard/analytics",icon:e.jsx(u,{className:"h-5 w-5"}),label:"Analytics",active:m("/dashboard/analytics")}),e.jsx(S,{to:"/dashboard/quick-actions",icon:e.jsx(y,{className:"h-5 w-5"}),label:"Quick Actions",active:m("/dashboard/quick-actions")}),e.jsx(S,{to:"/dashboard/page-builder",icon:e.jsx(N,{className:"h-5 w-5"}),label:"Page Builder",active:m("/dashboard/page-builder")}),e.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-200",children:["admin"===d&&e.jsx(S,{to:"/admin",icon:e.jsx(C,{className:"h-5 w-5"}),label:e.jsxs("div",{className:"flex items-center gap-2",children:["Admin",e.jsx(x,{variant:"secondary",className:"text-xs",children:"ROOT"})]}),active:m("/admin")}),e.jsx(S,{to:"/dashboard/profile",icon:e.jsx(v,{className:"h-5 w-5"}),label:"Profile",active:m("/dashboard/profile")}),e.jsx(S,{to:"/dashboard/theme",icon:e.jsx(w,{className:"h-5 w-5"}),label:"Theme",active:m("/dashboard/theme")}),e.jsx(S,{to:"/dashboard/settings",icon:e.jsx(k,{className:"h-5 w-5"}),label:"Settings",active:m("/dashboard/settings")})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:e.jsxs("button",{onClick:async()=>{await c(),n("/auth/login")},className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 w-full px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("span",{children:"Log Out"})]})})]}),e.jsxs("div",{className:"md:ml-64 min-h-screen",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-30 safe-area-inset-top",children:e.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between gap-2 sm:gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs(l,{to:`/${(null==o?void 0:o.username)||""}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-medium whitespace-nowrap min-h-[44px] flex items-center","aria-label":`View your public profile page as ${null==o?void 0:o.username}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"View My Public Profile"}),e.jsx("span",{className:"sm:hidden",children:"Profile"})," â†’"]}),e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-sm sm:text-base text-blue-600 font-semibold",children:(b=null==o?void 0:o.full_name,b?b.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U")})})]})]})}),e.jsx("main",{id:"main-content",className:"p-4 sm:p-5 md:p-6 pb-24 sm:pb-24 md:pb-6 safe-area-inset-bottom",tabIndex:-1,children:e.jsx(r,{})})]}),e.jsx(T,{})]});var b}function S({to:s,icon:a,label:t,active:r}){return e.jsxs(l,{to:s,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(r?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a,e.jsx("span",{children:t})]})}export{M as default};
