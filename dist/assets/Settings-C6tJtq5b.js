import{a7 as G,p as K,aR as V,z as Q,s as S,bv as qe,r as x,j as e,L as H,I as ce,k as $e,i as de,a0 as Oe,b as W,C as L,c as U,d as I,as as ee,e as B,f as Y,B as N,an as Ue,a as Ie,bk as Be,O as J,a$ as te,ae as re,bw as ue,bx as Ye,by as Ke,aw as me,bz as ze,ay as Ge,bA as Ve,aA as Qe,bB as He,bC as Je,bD as he,bE as We,bF as Xe,V as E,bG as xe,at as fe,b7 as Ze,bo as es,bp as ss,ac as ts,am as X,Y as rs,T as pe,g as ae,aD as as,aE as is,aF as ns,X as os,l as ls,m as cs}from"./index-DUW0N-ya.js";import{u as A}from"./useMutation-CreKic_I.js";import{A as ds,a as us}from"./alert-B8StF95H.js";import{C as ms}from"./copy-N7Sd70T_.js";import{P as hs}from"./plus-BxNejxtz.js";import{D as xs,a as fs,b as ps,c as gs}from"./dropdown-menu-MLj6v_9S.js";import{R as ie}from"./refresh-cw-BeAK2QM0.js";import{E as js}from"./ellipsis-vertical-BG5XhPxw.js";import{L as ne}from"./log-out-C55VaIkM.js";import{M as ys}from"./monitor-DyiF8zBb.js";import{T as se}from"./triangle-alert-BoZFuEP7.js";import{T as Z}from"./trash-2-BevbC2a7.js";import{C as bs}from"./circle-x-qiKI0tQ1.js";import{S as oe}from"./save-C7UL6Vfq.js";import{B as vs}from"./bell-D36vglPg.js";import"./index-Det9zE9t.js";const ws=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Ns=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const ks=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Ds=G("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);const Ss=G("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);function _s(){const{user:s}=K(),t=V(),{data:r,isLoading:i}=Q({queryKey:["settings",s?.id],queryFn:async()=>{if(!s?.id)return null;const{data:u,error:m}=await S.from("user_settings").select("*").eq("user_id",s.id).maybeSingle();if(m&&m.code!=="PGRST116")throw m;if(!u){const{data:f,error:h}=await S.from("user_settings").insert({user_id:s.id,email_leads:!0,sms_leads:!1,weekly_report:!0,marketing_emails:!1,show_listings:!0,show_sold_properties:!0,show_testimonials:!0,show_social_proof:!0,show_contact_buttons:!0}).select().single();if(h)throw h;return f}return u},enabled:!!s?.id}),l=A({mutationFn:async u=>{if(!s?.id)throw new Error("User not authenticated");const{data:m,error:f}=await S.from("user_settings").update(u).eq("user_id",s.id).select().single();if(f)throw f;return m},onSuccess:()=>{t.invalidateQueries({queryKey:["settings",s?.id]})}});return{settings:r,isLoading:i,updateSettings:l}}const Cs=({value:s,onChange:t,currentUsername:r})=>{const{checkUsername:i,isChecking:l,error:u,isAvailable:m}=qe(),[f,h]=x.useState(!1);x.useEffect(()=>{s&&s!==r&&(i(s),h(!0))},[s,r,i]);const c=f&&m&&!u&&!l&&s!==r,b=f&&(u||m===!1)&&!l;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{id:"username",value:s,onChange:v=>t(v.target.value.toLowerCase().replace(/[^a-z0-9_-]/g,"")),placeholder:"Enter username",className:`pr-10 ${c?"border-green-500":b?"border-red-500":""}`}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[l&&e.jsx($e,{className:"h-4 w-4 animate-spin text-muted-foreground"}),c&&e.jsx(de,{className:"h-4 w-4 text-green-500"}),b&&e.jsx(Oe,{className:"h-4 w-4 text-red-500"})]})]}),b&&e.jsx("p",{className:"text-sm text-red-500",children:u}),c&&e.jsx("p",{className:"text-sm text-green-500",children:"Username is available!"}),e.jsx(ds,{children:e.jsxs(us,{className:"text-sm",children:["Your profile will be accessible at: ",e.jsxs("strong",{children:["agentbio.net/",s||"username"]})]})}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:"Username requirements:"}),e.jsxs("ul",{className:"list-disc list-inside ml-2",children:[e.jsx("li",{children:"3-30 characters"}),e.jsx("li",{children:"Letters, numbers, hyphens, and underscores only"}),e.jsx("li",{children:"No profanity or reserved words"})]})]})]})};function As({username:s}){const[t,r]=x.useState(!1),{toast:i}=W(),l=`${window.location.origin}/${s}`,u=async()=>{try{await navigator.clipboard.writeText(l),r(!0),i({title:"Copied!",description:"Profile URL copied to clipboard"}),setTimeout(()=>r(!1),2e3)}catch{i({title:"Failed to copy",description:"Please copy the URL manually",variant:"destructive"})}},m=async()=>{if(navigator.share)try{await navigator.share({title:"My Real Estate Profile",text:"Check out my professional real estate profile",url:l})}catch{console.log("Share cancelled or failed")}else u()};return e.jsxs(L,{className:"border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsxs(U,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-blue-600"}),"Your Public Profile"]}),e.jsx(B,{children:"Share this link to showcase your properties and capture leads"})]}),e.jsxs(Y,{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2 p-3 bg-white rounded-lg border border-gray-200",children:e.jsx("code",{className:"flex-1 text-sm text-blue-600 font-mono truncate",children:l})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:u,variant:"outline",className:"flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Copy Link"]})}),e.jsxs(N,{onClick:m,variant:"outline",className:"flex-1",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsx(N,{asChild:!0,variant:"default",children:e.jsxs("a",{href:`/${s}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"View"]})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{className:"mb-2",children:["ðŸ’¡ ",e.jsx("strong",{children:"Pro tip:"})," Share this link on:"]}),e.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[e.jsx("li",{children:"Your email signature"}),e.jsx("li",{children:"Business cards and flyers"}),e.jsx("li",{children:"Social media profiles"}),e.jsx("li",{children:"MLS listings and property descriptions"}),e.jsx("li",{children:"Text messages to potential clients"})]})]})]})]})}function Es(){const s=Ie(),{user:t}=K(),[r,i]=x.useState(null),[l,u]=x.useState(!0);x.useEffect(()=>{m()},[t]);const m=async()=>{if(t)try{const{data:h,error:c}=await S.from("custom_pages").select("*").eq("user_id",t.id).eq("is_active",!0).single();!c&&h&&i(h)}catch(h){console.error("Error loading active page:",h)}finally{u(!1)}},f=async()=>{if(r)try{const{error:h}=await S.from("custom_pages").update({is_active:!1}).eq("id",r.id);if(h)throw h;re.success("Switched to default profile"),i(null)}catch(h){console.error("Error deactivating page:",h),re.error("Failed to deactivate custom page")}};return e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Profile Display"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose what visitors see when they visit your profile"})]}),l?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Be,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:r.title}),e.jsxs(J,{variant:"default",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"Active"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Custom page: /",r.slug]})]}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:`/p/${r.slug}`,target:"_blank",rel:"noopener noreferrer",className:"gap-2",children:["View",e.jsx(ee,{className:"h-3 w-3"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>s("/dashboard/page-builder"),className:"gap-2",children:"Edit Custom Page"}),e.jsx(N,{variant:"outline",onClick:f,children:"Use Default Profile"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(te,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-medium",children:"Default Profile"}),e.jsx(J,{variant:"secondary",children:"Active"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Using the standard profile layout with listings, testimonials, and links"})]}),e.jsxs(N,{onClick:()=>s("/dashboard/page-builder"),className:"gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"Create Custom Page"]})]})]})})}function Ls(){const{user:s,session:t}=K(),{toast:r}=W(),i=V(),{data:l,isLoading:u,error:m,refetch:f}=Q({queryKey:["sessions",s?.id],queryFn:async()=>{const{data:n,error:g}=await edgeFunctions.invoke("get-sessions");if(g)throw new Error(g.message);return n},enabled:!!s?.id,staleTime:3e4,refetchInterval:6e4}),h=A({mutationFn:async n=>{const{data:g,error:o}=await edgeFunctions.invoke("revoke-session",{body:{sessionId:n,reason:"user_revoked"}});if(o)throw new Error(o.message);return g},onSuccess:n=>{i.invalidateQueries({queryKey:["sessions"]}),r({title:"Session Revoked",description:n.message||"The session has been revoked successfully."})},onError:n=>{r({title:"Error",description:n.message||"Failed to revoke session.",variant:"destructive"})}}),c=A({mutationFn:async()=>{const n=l?.sessions.find(p=>p.is_current)?.id,{data:g,error:o}=await edgeFunctions.invoke("revoke-session",{body:{revokeAll:!0,currentSessionId:n,reason:"revoke_all_by_user"}});if(o)throw new Error(o.message);return g},onSuccess:n=>{i.invalidateQueries({queryKey:["sessions"]}),r({title:"Sessions Revoked",description:n.message||`${n.revoked_count} session(s) have been revoked.`})},onError:n=>{r({title:"Error",description:n.message||"Failed to revoke sessions.",variant:"destructive"})}}),b=n=>{const g=[];return n.browser&&g.push(n.browser),n.os&&g.push(`on ${n.os}`),n.location_city&&n.location_country?g.push(`from ${n.location_city}, ${n.location_country}`):n.location_country&&g.push(`from ${n.location_country}`),g.join(" ")||"Unknown device"},v=n=>{switch(n){case"mobile":return"mobile";case"tablet":return"tablet";default:return"desktop"}},k=n=>{const g=new Date(n),p=new Date().getTime()-g.getTime(),d=Math.floor(p/6e4),j=Math.floor(p/36e5),y=Math.floor(p/864e5);return d<1?"Just now":d<60?`${d} min ago`:j<24?`${j} hour${j>1?"s":""} ago`:y<7?`${y} day${y>1?"s":""} ago`:g.toLocaleDateString()};return{sessions:l?.sessions||[],totalSessions:l?.total||0,isLoading:u,error:m?.message||l?.error,refetch:f,revokeSession:h.mutate,revokeAllOtherSessions:c.mutate,isRevoking:h.isPending,isRevokingAll:c.isPending,formatSessionInfo:b,getDeviceIcon:v,formatRelativeTime:k}}var Ps=Symbol("radix.slottable");function Rs(s){const t=({children:r})=>e.jsx(e.Fragment,{children:r});return t.displayName=`${s}.Slottable`,t.__radixId=Ps,t}var ge="AlertDialog",[Ts]=Ge(ge,[ue]),_=ue(),je=s=>{const{__scopeAlertDialog:t,...r}=s,i=_(t);return e.jsx(Ye,{...i,...r,modal:!0})};je.displayName=ge;var Fs="AlertDialogTrigger",Ms=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...i}=s,l=_(r);return e.jsx(Xe,{...l,...i,ref:t})});Ms.displayName=Fs;var qs="AlertDialogPortal",ye=s=>{const{__scopeAlertDialog:t,...r}=s,i=_(t);return e.jsx(Ke,{...i,...r})};ye.displayName=qs;var $s="AlertDialogOverlay",be=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...i}=s,l=_(r);return e.jsx(We,{...l,...i,ref:t})});be.displayName=$s;var P="AlertDialogContent",[Os,Us]=Ts(P),Is=Rs("AlertDialogContent"),ve=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:i,...l}=s,u=_(r),m=x.useRef(null),f=me(t,m),h=x.useRef(null);return e.jsx(ze,{contentName:P,titleName:we,docsSlug:"alert-dialog",children:e.jsx(Os,{scope:r,cancelRef:h,children:e.jsxs(Ve,{role:"alertdialog",...u,...l,ref:f,onOpenAutoFocus:Qe(l.onOpenAutoFocus,c=>{c.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(Is,{children:i}),e.jsx(Ys,{contentRef:m})]})})})});ve.displayName=P;var we="AlertDialogTitle",Ne=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...i}=s,l=_(r);return e.jsx(He,{...l,...i,ref:t})});Ne.displayName=we;var ke="AlertDialogDescription",De=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...i}=s,l=_(r);return e.jsx(Je,{...l,...i,ref:t})});De.displayName=ke;var Bs="AlertDialogAction",Se=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...i}=s,l=_(r);return e.jsx(he,{...l,...i,ref:t})});Se.displayName=Bs;var _e="AlertDialogCancel",Ce=x.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...i}=s,{cancelRef:l}=Us(_e,r),u=_(r),m=me(t,l);return e.jsx(he,{...u,...i,ref:m})});Ce.displayName=_e;var Ys=({contentRef:s})=>{const t=`\`${P}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${P}\` by passing a \`${ke}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${P}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},Ks=je,zs=ye,Ae=be,Ee=ve,Le=Se,Pe=Ce,Re=Ne,Te=De;const z=Ks,Gs=zs,Fe=x.forwardRef(({className:s,...t},r)=>e.jsx(Ae,{className:E("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Fe.displayName=Ae.displayName;const R=x.forwardRef(({className:s,...t},r)=>e.jsxs(Gs,{children:[e.jsx(Fe,{}),e.jsx(Ee,{ref:r,className:E("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));R.displayName=Ee.displayName;const T=({className:s,...t})=>e.jsx("div",{className:E("flex flex-col space-y-2 text-center sm:text-left",s),...t});T.displayName="AlertDialogHeader";const F=({className:s,...t})=>e.jsx("div",{className:E("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});F.displayName="AlertDialogFooter";const M=x.forwardRef(({className:s,...t},r)=>e.jsx(Re,{ref:r,className:E("text-lg font-semibold",s),...t}));M.displayName=Re.displayName;const q=x.forwardRef(({className:s,...t},r)=>e.jsx(Te,{ref:r,className:E("text-sm text-muted-foreground",s),...t}));q.displayName=Te.displayName;const $=x.forwardRef(({className:s,...t},r)=>e.jsx(Le,{ref:r,className:E(xe(),s),...t}));$.displayName=Le.displayName;const O=x.forwardRef(({className:s,...t},r)=>e.jsx(Pe,{ref:r,className:E(xe({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));O.displayName=Pe.displayName;function Vs(){const{sessions:s,totalSessions:t,isLoading:r,error:i,refetch:l,revokeSession:u,revokeAllOtherSessions:m,isRevoking:f,isRevokingAll:h,formatRelativeTime:c}=Ls(),[b,v]=x.useState(null),[k,n]=x.useState(!1),g=j=>{switch(j){case"mobile":return e.jsx(Ze,{className:"h-5 w-5"});case"tablet":return e.jsx(Ss,{className:"h-5 w-5"});default:return e.jsx(ys,{className:"h-5 w-5"})}},o=()=>{b&&(u(b.id),v(null))},p=()=>{m(),n(!1)},d=s.filter(j=>!j.is_current).length;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx(I,{children:"Active Sessions"}),e.jsx(B,{children:"Manage devices and browsers where you're signed in"})]})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>l(),disabled:r,children:e.jsx(ie,{className:`h-4 w-4 ${r?"animate-spin":""}`})})]})}),e.jsx(Y,{children:r&&s.length===0?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(ie,{className:"h-5 w-5 animate-spin mr-2"}),"Loading sessions..."]}):i?e.jsxs("div",{className:"text-center py-8 text-red-600",children:[e.jsx("p",{children:"Failed to load sessions"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>l(),className:"mt-4",children:"Try Again"})]}):s.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No active sessions found"}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:s.map(j=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${j.is_current?"border-primary bg-primary/5":"border-border hover:bg-accent/50"} transition-colors`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-full ${j.is_current?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:g(j.device_type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium text-foreground",children:[j.browser||"Unknown Browser",j.os&&` on ${j.os}`]}),j.is_current&&e.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full",children:"Current"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-0.5",children:[j.ip_address&&e.jsx("span",{children:j.ip_address}),j.location_city&&j.location_country&&e.jsxs("span",{children:[" â€¢ ",j.location_city,", ",j.location_country]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Last active: ",c(j.last_activity_at)]})]})]}),!j.is_current&&e.jsxs(xs,{children:[e.jsx(fs,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",disabled:f,children:e.jsx(js,{className:"h-4 w-4"})})}),e.jsx(ps,{align:"end",children:e.jsxs(gs,{onClick:()=>v(j),className:"text-red-600 focus:text-red-600",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Sign out this device"]})})]})]},j.id))}),d>0&&e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsxs(N,{variant:"outline",onClick:()=>n(!0),disabled:h,className:"w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),h?"Signing out...":`Sign out all other devices (${d})`]})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center pt-2",children:[t," active session",t!==1?"s":""]})]})})]}),e.jsx(z,{open:!!b,onOpenChange:()=>v(null),children:e.jsxs(R,{children:[e.jsxs(T,{children:[e.jsx(M,{children:"Sign out this device?"}),e.jsxs(q,{children:["This will sign out the session on"," ",e.jsxs("strong",{children:[b?.browser||"Unknown browser",b?.os&&` on ${b.os}`]}),". They'll need to sign in again to access their account."]})]}),e.jsxs(F,{children:[e.jsx(O,{children:"Cancel"}),e.jsx($,{onClick:o,className:"bg-red-600 hover:bg-red-700",children:"Sign Out Device"})]})]})}),e.jsx(z,{open:k,onOpenChange:n,children:e.jsxs(R,{children:[e.jsxs(T,{children:[e.jsx(M,{children:"Sign out all other devices?"}),e.jsxs(q,{children:["This will sign out ",d," other session",d!==1?"s":"",". Your current session will remain active. This is useful if you think someone else may have access to your account."]})]}),e.jsxs(F,{children:[e.jsx(O,{children:"Cancel"}),e.jsx($,{onClick:p,className:"bg-red-600 hover:bg-red-700",children:"Sign Out All Other Devices"})]})]})})]})}const Qs={login:"Login",logout:"Logout",password_change:"Password Changed",email_change:"Email Changed",profile_update:"Profile Updated",session_revoke:"Session Revoked",revoke_all_sessions:"All Sessions Revoked",mfa_enable:"MFA Enabled",mfa_disable:"MFA Disabled",mfa_verify:"MFA Verified",gdpr_export_request:"Data Export Requested",gdpr_data_export:"Data Exported",account_deletion_request:"Account Deletion Requested",account_deletion_cancelled:"Account Deletion Cancelled",listing_create:"Listing Created",listing_update:"Listing Updated",listing_delete:"Listing Deleted",lead_create:"Lead Captured",lead_update:"Lead Updated",settings_update:"Settings Updated"},le={low:"text-green-600 bg-green-50",medium:"text-yellow-600 bg-yellow-50",high:"text-orange-600 bg-orange-50",critical:"text-red-600 bg-red-50"};function Hs(s={}){const{user:t}=K(),r=V(),{action:i,resourceType:l,startDate:u,endDate:m,limit:f=50,offset:h=0,enabled:c=!0}=s,{data:b,isLoading:v,error:k,refetch:n}=Q({queryKey:["auditLogs",t?.id,i,l,u,m,f,h],queryFn:async()=>{const y=new URLSearchParams;i&&y.set("action",i),l&&y.set("resourceType",l),u&&y.set("startDate",u),m&&y.set("endDate",m),y.set("limit",f.toString()),y.set("offset",h.toString());const{data:a,error:w}=await edgeFunctions.invoke("audit-log",{method:"GET",headers:{"Content-Type":"application/json"},body:null}),{data:D,error:C,count:Me}=await S.from("audit_logs").select("*",{count:"exact"}).eq("user_id",t?.id).order("created_at",{ascending:!1}).range(h,h+f-1);if(C)throw new Error(C.message);return{success:!0,logs:D||[],total:Me||0,limit:f,offset:h}},enabled:!!t?.id&&c,staleTime:6e4}),g=A({mutationFn:async y=>{const{data:a,error:w}=await edgeFunctions.invoke("audit-log",{body:y});if(w)throw new Error(w.message);return a},onSuccess:()=>{r.invalidateQueries({queryKey:["auditLogs"]})}}),o=y=>Qs[y]||y.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),p=y=>le[y]||le.low,d=y=>{const a=[];return y.resource_type&&a.push(`${y.resource_type}${y.resource_id?` #${y.resource_id.slice(0,8)}`:""}`),y.ip_address&&a.push(`from ${y.ip_address}`),a.join(" ")||"No additional details"},j=y=>y.reduce((a,w)=>{const D=new Date(w.created_at).toLocaleDateString();return a[D]||(a[D]=[]),a[D].push(w),a},{});return{logs:b?.logs||[],totalLogs:b?.total||0,isLoading:v,error:k?.message||b?.error,refetch:n,logEvent:g.mutateAsync,isLogging:g.isPending,getActionLabel:o,getRiskLevelColor:p,formatLogDetails:d,groupLogsByDate:j}}function Js(){const{logs:s,totalLogs:t,isLoading:r,error:i,refetch:l,getActionLabel:u,groupLogsByDate:m}=Hs({limit:20}),[f,h]=x.useState(!1),[c,b]=x.useState(null),v=o=>{switch(o){case"success":return e.jsx(fe,{className:"h-4 w-4 text-green-600"});case"failure":return e.jsx(se,{className:"h-4 w-4 text-yellow-600"});case"blocked":return e.jsx(ts,{className:"h-4 w-4 text-red-600"});default:return e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})}},k=o=>{const p={low:"bg-green-100 text-green-700",medium:"bg-yellow-100 text-yellow-700",high:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"};return e.jsx(J,{variant:"outline",className:`text-xs ${p[o]||p.low}`,children:o})},n=f?s:s.slice(0,5),g=m(n);return e.jsxs(L,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ns,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx(I,{children:"Security Activity"}),e.jsx(B,{children:"Recent security-related actions on your account"})]})]})}),e.jsxs(Y,{children:[r&&s.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading activity..."}):i?e.jsxs("div",{className:"text-center py-8 text-red-600",children:[e.jsx("p",{children:"Failed to load activity"}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>l(),className:"mt-4",children:"Try Again"})]}):s.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No security activity recorded yet"}):e.jsxs("div",{className:"space-y-4",children:[Object.entries(g).map(([o,p])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:o}),e.jsx("div",{className:"space-y-1",children:p.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>b(c?.id===d.id?null:d),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[v(d.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:u(d.action)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(d.created_at).toLocaleTimeString(),d.ip_address&&` â€¢ ${d.ip_address}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.risk_level!=="low"&&k(d.risk_level),e.jsx(J,{variant:d.status==="success"?"default":"destructive",className:"text-xs",children:d.status})]})]},d.id))})]},o)),s.length>5&&e.jsx(N,{variant:"ghost",onClick:()=>h(!f),className:"w-full text-sm",children:f?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Show Less"]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Show More (",t-5," more)"]})})]}),c&&e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:u(c.action)}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>b(null),children:"Close"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{children:c.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Time:"}),e.jsx("span",{children:new Date(c.created_at).toLocaleString()})]}),c.ip_address&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"IP Address:"}),e.jsx("span",{className:"font-mono text-xs",children:c.ip_address})]}),c.resource_type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Resource:"}),e.jsxs("span",{children:[c.resource_type," ",c.resource_id?.slice(0,8)]})]}),c.details&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-muted-foreground block mb-1",children:"Details:"}),e.jsx("pre",{className:"text-xs bg-background p-2 rounded overflow-auto max-h-32",children:JSON.stringify(c.details,null,2)})]})]})]})]})]})}function Ws(){const{user:s,signOut:t}=K(),{toast:r}=W(),i=V(),[l,u]=x.useState(!1),{data:m,isLoading:f,error:h,refetch:c}=Q({queryKey:["deletionStatus",s?.id],queryFn:async()=>{const{data:o,error:p}=await edgeFunctions.invoke("gdpr-deletion",{method:"GET"});if(p)throw new Error(p.message);return o},enabled:!!s?.id,staleTime:6e4}),b=A({mutationFn:async()=>{u(!0);try{const{data:o,error:p}=await edgeFunctions.invoke("gdpr-export",{method:"GET"});if(p)throw new Error(p.message);return new Blob([JSON.stringify(o,null,2)],{type:"application/json"})}finally{u(!1)}},onSuccess:o=>{const p=URL.createObjectURL(o),d=document.createElement("a");d.href=p,d.download=`agentbio-data-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(p),r({title:"Data Export Complete",description:"Your data has been downloaded successfully."})},onError:o=>{r({title:"Export Failed",description:o.message||"Failed to export your data. Please try again.",variant:"destructive"})}}),v=A({mutationFn:async o=>{const{data:p,error:d}=await edgeFunctions.invoke("gdpr-deletion",{body:{action:"request",reason:o}});if(d)throw new Error(d.message);return p},onSuccess:o=>{i.invalidateQueries({queryKey:["deletionStatus"]}),r({title:"Account Deletion Scheduled",description:`Your account will be deleted in ${o.daysRemaining} days. You can cancel this request anytime before then.`})},onError:o=>{r({title:"Request Failed",description:o.message||"Failed to schedule account deletion.",variant:"destructive"})}}),k=A({mutationFn:async o=>{const{data:p,error:d}=await edgeFunctions.invoke("gdpr-deletion",{body:{action:"cancel",cancelReason:o}});if(d)throw new Error(d.message);return p},onSuccess:()=>{i.invalidateQueries({queryKey:["deletionStatus"]}),r({title:"Deletion Cancelled",description:"Your account deletion has been cancelled. Your account is safe."})},onError:o=>{r({title:"Cancellation Failed",description:o.message||"Failed to cancel account deletion.",variant:"destructive"})}}),n=o=>o===0?"Today":o===1?"Tomorrow":`In ${o} days`,g=()=>m?.scheduled?`Account deletion scheduled for ${n(m.daysRemaining||0)}`:"No account deletion is scheduled";return{exportData:b.mutate,isExporting:l||b.isPending,deletionStatus:m,isDeletionStatusLoading:f,deletionStatusError:h?.message,refetchDeletionStatus:c,isAccountDeletionScheduled:m?.scheduled||!1,daysUntilDeletion:m?.daysRemaining,deletionScheduledFor:m?.scheduledFor,requestDeletion:v.mutate,cancelDeletion:k.mutate,isRequestingDeletion:v.isPending,isCancellingDeletion:k.isPending,formatDaysRemaining:n,getDeletionStatusMessage:g}}function Xs(){const{exportData:s,isExporting:t,isDeletionStatusLoading:r,isAccountDeletionScheduled:i,daysUntilDeletion:l,deletionScheduledFor:u,requestDeletion:m,cancelDeletion:f,isRequestingDeletion:h,isCancellingDeletion:c,formatDaysRemaining:b}=Ws(),[v,k]=x.useState(!1),[n,g]=x.useState(!1),[o,p]=x.useState(!1),[d,j]=x.useState(""),y=()=>{s(),k(!1)},a=()=>{m(d||void 0),g(!1),j("")},w=()=>{f("User changed their mind"),p(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx(I,{children:"Export Your Data"}),e.jsx(B,{children:"Download a copy of all your data in JSON format"})]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your data export will include your profile, listings, leads, testimonials, links, blog posts, analytics, and security activity logs."}),e.jsxs(N,{onClick:()=>k(!0),disabled:t,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),t?"Preparing Export...":"Export My Data"]})]})})]}),e.jsxs(L,{className:"border-red-200 dark:border-red-900",children:[e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx(I,{className:"text-red-600",children:"Delete Account"}),e.jsx(B,{children:"Permanently delete your account and all associated data"})]})]})}),e.jsx(Y,{children:r?e.jsx("div",{className:"text-muted-foreground",children:"Loading status..."}):i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-900",children:[e.jsx(rs,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-600",children:"Account Deletion Scheduled"}),e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 mt-1",children:["Your account will be permanently deleted"," ",e.jsx("strong",{children:b(l||0)}),u&&e.jsxs(e.Fragment,{children:[" (",new Date(u).toLocaleDateString(),")"]}),"."]}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 mt-2",children:"You can cancel this request before the deletion date to keep your account."})]})]}),e.jsxs(N,{variant:"outline",onClick:()=>p(!0),disabled:c,children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),c?"Cancelling...":"Cancel Deletion"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-900",children:[e.jsx(se,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"This action is irreversible"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Deleting your account will permanently remove all your data, including your profile, listings, leads, and analytics. This cannot be undone."})]})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"30-day grace period before permanent deletion"}),e.jsx("li",{children:"You can cancel the deletion request during this period"}),e.jsx("li",{children:"We recommend exporting your data first"})]}),e.jsxs(N,{variant:"destructive",onClick:()=>g(!0),disabled:h,children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),h?"Processing...":"Request Account Deletion"]})]})})]}),e.jsx(z,{open:v,onOpenChange:k,children:e.jsxs(R,{children:[e.jsxs(T,{children:[e.jsx(M,{children:"Export Your Data"}),e.jsxs(q,{children:["This will download a JSON file containing all your data including:",e.jsxs("ul",{className:"mt-2 ml-4 list-disc text-left",children:[e.jsx("li",{children:"Profile information"}),e.jsx("li",{children:"Property listings"}),e.jsx("li",{children:"Leads and contacts"}),e.jsx("li",{children:"Testimonials"}),e.jsx("li",{children:"Links and social profiles"}),e.jsx("li",{children:"Blog posts"}),e.jsx("li",{children:"Analytics data"}),e.jsx("li",{children:"Security activity logs"})]})]})]}),e.jsxs(F,{children:[e.jsx(O,{children:"Cancel"}),e.jsxs($,{onClick:y,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Download Data"]})]})]})}),e.jsx(z,{open:n,onOpenChange:g,children:e.jsxs(R,{children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-red-600",children:"Delete Your Account?"}),e.jsx(q,{asChild:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"This will schedule your account for permanent deletion. You'll have 30 days to cancel this request if you change your mind."}),e.jsxs("div",{children:[e.jsx(H,{htmlFor:"reason",className:"text-sm font-medium",children:"Why are you leaving? (Optional)"}),e.jsx(pe,{id:"reason",placeholder:"Help us improve by sharing your feedback...",value:d,onChange:D=>j(D.target.value),className:"mt-2",rows:3})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[e.jsx(se,{className:"h-4 w-4 text-red-600 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:"After 30 days, all your data will be permanently deleted and cannot be recovered."})]})]})})]}),e.jsxs(F,{children:[e.jsx(O,{children:"Cancel"}),e.jsxs($,{onClick:a,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Schedule Deletion"]})]})]})}),e.jsx(z,{open:o,onOpenChange:p,children:e.jsxs(R,{children:[e.jsxs(T,{children:[e.jsx(M,{children:"Cancel Account Deletion?"}),e.jsx(q,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ae,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsx("p",{children:"Your account deletion will be cancelled and your account will remain active. All your data will be preserved."})]})})]}),e.jsxs(F,{children:[e.jsx(O,{children:"Go Back"}),e.jsxs($,{onClick:w,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Keep My Account"]})]})]})})]})}function ft(){const{user:s}=K(),{settings:t,updateSettings:r}=_s(),{toast:i}=W(),l=V(),[u,m]=x.useState({emailLeads:!0,smsLeads:!1,weeklyReport:!0,marketingEmails:!1}),[f,h]=x.useState({showListings:!0,showSoldProperties:!0,showTestimonials:!0,showSocialProof:!0,showContactButtons:!0}),[c,b]=x.useState({current:"",new:"",confirm:""}),{data:v,isLoading:k}=Q({queryKey:["profile",s?.id],queryFn:async()=>{if(!s?.id)return null;const{data:a,error:w}=await S.from("profiles").select("*").eq("id",s.id).single();if(w)throw w;return a},enabled:!!s?.id}),[n,g]=x.useState({username:"",full_name:"",bio:""});x.useEffect(()=>{v&&g({username:v.username||"",full_name:v.full_name||"",bio:v.bio||""})},[v]);const o=A({mutationFn:async a=>{if(!s?.id)throw new Error("Not authenticated");const{error:w}=await S.from("profiles").update({username:a.username,full_name:a.full_name,bio:a.bio,updated_at:new Date().toISOString()}).eq("id",s.id);if(w)throw w},onSuccess:()=>{l.invalidateQueries({queryKey:["profile"]}),i({title:"Profile updated",description:"Your profile has been updated successfully."})},onError:a=>{i({title:"Error",description:a instanceof Error?a.message:"Failed to update profile",variant:"destructive"})}});x.useEffect(()=>{t&&(m({emailLeads:t.email_leads,smsLeads:t.sms_leads,weeklyReport:t.weekly_report,marketingEmails:t.marketing_emails}),h({showListings:t.show_listings,showSoldProperties:t.show_sold_properties,showTestimonials:t.show_testimonials,showSocialProof:t.show_social_proof,showContactButtons:t.show_contact_buttons}))},[t]);const p=async(a,w)=>{m(C=>({...C,[a]:w}));const D=a==="emailLeads"?"email_leads":a==="smsLeads"?"sms_leads":a==="weeklyReport"?"weekly_report":"marketing_emails";try{await r.mutateAsync({[D]:w}),i({title:"Settings updated",description:"Your notification preferences have been saved."})}catch{i({title:"Error",description:"Failed to update settings.",variant:"destructive"})}},d=async(a,w)=>{h(C=>({...C,[a]:w}));const D=a==="showListings"?"show_listings":a==="showSoldProperties"?"show_sold_properties":a==="showTestimonials"?"show_testimonials":a==="showSocialProof"?"show_social_proof":"show_contact_buttons";try{await r.mutateAsync({[D]:w}),i({title:"Profile visibility updated",description:"Your profile display preferences have been saved."})}catch{i({title:"Error",description:"Failed to update visibility settings.",variant:"destructive"})}},j=async a=>{if(a.preventDefault(),c.new!==c.confirm){i({title:"Error",description:"New passwords don't match.",variant:"destructive"});return}if(c.new.length<6){i({title:"Error",description:"Password must be at least 6 characters.",variant:"destructive"});return}try{const{error:w}=await S.auth.updateUser({password:c.new});if(w)throw w;i({title:"Password updated",description:"Your password has been changed successfully."}),b({current:"",new:"",confirm:""})}catch(w){i({title:"Error",description:w.message||"Failed to update password.",variant:"destructive"})}},y=s?.created_at?new Date(s.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Unknown";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),e.jsxs(L,{children:[e.jsxs(U,{children:[e.jsx(I,{children:"Profile & Username"}),e.jsx(B,{children:"Manage your public profile and unique URL"})]}),e.jsxs(Y,{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs(as,{className:"w-20 h-20",children:[e.jsx(is,{src:v?.avatar_url||void 0}),e.jsx(ns,{className:"text-xl",children:v?.full_name?.[0]||v?.username?.[0]||"U"})]})}),e.jsx(Cs,{value:n.username,onChange:a=>g({...n,username:a}),currentUsername:v?.username}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"full_name",children:"Full Name"}),e.jsx(ce,{id:"full_name",value:n.full_name,onChange:a=>g({...n,full_name:a.target.value}),placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"bio",children:"Bio"}),e.jsx(pe,{id:"bio",value:n.bio,onChange:a=>g({...n,bio:a.target.value}),placeholder:"Tell us about yourself",rows:4,maxLength:500}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.bio?.length||0,"/500 characters"]})]}),e.jsxs("button",{onClick:()=>o.mutate(n),disabled:o.isPending,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium disabled:opacity-50",children:[e.jsx(oe,{className:"h-4 w-4"}),o.isPending?"Saving...":"Save Profile Changes"]})]})]}),v?.username&&e.jsx(As,{username:v.username}),e.jsx(Es,{}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(os,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Account Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between py-3 border-b border-border",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Email Address"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s?.email||"Not available"})]})}),e.jsx("div",{className:"flex items-center justify-between py-3 border-b border-border",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"User ID"}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono text-xs",children:s?.id||"Not available"})]})}),e.jsx("div",{className:"flex items-center justify-between py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Member Since"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:y})]})})]})]}),e.jsxs("form",{onSubmit:j,className:"bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ls,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Change Password"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:c.new,onChange:a=>b({...c,new:a.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",required:!0,minLength:6})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:c.confirm,onChange:a=>b({...c,confirm:a.target.value}),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",required:!0,minLength:6})]}),e.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium",children:[e.jsx(oe,{className:"h-4 w-4"}),"Update Password"]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(vs,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Notification Preferences"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Email Notifications for New Leads"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Get notified immediately when someone submits a lead form"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.emailLeads,onChange:a=>p("emailLeads",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"SMS Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Receive text messages for urgent leads"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.smsLeads,onChange:a=>p("smsLeads",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Weekly Performance Report"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Get a summary of your profile analytics every Monday"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.weeklyReport,onChange:a=>p("weeklyReport",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Marketing Emails"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Tips, updates, and special offers from AgentBio.net"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.marketingEmails,onChange:a=>p("marketingEmails",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(cs,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Profile Visibility"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Control which sections appear on your public profile page"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Show Contact Buttons"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Display email, phone, and text buttons"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.showContactButtons,onChange:a=>d("showContactButtons",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Show Social Proof Banner"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Display stats like properties sold and total volume"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.showSocialProof,onChange:a=>d("showSocialProof",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Show Active Listings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Display your currently available properties"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.showListings,onChange:a=>d("showListings",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Show Sold Properties"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Display your past sales and success history"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.showSoldProperties,onChange:a=>d("showSoldProperties",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Show Testimonials"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Display client reviews and ratings"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.showTestimonials,onChange:a=>d("showTestimonials",a.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ws,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Billing & Subscription"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Current Plan"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Professional - $49/month"})]}),e.jsx("button",{className:"px-4 py-2 bg-background border border-border rounded-lg hover:bg-accent transition-colors text-sm font-medium",children:"Manage Plan"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Payment Method"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 4242"})]}),e.jsx("button",{className:"px-4 py-2 bg-background border border-border rounded-lg hover:bg-accent transition-colors text-sm font-medium",children:"Update"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Next Billing Date"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"February 15, 2024"})]}),e.jsx("button",{className:"px-4 py-2 bg-background border border-border rounded-lg hover:bg-accent transition-colors text-sm font-medium",children:"View Invoices"})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ds,{className:"h-6 w-6 text-primary"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Security & Privacy"})]}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Manage your security settings, active sessions, and data privacy"})]}),e.jsx(Vs,{}),e.jsx(Js,{}),e.jsx(Xs,{})]})}export{ft as default};
