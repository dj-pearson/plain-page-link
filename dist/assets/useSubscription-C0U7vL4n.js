import{a as e,s as r}from"./data-OhSCRAps.js";const s=()=>{const{data:s}=e({queryKey:["session"],queryFn:async()=>{const{data:e}=await r.auth.getSession();return e.session}}),{data:a,isLoading:n}=e({queryKey:["user-subscription",s?.user?.id],queryFn:async()=>{if(!s?.user?.id)return null;const{data:e,error:a}=await r.rpc("get_user_plan",{_user_id:s.user.id});if(a)throw a;return e},enabled:!!s?.user?.id}),{data:t}=e({queryKey:["subscription-plans"],queryFn:async()=>{const{data:e,error:s}=await r.from("subscription_plans").select("*").eq("is_active",!0).order("sort_order");if(s)throw s;return e}});return{subscription:a,plans:t,isLoading:n,checkLimit:(e,r)=>{if(!a?.limits)return r<3;const s=a.limits[e];return-1===s||void 0!==s&&r<s},hasFeature:e=>!!a?.features&&!0===a.features[e],isPro:"professional"===a?.plan_name||"team"===a?.plan_name||"enterprise"===a?.plan_name,isTeam:"team"===a?.plan_name||"enterprise"===a?.plan_name}};export{s as u};
