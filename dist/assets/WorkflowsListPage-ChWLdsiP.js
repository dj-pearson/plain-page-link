import{a5 as L,a as W,r as a,j as e,B as o,z as P,I as E,D as p,F as j,G as f,J as y,K as r,k as I,g as F}from"./index-Dg7t10xs.js";import{u as M}from"./useWorkflowBuilderStore-CNh9ZqSu.js";import{D as T,a as B,b as V,c as d,d as G}from"./dropdown-menu-CLceqfN6.js";import{P as N}from"./plus-B4PiA_hc.js";import{C as U}from"./clock-D9akuZnq.js";import{P as _}from"./play-BasmIdM7.js";import{C as z}from"./circle-x-ChXsXrDL.js";import{E as O}from"./ellipsis-vertical-K7e0RK3-.js";import{S as Q}from"./settings-DlgjSYG_.js";import{C as R}from"./copy-Bu-fQRTK.js";import{T as Y}from"./trash-2-DLTqSZQN.js";import"./index-RCLwXuzm.js";const J=L("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),v={lead_management:"Lead Management",listing_automation:"Listing Automation",marketing:"Marketing",notifications:"Notifications",integrations:"Integrations",general:"General"},ie=()=>{const m=W(),{loadUserWorkflows:C}=M(),[l,w]=a.useState([]),[b,x]=a.useState(!0),[i,S]=a.useState(""),[c,k]=a.useState("all"),[n,A]=a.useState("all");a.useEffect(()=>{(async()=>{x(!0);try{const t=await C();w(t)}catch(t){console.error("Failed to load workflows:",t)}finally{x(!1)}})()},[]);const h=l.filter(s=>!(i&&!s.name.toLowerCase().includes(i.toLowerCase())&&!s.description?.toLowerCase().includes(i.toLowerCase())||c!=="all"&&s.category!==c||n==="active"&&!s.isActive||n==="inactive"&&s.isActive||n==="draft"&&s.isPublished)),u=()=>{m("/dashboard/workflows/new")},g=s=>{m(`/dashboard/workflows/${s}`)},D=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Workflows"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Automate your real estate operations with visual workflows"})]}),e.jsxs(o,{onClick:u,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Create Workflow"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(E,{placeholder:"Search workflows...",value:i,onChange:s=>S(s.target.value),className:"pl-10"})]}),e.jsxs(p,{value:c,onValueChange:k,children:[e.jsx(j,{className:"w-48",children:e.jsx(f,{placeholder:"All Categories"})}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"All Categories"}),Object.entries(v).map(([s,t])=>e.jsx(r,{value:s,children:t},s))]})]}),e.jsxs(p,{value:n,onValueChange:A,children:[e.jsx(j,{className:"w-40",children:e.jsx(f,{placeholder:"All Status"})}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"All Status"}),e.jsx(r,{value:"active",children:"Active"}),e.jsx(r,{value:"inactive",children:"Inactive"}),e.jsx(r,{value:"draft",children:"Draft"})]})]})]}),b?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(I,{className:"w-8 h-8 animate-spin text-gray-400"})}):h.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-lg border",children:[e.jsx(J,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l.length===0?"No workflows yet":"No matching workflows"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l.length===0?"Create your first workflow to automate your operations":"Try adjusting your filters"}),l.length===0&&e.jsxs(o,{onClick:u,children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Create Your First Workflow"]})]}):e.jsx("div",{className:"grid gap-4",children:h.map(s=>e.jsx("div",{className:"bg-white rounded-lg border p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>g(s.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isActive?e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Active"]}):s.isPublished?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Inactive"}):e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:"Draft"}),e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-50 text-blue-700 rounded",children:v[s.category]})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-6 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3.5 h-3.5"}),"Updated ",D(s.updatedAt)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),s.executionCount," runs"]}),s.executionCount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(F,{className:"w-3.5 h-3.5"}),s.successCount," success"]}),s.failureCount>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(z,{className:"w-3.5 h-3.5"}),s.failureCount," failed"]})]})]})]}),e.jsxs(T,{children:[e.jsx(B,{asChild:!0,onClick:t=>t.stopPropagation(),children:e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(O,{className:"w-4 h-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(d,{onClick:t=>{t.stopPropagation(),g(s.id)},children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(d,{onClick:t=>t.stopPropagation(),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(G,{}),e.jsxs(d,{onClick:t=>t.stopPropagation(),className:"text-red-600",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})},s.id))})]})};export{ie as WorkflowsListPage,ie as default};
