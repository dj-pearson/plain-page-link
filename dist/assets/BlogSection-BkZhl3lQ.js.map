{"version":3,"file":"BlogSection-BkZhl3lQ.js","sources":["../../src/components/blog/BlogSection.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Calendar, Eye, ArrowRight } from \"lucide-react\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\ninterface BlogSectionProps {\n  limit?: number;\n  showSearch?: boolean;\n  showFilters?: boolean;\n}\n\nexport function BlogSection({\n  limit = 6,\n  showSearch = true,\n  showFilters = true\n}: BlogSectionProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"all\");\n\n  const { data: articles = [], isLoading } = useQuery({\n    queryKey: [\"published-articles\"],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from(\"articles\")\n        .select(\"*\")\n        .eq(\"status\", \"published\")\n        .order(\"published_at\", { ascending: false })\n        .limit(limit);\n\n      if (error) throw error;\n      return data;\n    },\n  });\n\n  const categories = [\n    \"all\",\n    \"Real Estate Tips\",\n    \"Market Insights\",\n    \"Buying Guide\",\n    \"Selling Guide\",\n    \"Investment\",\n    \"Neighborhood Guides\",\n    \"Home Improvement\",\n    \"General\",\n  ];\n\n  const filteredArticles = articles.filter((article) => {\n    const matchesSearch =\n      !searchQuery ||\n      article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      article.excerpt?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      article.tags?.some((tag: string) =>\n        tag.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n\n    const matchesCategory =\n      selectedCategory === \"all\" || article.category === selectedCategory;\n\n    return matchesSearch && matchesCategory;\n  });\n\n  return (\n    <section className=\"py-16 bg-muted/30\">\n      <div className=\"container mx-auto px-4\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-4xl font-bold mb-4\">Latest Real Estate Insights</h2>\n          <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n            Expert advice, market trends, and guides to help you succeed in real estate\n          </p>\n        </div>\n\n        {/* Search and Filters */}\n        {(showSearch || showFilters) && (\n          <div className=\"flex flex-col sm:flex-row gap-4 mb-8 max-w-4xl mx-auto\">\n            {showSearch && (\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search articles, topics, or keywords...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            )}\n            {showFilters && (\n              <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                <SelectTrigger className=\"w-full sm:w-[200px]\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {categories.map((category) => (\n                    <SelectItem key={category} value={category}>\n                      {category === \"all\" ? \"All Categories\" : category}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        )}\n\n        {/* Articles Grid */}\n        {isLoading ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">Loading articles...</p>\n          </div>\n        ) : filteredArticles.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-muted-foreground\">No articles found</p>\n          </div>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n              {filteredArticles.map((article) => (\n                <Link key={article.id} to={`/blog/${article.slug}`}>\n                  <Card className=\"h-full hover:shadow-xl transition-all duration-300 cursor-pointer group\">\n                    {article.featured_image_url && (\n                      <div className=\"overflow-hidden rounded-t-lg\">\n                        <img\n                          src={article.featured_image_url}\n                          alt={article.title}\n                          width={400}\n                          height={192}\n                          loading=\"lazy\"\n                          decoding=\"async\"\n                          className=\"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105\"\n                        />\n                      </div>\n                    )}\n                    <CardHeader>\n                      <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                        <Badge variant=\"secondary\">{article.category}</Badge>\n                        {article.tags?.slice(0, 2).map((tag) => (\n                          <Badge key={tag} variant=\"outline\" className=\"text-xs\">\n                            {tag}\n                          </Badge>\n                        ))}\n                      </div>\n                      <CardTitle className=\"line-clamp-2 group-hover:text-primary transition-colors\">\n                        {article.title}\n                      </CardTitle>\n                      <CardDescription className=\"line-clamp-3\">\n                        {article.excerpt}\n                      </CardDescription>\n                    </CardHeader>\n                    <CardFooter className=\"flex items-center justify-between text-sm text-muted-foreground\">\n                      <div className=\"flex items-center gap-1\">\n                        <Calendar className=\"h-4 w-4\" />\n                        {new Date(article.published_at).toLocaleDateString()}\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Eye className=\"h-4 w-4\" />\n                        {article.view_count} views\n                      </div>\n                    </CardFooter>\n                  </Card>\n                </Link>\n              ))}\n            </div>\n\n            {/* View All Button */}\n            <div className=\"text-center\">\n              <Link to=\"/blog\">\n                <Button size=\"lg\" className=\"gap-2\">\n                  View All Articles\n                  <ArrowRight className=\"h-4 w-4\" />\n                </Button>\n              </Link>\n            </div>\n          </>\n        )}\n      </div>\n    </section>\n  );\n}\n"],"names":["BlogSection","limit","showSearch","showFilters","searchQuery","setSearchQuery","useState","selectedCategory","setSelectedCategory","articles","isLoading","useQuery","data","error","supabase","categories","filteredArticles","article","matchesSearch","tag","matchesCategory","jsxs","jsx","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","category","SelectItem","Fragment","Link","Card","CardHeader","Badge","CardTitle","CardDescription","CardFooter","Calendar","Eye","Button","ArrowRight"],"mappings":"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"}