import{j as e,z as s,A as a,B as t,E as l,G as n,H as i,J as r,K as d}from"./ui-components-DtyTDbSg.js";import{r as o}from"./react-vendor-B_Chv4nK.js";import{D as c,n as m,o as x,p as u,q as h,L as p,I as f,g as j,h as g,i as b,j as v,k as N,r as k,B as y,m as w,y as C}from"./index-DxTo7WPx.js";import{I as L,F as A,f as S,k as F,Y as D,H as T,h as R,e as z,G as E,M as I,P as O,t as P,a1 as _,a0 as q,X as U,aa as M,ah as Y,N as B,ac as G,ad as H}from"./icons-K_BhWJ_Z.js";import{u as W}from"./use-toast-BIxl6y56.js";import{u as K}from"./useLinks-DU2T87wh.js";import{u as J,U as V}from"./UpgradeModal-CFOSkjmS.js";import{L as Z}from"./LimitBanner-C85UxyFy.js";import"./three-t2PEh41g.js";import"./charts-CeHnXkIf.js";import"./utils-D6PrBqaA.js";import"./data-ChU7VID-.js";import"./supabase-D4JaKbf_.js";import"./forms-yc2f2ZZT.js";import"./alert-B6eQrAWz.js";import"./progress-CqvpSpaq.js";const Q=[{value:"instagram",label:"Instagram",icon:L},{value:"facebook",label:"Facebook",icon:A},{value:"linkedin",label:"LinkedIn",icon:S},{value:"tiktok",label:"TikTok",icon:F},{value:"youtube",label:"YouTube",icon:D},{value:"zillow",label:"Zillow",icon:T},{value:"realtor",label:"Realtor.com",icon:R},{value:"calendar",label:"Calendar",icon:z},{value:"website",label:"Website",icon:E},{value:"email",label:"Email",icon:I},{value:"phone",label:"Phone",icon:O},{value:"whatsapp",label:"WhatsApp",icon:P},{value:"document",label:"Document",icon:_},{value:"link",label:"Link",icon:q}];function X({open:s,onOpenChange:a,onSave:t}){const[l,n]=o.useState({title:"",url:"",icon:"link",active:!0}),i=e=>{const{name:s,value:a}=e.target;n(e=>({...e,[s]:a}))};return e.jsx(c,{open:s,onOpenChange:a,children:e.jsxs(m,{className:"max-w-md",children:[e.jsxs(x,{children:[e.jsx(u,{children:"Add Custom Link"}),e.jsx(h,{children:"Add a social media profile or custom link to your bio"})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),null==t||t(l),a(!1),n({title:"",url:"",icon:"link",active:!0})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"title",children:"Link Title *"}),e.jsx(f,{id:"title",name:"title",value:l.title,onChange:i,placeholder:"Schedule a Consultation",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"url",children:"URL *"}),e.jsx(f,{id:"url",name:"url",type:"url",value:l.url,onChange:i,placeholder:"https://example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"icon",children:"Icon"}),e.jsxs(j,{value:l.icon,onValueChange:e=>n(s=>({...s,icon:e})),children:[e.jsx(g,{children:e.jsx(b,{children:(()=>{const s=Q.find(e=>e.value===l.icon),a=(null==s?void 0:s.icon)||q;return e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{children:(null==s?void 0:s.label)||"Custom"})]})})()})}),e.jsx(v,{children:Q.map(s=>{const a=s.icon;return e.jsx(N,{value:s.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]})},s.value)})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:l.active,onChange:e=>n(s=>({...s,active:e.target.checked})),className:"rounded border-border"}),e.jsx(p,{htmlFor:"active",className:"cursor-pointer",children:"Active (visible on profile)"})]}),e.jsxs(k,{children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(y,{type:"submit",children:"Add Link"})]})]})]})})}function $({isOpen:s,onClose:a,onSubmit:t,initialData:l}){const[n,i]=o.useState(l);if(o.useEffect(()=>{i(l)},[l]),!s)return null;return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-card border border-border rounded-lg w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Link"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-accent rounded-lg transition-colors",children:e.jsx(U,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),t(n)},className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"title",children:"Link Title *"}),e.jsx(f,{id:"title",value:n.title,onChange:e=>i({...n,title:e.target.value}),placeholder:"e.g., My Website",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"url",children:"URL *"}),e.jsx(f,{id:"url",type:"url",value:n.url,onChange:e=>i({...n,url:e.target.value}),placeholder:"https://example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"icon",children:"Icon (optional)"}),e.jsx(f,{id:"icon",value:n.icon||"",onChange:e=>i({...n,icon:e.target.value}),placeholder:"e.g., link, globe, home"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Icon name from Lucide icons"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:a,className:"flex-1",children:"Cancel"}),e.jsx(y,{type:"submit",className:"flex-1",children:"Save Changes"})]})]})]})})}const ee=s,se=a,ae=o.forwardRef(({className:s,...a},t)=>e.jsx(d,{className:w("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));ae.displayName=d.displayName;const te=o.forwardRef(({className:s,...a},l)=>e.jsxs(se,{children:[e.jsx(ae,{}),e.jsx(t,{ref:l,className:w("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));te.displayName=t.displayName;const le=({className:s,...a})=>e.jsx("div",{className:w("flex flex-col space-y-2 text-center sm:text-left",s),...a});le.displayName="AlertDialogHeader";const ne=({className:s,...a})=>e.jsx("div",{className:w("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});ne.displayName="AlertDialogFooter";const ie=o.forwardRef(({className:s,...a},t)=>e.jsx(l,{ref:t,className:w("text-lg font-semibold",s),...a}));ie.displayName=l.displayName;const re=o.forwardRef(({className:s,...a},t)=>e.jsx(n,{ref:t,className:w("text-sm text-muted-foreground",s),...a}));re.displayName=n.displayName;const de=o.forwardRef(({className:s,...a},t)=>e.jsx(r,{ref:t,className:w(C(),s),...a}));de.displayName=r.displayName;const oe=o.forwardRef(({className:s,...a},t)=>e.jsx(i,{ref:t,className:w(C({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));oe.displayName=i.displayName;function ce(){const[s,a]=o.useState(!1),[t,l]=o.useState(!1),[n,i]=o.useState(null),[r,d]=o.useState(!1),[c,m]=o.useState(null),[x,u]=o.useState(!1),{toast:h}=W(),{links:p,isLoading:f,addLink:j,updateLink:g,deleteLink:b}=K(),{subscription:v,canAdd:N,getLimit:k,getUsage:y}=J();return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"Custom Links"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1",children:"Manage your social and custom links"})]}),e.jsxs("button",{onClick:()=>{N("links")?a(!0):u(!0)},className:"inline-flex items-center gap-2 px-4 py-2.5 sm:py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 active:scale-95 transition-all font-medium min-h-[44px] w-full sm:w-auto justify-center shadow-sm",children:[e.jsx(M,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Add Link"})]})]}),v&&k("links")!==1/0&&e.jsx(Z,{feature:"links",current:y("links"),limit:k("links")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:p.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:"Total"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:p.filter(e=>e.is_active).length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:"Active"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-primary",children:p.reduce((e,s)=>e+s.click_count,0)}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:"Clicks"})]})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg divide-y divide-border",children:f?e.jsx("div",{className:"p-6 sm:p-8 text-center text-muted-foreground text-sm sm:text-base",children:"Loading links..."}):0===p.length?e.jsx("div",{className:"p-6 sm:p-8 text-center text-muted-foreground text-sm sm:text-base",children:'No links yet. Click "Add Link" to create your first link.'}):p.map(s=>e.jsxs("div",{className:"p-3 sm:p-4 flex items-center gap-2 sm:gap-4 hover:bg-accent/50 active:bg-accent/70 transition-colors",children:[e.jsx("button",{className:"cursor-grab active:cursor-grabbing p-1.5 hover:bg-accent rounded hidden sm:block min-h-[44px]","aria-label":"Drag to reorder",children:e.jsx(Y,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center bg-accent rounded-lg flex-shrink-0",children:(()=>{const a=(t=s.icon,{calendar:z,instagram:L,facebook:A,zillow:T,link:q,linkedin:S,tiktok:F,youtube:D,realtor:R,website:E,email:I,phone:O,whatsapp:P,document:_}[t]||q);var t;return e.jsx(a,{className:"h-5 w-5 sm:h-6 sm:w-6 text-foreground"})})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-0.5 sm:mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-medium text-sm sm:text-base text-foreground truncate",children:s.title}),s.is_active?e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium flex-shrink-0",children:"Active"}):e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full font-medium flex-shrink-0",children:"Inactive"})]}),e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary active:text-primary flex items-center gap-1 truncate",children:[e.jsx("span",{className:"truncate",children:s.url}),e.jsx(B,{className:"h-3 w-3 flex-shrink-0"})]}),e.jsxs("div",{className:"sm:hidden mt-1.5 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-semibold text-foreground",children:s.click_count})," clicks"]})]}),e.jsxs("div",{className:"text-right hidden sm:block flex-shrink-0",children:[e.jsx("div",{className:"text-lg font-semibold text-foreground",children:s.click_count}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"clicks"})]}),e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>(e=>{i(e),l(!0)})(s),className:"p-2 sm:p-2.5 hover:bg-accent active:bg-accent/80 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Edit link",children:e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("button",{onClick:()=>{return e=s.id,m(e),void d(!0);var e},className:"p-2 sm:p-2.5 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Delete link",children:e.jsx(H,{className:"h-4 w-4 text-red-500"})})]})]},s.id))}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4",children:e.jsxs("p",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 leading-relaxed",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Drag and drop links to reorder them."}),e.jsx("span",{className:"sm:hidden",children:"Use the edit option to change link details."})," The order here will reflect on your public profile page."]})}),e.jsx(X,{open:s,onOpenChange:a,onSave:async e=>{try{await j.mutateAsync(e),h({title:"Link added!",description:"Your custom link has been created successfully."})}catch(s){h({title:"Error",description:"Failed to add link. Please try again.",variant:"destructive"})}}}),e.jsx($,{open:t,onOpenChange:l,link:n,onSave:async(e,s)=>{try{await g.mutateAsync({id:e,...s}),h({title:"Link updated!",description:"Your link has been updated successfully."})}catch(a){h({title:"Error",description:"Failed to update link. Please try again.",variant:"destructive"})}}}),e.jsx(ee,{open:r,onOpenChange:d,children:e.jsxs(te,{children:[e.jsxs(le,{children:[e.jsx(ie,{children:"Are you sure?"}),e.jsx(re,{children:"This will permanently delete this link. This action cannot be undone."})]}),e.jsxs(ne,{children:[e.jsx(oe,{children:"Cancel"}),e.jsx(de,{onClick:async()=>{if(c)try{await b.mutateAsync(c),h({title:"Link deleted",description:"Your link has been removed successfully."})}catch(e){h({title:"Error",description:"Failed to delete link. Please try again.",variant:"destructive"})}finally{d(!1),m(null)}},children:"Delete"})]})]})}),e.jsx(V,{open:x,onOpenChange:u,feature:"links",currentPlan:(null==v?void 0:v.plan_name)||"Free",requiredPlan:"Starter"})]})}export{ce as default};
