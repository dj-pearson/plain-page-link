{"version":3,"file":"PageBuilder-DTxwGGGR.js","sources":["../../node_modules/lucide-react/dist/esm/icons/redo.js","../../node_modules/lucide-react/dist/esm/icons/undo.js","../../src/lib/autoPopulateBlocks.ts","../../src/lib/pageBuilder.ts","../../src/stores/pageBuilderStore.ts","../../src/lib/pageTemplates.ts","../../src/components/pageBuilder/PageList.tsx","../../src/components/pageBuilder/BlockSettings.tsx","../../src/pages/PageBuilder.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Redo = createLucideIcon(\"Redo\", [\n  [\"path\", { d: \"M21 7v6h-6\", key: \"3ptur4\" }],\n  [\"path\", { d: \"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7\", key: \"1kgawr\" }]\n]);\n\nexport { Redo as default };\n//# sourceMappingURL=redo.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Undo = createLucideIcon(\"Undo\", [\n  [\"path\", { d: \"M3 7v6h6\", key: \"1v2h90\" }],\n  [\"path\", { d: \"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13\", key: \"1r6uu6\" }]\n]);\n\nexport { Undo as default };\n//# sourceMappingURL=undo.js.map\n","/**\n * Auto-populate Block Configurations\n * Automatically fills block configurations with user data from their profile, links, and listings\n */\n\nimport { supabase } from \"@/integrations/supabase/client\";\nimport {\n    BlockConfig,\n    BioBlockConfig,\n    SocialBlockConfig,\n    ListingsBlockConfig,\n    ContactBlockConfig,\n    SocialLink,\n} from \"@/types/pageBuilder\";\n\n/**\n * Fetches user profile data\n */\nasync function fetchUserProfile(userId: string) {\n    const { data, error } = await supabase\n        .from(\"profiles\")\n        .select(\"*\")\n        .eq(\"id\", userId)\n        .single();\n\n    if (error) {\n        console.error(\"Error fetching profile:\", error);\n        return null;\n    }\n\n    return data;\n}\n\n/**\n * Fetches user links (converted to social links format)\n */\nasync function fetchUserLinks(userId: string) {\n    const { data, error } = await supabase\n        .from(\"links\")\n        .select(\"*\")\n        .eq(\"user_id\", userId)\n        .eq(\"is_active\", true)\n        .order(\"position\");\n\n    if (error) {\n        console.error(\"Error fetching links:\", error);\n        return [];\n    }\n\n    return data || [];\n}\n\n/**\n * Detects social platform from URL\n */\nfunction detectSocialPlatform(url: string): SocialLink[\"platform\"] | null {\n    const urlLower = url.toLowerCase();\n\n    if (urlLower.includes(\"instagram.com\")) return \"instagram\";\n    if (urlLower.includes(\"facebook.com\")) return \"facebook\";\n    if (urlLower.includes(\"twitter.com\") || urlLower.includes(\"x.com\")) return \"twitter\";\n    if (urlLower.includes(\"linkedin.com\")) return \"linkedin\";\n    if (urlLower.includes(\"youtube.com\")) return \"youtube\";\n    if (urlLower.includes(\"tiktok.com\")) return \"tiktok\";\n    if (urlLower.includes(\"zillow.com\")) return \"zillow\";\n    if (urlLower.includes(\"realtor.com\")) return \"realtor\";\n\n    return null;\n}\n\n/**\n * Converts user links to social links format\n */\nfunction convertToSocialLinks(links: any[]): SocialLink[] {\n    return links\n        .map((link) => {\n            const platform = detectSocialPlatform(link.url);\n            if (!platform) return null;\n\n            return {\n                id: link.id,\n                platform,\n                url: link.url,\n                username: link.title,\n            };\n        })\n        .filter((link): link is SocialLink => link !== null);\n}\n\n/**\n * Auto-populates a Bio block with user profile data\n */\nasync function autoPopulateBioBlock(\n    defaultConfig: BioBlockConfig,\n    userId: string\n): Promise<BioBlockConfig> {\n    const profile = await fetchUserProfile(userId);\n\n    if (!profile) return defaultConfig;\n\n    return {\n        ...defaultConfig,\n        title: profile.full_name || profile.username || defaultConfig.title,\n        subtitle: defaultConfig.subtitle,\n        description: profile.bio || defaultConfig.description,\n        avatarUrl: profile.avatar_url || defaultConfig.avatarUrl,\n    };\n}\n\n/**\n * Auto-populates a Social block with user's social links\n */\nasync function autoPopulateSocialBlock(\n    defaultConfig: SocialBlockConfig,\n    userId: string\n): Promise<SocialBlockConfig> {\n    const links = await fetchUserLinks(userId);\n    const socialLinks = convertToSocialLinks(links);\n\n    // If user has social links, use them; otherwise return empty for manual entry\n    if (socialLinks.length > 0) {\n        return {\n            ...defaultConfig,\n            links: socialLinks,\n        };\n    }\n\n    return defaultConfig;\n}\n\n/**\n * Auto-populates a Listings block (config only, data fetched at render time)\n */\nasync function autoPopulateListingsBlock(\n    defaultConfig: ListingsBlockConfig,\n    userId: string\n): Promise<ListingsBlockConfig> {\n    // Listings block pulls data dynamically at render time\n    // We just ensure the config is set correctly\n    return {\n        ...defaultConfig,\n        title: \"My Featured Properties\",\n        filter: \"active\", // Show active listings by default\n        maxItems: 6,\n    };\n}\n\n/**\n * Auto-populates a Contact block with user email\n */\nasync function autoPopulateContactBlock(\n    defaultConfig: ContactBlockConfig,\n    userId: string\n): Promise<ContactBlockConfig> {\n    // Contact form fields are already set up well in default config\n    // Could potentially add user's email as a mailto or hidden field\n    return defaultConfig;\n}\n\n/**\n * Main auto-population function\n * Takes a default block config and enriches it with user data\n */\nexport async function autoPopulateBlockConfig(\n    defaultConfig: BlockConfig,\n    userId: string\n): Promise<BlockConfig> {\n    try {\n        switch (defaultConfig.type) {\n            case \"bio\":\n                return await autoPopulateBioBlock(defaultConfig, userId);\n\n            case \"social\":\n                return await autoPopulateSocialBlock(defaultConfig, userId);\n\n            case \"listings\":\n                return await autoPopulateListingsBlock(defaultConfig, userId);\n\n            case \"contact\":\n                return await autoPopulateContactBlock(defaultConfig, userId);\n\n            // Other block types don't need auto-population\n            default:\n                return defaultConfig;\n        }\n    } catch (error) {\n        console.error(\"Error auto-populating block:\", error);\n        // Fall back to default config on error\n        return defaultConfig;\n    }\n}\n\n/**\n * Checks if user has any data to auto-populate\n * Returns helpful hints for what's missing\n */\nexport async function getUserDataStatus(userId: string) {\n    const [profile, links] = await Promise.all([\n        fetchUserProfile(userId),\n        fetchUserLinks(userId),\n    ]);\n\n    const socialLinks = convertToSocialLinks(links);\n\n    return {\n        hasProfile: !!profile,\n        hasFullName: !!(profile?.full_name),\n        hasBio: !!(profile?.bio),\n        hasAvatar: !!(profile?.avatar_url),\n        hasSocialLinks: socialLinks.length > 0,\n        socialLinkCount: socialLinks.length,\n        suggestions: [] as string[],\n    };\n}\n","/**\n * Page Builder Engine\n * Core functionality for the drag-and-drop page builder\n */\n\nimport {\n    PageBlock,\n    PageConfig,\n    BlockType,\n    BlockConfig,\n    BlockTemplate,\n} from \"@/types/pageBuilder\";\nimport { autoPopulateBlockConfig } from \"./autoPopulateBlocks\";\n\n/**\n * Page Builder Engine\n * Manages page state, block operations, and persistence\n */\nclass PageBuilderEngine {\n    /**\n     * Create a new empty page\n     */\n    createNewPage(userId: string, slug: string): PageConfig {\n        return {\n            id: this.generateId(),\n            userId,\n            slug,\n            title: \"My Link-in-Bio Page\",\n            description: \"Real Estate Professional\",\n            blocks: [],\n            theme: this.getDefaultTheme(),\n            seo: {\n                title: \"My Link-in-Bio Page\",\n                description: \"Real Estate Professional\",\n                keywords: [\"real estate\", \"agent\", \"properties\"],\n                twitterCard: \"summary_large_image\",\n            },\n            published: false,\n            createdAt: new Date(),\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Get default theme\n     */\n    private getDefaultTheme() {\n        return {\n            name: \"Default\",\n            preset: \"modern\",\n            colors: {\n                primary: \"#2563eb\",\n                secondary: \"#10b981\",\n                background: \"#ffffff\",\n                text: \"#1f2937\",\n                accent: \"#f59e0b\",\n            },\n            fonts: {\n                heading: \"Inter\",\n                body: \"Inter\",\n            },\n            borderRadius: \"medium\" as const,\n            spacing: \"normal\" as const,\n        };\n    }\n\n    /**\n     * Add a block to the page (with auto-population)\n     */\n    async addBlock(\n        page: PageConfig,\n        blockType: BlockType,\n        position?: number,\n        userId?: string\n    ): Promise<PageConfig> {\n        const template = this.getBlockTemplate(blockType);\n        if (!template) {\n            throw new Error(`Unknown block type: ${blockType}`);\n        }\n\n        // Auto-populate the config with user data if userId is provided\n        let blockConfig = template.defaultConfig;\n        if (userId) {\n            blockConfig = await autoPopulateBlockConfig(\n                template.defaultConfig,\n                userId\n            );\n        }\n\n        const newBlock: PageBlock = {\n            id: this.generateId(),\n            type: blockType,\n            order: position !== undefined ? position : page.blocks.length,\n            visible: true,\n            config: blockConfig,\n        };\n\n        const updatedBlocks = [...page.blocks];\n        if (position !== undefined) {\n            // Insert at specific position\n            updatedBlocks.splice(position, 0, newBlock);\n            // Reorder all blocks\n            updatedBlocks.forEach((block, index) => {\n                block.order = index;\n            });\n        } else {\n            updatedBlocks.push(newBlock);\n        }\n\n        return {\n            ...page,\n            blocks: updatedBlocks,\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Remove a block from the page\n     */\n    removeBlock(page: PageConfig, blockId: string): PageConfig {\n        const updatedBlocks = page.blocks\n            .filter((block) => block.id !== blockId)\n            .map((block, index) => ({\n                ...block,\n                order: index,\n            }));\n\n        return {\n            ...page,\n            blocks: updatedBlocks,\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Update a block's configuration\n     */\n    updateBlock(\n        page: PageConfig,\n        blockId: string,\n        config: Partial<BlockConfig>\n    ): PageConfig {\n        const updatedBlocks = page.blocks.map((block) =>\n            block.id === blockId\n                ? {\n                      ...block,\n                      config: { ...block.config, ...config },\n                  }\n                : block\n        );\n\n        return {\n            ...page,\n            blocks: updatedBlocks,\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Reorder blocks\n     */\n    reorderBlocks(\n        page: PageConfig,\n        sourceIndex: number,\n        destinationIndex: number\n    ): PageConfig {\n        const updatedBlocks = [...page.blocks];\n        const [movedBlock] = updatedBlocks.splice(sourceIndex, 1);\n        updatedBlocks.splice(destinationIndex, 0, movedBlock);\n\n        // Update order property\n        updatedBlocks.forEach((block, index) => {\n            block.order = index;\n        });\n\n        return {\n            ...page,\n            blocks: updatedBlocks,\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Toggle block visibility\n     */\n    toggleBlockVisibility(page: PageConfig, blockId: string): PageConfig {\n        const updatedBlocks = page.blocks.map((block) =>\n            block.id === blockId ? { ...block, visible: !block.visible } : block\n        );\n\n        return {\n            ...page,\n            blocks: updatedBlocks,\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Duplicate a block\n     */\n    duplicateBlock(page: PageConfig, blockId: string): PageConfig {\n        const block = page.blocks.find((b) => b.id === blockId);\n        if (!block) {\n            return page;\n        }\n\n        const duplicatedBlock: PageBlock = {\n            ...block,\n            id: this.generateId(),\n            order: block.order + 1,\n        };\n\n        const updatedBlocks = [...page.blocks];\n        updatedBlocks.splice(block.order + 1, 0, duplicatedBlock);\n\n        // Reorder all blocks after the duplicated one\n        updatedBlocks.forEach((b, index) => {\n            if (index > block.order) {\n                b.order = index;\n            }\n        });\n\n        return {\n            ...page,\n            blocks: updatedBlocks,\n            updatedAt: new Date(),\n        };\n    }\n\n    /**\n     * Get available block templates\n     */\n    getBlockTemplates(): BlockTemplate[] {\n        return [\n            {\n                type: \"bio\",\n                name: \"Bio Section\",\n                description: \"Your profile and introduction\",\n                icon: \"User\",\n                category: \"content\",\n                defaultConfig: {\n                    type: \"bio\",\n                    title: \"Your Name\",\n                    subtitle: \"Real Estate Professional\",\n                    description:\n                        \"Helping clients find their dream homes in [Your City]. Licensed agent with [X] years of experience.\",\n                    showSocialLinks: true,\n                    showContactButton: true,\n                },\n            },\n            {\n                type: \"listings\",\n                name: \"Property Listings\",\n                description: \"Showcase your active listings\",\n                icon: \"Home\",\n                category: \"content\",\n                defaultConfig: {\n                    type: \"listings\",\n                    title: \"Featured Properties\",\n                    layout: \"grid\",\n                    filter: \"active\",\n                    maxItems: 6,\n                    showPrices: true,\n                    showStatus: true,\n                },\n            },\n            {\n                type: \"link\",\n                name: \"Link Button\",\n                description: \"Add a custom link\",\n                icon: \"Link\",\n                category: \"content\",\n                defaultConfig: {\n                    type: \"link\",\n                    title: \"Click Here\",\n                    url: \"https://example.com\",\n                    style: \"button\",\n                    openInNewTab: true,\n                },\n            },\n            {\n                type: \"contact\",\n                name: \"Contact Form\",\n                description: \"Let visitors reach out\",\n                icon: \"Mail\",\n                category: \"engagement\",\n                defaultConfig: {\n                    type: \"contact\",\n                    title: \"Get In Touch\",\n                    fields: [\n                        {\n                            id: \"name\",\n                            type: \"text\",\n                            label: \"Name\",\n                            placeholder: \"Your name\",\n                            required: true,\n                        },\n                        {\n                            id: \"email\",\n                            type: \"email\",\n                            label: \"Email\",\n                            placeholder: \"your@email.com\",\n                            required: true,\n                        },\n                        {\n                            id: \"message\",\n                            type: \"textarea\",\n                            label: \"Message\",\n                            placeholder: \"How can I help you?\",\n                            required: true,\n                        },\n                    ],\n                    submitButtonText: \"Send Message\",\n                    successMessage: \"Thank you! I'll get back to you soon.\",\n                },\n            },\n            {\n                type: \"social\",\n                name: \"Social Links\",\n                description: \"Connect on social media\",\n                icon: \"Share2\",\n                category: \"engagement\",\n                defaultConfig: {\n                    type: \"social\",\n                    title: \"Follow Me\",\n                    links: [],\n                    layout: \"horizontal\",\n                    iconSize: \"medium\",\n                },\n            },\n            {\n                type: \"video\",\n                name: \"Video\",\n                description: \"Embed a video\",\n                icon: \"Video\",\n                category: \"media\",\n                defaultConfig: {\n                    type: \"video\",\n                    title: \"Watch My Introduction\",\n                    videoUrl: \"\",\n                    autoplay: false,\n                    muted: true,\n                },\n            },\n            {\n                type: \"testimonial\",\n                name: \"Testimonials\",\n                description: \"Client reviews\",\n                icon: \"MessageSquare\",\n                category: \"content\",\n                defaultConfig: {\n                    type: \"testimonial\",\n                    title: \"What Clients Say\",\n                    testimonials: [],\n                    layout: \"slider\",\n                },\n            },\n            {\n                type: \"spacer\",\n                name: \"Spacer\",\n                description: \"Add vertical space\",\n                icon: \"MoveVertical\",\n                category: \"content\",\n                defaultConfig: {\n                    type: \"spacer\",\n                    height: 40,\n                },\n            },\n            {\n                type: \"image\",\n                name: \"Image\",\n                description: \"Add an image\",\n                icon: \"Image\",\n                category: \"media\",\n                defaultConfig: {\n                    type: \"image\",\n                    imageUrl: \"\",\n                    alt: \"Image\",\n                    size: \"medium\",\n                },\n            },\n            {\n                type: \"text\",\n                name: \"Text Block\",\n                description: \"Add custom text\",\n                icon: \"Type\",\n                category: \"content\",\n                defaultConfig: {\n                    type: \"text\",\n                    content: \"Your text here...\",\n                    align: \"left\",\n                    fontSize: \"medium\",\n                },\n            },\n        ];\n    }\n\n    /**\n     * Get a block template by type\n     */\n    private getBlockTemplate(type: BlockType): BlockTemplate | undefined {\n        return this.getBlockTemplates().find((t) => t.type === type);\n    }\n\n    /**\n     * Generate a unique ID\n     */\n    private generateId(): string {\n        return `block_${Date.now()}_${Math.random()\n            .toString(36)\n            .substring(2, 9)}`;\n    }\n\n    /**\n     * Validate page configuration\n     */\n    validatePage(page: PageConfig): {\n        valid: boolean;\n        errors: string[];\n    } {\n        const errors: string[] = [];\n\n        // Check required fields\n        if (!page.slug || page.slug.trim() === \"\") {\n            errors.push(\"Page slug is required\");\n        }\n\n        if (!page.title || page.title.trim() === \"\") {\n            errors.push(\"Page title is required\");\n        }\n\n        // Validate slug format (alphanumeric and hyphens only)\n        if (!/^[a-z0-9-]+$/i.test(page.slug)) {\n            errors.push(\n                \"Page slug must contain only letters, numbers, and hyphens\"\n            );\n        }\n\n        // Check for duplicate block IDs\n        const blockIds = page.blocks.map((b) => b.id);\n        const uniqueIds = new Set(blockIds);\n        if (blockIds.length !== uniqueIds.size) {\n            errors.push(\"Duplicate block IDs detected\");\n        }\n\n        return {\n            valid: errors.length === 0,\n            errors,\n        };\n    }\n}\n\n// Singleton instance\nexport const pageBuilder = new PageBuilderEngine();\n\n// Export helper functions\nexport const createNewPage = pageBuilder.createNewPage.bind(pageBuilder);\nexport const addBlock = pageBuilder.addBlock.bind(pageBuilder);\nexport const removeBlock = pageBuilder.removeBlock.bind(pageBuilder);\nexport const updateBlock = pageBuilder.updateBlock.bind(pageBuilder);\nexport const reorderBlocks = pageBuilder.reorderBlocks.bind(pageBuilder);\nexport const toggleBlockVisibility =\n    pageBuilder.toggleBlockVisibility.bind(pageBuilder);\nexport const duplicateBlock = pageBuilder.duplicateBlock.bind(pageBuilder);\nexport const getBlockTemplates =\n    pageBuilder.getBlockTemplates.bind(pageBuilder);\nexport const validatePage = pageBuilder.validatePage.bind(pageBuilder);\n","/**\n * Page Builder Store\n * Zustand store for managing page builder state\n */\n\nimport { create } from \"zustand\";\nimport { PageConfig, PageBlock, BlockConfig } from \"@/types/pageBuilder\";\nimport { toast } from \"sonner\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport {\n    addBlock,\n    removeBlock,\n    updateBlock,\n    reorderBlocks,\n    toggleBlockVisibility,\n    duplicateBlock,\n} from \"@/lib/pageBuilder\";\n\ninterface PageBuilderStore {\n    // State\n    page: PageConfig | null;\n    selectedBlockId: string | null;\n    isDragging: boolean;\n    history: PageConfig[];\n    historyIndex: number;\n    isPreviewMode: boolean;\n    isSaving: boolean;\n\n    // Actions\n    setPage: (page: PageConfig) => void;\n    loadPage: (pageId: string) => Promise<void>;\n    loadUserPages: () => Promise<PageConfig[]>;\n    selectBlock: (blockId: string | null) => void;\n    setIsDragging: (isDragging: boolean) => void;\n    addBlockToPage: (type: any, position?: number) => Promise<void>;\n    removeBlockFromPage: (blockId: string) => void;\n    updateBlockConfig: (blockId: string, config: Partial<BlockConfig>) => void;\n    reorderPageBlocks: (sourceIndex: number, destIndex: number) => void;\n    toggleBlockVisible: (blockId: string) => void;\n    duplicatePageBlock: (blockId: string) => void;\n    updatePageMeta: (meta: Partial<PageConfig>) => void;\n    undo: () => void;\n    redo: () => void;\n    canUndo: () => boolean;\n    canRedo: () => boolean;\n    togglePreviewMode: () => void;\n    savePage: () => Promise<void>;\n    publishPage: () => Promise<void>;\n    setAsActivePage: (pageId: string) => Promise<void>;\n    resetBuilder: () => void;\n}\n\nexport const usePageBuilderStore = create<PageBuilderStore>((set, get) => ({\n    // Initial state\n    page: null,\n    selectedBlockId: null,\n    isDragging: false,\n    history: [],\n    historyIndex: -1,\n    isPreviewMode: false,\n    isSaving: false,\n\n    // Set the current page\n    setPage: (page) => {\n        set({\n            page,\n            history: [page],\n            historyIndex: 0,\n            selectedBlockId: null,\n        });\n    },\n\n    // Load a page from the database\n    loadPage: async (pageId) => {\n        try {\n            const { data, error } = await supabase\n                .from('custom_pages')\n                .select('*')\n                .eq('id', pageId)\n                .single();\n\n            if (error) throw error;\n            if (!data) throw new Error('Page not found');\n\n            // Convert database format to PageConfig\n            const pageConfig: PageConfig = {\n                id: data.id,\n                userId: data.user_id,\n                slug: data.slug,\n                title: data.title,\n                description: data.description || '',\n                blocks: data.blocks as any[],\n                theme: data.theme as any,\n                seo: data.seo as any,\n                published: data.published,\n                createdAt: new Date(data.created_at),\n                updatedAt: new Date(data.updated_at),\n            };\n\n            get().setPage(pageConfig);\n        } catch (error) {\n            console.error('Failed to load page:', error);\n            toast.error('Failed to load page');\n            throw error;\n        }\n    },\n\n    // Load all user pages\n    loadUserPages: async () => {\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error('Not authenticated');\n\n            const { data, error } = await supabase\n                .from('custom_pages')\n                .select('*')\n                .eq('user_id', user.id)\n                .order('updated_at', { ascending: false });\n\n            if (error) throw error;\n\n            return (data || []).map(d => ({\n                id: d.id,\n                userId: d.user_id,\n                slug: d.slug,\n                title: d.title,\n                description: d.description || '',\n                blocks: d.blocks as any[],\n                theme: d.theme as any,\n                seo: d.seo as any,\n                published: d.published,\n                createdAt: new Date(d.created_at),\n                updatedAt: new Date(d.updated_at),\n            }));\n        } catch (error) {\n            console.error('Failed to load user pages:', error);\n            return [];\n        }\n    },\n\n    // Select a block\n    selectBlock: (blockId) => {\n        set({ selectedBlockId: blockId });\n    },\n\n    // Set dragging state\n    setIsDragging: (isDragging) => {\n        set({ isDragging });\n    },\n\n    // Add a block to the page (with auto-population)\n    addBlockToPage: async (type, position) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        try {\n            // Get current user for auto-population\n            const { data: { user } } = await supabase.auth.getUser();\n\n            const newPage = await addBlock(page, type, position, user?.id);\n            const newHistory = history.slice(0, historyIndex + 1);\n            newHistory.push(newPage);\n\n            set({\n                page: newPage,\n                history: newHistory,\n                historyIndex: newHistory.length - 1,\n                selectedBlockId: newPage.blocks[newPage.blocks.length - 1]?.id,\n            });\n        } catch (error) {\n            console.error('Error adding block:', error);\n            toast.error('Failed to add block');\n        }\n    },\n\n    // Remove a block from the page\n    removeBlockFromPage: (blockId) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        const newPage = removeBlock(page, blockId);\n        const newHistory = history.slice(0, historyIndex + 1);\n        newHistory.push(newPage);\n\n        set({\n            page: newPage,\n            history: newHistory,\n            historyIndex: newHistory.length - 1,\n            selectedBlockId: null,\n        });\n    },\n\n    // Update a block's configuration\n    updateBlockConfig: (blockId, config) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        const newPage = updateBlock(page, blockId, config);\n        const newHistory = history.slice(0, historyIndex + 1);\n        newHistory.push(newPage);\n\n        set({\n            page: newPage,\n            history: newHistory,\n            historyIndex: newHistory.length - 1,\n        });\n    },\n\n    // Reorder blocks\n    reorderPageBlocks: (sourceIndex, destIndex) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        const newPage = reorderBlocks(page, sourceIndex, destIndex);\n        const newHistory = history.slice(0, historyIndex + 1);\n        newHistory.push(newPage);\n\n        set({\n            page: newPage,\n            history: newHistory,\n            historyIndex: newHistory.length - 1,\n        });\n    },\n\n    // Toggle block visibility\n    toggleBlockVisible: (blockId) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        const newPage = toggleBlockVisibility(page, blockId);\n        const newHistory = history.slice(0, historyIndex + 1);\n        newHistory.push(newPage);\n\n        set({\n            page: newPage,\n            history: newHistory,\n            historyIndex: newHistory.length - 1,\n        });\n    },\n\n    // Duplicate a block\n    duplicatePageBlock: (blockId) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        const newPage = duplicateBlock(page, blockId);\n        const newHistory = history.slice(0, historyIndex + 1);\n        newHistory.push(newPage);\n\n        set({\n            page: newPage,\n            history: newHistory,\n            historyIndex: newHistory.length - 1,\n        });\n    },\n\n    // Update page metadata\n    updatePageMeta: (meta) => {\n        const { page, history, historyIndex } = get();\n        if (!page) return;\n\n        const newPage = {\n            ...page,\n            ...meta,\n            updatedAt: new Date(),\n        };\n        const newHistory = history.slice(0, historyIndex + 1);\n        newHistory.push(newPage);\n\n        set({\n            page: newPage,\n            history: newHistory,\n            historyIndex: newHistory.length - 1,\n        });\n    },\n\n    // Undo\n    undo: () => {\n        const { history, historyIndex } = get();\n        if (historyIndex > 0) {\n            set({\n                page: history[historyIndex - 1],\n                historyIndex: historyIndex - 1,\n            });\n        }\n    },\n\n    // Redo\n    redo: () => {\n        const { history, historyIndex } = get();\n        if (historyIndex < history.length - 1) {\n            set({\n                page: history[historyIndex + 1],\n                historyIndex: historyIndex + 1,\n            });\n        }\n    },\n\n    // Can undo\n    canUndo: () => {\n        const { historyIndex } = get();\n        return historyIndex > 0;\n    },\n\n    // Can redo\n    canRedo: () => {\n        const { history, historyIndex } = get();\n        return historyIndex < history.length - 1;\n    },\n\n    // Toggle preview mode\n    togglePreviewMode: () => {\n        set((state) => ({\n            isPreviewMode: !state.isPreviewMode,\n            selectedBlockId: null,\n        }));\n    },\n\n    // Save page (to Supabase)\n    savePage: async () => {\n        const { page } = get();\n        if (!page) return;\n\n        set({ isSaving: true });\n\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error('Not authenticated');\n\n            const pageData = {\n                user_id: user.id,\n                slug: page.slug,\n                title: page.title,\n                description: page.description,\n                blocks: page.blocks,\n                theme: page.theme,\n                seo: page.seo,\n                published: page.published,\n            };\n\n            // Check if page exists\n            const { data: existing } = await supabase\n                .from('custom_pages')\n                .select('id')\n                .eq('id', page.id)\n                .single();\n\n            if (existing) {\n                // Update existing page\n                const { error } = await supabase\n                    .from('custom_pages')\n                    .update(pageData)\n                    .eq('id', page.id);\n\n                if (error) throw error;\n            } else {\n                // Insert new page\n                const { error } = await supabase\n                    .from('custom_pages')\n                    .insert({ ...pageData, id: page.id });\n\n                if (error) throw error;\n            }\n\n            toast.success('Page saved successfully');\n        } catch (error) {\n            console.error('Failed to save page:', error);\n            toast.error('Failed to save page');\n            throw error;\n        } finally {\n            set({ isSaving: false });\n        }\n    },\n\n    // Publish page\n    publishPage: async () => {\n        const { page, updatePageMeta, savePage } = get();\n        if (!page) return;\n\n        updatePageMeta({ published: true });\n        await savePage();\n        toast.success('Page published successfully!');\n    },\n\n    // Set as active page (will be shown on profile)\n    setAsActivePage: async (pageId) => {\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) throw new Error('Not authenticated');\n\n            // Set the page as active\n            const { error } = await supabase\n                .from('custom_pages')\n                .update({ is_active: true })\n                .eq('id', pageId)\n                .eq('user_id', user.id);\n\n            if (error) throw error;\n\n            toast.success('This page is now your active profile');\n        } catch (error) {\n            console.error('Failed to set active page:', error);\n            toast.error('Failed to set active page');\n            throw error;\n        }\n    },\n\n    // Reset builder state\n    resetBuilder: () => {\n        set({\n            page: null,\n            selectedBlockId: null,\n            isDragging: false,\n            history: [],\n            historyIndex: -1,\n            isPreviewMode: false,\n            isSaving: false,\n        });\n    },\n}));\n","/**\n * Page Templates\n * Pre-built page layouts for quick start\n */\n\nimport { PageBlock, BlockType } from \"@/types/pageBuilder\";\n\nexport interface PageTemplate {\n    id: string;\n    name: string;\n    description: string;\n    category: \"real-estate\" | \"general\";\n    preview?: string;\n    blocks: Omit<PageBlock, \"id\" | \"order\">[];\n}\n\n/**\n * Luxury Real Estate Agent Template\n * Perfect for high-end property specialists\n */\nconst luxuryAgentTemplate: PageTemplate = {\n    id: \"luxury-agent\",\n    name: \"Luxury Agent\",\n    description: \"Professional layout for luxury real estate specialists\",\n    category: \"real-estate\",\n    blocks: [\n        {\n            type: \"bio\",\n            visible: true,\n            config: {\n                type: \"bio\",\n                title: \"Your Name\",\n                subtitle: \"Luxury Real Estate Specialist\",\n                description:\n                    \"Specializing in high-end properties and exclusive listings. Let me help you find your dream home in the most prestigious neighborhoods.\",\n                showSocialLinks: true,\n                showContactButton: true,\n            },\n        },\n        {\n            type: \"listings\",\n            visible: true,\n            config: {\n                type: \"listings\",\n                title: \"Featured Luxury Properties\",\n                layout: \"grid\",\n                filter: \"featured\",\n                maxItems: 6,\n                showPrices: true,\n                showStatus: true,\n            },\n        },\n        {\n            type: \"social\",\n            visible: true,\n            config: {\n                type: \"social\",\n                title: \"Connect With Me\",\n                links: [],\n                layout: \"horizontal\",\n                iconSize: \"medium\",\n            },\n        },\n        {\n            type: \"contact\",\n            visible: true,\n            config: {\n                type: \"contact\",\n                title: \"Schedule a Consultation\",\n                fields: [\n                    {\n                        id: \"name\",\n                        type: \"text\",\n                        label: \"Name\",\n                        placeholder: \"Your name\",\n                        required: true,\n                    },\n                    {\n                        id: \"email\",\n                        type: \"email\",\n                        label: \"Email\",\n                        placeholder: \"your@email.com\",\n                        required: true,\n                    },\n                    {\n                        id: \"phone\",\n                        type: \"phone\",\n                        label: \"Phone\",\n                        placeholder: \"(555) 555-5555\",\n                        required: false,\n                    },\n                    {\n                        id: \"interest\",\n                        type: \"select\",\n                        label: \"I'm interested in\",\n                        placeholder: \"Select one\",\n                        required: true,\n                        options: [\"Buying\", \"Selling\", \"Both\"],\n                    },\n                    {\n                        id: \"message\",\n                        type: \"textarea\",\n                        label: \"Tell me about your goals\",\n                        placeholder: \"What can I help you with?\",\n                        required: true,\n                    },\n                ],\n                submitButtonText: \"Request Consultation\",\n                successMessage:\n                    \"Thank you! I'll be in touch within 24 hours.\",\n            },\n        },\n    ],\n};\n\n/**\n * First-Time Buyer Specialist Template\n * Friendly and approachable for new homebuyers\n */\nconst firstTimeBuyerTemplate: PageTemplate = {\n    id: \"first-time-buyer\",\n    name: \"First-Time Buyer Specialist\",\n    description: \"Friendly layout for agents helping first-time buyers\",\n    category: \"real-estate\",\n    blocks: [\n        {\n            type: \"bio\",\n            visible: true,\n            config: {\n                type: \"bio\",\n                title: \"Your Name\",\n                subtitle: \"First-Time Homebuyer Specialist\",\n                description:\n                    \"Making your first home purchase stress-free! I guide first-time buyers through every step of the process with patience and expertise.\",\n                showSocialLinks: true,\n                showContactButton: true,\n            },\n        },\n        {\n            type: \"text\",\n            visible: true,\n            config: {\n                type: \"text\",\n                content:\n                    \"ðŸ  New to homebuying? You're in the right place! I'll walk you through every step, from getting pre-approved to closing day.\",\n                align: \"center\",\n                fontSize: \"medium\",\n            },\n        },\n        {\n            type: \"listings\",\n            visible: true,\n            config: {\n                type: \"listings\",\n                title: \"Starter Homes & Condos\",\n                layout: \"grid\",\n                filter: \"active\",\n                maxItems: 6,\n                showPrices: true,\n                showStatus: true,\n            },\n        },\n        {\n            type: \"link\",\n            visible: true,\n            config: {\n                type: \"link\",\n                title: \"ðŸ“š First-Time Buyer Guide (Free Download)\",\n                url: \"#\",\n                style: \"button\",\n                openInNewTab: false,\n            },\n        },\n        {\n            type: \"contact\",\n            visible: true,\n            config: {\n                type: \"contact\",\n                title: \"Let's Get Started!\",\n                fields: [\n                    {\n                        id: \"name\",\n                        type: \"text\",\n                        label: \"Name\",\n                        placeholder: \"Your name\",\n                        required: true,\n                    },\n                    {\n                        id: \"email\",\n                        type: \"email\",\n                        label: \"Email\",\n                        placeholder: \"your@email.com\",\n                        required: true,\n                    },\n                    {\n                        id: \"phone\",\n                        type: \"phone\",\n                        label: \"Phone\",\n                        placeholder: \"(555) 555-5555\",\n                        required: false,\n                    },\n                    {\n                        id: \"timeline\",\n                        type: \"select\",\n                        label: \"When are you looking to buy?\",\n                        placeholder: \"Select timeframe\",\n                        required: true,\n                        options: [\n                            \"1-3 months\",\n                            \"3-6 months\",\n                            \"6-12 months\",\n                            \"Just exploring\",\n                        ],\n                    },\n                ],\n                submitButtonText: \"Start My Journey\",\n                successMessage:\n                    \"Exciting! I'll reach out soon to help you find your first home.\",\n            },\n        },\n        {\n            type: \"social\",\n            visible: true,\n            config: {\n                type: \"social\",\n                title: \"Follow for Home Buying Tips\",\n                links: [],\n                layout: \"horizontal\",\n                iconSize: \"large\",\n            },\n        },\n    ],\n};\n\n/**\n * Investment Property Specialist Template\n * Data-driven layout for investor-focused agents\n */\nconst investorFocusedTemplate: PageTemplate = {\n    id: \"investor-focused\",\n    name: \"Investment Property Specialist\",\n    description: \"Perfect for agents working with real estate investors\",\n    category: \"real-estate\",\n    blocks: [\n        {\n            type: \"bio\",\n            visible: true,\n            config: {\n                type: \"bio\",\n                title: \"Your Name\",\n                subtitle: \"Investment Property Specialist\",\n                description:\n                    \"Helping investors build wealth through strategic real estate acquisitions. Data-driven analysis and proven ROI.\",\n                showSocialLinks: true,\n                showContactButton: true,\n            },\n        },\n        {\n            type: \"listings\",\n            visible: true,\n            config: {\n                type: \"listings\",\n                title: \"Investment Opportunities\",\n                layout: \"list\",\n                filter: \"active\",\n                maxItems: 8,\n                showPrices: true,\n                showStatus: true,\n            },\n        },\n        {\n            type: \"text\",\n            visible: true,\n            config: {\n                type: \"text\",\n                content:\n                    \"ðŸ’° All properties analyzed for cap rate, cash-on-cash return, and appreciation potential.\",\n                align: \"center\",\n                fontSize: \"medium\",\n            },\n        },\n        {\n            type: \"link\",\n            visible: true,\n            config: {\n                type: \"link\",\n                title: \"ðŸ“Š Market Analysis Report\",\n                url: \"#\",\n                style: \"button\",\n                openInNewTab: false,\n            },\n        },\n        {\n            type: \"contact\",\n            visible: true,\n            config: {\n                type: \"contact\",\n                title: \"Discuss Investment Strategy\",\n                fields: [\n                    {\n                        id: \"name\",\n                        type: \"text\",\n                        label: \"Name\",\n                        placeholder: \"Your name\",\n                        required: true,\n                    },\n                    {\n                        id: \"email\",\n                        type: \"email\",\n                        label: \"Email\",\n                        placeholder: \"your@email.com\",\n                        required: true,\n                    },\n                    {\n                        id: \"investment_type\",\n                        type: \"select\",\n                        label: \"Investment Type\",\n                        placeholder: \"Select type\",\n                        required: true,\n                        options: [\n                            \"Single Family Rental\",\n                            \"Multi-Family\",\n                            \"Commercial\",\n                            \"Fix & Flip\",\n                            \"Mixed Use\",\n                        ],\n                    },\n                    {\n                        id: \"budget\",\n                        type: \"select\",\n                        label: \"Investment Budget\",\n                        placeholder: \"Select range\",\n                        required: false,\n                        options: [\n                            \"Under $250K\",\n                            \"$250K - $500K\",\n                            \"$500K - $1M\",\n                            \"Over $1M\",\n                        ],\n                    },\n                ],\n                submitButtonText: \"Get Investment Analysis\",\n                successMessage:\n                    \"I'll prepare a custom market analysis for you.\",\n            },\n        },\n        {\n            type: \"social\",\n            visible: true,\n            config: {\n                type: \"social\",\n                title: \"Connect for Market Insights\",\n                links: [],\n                layout: \"horizontal\",\n                iconSize: \"medium\",\n            },\n        },\n    ],\n};\n\n/**\n * Simple & Clean Template\n * Minimalist design that works for any agent\n */\nconst simpleCleanTemplate: PageTemplate = {\n    id: \"simple-clean\",\n    name: \"Simple & Clean\",\n    description: \"Minimalist layout that works for any real estate professional\",\n    category: \"general\",\n    blocks: [\n        {\n            type: \"bio\",\n            visible: true,\n            config: {\n                type: \"bio\",\n                title: \"Your Name\",\n                subtitle: \"Real Estate Professional\",\n                description:\n                    \"Helping clients buy and sell properties with expertise and dedication.\",\n                showSocialLinks: false,\n                showContactButton: true,\n            },\n        },\n        {\n            type: \"listings\",\n            visible: true,\n            config: {\n                type: \"listings\",\n                title: \"Current Listings\",\n                layout: \"grid\",\n                filter: \"active\",\n                maxItems: 6,\n                showPrices: true,\n                showStatus: false,\n            },\n        },\n        {\n            type: \"contact\",\n            visible: true,\n            config: {\n                type: \"contact\",\n                title: \"Get in Touch\",\n                fields: [\n                    {\n                        id: \"name\",\n                        type: \"text\",\n                        label: \"Name\",\n                        placeholder: \"Your name\",\n                        required: true,\n                    },\n                    {\n                        id: \"email\",\n                        type: \"email\",\n                        label: \"Email\",\n                        placeholder: \"your@email.com\",\n                        required: true,\n                    },\n                    {\n                        id: \"message\",\n                        type: \"textarea\",\n                        label: \"Message\",\n                        placeholder: \"How can I help?\",\n                        required: true,\n                    },\n                ],\n                submitButtonText: \"Send Message\",\n                successMessage: \"Thanks! I'll get back to you soon.\",\n            },\n        },\n    ],\n};\n\n/**\n * All available templates\n */\nexport const pageTemplates: PageTemplate[] = [\n    luxuryAgentTemplate,\n    firstTimeBuyerTemplate,\n    investorFocusedTemplate,\n    simpleCleanTemplate,\n];\n\n/**\n * Get a template by ID\n */\nexport function getTemplateById(id: string): PageTemplate | undefined {\n    return pageTemplates.find((t) => t.id === id);\n}\n\n/**\n * Apply a template to create a new page\n * Assigns proper IDs and order to blocks\n */\nexport function applyTemplate(\n    template: PageTemplate,\n    userId: string,\n    slug: string\n) {\n    const blocks: PageBlock[] = template.blocks.map((block, index) => ({\n        ...block,\n        id: `block_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n        order: index,\n    }));\n\n    return blocks;\n}\n","import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { usePageBuilderStore } from \"@/stores/pageBuilderStore\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogDescription,\n    DialogHeader,\n    DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n    Plus,\n    Eye,\n    Edit,\n    Trash2,\n    Globe,\n    CheckCircle2,\n    ExternalLink,\n    Sparkles,\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { createNewPage } from \"@/lib/pageBuilder\";\nimport { pageTemplates, applyTemplate } from \"@/lib/pageTemplates\";\nimport { useAuthStore } from \"@/stores/useAuthStore\";\nimport type { PageConfig } from \"@/types/pageBuilder\";\n\nexport function PageList() {\n    const navigate = useNavigate();\n    const { user, profile } = useAuthStore();\n    const { setPage, loadUserPages, setAsActivePage } = usePageBuilderStore();\n    const [pages, setPages] = useState<PageConfig[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [activating, setActivating] = useState<string | null>(null);\n    const [showTemplates, setShowTemplates] = useState(false);\n\n    useEffect(() => {\n        loadPages();\n    }, []);\n\n    const loadPages = async () => {\n        try {\n            const userPages = await loadUserPages();\n            setPages(userPages);\n        } catch (error) {\n            console.error(\"Failed to load pages:\", error);\n            toast.error(\"Failed to load pages\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleCreateNew = () => {\n        if (!user || !profile) {\n            toast.error(\"Please log in to create a page\");\n            return;\n        }\n\n        setShowTemplates(true);\n    };\n\n    const handleSelectTemplate = (templateId: string | null) => {\n        if (!user || !profile) {\n            toast.error(\"Please log in to create a page\");\n            return;\n        }\n\n        const newPage = createNewPage(user.id, profile.username || \"my-page\");\n\n        // Apply template if selected\n        if (templateId) {\n            const template = pageTemplates.find((t) => t.id === templateId);\n            if (template) {\n                newPage.blocks = applyTemplate(\n                    template,\n                    user.id,\n                    newPage.slug\n                );\n                toast.success(`Created page from \"${template.name}\" template!`);\n            }\n        }\n\n        setPage(newPage);\n        setShowTemplates(false);\n        navigate(\"/dashboard/page-builder\");\n    };\n\n    const handleEdit = (page: PageConfig) => {\n        setPage(page);\n        navigate(\"/dashboard/page-builder\");\n    };\n\n    const handleSetActive = async (pageId: string) => {\n        setActivating(pageId);\n        try {\n            await setAsActivePage(pageId);\n            await loadPages(); // Reload to show updated active status\n        } catch (error) {\n            console.error(\"Failed to set active page:\", error);\n        } finally {\n            setActivating(null);\n        }\n    };\n\n    const handleDelete = async (pageId: string) => {\n        if (!confirm(\"Are you sure you want to delete this page?\")) return;\n\n        try {\n            const { error } = await supabase\n                .from(\"custom_pages\")\n                .delete()\n                .eq(\"id\", pageId);\n\n            if (error) throw error;\n\n            toast.success(\"Page deleted successfully\");\n            await loadPages();\n        } catch (error) {\n            console.error(\"Failed to delete page:\", error);\n            toast.error(\"Failed to delete page\");\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center py-12\">\n                <p className=\"text-muted-foreground\">Loading pages...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-2xl font-bold\">Your Pages</h2>\n                    <p className=\"text-muted-foreground\">\n                        Create custom link-in-bio pages\n                    </p>\n                </div>\n                <Button onClick={handleCreateNew} className=\"gap-2\">\n                    <Plus className=\"h-4 w-4\" />\n                    Create New Page\n                </Button>\n            </div>\n\n            {pages.length === 0 ? (\n                <Card className=\"p-12 text-center\">\n                    <div className=\"max-w-md mx-auto\">\n                        <Globe className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                        <h3 className=\"text-lg font-semibold mb-2\">\n                            No pages yet\n                        </h3>\n                        <p className=\"text-muted-foreground mb-6\">\n                            Create your first custom page to get started\n                        </p>\n                        <Button onClick={handleCreateNew} className=\"gap-2\">\n                            <Plus className=\"h-4 w-4\" />\n                            Create Your First Page\n                        </Button>\n                    </div>\n                </Card>\n            ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                    {pages.map((page) => {\n                        const isActive =\n                            (page as any).is_active || false;\n                        return (\n                            <Card key={page.id} className=\"p-6 space-y-4\">\n                                <div className=\"space-y-2\">\n                                    <div className=\"flex items-start justify-between\">\n                                        <div className=\"flex-1\">\n                                            <h3 className=\"font-semibold text-lg truncate\">\n                                                {page.title}\n                                            </h3>\n                                            <p className=\"text-sm text-muted-foreground truncate\">\n                                                /{page.slug}\n                                            </p>\n                                        </div>\n                                        {isActive && (\n                                            <Badge\n                                                variant=\"default\"\n                                                className=\"gap-1\"\n                                            >\n                                                <CheckCircle2 className=\"h-3 w-3\" />\n                                                Active\n                                            </Badge>\n                                        )}\n                                    </div>\n\n                                    <div className=\"flex gap-2\">\n                                        <Badge\n                                            variant={\n                                                page.published\n                                                    ? \"default\"\n                                                    : \"secondary\"\n                                            }\n                                        >\n                                            {page.published\n                                                ? \"Published\"\n                                                : \"Draft\"}\n                                        </Badge>\n                                        <Badge variant=\"outline\">\n                                            {page.blocks.length} blocks\n                                        </Badge>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex flex-col gap-2\">\n                                    <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => handleEdit(page)}\n                                        className=\"gap-2 w-full\"\n                                    >\n                                        <Edit className=\"h-4 w-4\" />\n                                        Edit\n                                    </Button>\n\n                                    {page.published && (\n                                        <>\n                                            <Button\n                                                variant=\"outline\"\n                                                size=\"sm\"\n                                                asChild\n                                                className=\"gap-2 w-full\"\n                                            >\n                                                <a\n                                                    href={`/p/${page.slug}`}\n                                                    target=\"_blank\"\n                                                    rel=\"noopener noreferrer\"\n                                                >\n                                                    <Eye className=\"h-4 w-4\" />\n                                                    Preview\n                                                    <ExternalLink className=\"h-3 w-3 ml-auto\" />\n                                                </a>\n                                            </Button>\n\n                                            {!isActive && (\n                                                <Button\n                                                    variant=\"default\"\n                                                    size=\"sm\"\n                                                    onClick={() =>\n                                                        handleSetActive(page.id)\n                                                    }\n                                                    disabled={\n                                                        activating === page.id\n                                                    }\n                                                    className=\"gap-2 w-full\"\n                                                >\n                                                    <CheckCircle2 className=\"h-4 w-4\" />\n                                                    {activating === page.id\n                                                        ? \"Setting...\"\n                                                        : \"Set as Active\"}\n                                                </Button>\n                                            )}\n                                        </>\n                                    )}\n\n                                    <Button\n                                        variant=\"outline\"\n                                        size=\"sm\"\n                                        onClick={() => handleDelete(page.id)}\n                                        className=\"gap-2 w-full text-destructive hover:text-destructive\"\n                                    >\n                                        <Trash2 className=\"h-4 w-4\" />\n                                        Delete\n                                    </Button>\n                                </div>\n\n                                {page.description && (\n                                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                                        {page.description}\n                                    </p>\n                                )}\n                            </Card>\n                        );\n                    })}\n                </div>\n            )}\n\n            {/* Template Selector Dialog */}\n            <Dialog open={showTemplates} onOpenChange={setShowTemplates}>\n                <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n                    <DialogHeader>\n                        <DialogTitle>Choose a Template</DialogTitle>\n                        <DialogDescription>\n                            Start with a pre-built template or create a blank page\n                        </DialogDescription>\n                    </DialogHeader>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4\">\n                        {/* Blank Page Option */}\n                        <Card\n                            className=\"p-6 cursor-pointer hover:border-primary transition-colors\"\n                            onClick={() => handleSelectTemplate(null)}\n                        >\n                            <div className=\"flex flex-col h-full\">\n                                <div className=\"flex items-center gap-3 mb-3\">\n                                    <div className=\"p-2 bg-gray-100 rounded\">\n                                        <Plus className=\"h-6 w-6\" />\n                                    </div>\n                                    <div>\n                                        <h3 className=\"font-semibold\">\n                                            Blank Page\n                                        </h3>\n                                        <p className=\"text-sm text-muted-foreground\">\n                                            Start from scratch\n                                        </p>\n                                    </div>\n                                </div>\n                                <p className=\"text-sm text-muted-foreground flex-1\">\n                                    Create a completely custom page by adding\n                                    blocks one at a time.\n                                </p>\n                            </div>\n                        </Card>\n\n                        {/* Template Options */}\n                        {pageTemplates.map((template) => (\n                            <Card\n                                key={template.id}\n                                className=\"p-6 cursor-pointer hover:border-primary transition-colors\"\n                                onClick={() =>\n                                    handleSelectTemplate(template.id)\n                                }\n                            >\n                                <div className=\"flex flex-col h-full\">\n                                    <div className=\"flex items-center gap-3 mb-3\">\n                                        <div className=\"p-2 bg-primary/10 rounded\">\n                                            <Sparkles className=\"h-6 w-6 text-primary\" />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"font-semibold\">\n                                                {template.name}\n                                            </h3>\n                                            <Badge variant=\"outline\" className=\"mt-1\">\n                                                {template.blocks.length} blocks\n                                            </Badge>\n                                        </div>\n                                    </div>\n                                    <p className=\"text-sm text-muted-foreground flex-1\">\n                                        {template.description}\n                                    </p>\n                                </div>\n                            </Card>\n                        ))}\n                    </div>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n","/**\n * Block Settings\n * Settings panel for configuring page builder blocks\n */\n\nimport { PageBlock, BlockConfig } from \"@/types/pageBuilder\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, Trash2 } from \"lucide-react\";\n\ninterface BlockSettingsProps {\n    block: PageBlock;\n    onUpdate: (config: Partial<BlockConfig>) => void;\n}\n\nexport function BlockSettings({ block, onUpdate }: BlockSettingsProps) {\n    const config = block.config;\n\n    // Render settings based on block type\n    switch (block.type) {\n        case \"bio\":\n            return <BioSettings config={config as any} onUpdate={onUpdate} />;\n        case \"link\":\n            return <LinkSettings config={config as any} onUpdate={onUpdate} />;\n        case \"listings\":\n            return <ListingsSettings config={config as any} onUpdate={onUpdate} />;\n        case \"contact\":\n            return <ContactSettings config={config as any} onUpdate={onUpdate} />;\n        case \"social\":\n            return <SocialSettings config={config as any} onUpdate={onUpdate} />;\n        case \"video\":\n            return <VideoSettings config={config as any} onUpdate={onUpdate} />;\n        case \"testimonial\":\n            return <TestimonialSettings config={config as any} onUpdate={onUpdate} />;\n        case \"spacer\":\n            return <SpacerSettings config={config as any} onUpdate={onUpdate} />;\n        case \"image\":\n            return <ImageSettings config={config as any} onUpdate={onUpdate} />;\n        case \"text\":\n            return <TextSettings config={config as any} onUpdate={onUpdate} />;\n        default:\n            return (\n                <div className=\"text-sm text-muted-foreground\">\n                    No settings available for this block type\n                </div>\n            );\n    }\n}\n\n// Bio Block Settings\nfunction BioSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"bio-title\">Name</Label>\n                <Input\n                    id=\"bio-title\"\n                    value={config.title}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"Your Name\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"bio-subtitle\">Job Title</Label>\n                <Input\n                    id=\"bio-subtitle\"\n                    value={config.subtitle || \"\"}\n                    onChange={(e) => onUpdate({ subtitle: e.target.value })}\n                    placeholder=\"Real Estate Professional\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"bio-description\">Bio</Label>\n                <Textarea\n                    id=\"bio-description\"\n                    value={config.description}\n                    onChange={(e) => onUpdate({ description: e.target.value })}\n                    placeholder=\"Tell visitors about yourself...\"\n                    rows={4}\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"bio-avatar\">Avatar URL</Label>\n                <Input\n                    id=\"bio-avatar\"\n                    value={config.avatarUrl || \"\"}\n                    onChange={(e) => onUpdate({ avatarUrl: e.target.value })}\n                    placeholder=\"https://example.com/avatar.jpg\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                    Leave empty to use your profile photo\n                </p>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"bio-social\">Show Social Links</Label>\n                <Switch\n                    id=\"bio-social\"\n                    checked={config.showSocialLinks}\n                    onCheckedChange={(checked) =>\n                        onUpdate({ showSocialLinks: checked })\n                    }\n                />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"bio-contact\">Show Contact Button</Label>\n                <Switch\n                    id=\"bio-contact\"\n                    checked={config.showContactButton}\n                    onCheckedChange={(checked) =>\n                        onUpdate({ showContactButton: checked })\n                    }\n                />\n            </div>\n        </div>\n    );\n}\n\n// Link Block Settings\nfunction LinkSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"link-title\">Button Text</Label>\n                <Input\n                    id=\"link-title\"\n                    value={config.title}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"Click Here\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"link-url\">URL</Label>\n                <Input\n                    id=\"link-url\"\n                    type=\"url\"\n                    value={config.url}\n                    onChange={(e) => onUpdate({ url: e.target.value })}\n                    placeholder=\"https://example.com\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"link-style\">Style</Label>\n                <Select\n                    value={config.style}\n                    onValueChange={(value) => onUpdate({ style: value })}\n                >\n                    <SelectTrigger id=\"link-style\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"button\">Button</SelectItem>\n                        <SelectItem value=\"card\">Card</SelectItem>\n                        <SelectItem value=\"minimal\">Minimal</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"link-newtab\">Open in New Tab</Label>\n                <Switch\n                    id=\"link-newtab\"\n                    checked={config.openInNewTab}\n                    onCheckedChange={(checked) =>\n                        onUpdate({ openInNewTab: checked })\n                    }\n                />\n            </div>\n        </div>\n    );\n}\n\n// Listings Block Settings\nfunction ListingsSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"listings-title\">Section Title</Label>\n                <Input\n                    id=\"listings-title\"\n                    value={config.title}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"Featured Properties\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"listings-layout\">Layout</Label>\n                <Select\n                    value={config.layout}\n                    onValueChange={(value) => onUpdate({ layout: value })}\n                >\n                    <SelectTrigger id=\"listings-layout\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"grid\">Grid</SelectItem>\n                        <SelectItem value=\"list\">List</SelectItem>\n                        <SelectItem value=\"carousel\">Carousel</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"listings-filter\">Show</Label>\n                <Select\n                    value={config.filter}\n                    onValueChange={(value) => onUpdate({ filter: value })}\n                >\n                    <SelectTrigger id=\"listings-filter\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"all\">All Listings</SelectItem>\n                        <SelectItem value=\"active\">Active Only</SelectItem>\n                        <SelectItem value=\"featured\">Featured Only</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"listings-max\">Max Items</Label>\n                <Input\n                    id=\"listings-max\"\n                    type=\"number\"\n                    min=\"1\"\n                    max=\"20\"\n                    value={config.maxItems || 6}\n                    onChange={(e) =>\n                        onUpdate({ maxItems: parseInt(e.target.value) || 6 })\n                    }\n                />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"listings-prices\">Show Prices</Label>\n                <Switch\n                    id=\"listings-prices\"\n                    checked={config.showPrices}\n                    onCheckedChange={(checked) =>\n                        onUpdate({ showPrices: checked })\n                    }\n                />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"listings-status\">Show Status</Label>\n                <Switch\n                    id=\"listings-status\"\n                    checked={config.showStatus}\n                    onCheckedChange={(checked) =>\n                        onUpdate({ showStatus: checked })\n                    }\n                />\n            </div>\n        </div>\n    );\n}\n\n// Contact Block Settings\nfunction ContactSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"contact-title\">Form Title</Label>\n                <Input\n                    id=\"contact-title\"\n                    value={config.title}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"Get In Touch\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"contact-button\">Submit Button Text</Label>\n                <Input\n                    id=\"contact-button\"\n                    value={config.submitButtonText}\n                    onChange={(e) =>\n                        onUpdate({ submitButtonText: e.target.value })\n                    }\n                    placeholder=\"Send Message\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"contact-success\">Success Message</Label>\n                <Textarea\n                    id=\"contact-success\"\n                    value={config.successMessage}\n                    onChange={(e) =>\n                        onUpdate({ successMessage: e.target.value })\n                    }\n                    placeholder=\"Thank you! I'll get back to you soon.\"\n                    rows={2}\n                />\n            </div>\n\n            <div className=\"pt-2\">\n                <p className=\"text-sm text-muted-foreground\">\n                    Form fields (name, email, message) are automatically included\n                </p>\n            </div>\n        </div>\n    );\n}\n\n// Social Block Settings\nfunction SocialSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"social-title\">Section Title (Optional)</Label>\n                <Input\n                    id=\"social-title\"\n                    value={config.title || \"\"}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"Follow Me\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"social-layout\">Layout</Label>\n                <Select\n                    value={config.layout}\n                    onValueChange={(value) => onUpdate({ layout: value })}\n                >\n                    <SelectTrigger id=\"social-layout\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"horizontal\">Horizontal</SelectItem>\n                        <SelectItem value=\"vertical\">Vertical</SelectItem>\n                        <SelectItem value=\"grid\">Grid</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"social-size\">Icon Size</Label>\n                <Select\n                    value={config.iconSize}\n                    onValueChange={(value) => onUpdate({ iconSize: value })}\n                >\n                    <SelectTrigger id=\"social-size\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"small\">Small</SelectItem>\n                        <SelectItem value=\"medium\">Medium</SelectItem>\n                        <SelectItem value=\"large\">Large</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"pt-2\">\n                <p className=\"text-sm text-muted-foreground\">\n                    Social links are pulled from your profile settings\n                </p>\n            </div>\n        </div>\n    );\n}\n\n// Video Block Settings\nfunction VideoSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"video-title\">Section Title (Optional)</Label>\n                <Input\n                    id=\"video-title\"\n                    value={config.title || \"\"}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"Watch My Introduction\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"video-url\">Video URL</Label>\n                <Input\n                    id=\"video-url\"\n                    type=\"url\"\n                    value={config.videoUrl}\n                    onChange={(e) => onUpdate({ videoUrl: e.target.value })}\n                    placeholder=\"https://youtube.com/watch?v=...\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                    Supports YouTube, Vimeo, and direct video URLs\n                </p>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"video-autoplay\">Autoplay</Label>\n                <Switch\n                    id=\"video-autoplay\"\n                    checked={config.autoplay}\n                    onCheckedChange={(checked) =>\n                        onUpdate({ autoplay: checked })\n                    }\n                />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n                <Label htmlFor=\"video-muted\">Start Muted</Label>\n                <Switch\n                    id=\"video-muted\"\n                    checked={config.muted}\n                    onCheckedChange={(checked) => onUpdate({ muted: checked })}\n                />\n            </div>\n        </div>\n    );\n}\n\n// Testimonial Block Settings\nfunction TestimonialSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"testimonial-title\">Section Title (Optional)</Label>\n                <Input\n                    id=\"testimonial-title\"\n                    value={config.title || \"\"}\n                    onChange={(e) => onUpdate({ title: e.target.value })}\n                    placeholder=\"What Clients Say\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"testimonial-layout\">Layout</Label>\n                <Select\n                    value={config.layout}\n                    onValueChange={(value) => onUpdate({ layout: value })}\n                >\n                    <SelectTrigger id=\"testimonial-layout\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"slider\">Slider</SelectItem>\n                        <SelectItem value=\"grid\">Grid</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"pt-2\">\n                <p className=\"text-sm text-muted-foreground\">\n                    Testimonials are pulled from your testimonials library\n                </p>\n            </div>\n        </div>\n    );\n}\n\n// Spacer Block Settings\nfunction SpacerSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"spacer-height\">Height (pixels)</Label>\n                <div className=\"flex items-center gap-4\">\n                    <input\n                        id=\"spacer-height\"\n                        type=\"range\"\n                        min={10}\n                        max={200}\n                        step={10}\n                        value={config.height}\n                        onChange={(e) =>\n                            onUpdate({ height: parseInt(e.target.value) })\n                        }\n                        className=\"flex-1\"\n                    />\n                    <span className=\"text-sm font-medium w-12 text-right\">\n                        {config.height}px\n                    </span>\n                </div>\n            </div>\n\n            <div className=\"pt-2\">\n                <p className=\"text-sm text-muted-foreground\">\n                    Use spacers to add vertical spacing between blocks\n                </p>\n            </div>\n        </div>\n    );\n}\n\n// Image Block Settings\nfunction ImageSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"image-url\">Image URL</Label>\n                <Input\n                    id=\"image-url\"\n                    type=\"url\"\n                    value={config.imageUrl}\n                    onChange={(e) => onUpdate({ imageUrl: e.target.value })}\n                    placeholder=\"https://example.com/image.jpg\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"image-alt\">Alt Text</Label>\n                <Input\n                    id=\"image-alt\"\n                    value={config.alt}\n                    onChange={(e) => onUpdate({ alt: e.target.value })}\n                    placeholder=\"Describe the image\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"image-caption\">Caption (Optional)</Label>\n                <Input\n                    id=\"image-caption\"\n                    value={config.caption || \"\"}\n                    onChange={(e) => onUpdate({ caption: e.target.value })}\n                    placeholder=\"Image caption\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"image-link\">Link (Optional)</Label>\n                <Input\n                    id=\"image-link\"\n                    type=\"url\"\n                    value={config.link || \"\"}\n                    onChange={(e) => onUpdate({ link: e.target.value })}\n                    placeholder=\"https://example.com\"\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"image-size\">Size</Label>\n                <Select\n                    value={config.size}\n                    onValueChange={(value) => onUpdate({ size: value })}\n                >\n                    <SelectTrigger id=\"image-size\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"small\">Small</SelectItem>\n                        <SelectItem value=\"medium\">Medium</SelectItem>\n                        <SelectItem value=\"large\">Large</SelectItem>\n                        <SelectItem value=\"full\">Full Width</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n        </div>\n    );\n}\n\n// Text Block Settings\nfunction TextSettings({ config, onUpdate }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"text-content\">Text Content</Label>\n                <Textarea\n                    id=\"text-content\"\n                    value={config.content}\n                    onChange={(e) => onUpdate({ content: e.target.value })}\n                    placeholder=\"Enter your text here...\"\n                    rows={6}\n                />\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"text-align\">Text Alignment</Label>\n                <Select\n                    value={config.align}\n                    onValueChange={(value) => onUpdate({ align: value })}\n                >\n                    <SelectTrigger id=\"text-align\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"left\">Left</SelectItem>\n                        <SelectItem value=\"center\">Center</SelectItem>\n                        <SelectItem value=\"right\">Right</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"text-size\">Font Size</Label>\n                <Select\n                    value={config.fontSize}\n                    onValueChange={(value) => onUpdate({ fontSize: value })}\n                >\n                    <SelectTrigger id=\"text-size\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"small\">Small</SelectItem>\n                        <SelectItem value=\"medium\">Medium</SelectItem>\n                        <SelectItem value=\"large\">Large</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n        </div>\n    );\n}\n","/**\n * Page Builder Editor\n * Main interface for building and editing link-in-bio pages\n */\n\nimport { useEffect, useState } from \"react\";\nimport { usePageBuilderStore } from \"@/stores/pageBuilderStore\";\nimport { createNewPage, getBlockTemplates } from \"@/lib/pageBuilder\";\nimport { useAuthStore } from \"@/stores/useAuthStore\";\nimport { PageList } from \"@/components/pageBuilder/PageList\";\nimport { BlockRenderer } from \"@/components/pageBuilder/BlockRenderer\";\nimport { BlockSettings } from \"@/components/pageBuilder/BlockSettings\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n    Undo,\n    Redo,\n    Eye,\n    Save,\n    Globe,\n    Plus,\n    Settings,\n    Trash2,\n    Copy,\n    EyeOff,\n    GripVertical,\n    ArrowLeft,\n    Monitor,\n    Smartphone,\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { getThemedStyles, preloadThemeFonts } from \"@/lib/themeUtils\";\n\nexport default function PageBuilderEditor() {\n    const { user, profile } = useAuthStore();\n    const [showPageList, setShowPageList] = useState(true);\n    const [lastSaved, setLastSaved] = useState<Date | null>(null);\n    const [isMobilePreview, setIsMobilePreview] = useState(false);\n    const [draggedBlockIndex, setDraggedBlockIndex] = useState<number | null>(null);\n    const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\n    const {\n        page,\n        selectedBlockId,\n        isPreviewMode,\n        isSaving,\n        canUndo,\n        canRedo,\n        setPage,\n        selectBlock,\n        addBlockToPage,\n        removeBlockFromPage,\n        updateBlockConfig,\n        reorderPageBlocks,\n        duplicatePageBlock,\n        toggleBlockVisible,\n        undo,\n        redo,\n        togglePreviewMode,\n        savePage,\n        publishPage,\n        updatePageMeta,\n    } = usePageBuilderStore();\n\n    // Show page list if no page is loaded\n    useEffect(() => {\n        setShowPageList(!page);\n    }, [page]);\n\n    // Preload theme fonts when page or theme changes\n    useEffect(() => {\n        if (page?.theme) {\n            preloadThemeFonts(page.theme);\n        }\n    }, [page?.theme]);\n\n    // Auto-save functionality - saves 3 seconds after last change\n    useEffect(() => {\n        if (!page || isSaving) return;\n\n        const autoSaveTimer = setTimeout(async () => {\n            try {\n                await savePage();\n                const savedTime = new Date();\n                setLastSaved(savedTime);\n                // Silent save - no toast notification to avoid spam\n                console.log(\"Auto-saved at\", savedTime.toLocaleTimeString());\n            } catch (error) {\n                console.error(\"Auto-save failed:\", error);\n                // Only show error if auto-save fails\n                toast.error(\"Auto-save failed - please save manually\");\n            }\n        }, 3000); // 3 second debounce\n\n        return () => clearTimeout(autoSaveTimer);\n    }, [page, isSaving, savePage]);\n\n    const handleSave = async () => {\n        try {\n            await savePage();\n            setLastSaved(new Date());\n            toast.success(\"Page saved successfully!\");\n        } catch (error) {\n            toast.error(\"Failed to save page\");\n        }\n    };\n\n    const handlePublish = async () => {\n        try {\n            await publishPage();\n            toast.success(\"Page published successfully!\");\n        } catch (error) {\n            toast.error(\"Failed to publish page\");\n        }\n    };\n\n    // Drag and drop handlers\n    const handleDragStart = (e: React.DragEvent, index: number) => {\n        setDraggedBlockIndex(index);\n        e.dataTransfer.effectAllowed = \"move\";\n        e.dataTransfer.setData(\"text/html\", e.currentTarget.innerHTML);\n\n        // Add a slight opacity to the dragged element\n        if (e.currentTarget instanceof HTMLElement) {\n            e.currentTarget.style.opacity = \"0.5\";\n        }\n    };\n\n    const handleDragEnd = (e: React.DragEvent) => {\n        setDraggedBlockIndex(null);\n        setDragOverIndex(null);\n\n        // Reset opacity\n        if (e.currentTarget instanceof HTMLElement) {\n            e.currentTarget.style.opacity = \"1\";\n        }\n    };\n\n    const handleDragOver = (e: React.DragEvent, index: number) => {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = \"move\";\n\n        if (draggedBlockIndex !== null && draggedBlockIndex !== index) {\n            setDragOverIndex(index);\n        }\n    };\n\n    const handleDragLeave = () => {\n        setDragOverIndex(null);\n    };\n\n    const handleDrop = (e: React.DragEvent, dropIndex: number) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (draggedBlockIndex !== null && draggedBlockIndex !== dropIndex) {\n            reorderPageBlocks(draggedBlockIndex, dropIndex);\n            toast.success(\"Block reordered\");\n        }\n\n        setDraggedBlockIndex(null);\n        setDragOverIndex(null);\n    };\n\n    const selectedBlock = page?.blocks.find((b) => b.id === selectedBlockId);\n\n    const blockTemplates = getBlockTemplates();\n\n    // Show page list if no page is loaded\n    if (showPageList || !page) {\n        return (\n            <div className=\"container mx-auto py-8\">\n                <PageList />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"flex h-screen bg-gray-50\">\n            {/* Left Sidebar - Block Library */}\n            {!isPreviewMode && (\n                <div className=\"w-64 bg-white border-r flex flex-col\">\n                    <div className=\"p-4 border-b\">\n                        <h2 className=\"font-semibold text-lg\">Add Blocks</h2>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-2\">\n                        {blockTemplates.map((template) => (\n                            <button\n                                key={template.type}\n                                onClick={() => addBlockToPage(template.type)}\n                                className=\"w-full p-3 text-left rounded-lg border hover:border-primary hover:bg-primary/5 transition-colors group\"\n                            >\n                                <div className=\"flex items-center gap-3\">\n                                    <Plus className=\"w-5 h-5 text-gray-400 group-hover:text-primary\" />\n                                    <div>\n                                        <p className=\"font-medium text-sm\">\n                                            {template.name}\n                                        </p>\n                                        <p className=\"text-xs text-gray-500\">\n                                            {template.description}\n                                        </p>\n                                    </div>\n                                </div>\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            )}\n\n            {/* Main Canvas */}\n            <div className=\"flex-1 flex flex-col\">\n                {/* Top Toolbar */}\n                <div className=\"bg-white border-b p-4 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => {\n                                setPage(null);\n                                setShowPageList(true);\n                            }}\n                        >\n                            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                            Back to Pages\n                        </Button>\n\n                        <div className=\"w-px h-6 bg-gray-300 mx-2\" />\n\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={undo}\n                            disabled={!canUndo()}\n                        >\n                            <Undo className=\"w-4 h-4\" />\n                        </Button>\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={redo}\n                            disabled={!canRedo()}\n                        >\n                            <Redo className=\"w-4 h-4\" />\n                        </Button>\n\n                        <div className=\"w-px h-6 bg-gray-300 mx-2\" />\n\n                        <Input\n                            type=\"text\"\n                            value={page.title}\n                            onChange={(e) =>\n                                updatePageMeta({ title: e.target.value })\n                            }\n                            className=\"w-64\"\n                            placeholder=\"Page Title\"\n                        />\n\n                        <Badge\n                            variant={page.published ? \"default\" : \"secondary\"}\n                        >\n                            {page.published ? \"Published\" : \"Draft\"}\n                        </Badge>\n                    </div>\n\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"flex items-center gap-2\">\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={togglePreviewMode}\n                            >\n                                {isPreviewMode ? (\n                                    <>\n                                        <Settings className=\"w-4 h-4 mr-2\" />\n                                        Edit\n                                    </>\n                                ) : (\n                                    <>\n                                        <Eye className=\"w-4 h-4 mr-2\" />\n                                        Preview\n                                    </>\n                                )}\n                            </Button>\n\n                            {/* Mobile/Desktop Toggle */}\n                            <div className=\"flex border rounded-md\">\n                                <Button\n                                    variant={!isMobilePreview ? \"default\" : \"ghost\"}\n                                    size=\"sm\"\n                                    onClick={() => setIsMobilePreview(false)}\n                                    className=\"rounded-r-none\"\n                                    title=\"Desktop Preview\"\n                                >\n                                    <Monitor className=\"w-4 h-4\" />\n                                </Button>\n                                <Button\n                                    variant={isMobilePreview ? \"default\" : \"ghost\"}\n                                    size=\"sm\"\n                                    onClick={() => setIsMobilePreview(true)}\n                                    className=\"rounded-l-none\"\n                                    title=\"Mobile Preview\"\n                                >\n                                    <Smartphone className=\"w-4 h-4\" />\n                                </Button>\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-2\">\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={handleSave}\n                                disabled={isSaving}\n                            >\n                                <Save className=\"w-4 h-4 mr-2\" />\n                                {isSaving ? \"Saving...\" : \"Save\"}\n                            </Button>\n                            {lastSaved && !isSaving && (\n                                <span className=\"text-xs text-gray-500\">\n                                    Saved {lastSaved.toLocaleTimeString()}\n                                </span>\n                            )}\n                        </div>\n\n                        <Button\n                            size=\"sm\"\n                            onClick={handlePublish}\n                            disabled={isSaving}\n                        >\n                            <Globe className=\"w-4 h-4 mr-2\" />\n                            Publish\n                        </Button>\n                    </div>\n                </div>\n\n                {/* Canvas Area */}\n                <div className=\"flex-1 overflow-y-auto p-8\">\n                    <div\n                        className=\"mx-auto rounded-lg shadow-lg min-h-full transition-all duration-300\"\n                        style={{\n                            ...getThemedStyles(page.theme),\n                            backgroundColor: page.theme.colors.background,\n                            color: page.theme.colors.text,\n                            fontFamily: `'${page.theme.fonts.body}', sans-serif`,\n                            maxWidth: isMobilePreview ? \"375px\" : \"672px\", // Mobile: 375px, Desktop: 672px (2xl)\n                        }}\n                    >\n                        <div className=\"p-8\" style={{\n                            display: \"flex\",\n                            flexDirection: \"column\",\n                            gap: page.theme.spacing === \"compact\" ? \"1rem\" :\n                                 page.theme.spacing === \"spacious\" ? \"3rem\" : \"2rem\"\n                        }}>\n                            {page.blocks.length === 0 ? (\n                                <div className=\"text-center py-20 text-gray-500\">\n                                    <Plus className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" />\n                                    <p className=\"font-medium\">\n                                        Your page is empty\n                                    </p>\n                                    <p className=\"text-sm mt-1\">\n                                        Add blocks from the left sidebar to get\n                                        started\n                                    </p>\n                                </div>\n                            ) : (\n                                page.blocks.map((block, index) => (\n                                    <div\n                                        key={block.id}\n                                        draggable={!isPreviewMode}\n                                        onDragStart={(e) => handleDragStart(e, index)}\n                                        onDragEnd={handleDragEnd}\n                                        onDragOver={(e) => handleDragOver(e, index)}\n                                        onDragLeave={handleDragLeave}\n                                        onDrop={(e) => handleDrop(e, index)}\n                                        className={`relative group transition-all ${\n                                            draggedBlockIndex === index\n                                                ? \"opacity-50\"\n                                                : \"\"\n                                        } ${\n                                            dragOverIndex === index &&\n                                            draggedBlockIndex !== index\n                                                ? \"border-t-4 border-primary pt-4\"\n                                                : \"\"\n                                        }`}\n                                    >\n                                        {/* Block Actions (Edit Mode Only) */}\n                                        {!isPreviewMode && (\n                                            <div className=\"absolute -left-12 top-0 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col gap-1\">\n                                                <div\n                                                    className=\"p-1 bg-white border rounded hover:bg-gray-50 cursor-grab active:cursor-grabbing\"\n                                                    title=\"Drag to reorder\"\n                                                >\n                                                    <GripVertical className=\"w-4 h-4\" />\n                                                </div>\n                                                <button\n                                                    onClick={() =>\n                                                        duplicatePageBlock(\n                                                            block.id\n                                                        )\n                                                    }\n                                                    className=\"p-1 bg-white border rounded hover:bg-gray-50\"\n                                                    title=\"Duplicate\"\n                                                >\n                                                    <Copy className=\"w-4 h-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={() =>\n                                                        toggleBlockVisible(\n                                                            block.id\n                                                        )\n                                                    }\n                                                    className=\"p-1 bg-white border rounded hover:bg-gray-50\"\n                                                    title={\n                                                        block.visible\n                                                            ? \"Hide\"\n                                                            : \"Show\"\n                                                    }\n                                                >\n                                                    {block.visible ? (\n                                                        <Eye className=\"w-4 h-4\" />\n                                                    ) : (\n                                                        <EyeOff className=\"w-4 h-4\" />\n                                                    )}\n                                                </button>\n                                                <button\n                                                    onClick={() =>\n                                                        removeBlockFromPage(\n                                                            block.id\n                                                        )\n                                                    }\n                                                    className=\"p-1 bg-white border rounded hover:bg-red-50 text-red-600\"\n                                                    title=\"Delete\"\n                                                >\n                                                    <Trash2 className=\"w-4 h-4\" />\n                                                </button>\n                                            </div>\n                                        )}\n\n                                        {/* Block Content */}\n                                        <BlockRenderer\n                                            block={block}\n                                            isEditing={!isPreviewMode}\n                                            isSelected={\n                                                selectedBlockId === block.id\n                                            }\n                                            onSelect={() =>\n                                                selectBlock(block.id)\n                                            }\n                                            userId={page.userId}\n                                        />\n                                    </div>\n                                ))\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Right Sidebar - Block Settings */}\n            {!isPreviewMode && selectedBlock && (\n                <div className=\"w-80 bg-white border-l flex flex-col\">\n                    <div className=\"p-4 border-b\">\n                        <h2 className=\"font-semibold text-lg\">\n                            Block Settings\n                        </h2>\n                        <p className=\"text-sm text-gray-600\">\n                            {selectedBlock.type}\n                        </p>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto p-4\">\n                        <Tabs defaultValue=\"content\" className=\"w-full\">\n                            <TabsList className=\"grid w-full grid-cols-2\">\n                                <TabsTrigger value=\"content\">\n                                    Content\n                                </TabsTrigger>\n                                <TabsTrigger value=\"style\">Style</TabsTrigger>\n                            </TabsList>\n\n                            <TabsContent\n                                value=\"content\"\n                                className=\"space-y-4 mt-4\"\n                            >\n                                <BlockSettings\n                                    block={selectedBlock}\n                                    onUpdate={(config) =>\n                                        updateBlockConfig(selectedBlock.id, config)\n                                    }\n                                />\n                            </TabsContent>\n\n                            <TabsContent\n                                value=\"style\"\n                                className=\"space-y-4 mt-4\"\n                            >\n                                <div className=\"p-4 bg-gray-50 rounded text-sm text-gray-600\">\n                                    Style settings coming soon\n                                </div>\n                            </TabsContent>\n                        </Tabs>\n                    </div>\n\n                    <div className=\"p-4 border-t\">\n                        <Button\n                            variant=\"outline\"\n                            className=\"w-full\"\n                            onClick={() =>\n                                removeBlockFromPage(selectedBlock.id)\n                            }\n                        >\n                            <Trash2 className=\"w-4 h-4 mr-2\" />\n                            Delete Block\n                        </Button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":["Redo","createLucideIcon","Undo","fetchUserProfile","userId","data","error","supabase","fetchUserLinks","detectSocialPlatform","url","urlLower","convertToSocialLinks","links","link","platform","autoPopulateBioBlock","defaultConfig","profile","autoPopulateSocialBlock","socialLinks","autoPopulateListingsBlock","autoPopulateContactBlock","autoPopulateBlockConfig","PageBuilderEngine","slug","page","blockType","position","template","blockConfig","newBlock","updatedBlocks","block","index","blockId","config","sourceIndex","destinationIndex","movedBlock","b","duplicatedBlock","type","errors","blockIds","uniqueIds","pageBuilder","createNewPage","addBlock","removeBlock","updateBlock","reorderBlocks","toggleBlockVisibility","duplicateBlock","getBlockTemplates","usePageBuilderStore","create","set","get","pageId","pageConfig","toast","user","d","isDragging","history","historyIndex","newPage","newHistory","destIndex","meta","state","pageData","existing","updatePageMeta","savePage","luxuryAgentTemplate","firstTimeBuyerTemplate","investorFocusedTemplate","simpleCleanTemplate","pageTemplates","applyTemplate","PageList","navigate","useNavigate","useAuthStore","setPage","loadUserPages","setAsActivePage","pages","setPages","useState","loading","setLoading","activating","setActivating","showTemplates","setShowTemplates","useEffect","loadPages","userPages","handleCreateNew","handleSelectTemplate","templateId","t","handleEdit","handleSetActive","handleDelete","jsx","jsxs","Button","Plus","Card","Globe","isActive","Badge","CheckCircle2","Edit","Fragment","Eye","ExternalLink","Trash2","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Sparkles","BlockSettings","onUpdate","BioSettings","LinkSettings","ListingsSettings","ContactSettings","SocialSettings","VideoSettings","TestimonialSettings","SpacerSettings","ImageSettings","TextSettings","Label","Input","e","Textarea","Switch","checked","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","PageBuilderEditor","showPageList","setShowPageList","lastSaved","setLastSaved","isMobilePreview","setIsMobilePreview","draggedBlockIndex","setDraggedBlockIndex","dragOverIndex","setDragOverIndex","selectedBlockId","isPreviewMode","isSaving","canUndo","canRedo","selectBlock","addBlockToPage","removeBlockFromPage","updateBlockConfig","reorderPageBlocks","duplicatePageBlock","toggleBlockVisible","undo","redo","togglePreviewMode","publishPage","preloadThemeFonts","autoSaveTimer","savedTime","handleSave","handlePublish","handleDragStart","handleDragEnd","handleDragOver","handleDragLeave","handleDrop","dropIndex","selectedBlock","blockTemplates","ArrowLeft","Settings","Monitor","Smartphone","Save","getThemedStyles","GripVertical","Copy","EyeOff","BlockRenderer","Tabs","TabsList","TabsTrigger","TabsContent"],"mappings":"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","x_google_ignoreList":[0,1]}