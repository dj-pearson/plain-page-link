import{b as r,u as e,d as i}from"./data-O5cD9hjv.js";import{s as t}from"./supabase-BYwji6mk.js";import{u as a}from"./stores-Bwj68t5x.js";function s(){const{user:s}=a(),o=r(),{data:n,isLoading:d}=e({queryKey:["profile",s?.id],queryFn:async()=>{if(!s?.id)return null;const{data:r,error:e}=await t.from("profiles").select("*").eq("id",s.id).single();if(e)throw e;return r},enabled:!!s?.id});return{profile:n,isLoading:d,updateProfile:i({mutationFn:async r=>{if(!s?.id)throw new Error("User not authenticated");const{data:e,error:i}=await t.from("profiles").update(r).eq("id",s.id).select().single();if(i)throw i;return e},onSuccess:()=>{o.invalidateQueries({queryKey:["profile",s?.id]})}})}}export{s as u};
