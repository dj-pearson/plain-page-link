import{j as e,aA as I,aB as P,aC as T,B as g,M as A,a4 as z,r as b,N as R,a3 as U,aD as M,aE as _,s as L,aq as w,Q as $,g as V,L as D,I as k,T as G,D as H,F as Y,G as J,J as K,K as O,k as Q,ac as N,aF as W,H as X,aG as Z,aH as E,aj as ee,a1 as se,ai as ae}from"./index-Dg7t10xs.js";import{S as te}from"./square-BOinN2ps.js";import{C as re}from"./checkbox-Im7wu6zf.js";import{T as le}from"./twitter-DEmIYgQZ.js";import{P as B}from"./play-BasmIdM7.js";import{I as ne}from"./image-B7-yEFeR.js";function oe({config:s,isEditing:t=!1}){return e.jsxs("div",{className:"text-center space-y-4 p-6",style:{fontFamily:"var(--theme-font-body, inherit)"},children:[s.avatarUrl&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(I,{className:"w-24 h-24",children:[e.jsx(P,{src:s.avatarUrl,alt:s.title}),e.jsx(T,{className:"text-2xl",children:s.title.charAt(0)})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--theme-text, #1f2937)",fontFamily:"var(--theme-font-heading, inherit)"},children:s.title}),s.subtitle&&e.jsx("p",{className:"text-lg text-gray-600 mt-1",children:s.subtitle})]}),s.description&&e.jsx("p",{className:"text-gray-700 max-w-2xl mx-auto whitespace-pre-wrap",children:s.description}),s.showContactButton&&!t&&e.jsxs("div",{className:"flex gap-3 justify-center pt-2",children:[e.jsxs(g,{className:"gap-2",style:{backgroundColor:"var(--theme-primary, #2563eb)",borderRadius:"var(--theme-border-radius, 0.5rem)"},children:[e.jsx(A,{className:"w-4 h-4"}),"Contact Me"]}),e.jsxs(g,{variant:"outline",className:"gap-2",style:{borderRadius:"var(--theme-border-radius, 0.5rem)",borderColor:"var(--theme-primary, #2563eb)",color:"var(--theme-primary, #2563eb)"},children:[e.jsx(z,{className:"w-4 h-4"}),"Call Now"]})]})]})}function ce({config:s,isEditing:t=!1,userId:c}){const[n,u]=b.useState([]),[i,o]=b.useState(!0);b.useEffect(()=>{async function l(){if(!c){o(!1);return}try{let h=L.from("listings").select("*").eq("user_id",c).order("created_at",{ascending:!1});s.filter==="active"?h=h.eq("status","active"):s.filter==="featured"&&(h=h.eq("is_featured",!0)),s.maxItems&&(h=h.limit(s.maxItems));const{data:f,error:p}=await h;if(p)throw p;u(f||[])}catch(h){console.error("Error fetching listings:",h),u([])}finally{o(!1)}}l()},[c,s.filter,s.maxItems]);const d=()=>{switch(s.layout){case"list":return"grid grid-cols-1 gap-4";case"carousel":return"flex overflow-x-auto gap-4 snap-x";case"grid":default:return"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"}},v=l=>l.photos&&Array.isArray(l.photos)&&l.photos.length>0?l.photos[0]:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800",x=l=>`${l.address}, ${l.city}, ${l.state}`;return i?e.jsxs("div",{className:"space-y-6",children:[s.title&&e.jsx("h2",{className:"text-2xl font-bold text-center",children:s.title}),e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:"Loading listings..."})})]}):e.jsxs("div",{className:"space-y-6",children:[s.title&&e.jsx("h2",{className:"text-2xl font-bold text-center",children:s.title}),e.jsx("div",{className:d(),children:n.map(l=>e.jsxs("div",{className:"bg-white rounded-lg border overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:v(l),alt:x(l),className:"w-full h-full object-cover"}),s.showStatus&&e.jsx(R,{className:"absolute top-2 right-2 capitalize",variant:l.status==="active"?"default":"secondary",children:l.status})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[s.showPrices&&e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",l.price.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[e.jsx(U,{className:"w-4 h-4"}),x(l)]}),(l.bedrooms||l.bathrooms||l.square_feet)&&e.jsxs("div",{className:"flex items-center gap-4 text-gray-700 text-sm pt-2",children:[l.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),l.bedrooms," bd"]}),l.bathrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4"}),l.bathrooms," ba"]}),l.square_feet&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),l.square_feet.toLocaleString()," sqft"]})]})]})]},l.id))}),n.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{children:"No listings to display"}),t&&e.jsx("p",{className:"text-sm mt-1",children:"Add some properties in the Listings dashboard to see them here"})]})]})}function ie({config:s,isEditing:t=!1}){const c=()=>{t||(s.openInNewTab?window.open(s.url,"_blank","noopener,noreferrer"):window.location.href=s.url)},n=()=>e.jsxs(g,{onClick:c,disabled:t,className:"w-full gap-2 justify-between",variant:s.style==="minimal"?"ghost":"default",size:"lg",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[s.icon&&e.jsx("span",{children:s.icon}),s.title]}),s.openInNewTab?e.jsx(w,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"})]}),u=()=>e.jsx("div",{onClick:c,className:`
                p-4 rounded-lg border bg-white hover:shadow-md transition-all
                ${!t&&"cursor-pointer hover:border-primary"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.icon&&e.jsx("div",{className:"text-2xl",children:s.icon}),e.jsx("span",{className:"font-semibold",children:s.title})]}),s.openInNewTab?e.jsx(w,{className:"w-5 h-5 text-gray-400"}):e.jsx($,{className:"w-5 h-5 text-gray-400"})]})}),i=()=>e.jsx("div",{onClick:c,className:`
                py-3 px-4 text-center
                ${!t&&"cursor-pointer hover:text-primary"}
                transition-colors
            `,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.icon&&e.jsx("span",{children:s.icon}),e.jsx("span",{className:"font-medium",children:s.title}),s.openInNewTab&&e.jsx(w,{className:"w-4 h-4"})]})});return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[s.style==="button"&&n(),s.style==="card"&&u(),s.style==="minimal"&&i()]})}function de({config:s,isEditing:t=!1,userId:c}){const[n,u]=b.useState({}),[i,o]=b.useState(!1),[d,v]=b.useState(!1),[x,l]=b.useState({}),h=()=>{const a={};for(const r of s.fields){const m=n[r.id];if(r.required&&(!m||typeof m=="string"&&!m.trim())){a[r.id]=`${r.label} is required`;continue}r.type==="email"&&m&&typeof m=="string"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)||(a[r.id]="Please enter a valid email address")),r.type==="phone"&&m&&typeof m=="string"&&(/^[\d\s\-\+\(\)]{7,}$/.test(m)||(a[r.id]="Please enter a valid phone number"))}return l(a),Object.keys(a).length===0},f=async a=>{if(a.preventDefault(),!t){if(!h()){N.error("Please fix the errors in the form");return}if(!c){N.error("Unable to submit form. Please try again later.");return}o(!0);try{const r=s.fields.find(j=>j.id==="name"||j.label.toLowerCase().includes("name")),m=s.fields.find(j=>j.type==="email"),y=s.fields.find(j=>j.type==="phone"),S=s.fields.find(j=>j.type==="textarea"||j.id==="message"),F={user_id:c,name:r?String(n[r.id]||""):"Anonymous",email:m?String(n[m.id]||""):"",phone:y?String(n[y.id]||""):void 0,message:S?String(n[S.id]||""):void 0,lead_type:"contact",referrer_url:window.location.href,device:/Mobile|Android|iPhone/i.test(navigator.userAgent)?"mobile":"desktop"},{data:ye,error:C}=await L.functions.invoke("submit-lead",{body:F});if(C)throw new Error(C.message||"Failed to submit form");v(!0),N.success(s.successMessage||"Message sent successfully!"),setTimeout(()=>{u({}),v(!1)},3e3)}catch(r){const m=r instanceof Error?r.message:"Failed to send message";N.error(m)}finally{o(!1)}}},p=(a,r)=>{u(m=>({...m,[a]:r})),x[a]&&l(m=>{const y={...m};return delete y[a],y})};return d?e.jsx("div",{className:"max-w-md mx-auto p-8 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(V,{className:"w-12 h-12 text-green-600 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900",children:"Message Sent!"}),e.jsx("p",{className:"text-green-700",children:s.successMessage})]})}):e.jsxs("div",{className:"max-w-md mx-auto",children:[s.title&&e.jsx("h3",{className:"text-2xl font-bold text-center mb-6",children:s.title}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.fields.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{htmlFor:a.id,children:[a.label,a.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.type==="text"&&e.jsx(k,{id:a.id,type:"text",placeholder:a.placeholder,required:a.required,disabled:t||i,value:String(n[a.id]||""),onChange:r=>p(a.id,r.target.value),className:x[a.id]?"border-red-500":""}),a.type==="email"&&e.jsx(k,{id:a.id,type:"email",placeholder:a.placeholder,required:a.required,disabled:t||i,value:String(n[a.id]||""),onChange:r=>p(a.id,r.target.value),className:x[a.id]?"border-red-500":""}),a.type==="phone"&&e.jsx(k,{id:a.id,type:"tel",placeholder:a.placeholder,required:a.required,disabled:t||i,value:String(n[a.id]||""),onChange:r=>p(a.id,r.target.value),className:x[a.id]?"border-red-500":""}),a.type==="textarea"&&e.jsx(G,{id:a.id,placeholder:a.placeholder,required:a.required,disabled:t||i,value:String(n[a.id]||""),onChange:r=>p(a.id,r.target.value),rows:4,className:x[a.id]?"border-red-500":""}),a.type==="select"&&a.options&&e.jsxs(H,{disabled:t||i,value:n[a.id],onValueChange:r=>p(a.id,r),children:[e.jsx(Y,{className:x[a.id]?"border-red-500":"",children:e.jsx(J,{placeholder:a.placeholder})}),e.jsx(K,{children:a.options.map(r=>e.jsx(O,{value:r,children:r},r))})]}),a.type==="checkbox"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{id:a.id,disabled:t||i,checked:!!n[a.id]||!1,onCheckedChange:r=>p(a.id,!!r)}),e.jsx("label",{htmlFor:a.id,className:"text-sm cursor-pointer",children:a.label})]}),x[a.id]&&e.jsx("p",{className:"text-sm text-red-500",children:x[a.id]})]},a.id)),e.jsxs(g,{type:"submit",className:"w-full gap-2",disabled:t||i,children:[i&&e.jsx(Q,{className:"w-4 h-4 animate-spin"}),i?"Sending...":s.submitButtonText||"Submit"]})]})]})}function me({config:s,isEditing:t=!1}){const c=o=>{const d=`w-${s.iconSize==="small"?"5":s.iconSize==="large"?"8":"6"} h-${s.iconSize==="small"?"5":s.iconSize==="large"?"8":"6"}`;switch(o){case"facebook":return e.jsx(ae,{className:d});case"instagram":return e.jsx(se,{className:d});case"twitter":return e.jsx(le,{className:d});case"linkedin":return e.jsx(ee,{className:d});case"youtube":return e.jsx(E,{className:d});case"tiktok":return e.jsx(Z,{className:d});case"zillow":return e.jsx(X,{className:d});case"realtor":return e.jsx(W,{className:d});default:return null}},n=o=>({facebook:"hover:bg-blue-600",instagram:"hover:bg-pink-600",twitter:"hover:bg-sky-500",linkedin:"hover:bg-blue-700",youtube:"hover:bg-red-600",tiktok:"hover:bg-black",zillow:"hover:bg-blue-800",realtor:"hover:bg-red-700"})[o]||"hover:bg-gray-700",u=o=>{t||window.open(o,"_blank","noopener,noreferrer")},i=()=>{switch(s.layout){case"vertical":return"flex-col items-center";case"grid":return"grid grid-cols-4 gap-3";case"horizontal":default:return"flex-row justify-center"}};return e.jsxs("div",{className:"space-y-4",children:[s.title&&e.jsx("h3",{className:"text-xl font-semibold text-center",children:s.title}),e.jsx("div",{className:`flex gap-3 ${i()}`,children:s.links.map(o=>e.jsx("button",{onClick:()=>u(o.url),disabled:t,className:`
                            p-3 rounded-full bg-gray-800 text-white
                            transition-all hover:scale-110
                            ${n(o.platform)}
                            ${t?"cursor-default":"cursor-pointer"}
                        `,title:o.username||o.platform,children:c(o.platform)},o.id))}),s.links.length===0&&t&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No social links added yet"})})]})}function ue({config:s,isEditing:t=!1}){const[c,n]=b.useState(!1),u=()=>{const o=s.videoUrl;if(o.includes("youtube.com")||o.includes("youtu.be")){let d="";return o.includes("youtube.com/watch?v=")?d=o.split("v=")[1]?.split("&")[0]:o.includes("youtu.be/")&&(d=o.split("youtu.be/")[1]?.split("?")[0]),`https://www.youtube.com/embed/${d}?autoplay=${s.autoplay?"1":"0"}&mute=${s.muted?"1":"0"}`}return o.includes("vimeo.com")?`https://player.vimeo.com/video/${o.split("vimeo.com/")[1]?.split("?")[0]}?autoplay=${s.autoplay?"1":"0"}&muted=${s.muted?"1":"0"}`:o},i=()=>{t||n(!0)};return!s.videoUrl&&t?e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"No video URL"}),e.jsx("p",{className:"text-sm",children:"Add a YouTube or Vimeo URL"})]})}):e.jsxs("div",{className:"space-y-3",children:[s.title&&e.jsx("h3",{className:"text-xl font-semibold text-center",children:s.title}),e.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-black",children:!c&&s.thumbnail?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:s.thumbnail,alt:s.title||"Video",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:i,disabled:t,className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition-colors group",children:e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(B,{className:"w-8 h-8 text-primary ml-1"})})})]}):e.jsx("iframe",{src:u(),title:s.title||"Video",className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}function xe({config:s,isEditing:t=!1}){return e.jsx("div",{style:{height:`${s.height}px`},className:t?"border-2 border-dashed border-gray-300 rounded":"",children:t&&e.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:[s.height,"px spacer"]})})}function he({config:s,isEditing:t=!1}){const c=()=>{switch(s.align){case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}},n=()=>{switch(s.fontSize){case"small":return"text-sm";case"large":return"text-lg";case"medium":default:return"text-base"}};return e.jsx("div",{className:`${c()} ${n()}`,children:s.content?e.jsx("p",{className:"whitespace-pre-wrap text-gray-700",children:s.content}):t&&e.jsx("p",{className:"text-gray-400 italic",children:"Enter your text here..."})})}function pe({config:s,isEditing:t=!1}){const c=()=>{switch(s.size){case"small":return"max-w-sm";case"medium":return"max-w-md";case"large":return"max-w-2xl";case"full":return"w-full";default:return"max-w-md"}},n=()=>{!t&&s.link&&window.open(s.link,"_blank","noopener,noreferrer")};return!s.imageUrl&&t?e.jsx("div",{className:`${c()} mx-auto`,children:e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(ne,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"No image"}),e.jsx("p",{className:"text-sm",children:"Upload an image"})]})})}):e.jsxs("div",{className:`${c()} mx-auto space-y-2`,children:[e.jsx("div",{onClick:n,className:`
                    rounded-lg overflow-hidden
                    ${s.link&&!t?"cursor-pointer hover:opacity-90 transition-opacity":""}
                `,children:e.jsx("img",{src:s.imageUrl,alt:s.alt,className:"w-full h-auto"})}),s.caption&&e.jsx("p",{className:"text-sm text-gray-600 text-center italic",children:s.caption})]})}function Se({block:s,isEditing:t=!1,isSelected:c=!1,onSelect:n,userId:u}){const i=()=>{switch(s.type){case"bio":return e.jsx(oe,{config:s.config,isEditing:t});case"listings":return e.jsx(ce,{config:s.config,isEditing:t,userId:u});case"link":return e.jsx(ie,{config:s.config,isEditing:t});case"contact":return e.jsx(de,{config:s.config,isEditing:t,userId:u});case"social":return e.jsx(me,{config:s.config,isEditing:t});case"video":return e.jsx(ue,{config:s.config,isEditing:t});case"spacer":return e.jsx(xe,{config:s.config,isEditing:t});case"text":return e.jsx(he,{config:s.config,isEditing:t});case"image":return e.jsx(pe,{config:s.config,isEditing:t});default:return e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded text-center",children:e.jsxs("p",{className:"text-yellow-800",children:["Unknown block type: ",s.type]})})}};return t?e.jsxs("div",{onClick:n,className:`
                relative group transition-all
                ${c?"ring-2 ring-primary ring-offset-2":""}
                ${s.visible?"":"opacity-50"}
                ${n?"cursor-pointer":""}
            `,children:[i(),n&&e.jsx("div",{className:`
                        absolute inset-0 pointer-events-none
                        ${c?"":"group-hover:ring-1 group-hover:ring-gray-300"}
                    `})]}):e.jsx("div",{className:s.visible?"":"hidden",children:i()})}function je(s){return{none:"0",small:"0.25rem",medium:"0.5rem",large:"1rem",full:"9999px"}[s]}function be(s){return{compact:"1rem",normal:"2rem",spacious:"3rem"}[s]}function Ce(s){return{"--theme-primary":s.colors.primary,"--theme-secondary":s.colors.secondary,"--theme-background":s.colors.background,"--theme-text":s.colors.text,"--theme-accent":s.colors.accent,"--theme-font-heading":`'${s.fonts.heading}', sans-serif`,"--theme-font-body":`'${s.fonts.body}', sans-serif`,"--theme-border-radius":je(s.borderRadius),"--theme-spacing":be(s.spacing)}}function q(s){if(document.querySelector(`link[href*="${s.replace(/\s+/g,"+")}"]`))return;const c=document.createElement("link");c.href=`https://fonts.googleapis.com/css2?family=${s.replace(/\s+/g,"+")}:wght@400;500;600;700&display=swap`,c.rel="stylesheet",document.head.appendChild(c)}function $e(s){q(s.fonts.heading),s.fonts.body!==s.fonts.heading&&q(s.fonts.body)}export{Se as B,Ce as g,$e as p};
