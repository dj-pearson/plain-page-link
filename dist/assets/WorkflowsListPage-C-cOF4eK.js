import{a as L,r as t,j as e,B as o,F as W,I as P,G as p,J as j,K as f,N,O as r,k as E,_ as F,g as I}from"./index-DliZj9NM.js";import{u as M}from"./useWorkflowBuilderStore-JhonBtM8.js";import{D as T,a as B,b as V,c as d,d as _}from"./dropdown-menu-DGqY6NQ7.js";import{P as v}from"./plus-Bwy1Q6VE.js";import{W as G}from"./workflow-BwtqSrhe.js";import{P as O}from"./play-C-3_8ev4.js";import{C as U}from"./circle-x-C4gPxezr.js";import{E as Q}from"./ellipsis-vertical-aK-Inv2G.js";import{S as R}from"./settings-B2ULRNcB.js";import{C as Y}from"./copy-G3k9yChl.js";import{T as z}from"./trash-2-CIp_d4Zv.js";import"./index-DUMXlcMH.js";const y={lead_management:"Lead Management",listing_automation:"Listing Automation",marketing:"Marketing",notifications:"Notifications",integrations:"Integrations",general:"General"},le=()=>{const m=L(),{loadUserWorkflows:C}=M(),[l,w]=t.useState([]),[b,x]=t.useState(!0),[i,S]=t.useState(""),[c,k]=t.useState("all"),[n,A]=t.useState("all");t.useEffect(()=>{(async()=>{x(!0);try{const a=await C();w(a)}catch(a){console.error("Failed to load workflows:",a)}finally{x(!1)}})()},[]);const u=l.filter(s=>!(i&&!s.name.toLowerCase().includes(i.toLowerCase())&&!s.description?.toLowerCase().includes(i.toLowerCase())||c!=="all"&&s.category!==c||n==="active"&&!s.isActive||n==="inactive"&&s.isActive||n==="draft"&&s.isPublished)),h=()=>{m("/dashboard/workflows/new")},g=s=>{m(`/dashboard/workflows/${s}`)},D=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Workflows"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Automate your real estate operations with visual workflows"})]}),e.jsxs(o,{onClick:h,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Create Workflow"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(P,{placeholder:"Search workflows...",value:i,onChange:s=>S(s.target.value),className:"pl-10"})]}),e.jsxs(p,{value:c,onValueChange:k,children:[e.jsx(j,{className:"w-48",children:e.jsx(f,{placeholder:"All Categories"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"All Categories"}),Object.entries(y).map(([s,a])=>e.jsx(r,{value:s,children:a},s))]})]}),e.jsxs(p,{value:n,onValueChange:A,children:[e.jsx(j,{className:"w-40",children:e.jsx(f,{placeholder:"All Status"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"All Status"}),e.jsx(r,{value:"active",children:"Active"}),e.jsx(r,{value:"inactive",children:"Inactive"}),e.jsx(r,{value:"draft",children:"Draft"})]})]})]}),b?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-gray-400"})}):u.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-lg border",children:[e.jsx(G,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l.length===0?"No workflows yet":"No matching workflows"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l.length===0?"Create your first workflow to automate your operations":"Try adjusting your filters"}),l.length===0&&e.jsxs(o,{onClick:h,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Create Your First Workflow"]})]}):e.jsx("div",{className:"grid gap-4",children:u.map(s=>e.jsx("div",{className:"bg-white rounded-lg border p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>g(s.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isActive?e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Active"]}):s.isPublished?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Inactive"}):e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:"Draft"}),e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-50 text-blue-700 rounded",children:y[s.category]})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-6 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3.5 h-3.5"}),"Updated ",D(s.updatedAt)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3.5 h-3.5"}),s.executionCount," runs"]}),s.executionCount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(I,{className:"w-3.5 h-3.5"}),s.successCount," success"]}),s.failureCount>0&&e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(U,{className:"w-3.5 h-3.5"}),s.failureCount," failed"]})]})]})]}),e.jsxs(T,{children:[e.jsx(B,{asChild:!0,onClick:a=>a.stopPropagation(),children:e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(Q,{className:"w-4 h-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(d,{onClick:a=>{a.stopPropagation(),g(s.id)},children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(d,{onClick:a=>a.stopPropagation(),children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(_,{}),e.jsxs(d,{onClick:a=>a.stopPropagation(),className:"text-red-600",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})},s.id))})]})};export{le as WorkflowsListPage,le as default};
