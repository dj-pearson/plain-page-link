import{j as e,r as j}from"./react-vendor-CotwlNTQ.js";import{c as f,L as T,S as D,a as V,b as $,d as k,e as F,j as K,B as U,J as W,K as X,M,N as S}from"./ui-components-XxFWEsul.js";import{aL as Y,ac as J,T as C,C as Q,U as O,K as H,j as Z,ad as q,c as ee,J as se,aj as G,e as te,a1 as ae,B as A}from"./icons-CcUX9GkC.js";import{e as ne,a as B,u as _,s as N,d as P,g as z}from"./utils-BpArqNZu.js";import"./charts-hR54p0E0.js";import"./supabase-Ba7v9dZh.js";function re({metrics:t,className:a}){return e.jsx("div",{className:f("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",a),children:t.map(s=>e.jsx(le,{metric:s},s.name))})}function le({metric:t}){const a=()=>{switch(t.trend){case"up":return e.jsx(C,{className:"w-4 h-4"});case"down":return e.jsx(J,{className:"w-4 h-4"});case"flat":return e.jsx(Y,{className:"w-4 h-4"})}},s=()=>{switch(t.trend){case"up":return"text-green-600 bg-green-100";case"down":return"text-red-600 bg-red-100";case"flat":return"text-gray-600 bg-gray-100"}},r=()=>t.unit==="$"?`$${t.value.toLocaleString()}`:t.unit==="%"?`${t.value.toFixed(1)}%`:t.unit==="min"?`${Math.round(t.value)} min`:t.value.toLocaleString();return e.jsxs("div",{className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:t.name}),e.jsx("div",{className:f("p-2 rounded-full",s()),children:a()})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r()})}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsxs("span",{className:f("text-sm font-medium",t.trend==="up"?"text-green-600":t.trend==="down"?"text-red-600":"text-gray-600"),children:[t.change>0?"+":"",t.change.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"vs last period"})]}),t.benchmark&&e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Benchmark: ",t.unit==="$"?"$":"",t.benchmark.toLocaleString(),t.unit==="%"?"%":""]})})]})}function ie({data:t,title:a,color:s="#2563eb",height:r=300,showPredictions:l=!1,className:o}){const{actualData:i,predictedData:x,maxValue:h,minValue:d}=j.useMemo(()=>{const c=t.filter(p=>!p.label),n=t.filter(p=>p.label==="predicted"),u=t.map(p=>p.value);return{actualData:c,predictedData:n,maxValue:Math.max(...u),minValue:Math.min(...u)}},[t]),v=c=>{const u=r-40,p=h-d||1;return 20+u-(c-d)/p*u},g=(c,n)=>40+c/(n-1)*720,b=(c,n=!1)=>c.length===0?"":c.map((y,R)=>({x:g(R,c.length),y:v(y.value)})).map((y,R)=>`${R===0?"M":"L"} ${y.x} ${y.y}`).join(" "),m=c=>{if(c.length===0)return"";const n=b(c),u=g(c.length-1,c.length),p=g(0,c.length),y=r-20;return`${n} L ${u} ${y} L ${p} ${y} Z`};return e.jsxs("div",{className:o,children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:a}),e.jsxs("svg",{width:"100%",height:r,viewBox:"0 0 800 300",className:"bg-white rounded-lg border",children:[e.jsx("g",{className:"grid-lines",children:[0,25,50,75,100].map(c=>{const n=20+(r-40)*(c/100);return e.jsxs("g",{children:[e.jsx("line",{x1:40,y1:n,x2:760,y2:n,stroke:"#e5e7eb",strokeWidth:1}),e.jsx("text",{x:25,y:n+4,fontSize:10,fill:"#6b7280",textAnchor:"end",children:Math.round(h-c/100*(h-d))})]},c)})}),e.jsx("path",{d:m(i),fill:s,fillOpacity:.1}),e.jsx("path",{d:b(i),fill:"none",stroke:s,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),l&&x.length>0&&e.jsx("path",{d:b(x),fill:"none",stroke:s,strokeWidth:2,strokeDasharray:"5,5",strokeOpacity:.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.map((c,n)=>e.jsx("circle",{cx:g(n,i.length),cy:v(c.value),r:4,fill:"white",stroke:s,strokeWidth:2},n)),e.jsx("g",{className:"x-axis-labels",children:i.map((c,n)=>n%Math.ceil(i.length/7)===0?e.jsx("text",{x:g(n,i.length),y:r-5,fontSize:10,fill:"#6b7280",textAnchor:"middle",children:c.date},n):null)})]}),l&&x.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:s}}),e.jsx("span",{children:"Actual"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:s,opacity:.5,borderTop:`2px dashed ${s}`}}),e.jsx("span",{children:"Predicted"})]})]})]})}function ce({stages:t,className:a}){const s=t[0]?.count||1;return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Conversion Funnel"}),e.jsx("div",{className:"space-y-2",children:t.map((r,l)=>e.jsxs("div",{children:[e.jsx(oe,{stage:r,maxCount:s,isFirst:l===0,isLast:l===t.length-1}),!isLast&&r.dropoff!==void 0&&r.dropoff>0&&e.jsx(de,{count:r.dropoff,percentage:ue(r,t[l+1])})]},r.name))}),e.jsxs("div",{className:"mt-6 pt-6 border-t grid grid-cols-3 gap-4",children:[e.jsx(I,{label:"Overall Conversion",value:`${t[t.length-1].percentage.toFixed(1)}%`}),e.jsx(I,{label:"Total Conversions",value:t[t.length-1].count.toLocaleString()}),e.jsx(I,{label:"Total Dropoff",value:xe(t).toLocaleString()})]})]})}function oe({stage:t,maxCount:a,isFirst:s,isLast:r}){const l=t.count/a*100,o=()=>t.percentage>=75?"bg-green-500":t.percentage>=50?"bg-yellow-500":t.percentage>=25?"bg-orange-500":"bg-red-500";return e.jsx("div",{className:"relative",children:e.jsx("div",{className:f("relative mx-auto rounded-lg p-4 transition-all duration-300 hover:shadow-md",o()),style:{width:`${Math.max(l,20)}%`},children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.name}),e.jsxs("p",{className:"text-sm opacity-90",children:[t.count.toLocaleString()," leads"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[t.percentage.toFixed(1),"%"]}),!s&&e.jsx("p",{className:"text-xs opacity-90",children:"of total"})]})]})})})}function de({count:t,percentage:a}){return e.jsx("div",{className:"flex items-center justify-center py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Q,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium text-red-600",children:t.toLocaleString()})," ","dropped off (",a.toFixed(1),"%)"]})]})})}function I({label:t,value:a}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t})]})}function ue(t,a){return t.count===0?0:(t.count-a.count)/t.count*100}function xe(t){return t.length<2?0:t[0].count-t[t.length-1].count}function me({sources:t,className:a}){const s=t.reduce((o,i)=>o+i.leads,0),r=t.reduce((o,i)=>o+i.revenue,0),l=[...t].sort((o,i)=>i.conversionRate-o.conversionRate);return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lead Sources"}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"}),s," leads"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"}),"$",r.toLocaleString()]})]})]}),e.jsx("div",{className:"space-y-4",children:l.map(o=>e.jsx(he,{source:o,totalLeads:s},o.source))}),l.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No lead source data available"})]})]})}function he({source:t,totalLeads:a}){const s=t.leads/a*100,r=l=>l>=20?"text-green-600":l>=10?"text-yellow-600":"text-gray-600";return e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 capitalize",children:t.source}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:f("text-lg font-bold",r(t.conversionRate)),children:[t.conversionRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"conversion"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Lead share"}),e.jsxs("span",{className:"font-medium",children:[s.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 transition-all duration-500",style:{width:`${s}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Leads"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:t.leads})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversions"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:t.conversions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",t.revenue.toLocaleString()]})]})]}),t.roi!==void 0&&e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ROI"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:f("font-semibold",t.roi>0?"text-green-600":"text-red-600"),children:[t.roi>0?"+":"",t.roi.toFixed(1),"%"]})]})]})]})}function E({insights:t,className:a}){return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(q,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Key Insights"})]}),e.jsx("div",{className:"space-y-3",children:t.map((s,r)=>e.jsx(pe,{insight:s},r))}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No insights available yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Check back when you have more data"})]})]})}function pe({insight:t}){const a=()=>t.includes("ðŸ“ˆ")||t.includes("ðŸš€")||t.includes("ðŸŽ¯")?e.jsx(C,{className:"w-5 h-5 text-green-600"}):t.includes("âš ï¸")||t.includes("ðŸŒ")?e.jsx(ee,{className:"w-5 h-5 text-orange-600"}):t.includes("âš¡")||t.includes("ðŸŒŸ")?e.jsx(se,{className:"w-5 h-5 text-blue-600"}):e.jsx(q,{className:"w-5 h-5 text-yellow-600"}),s=()=>t.includes("ðŸ“ˆ")||t.includes("ðŸš€")||t.includes("ðŸŽ¯")?"bg-green-50 border-green-200":t.includes("âš ï¸")||t.includes("ðŸŒ")?"bg-orange-50 border-orange-200":t.includes("âš¡")||t.includes("ðŸŒŸ")?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200";return e.jsx("div",{className:f("p-4 rounded-lg border",s()),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a()}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t})]})})}class w{static calculateKPIs(a,s){return[this.createMetric("Total Page Views",a.pageViews,"",s.pageViews),this.createMetric("Unique Visitors",a.uniqueVisitors,"",s.uniqueVisitors),this.createMetric("Total Leads",a.leads,"",s.leads),this.createMetric("Conversions",a.conversions,"",s.conversions),this.createMetric("Revenue",a.revenue,"$",s.revenue),this.createMetric("Avg Response Time",a.avgResponseTime,"min",s.avgResponseTime,!0),this.createMetric("Conversion Rate",this.calculateConversionRate(a.leads,a.conversions),"%",this.calculateConversionRate(s.leads,s.conversions)),this.createMetric("Lead-to-Visitor Rate",this.calculateConversionRate(a.uniqueVisitors,a.leads),"%",this.calculateConversionRate(s.uniqueVisitors,s.leads))]}static createMetric(a,s,r,l,o=!1){const i=this.calculatePercentageChange(s,l),x=this.determineTrend(i,o);return{name:a,value:s,unit:r,change:i,trend:x}}static calculatePercentageChange(a,s){return s===0?a>0?100:0:(a-s)/s*100}static determineTrend(a,s=!1){return Math.abs(a)<2?"flat":s?a<0?"up":"down":a>0?"up":"down"}static calculateConversionRate(a,s){return a===0?0:s/a*100}static generateTimeSeries(a,s,r){return ne({start:a,end:s}).map(o=>({date:B(o,"MMM d"),value:r(o)}))}static calculateFunnel(a){const{visitors:s,viewed:r,contacted:l,qualified:o,converted:i}=a;return[{name:"Visitors",count:s,percentage:100},{name:"Viewed Listing",count:r,percentage:this.calculateConversionRate(s,r),dropoff:s-r},{name:"Contacted",count:l,percentage:this.calculateConversionRate(s,l),dropoff:r-l},{name:"Qualified",count:o,percentage:this.calculateConversionRate(s,o),dropoff:l-o},{name:"Converted",count:i,percentage:this.calculateConversionRate(s,i),dropoff:o-i}]}static analyzeLeadSources(a){return a.map(s=>({source:s.source,leads:s.leads,conversions:s.conversions,conversionRate:this.calculateConversionRate(s.leads,s.conversions),revenue:s.revenue,roi:s.cost?(s.revenue-s.cost)/s.cost*100:void 0}))}static rankListings(a){return a.map(s=>({...s,conversionRate:this.calculateConversionRate(s.views,s.leads)})).sort((s,r)=>r.conversionRate-s.conversionRate)}static predictTrend(a,s=7){if(a.length<2)return[];const r=a.length,l=a.map((c,n)=>n),o=a.map(c=>c.value),i=l.reduce((c,n)=>c+n,0),x=o.reduce((c,n)=>c+n,0),h=l.reduce((c,n,u)=>c+n*o[u],0),d=l.reduce((c,n)=>c+n*n,0),v=(r*h-i*x)/(r*d-i*i),g=(x-v*i)/r,b=[],m=new Date(a[a.length-1].date);for(let c=1;c<=s;c++){const n=r+c-1,u=Math.max(0,Math.round(v*n+g)),p=new Date(m);p.setDate(p.getDate()+c),b.push({date:B(p,"MMM d"),value:u,label:"predicted"})}return b}static calculateEngagementScore(a){const{avgTimeOnPage:s,bounceRate:r,pagesPerSession:l,returnVisitorRate:o}=a,i=Math.min(s/180*25,25),x=Math.max((100-r)/4,0),h=Math.min(l/5*25,25),d=o/100*25;return Math.round(i+x+h+d)}static generateInsights(a,s,r){const l=[],o=this.calculatePercentageChange(a.leads,s.leads);o>20?l.push(`ðŸ“ˆ Lead generation is up ${Math.round(o)}% compared to last period`):o<-20&&l.push(`âš ï¸ Lead generation is down ${Math.abs(Math.round(o))}% - consider increasing marketing efforts`);const i=this.calculateConversionRate(a.leads,a.conversions),x=this.calculateConversionRate(s.leads,s.conversions);if(i>x+5&&l.push(`ðŸŽ¯ Conversion rate improved to ${i.toFixed(1)}% - keep up the good work!`),a.avgResponseTime<5?l.push("âš¡ Excellent response time! You're responding in under 5 minutes"):a.avgResponseTime>60&&l.push(`ðŸŒ Response time is high (${Math.round(a.avgResponseTime)} min) - faster responses increase conversions`),r.length>0){const d=r.reduce((v,g)=>g.conversionRate>v.conversionRate?g:v);d.conversionRate>15&&l.push(`ðŸŒŸ ${d.source} is your best performing source at ${d.conversionRate.toFixed(1)}% conversion rate`)}const h=this.calculatePercentageChange(a.uniqueVisitors,s.uniqueVisitors);return h>30&&l.push(`ðŸš€ Traffic is surging! Up ${Math.round(h)}% - great time to capture leads`),l}static exportToCSV(a,s){if(a.length===0)return;const r=Object.keys(a[0]),l=[r.join(","),...a.map(h=>r.map(d=>JSON.stringify(h[d]||"")).join(","))].join(`
`),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),x=URL.createObjectURL(o);i.setAttribute("href",x),i.setAttribute("download",`${s}_${Date.now()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}const ge=w.calculateKPIs,ve=w.generateTimeSeries,je=w.calculateFunnel,fe=w.analyzeLeadSources,be=w.predictTrend,Ne=w.generateInsights,ye=w.exportToCSV;function we({onGenerateReport:t,className:a}){const[s,r]=j.useState("leads"),[l,o]=j.useState("30d"),[i,x]=j.useState("csv"),[h,d]=j.useState(!1),v=[{value:"leads",label:"Leads Report"},{value:"listings",label:"Listings Performance"},{value:"conversions",label:"Conversion Analytics"},{value:"sources",label:"Lead Sources"},{value:"performance",label:"Overall Performance"}],g=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}],b=[{value:"csv",label:"CSV"},{value:"pdf",label:"PDF (Coming Soon)",disabled:!0},{value:"excel",label:"Excel (Coming Soon)",disabled:!0}],m=()=>{const n=new Date;switch(l){case"7d":return{start:N(n,7),end:n};case"30d":return{start:N(n,30),end:n};case"90d":return{start:N(n,90),end:n};case"this_month":return{start:P(n),end:z(n)};case"last_month":const u=N(P(n),1);return{start:P(u),end:z(u)};default:return{start:N(n,30),end:n}}},c=async()=>{d(!0);try{const{start:n,end:u}=m(),y=await t({reportType:s,dateRange:l,metrics:[],format:i,startDate:n,endDate:u});if(i==="csv"){const R=`${s}_report_${i(n,"yyyy-MM-dd")}_to_${i(u,"yyyy-MM-dd")}`;ye(y,R),_.success("Report exported successfully!")}}catch(n){console.error("Report generation error:",n),_.error("Failed to generate report")}finally{d(!1)}};return e.jsxs("div",{className:f("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(G,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Custom Report Builder"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Report Type"}),e.jsxs(D,{value:s,onValueChange:n=>r(n),children:[e.jsx(V,{children:e.jsx($,{})}),e.jsx(k,{children:v.map(n=>e.jsx(F,{value:n.value,children:n.label},n.value))})]})]}),e.jsxs("div",{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Date Range"]}),e.jsxs(D,{value:l,onValueChange:n=>o(n),children:[e.jsx(V,{children:e.jsx($,{})}),e.jsx(k,{children:g.map(n=>e.jsx(F,{value:n.value,children:n.label},n.value))})]})]}),e.jsxs("div",{children:[e.jsx(T,{children:"Export Format"}),e.jsxs(D,{value:i,onValueChange:n=>x(n),children:[e.jsx(V,{children:e.jsx($,{})}),e.jsx(k,{children:b.map(n=>e.jsx(F,{value:n.value,disabled:n.disabled,children:n.label},n.value))})]})]}),e.jsxs(K,{onClick:c,disabled:h,className:"w-full gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),h?"Generating...":"Generate Report"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Report Preview"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Type: ",e.jsx("span",{className:"font-medium",children:s})]}),e.jsxs("p",{children:["Range:"," ",e.jsxs("span",{className:"font-medium",children:[i(m().start,"MMM d, yyyy")," ","-"," ",i(m().end,"MMM d, yyyy")]})]}),e.jsxs("p",{children:["Format:"," ",e.jsx("span",{className:"font-medium uppercase",children:i})]})]})]})]})}const Ce=()=>{const t=new Date;return{current:{pageViews:3542,uniqueVisitors:1876,leads:156,conversions:23,revenue:156e3,avgResponseTime:12,period:"month",startDate:N(t,30),endDate:t},previous:{pageViews:2890,uniqueVisitors:1520,leads:128,conversions:18,revenue:122e3,avgResponseTime:18,period:"month",startDate:N(t,60),endDate:N(t,30)}}},Re=()=>{const t=new Date;return ve(N(t,30),t,a=>{const r=Math.random()*8,l=(a.getTime()-N(t,30).getTime())/(1e3*60*60*24*30);return Math.round(5+r+l*5)})},Me=()=>[{source:"zillow",leads:45,conversions:12,revenue:85e3,cost:5e3},{source:"realtor",leads:38,conversions:8,revenue:62e3,cost:4e3},{source:"facebook",leads:32,conversions:5,revenue:38e3,cost:3500},{source:"google",leads:28,conversions:4,revenue:31e3,cost:4500},{source:"website",leads:25,conversions:3,revenue:28e3,cost:1e3},{source:"referral",leads:18,conversions:4,revenue:45e3,cost:0}];function ke(){const[t,a]=j.useState(!0),{current:s,previous:r}=j.useMemo(()=>Ce(),[]),l=j.useMemo(()=>Re(),[]),o=j.useMemo(()=>be(l,7),[l]),i=[...l,...t?o:[]],x=j.useMemo(()=>ge(s,r),[s,r]),h=j.useMemo(()=>je({visitors:s.uniqueVisitors,viewed:Math.round(s.uniqueVisitors*.7),contacted:s.leads,qualified:Math.round(s.leads*.4),converted:s.conversions}),[s]),d=j.useMemo(()=>fe(Me()),[]),v=j.useMemo(()=>Ne(s,r,d),[s,r,d]),g=async b=>{switch(await new Promise(m=>setTimeout(m,1e3)),b.reportType){case"leads":return Array.from({length:50},(m,c)=>({id:`L${c+1}`,name:`Lead ${c+1}`,email:`lead${c+1}@example.com`,source:d[c%d.length].source,status:["new","contacted","qualified","converted"][Math.floor(Math.random()*4)],score:Math.floor(Math.random()*100),created:new Date().toISOString()}));case"sources":return d.map(m=>({source:m.source,leads:m.leads,conversions:m.conversions,conversion_rate:`${m.conversionRate.toFixed(1)}%`,revenue:m.revenue,roi:m.roi?`${m.roi.toFixed(1)}%`:"N/A"}));default:return[{metric:"Page Views",current:s.pageViews,previous:r.pageViews,change:`${((s.pageViews-r.pageViews)/r.pageViews*100).toFixed(1)}%`},{metric:"Leads",current:s.leads,previous:r.leads,change:`${((s.leads-r.leads)/r.leads*100).toFixed(1)}%`},{metric:"Conversions",current:s.conversions,previous:r.conversions,change:`${((s.conversions-r.conversions)/r.conversions*100).toFixed(1)}%`}]}};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your performance and gain insights"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(U,{variant:"outline",className:"px-4 py-2",children:"Last 30 Days"})})]}),e.jsx(re,{metrics:x}),e.jsxs(W,{defaultValue:"overview",className:"w-full",children:[e.jsxs(X,{className:"grid w-full grid-cols-4 max-w-2xl",children:[e.jsxs(M,{value:"overview",className:"gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Overview"]}),e.jsxs(M,{value:"funnel",className:"gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Funnel"]}),e.jsxs(M,{value:"sources",className:"gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Sources"]}),e.jsxs(M,{value:"reports",className:"gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Reports"]})]}),e.jsx(S,{value:"overview",className:"mt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ie,{data:i,title:"Lead Generation Trend",color:"#2563eb",showPredictions:t})}),e.jsx(E,{insights:v})]})}),e.jsx(S,{value:"funnel",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ce,{stages:h}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{insights:v}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Optimization Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Improve Viewed â†’ Contacted rate with clearer CTAs"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Reduce dropoff with faster response times"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Qualify leads better with targeted questions"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Nurture qualified leads with follow-ups"})]})]})]})]})]})}),e.jsx(S,{value:"sources",className:"mt-6",children:e.jsx(me,{sources:d})}),e.jsx(S,{value:"reports",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Reports"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(L,{title:"Leads Report",description:"Detailed lead data with scores and sources",icon:e.jsx(O,{className:"w-6 h-6"})}),e.jsx(L,{title:"Performance Report",description:"Overall performance metrics and trends",icon:e.jsx(C,{className:"w-6 h-6"})}),e.jsx(L,{title:"Sources Report",description:"Lead source analysis with ROI",icon:e.jsx(A,{className:"w-6 h-6"})}),e.jsx(L,{title:"Conversion Report",description:"Conversion funnel and rates",icon:e.jsx(C,{className:"w-6 h-6"})})]})]})}),e.jsx(we,{onGenerateReport:g})]})})]})]})}function L({title:t,description:a,icon:s}){return e.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:s}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-600",children:a})]})]})})}export{ke as default};
