import{j as s}from"./ui-components-DtyTDbSg.js";import{r as e,L as i}from"./react-vendor-B_Chv4nK.js";import{s as t,S as a,P as r,C as n,b as l,c as o,d as c,e as m,f as d,B as p,a as x}from"./index-DxTo7WPx.js";import{S as u}from"./switch-Ch_h1gzg.js";import{u as h}from"./data-ChU7VID-.js";import{u as j}from"./use-toast-BIxl6y56.js";import{Z as f,d as g}from"./icons-K_BhWJ_Z.js";import"./three-t2PEh41g.js";import"./charts-CeHnXkIf.js";import"./utils-D6PrBqaA.js";import"./supabase-D4JaKbf_.js";import"./forms-yc2f2ZZT.js";function y(){const[y,N]=e.useState(!1),{plans:b,subscription:v}=(()=>{var s,e;const{data:i}=h({queryKey:["session"],queryFn:async()=>{const{data:s}=await t.auth.getSession();return s.session}}),{data:a,isLoading:r}=h({queryKey:["user-subscription",null==(s=null==i?void 0:i.user)?void 0:s.id],queryFn:async()=>{var s;if(!(null==(s=null==i?void 0:i.user)?void 0:s.id))return null;const{data:e,error:a}=await t.rpc("get_user_plan",{_user_id:i.user.id});if(a)throw a;return e},enabled:!!(null==(e=null==i?void 0:i.user)?void 0:e.id)}),{data:n}=h({queryKey:["subscription-plans"],queryFn:async()=>{const{data:s,error:e}=await t.from("subscription_plans").select("*").eq("is_active",!0).order("sort_order");if(e)throw e;return s}});return{subscription:a,plans:n,isLoading:r,checkLimit:(s,e)=>{if(!(null==a?void 0:a.limits))return e<3;const i=a.limits[s];return-1===i||void 0!==i&&e<i},hasFeature:s=>!!(null==a?void 0:a.features)&&!0===a.features[s],isPro:"professional"===(null==a?void 0:a.plan_name)||"team"===(null==a?void 0:a.plan_name)||"enterprise"===(null==a?void 0:a.plan_name),isTeam:"team"===(null==a?void 0:a.plan_name)||"enterprise"===(null==a?void 0:a.plan_name)}})(),{toast:w}=j(),_=s=>{const e=y?s.price_yearly:s.price_monthly;return 0===e?"Free":`$${e}`},k=s=>(null==v?void 0:v.plan_name)===s;return s.jsxs(s.Fragment,{children:[s.jsx(a,{title:"Pricing - AgentBio Professional Plans",description:"Choose the perfect plan for your real estate business. Start free and scale as you grow with AgentBio.",keywords:["real estate pricing","agent subscriptions","link in bio plans"],canonicalUrl:`${window.location.origin}/pricing`,schema:{"@context":"https://schema.org","@type":"ProductGroup",name:"AgentBio Subscription Plans",description:"Choose the perfect plan for your real estate business"}}),s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(r,{}),s.jsx("div",{className:"bg-gradient-to-br from-background via-background to-primary/5 py-20 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Choose Your Plan"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Start free and scale as you grow"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("span",{className:y?"text-muted-foreground":"font-semibold",children:"Monthly"}),s.jsx(u,{checked:y,onCheckedChange:N}),s.jsxs("span",{className:y?"font-semibold":"text-muted-foreground",children:["Yearly ",s.jsx("span",{className:"text-primary text-sm",children:"(Save 17%)"})]})]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:null==b?void 0:b.map(e=>s.jsxs(n,{className:"relative "+("professional"===e.name?"border-primary shadow-lg shadow-primary/20 scale-105":""),children:["professional"===e.name&&s.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-4 py-1 rounded-full text-sm font-semibold flex items-center gap-2",children:[s.jsx(f,{className:"w-4 h-4"}),"Most Popular"]}),s.jsxs(l,{children:[s.jsx(o,{className:"text-2xl capitalize",children:e.name}),s.jsxs(c,{children:[s.jsx("span",{className:"text-4xl font-bold text-foreground",children:_(e)}),e.price_monthly>0&&s.jsx("span",{className:"text-muted-foreground",children:y?"/year":"/month"}),"team"===e.name&&s.jsx("div",{className:"text-sm mt-2",children:"per agent (5 minimum)"})]})]}),s.jsx(m,{children:s.jsxs("ul",{className:"space-y-3",children:[void 0!==e.limits.listings&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{className:"text-sm",children:[-1===e.limits.listings?"Unlimited":e.limits.listings," active listings"]})]}),void 0!==e.limits.links&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{className:"text-sm",children:[-1===e.limits.links?"Unlimited":e.limits.links," custom links"]})]}),void 0!==e.limits.testimonials&&e.limits.testimonials>0&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{className:"text-sm",children:[-1===e.limits.testimonials?"Unlimited":e.limits.testimonials," testimonials"]})]}),e.limits.analytics_days&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),s.jsxs("span",{className:"text-sm",children:[-1===e.limits.analytics_days?"Unlimited":`${e.limits.analytics_days}-day`," analytics"]})]}),Object.entries(e.features).map(([e,i])=>i&&s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),s.jsx("span",{className:"text-sm capitalize",children:e.replace(/_/g," ")})]},e))]})}),s.jsx(d,{children:s.jsx(p,{className:"w-full",variant:"professional"===e.name?"default":"outline",disabled:k(e.name)||"enterprise"===e.name||!e.stripe_price_id,onClick:()=>e.stripe_price_id&&(async s=>{try{const{data:{session:e}}=await t.auth.getSession();if(!e)return void w({title:"Authentication required",description:"Please sign in to subscribe",variant:"destructive"});const{data:i,error:a}=await t.functions.invoke("create-checkout-session",{body:{priceId:y?s.replace("monthly","yearly"):s,successUrl:`${window.location.origin}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/pricing`}});if(a)throw a;i.url&&(window.location.href=i.url)}catch(e){w({title:"Error",description:"Failed to create checkout session",variant:"destructive"})}})(e.stripe_price_id),asChild:"free"===e.name,children:"free"===e.name?s.jsx(i,{to:"/register",children:"Get Started"}):k(e.name)?"Current Plan":"enterprise"===e.name?"Contact Sales":e.stripe_price_id?"Subscribe":"Coming Soon"})})]},e.id))}),s.jsxs("div",{className:"mt-16 text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Add-Ons Available"}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:[s.jsxs(n,{className:"p-4",children:[s.jsx("p",{className:"font-semibold",children:"Premium Themes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"$15 one-time"})]}),s.jsxs(n,{className:"p-4",children:[s.jsx("p",{className:"font-semibold",children:"MLS Integration"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"$25/month"})]}),s.jsxs(n,{className:"p-4",children:[s.jsx("p",{className:"font-semibold",children:"CRM Connectors"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"$20/month each"})]}),s.jsxs(n,{className:"p-4",children:[s.jsx("p",{className:"font-semibold",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"$15/month"})]})]})]})]})}),s.jsx(x,{})]})]})}export{y as default};
