import{K as d,a8 as l,u as f,s as o}from"./index-CH8a_jH7.js";import{u as c}from"./useMutation-DQof0gk2.js";function m(){const{user:e}=d(),a=l(),{data:n,isLoading:s}=f({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:i,error:t}=await o.from("profiles").select("*").eq("id",e.id).single();if(t)throw t;return i},enabled:!!(e!=null&&e.id)}),u=c({mutationFn:async i=>{if(!(e!=null&&e.id))throw new Error("User not authenticated");const{data:t,error:r}=await o.from("profiles").update(i).eq("id",e.id).select().single();if(r)throw r;return t},onSuccess:()=>{a.invalidateQueries({queryKey:["profile",e==null?void 0:e.id]})}});return{profile:n,isLoading:s,updateProfile:u}}export{m as u};
