import{r as i,j as e,Q as Se,R as Ee,T as _e,V as Te,a3 as Re,a4 as g,I as N,i as Pe,k as Me,l as Ie,az as L,aA as S,aB as E,aC as _,aD as T,v as R,aE as P,p as M,aF as I,aa as O,ab as F,aG as $,m as Oe,n as Fe,a7 as $e,B as k,a6 as Ue,aH as U,aI as ze,aJ as qe,ai as z,aK as Ge,ag as Ye,aL as He,aj as Ve,aM as Be,aN as We,aO as Qe,aP as q,aQ as Xe,aR as Je,t as p,aS as G,X as Ke}from"./index-CH8a_jH7.js";import{F as Y}from"./file-text-Dh5rzuof.js";import{L as A}from"./link-VZwDK9yb.js";import{u as Ze}from"./use-toast-DTZfmZso.js";import{u as et}from"./useLinks-D1DPB0-9.js";import{u as tt,U as at}from"./UpgradeModal-BhpG-LVi.js";import{L as st}from"./LimitBanner-CSFLGViX.js";import{P as rt}from"./plus-mX94DPLf.js";import{G as lt}from"./grip-vertical-CYNYTsKp.js";import{S as nt}from"./square-pen-WI1F4rAb.js";import{T as it}from"./trash-2-D7F6DUix.js";import"./useMutation-DQof0gk2.js";import"./alert-CfHcFOLv.js";import"./progress-DgRiG04T.js";import"./triangle-alert-BMXRUX3N.js";const C=[{value:"instagram",label:"Instagram",icon:L},{value:"facebook",label:"Facebook",icon:S},{value:"linkedin",label:"LinkedIn",icon:E},{value:"tiktok",label:"TikTok",icon:_},{value:"youtube",label:"YouTube",icon:T},{value:"zillow",label:"Zillow",icon:R},{value:"realtor",label:"Realtor.com",icon:P},{value:"calendar",label:"Calendar",icon:M},{value:"website",label:"Website",icon:I},{value:"email",label:"Email",icon:O},{value:"phone",label:"Phone",icon:F},{value:"whatsapp",label:"WhatsApp",icon:$},{value:"document",label:"Document",icon:Y},{value:"link",label:"Link",icon:A}];function ot({open:a,onOpenChange:t,onSave:s}){const[r,n]=i.useState({title:"",url:"",icon:"link",active:!0}),d=l=>{const{name:c,value:m}=l.target;n(h=>({...h,[c]:m}))},u=l=>{l.preventDefault(),s==null||s(r),t(!1),n({title:"",url:"",icon:"link",active:!0})};return e.jsx(Se,{open:a,onOpenChange:t,children:e.jsxs(Ee,{className:"max-w-md",children:[e.jsxs(_e,{children:[e.jsx(Te,{children:"Add Custom Link"}),e.jsx(Re,{children:"Add a social media profile or custom link to your bio"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"title",children:"Link Title *"}),e.jsx(N,{id:"title",name:"title",value:r.title,onChange:d,placeholder:"Schedule a Consultation",required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"url",children:"URL *"}),e.jsx(N,{id:"url",name:"url",type:"url",value:r.url,onChange:d,placeholder:"https://example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"icon",children:"Icon"}),e.jsxs(Pe,{value:r.icon,onValueChange:l=>n(c=>({...c,icon:l})),children:[e.jsx(Me,{children:e.jsx(Ie,{children:(()=>{const l=C.find(m=>m.value===r.icon),c=(l==null?void 0:l.icon)||A;return e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:(l==null?void 0:l.label)||"Custom"})]})})()})}),e.jsx(Oe,{children:C.map(l=>{const c=l.icon;return e.jsx(Fe,{value:l.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{children:l.label})]})},l.value)})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"active",checked:r.active,onChange:l=>n(c=>({...c,active:l.target.checked})),className:"rounded border-border"}),e.jsx(g,{htmlFor:"active",className:"cursor-pointer",children:"Active (visible on profile)"})]}),e.jsxs($e,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(k,{type:"submit",children:"Add Link"})]})]})]})})}function ct({isOpen:a,onClose:t,onSubmit:s,initialData:r}){const[n,d]=i.useState(r);if(i.useEffect(()=>{d(r)},[r]),!a)return null;const u=l=>{l.preventDefault(),s(n)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-card border border-border rounded-lg w-full max-w-md",children:[e.jsxs("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Link"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-accent rounded-lg transition-colors",children:e.jsx(Ue,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"title",children:"Link Title *"}),e.jsx(N,{id:"title",value:n.title,onChange:l=>d({...n,title:l.target.value}),placeholder:"e.g., My Website",required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"url",children:"URL *"}),e.jsx(N,{id:"url",type:"url",value:n.url,onChange:l=>d({...n,url:l.target.value}),placeholder:"https://example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"icon",children:"Icon (optional)"}),e.jsx(N,{id:"icon",value:n.icon||"",onChange:l=>d({...n,icon:l.target.value}),placeholder:"e.g., link, globe, home"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Icon name from Lucide icons"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(k,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),e.jsx(k,{type:"submit",className:"flex-1",children:"Save Changes"})]})]})]})})}var H="AlertDialog",[dt]=Ye(H,[U]),x=U(),V=a=>{const{__scopeAlertDialog:t,...s}=a,r=x(t);return e.jsx(ze,{...r,...s,modal:!0})};V.displayName=H;var mt="AlertDialogTrigger",ut=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,n=x(s);return e.jsx(Je,{...n,...r,ref:t})});ut.displayName=mt;var xt="AlertDialogPortal",B=a=>{const{__scopeAlertDialog:t,...s}=a,r=x(t);return e.jsx(qe,{...r,...s})};B.displayName=xt;var pt="AlertDialogOverlay",W=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,n=x(s);return e.jsx(Xe,{...n,...r,ref:t})});W.displayName=pt;var b="AlertDialogContent",[gt,ht]=dt(b),ft=Be("AlertDialogContent"),Q=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,children:r,...n}=a,d=x(s),u=i.useRef(null),l=z(t,u),c=i.useRef(null);return e.jsx(Ge,{contentName:b,titleName:X,docsSlug:"alert-dialog",children:e.jsx(gt,{scope:s,cancelRef:c,children:e.jsxs(He,{role:"alertdialog",...d,...n,ref:l,onOpenAutoFocus:Ve(n.onOpenAutoFocus,m=>{var h;m.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(ft,{children:r}),e.jsx(bt,{contentRef:u})]})})})});Q.displayName=b;var X="AlertDialogTitle",J=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,n=x(s);return e.jsx(We,{...n,...r,ref:t})});J.displayName=X;var K="AlertDialogDescription",Z=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,n=x(s);return e.jsx(Qe,{...n,...r,ref:t})});Z.displayName=K;var vt="AlertDialogAction",ee=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,n=x(s);return e.jsx(q,{...n,...r,ref:t})});ee.displayName=vt;var te="AlertDialogCancel",ae=i.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,{cancelRef:n}=ht(te,s),d=x(s),u=z(t,n);return e.jsx(q,{...d,...r,ref:u})});ae.displayName=te;var bt=({contentRef:a})=>{const t=`\`${b}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${b}\` by passing a \`${K}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${b}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{var r;document.getElementById((r=a.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},jt=V,Nt=B,se=W,re=Q,le=ee,ne=ae,ie=J,oe=Z;const yt=jt,kt=Nt,ce=i.forwardRef(({className:a,...t},s)=>e.jsx(se,{className:p("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s}));ce.displayName=se.displayName;const de=i.forwardRef(({className:a,...t},s)=>e.jsxs(kt,{children:[e.jsx(ce,{}),e.jsx(re,{ref:s,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));de.displayName=re.displayName;const me=({className:a,...t})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",a),...t});me.displayName="AlertDialogHeader";const ue=({className:a,...t})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});ue.displayName="AlertDialogFooter";const xe=i.forwardRef(({className:a,...t},s)=>e.jsx(ie,{ref:s,className:p("text-lg font-semibold",a),...t}));xe.displayName=ie.displayName;const pe=i.forwardRef(({className:a,...t},s)=>e.jsx(oe,{ref:s,className:p("text-sm text-muted-foreground",a),...t}));pe.displayName=oe.displayName;const ge=i.forwardRef(({className:a,...t},s)=>e.jsx(le,{ref:s,className:p(G(),a),...t}));ge.displayName=le.displayName;const he=i.forwardRef(({className:a,...t},s)=>e.jsx(ne,{ref:s,className:p(G({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));he.displayName=ne.displayName;const At=a=>({calendar:M,instagram:L,facebook:S,zillow:R,link:A,linkedin:E,tiktok:_,youtube:T,realtor:P,website:I,email:O,phone:F,whatsapp:$,document:Y})[a]||A;function zt(){const[a,t]=i.useState(!1),[s,r]=i.useState(!1),[n,d]=i.useState(null),[u,l]=i.useState(!1),[c,m]=i.useState(null),[h,D]=i.useState(!1),{toast:f}=Ze(),{links:j,isLoading:fe,addLink:ve,updateLink:be,deleteLink:je}=et(),{subscription:y,canAdd:Ne,getLimit:w,getUsage:ye}=tt(),ke=()=>{if(!Ne("links")){D(!0);return}t(!0)},Ae=async o=>{try{await ve.mutateAsync(o),f({title:"Link added!",description:"Your custom link has been created successfully."})}catch{f({title:"Error",description:"Failed to add link. Please try again.",variant:"destructive"})}},De=o=>{d(o),r(!0)},we=async(o,v)=>{try{await be.mutateAsync({id:o,...v}),f({title:"Link updated!",description:"Your link has been updated successfully."})}catch{f({title:"Error",description:"Failed to update link. Please try again.",variant:"destructive"})}},Ce=o=>{m(o),l(!0)},Le=async()=>{if(c)try{await je.mutateAsync(c),f({title:"Link deleted",description:"Your link has been removed successfully."})}catch{f({title:"Error",description:"Failed to delete link. Please try again.",variant:"destructive"})}finally{l(!1),m(null)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:"Custom Links"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1",children:"Manage your social and custom links"})]}),e.jsxs("button",{onClick:ke,className:"inline-flex items-center gap-2 px-4 py-2.5 sm:py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 active:scale-95 transition-all font-medium min-h-[44px] w-full sm:w-auto justify-center shadow-sm",children:[e.jsx(rt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Add Link"})]})]}),y&&w("links")!==1/0&&e.jsx(st,{feature:"links",current:ye("links"),limit:w("links")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:j.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:"Total"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:j.filter(o=>o.is_active).length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:"Active"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-primary",children:j.reduce((o,v)=>o+v.click_count,0)}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5",children:"Clicks"})]})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg divide-y divide-border",children:fe?e.jsx("div",{className:"p-6 sm:p-8 text-center text-muted-foreground text-sm sm:text-base",children:"Loading links..."}):j.length===0?e.jsx("div",{className:"p-6 sm:p-8 text-center text-muted-foreground text-sm sm:text-base",children:'No links yet. Click "Add Link" to create your first link.'}):j.map(o=>e.jsxs("div",{className:"p-3 sm:p-4 flex items-center gap-2 sm:gap-4 hover:bg-accent/50 active:bg-accent/70 transition-colors",children:[e.jsx("button",{className:"cursor-grab active:cursor-grabbing p-1.5 hover:bg-accent rounded hidden sm:block min-h-[44px]","aria-label":"Drag to reorder",children:e.jsx(lt,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center bg-accent rounded-lg flex-shrink-0",children:(()=>{const v=At(o.icon);return e.jsx(v,{className:"h-5 w-5 sm:h-6 sm:w-6 text-foreground"})})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-0.5 sm:mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-medium text-sm sm:text-base text-foreground truncate",children:o.title}),o.is_active?e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium flex-shrink-0",children:"Active"}):e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full font-medium flex-shrink-0",children:"Inactive"})]}),e.jsxs("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-muted-foreground hover:text-primary active:text-primary flex items-center gap-1 truncate",children:[e.jsx("span",{className:"truncate",children:o.url}),e.jsx(Ke,{className:"h-3 w-3 flex-shrink-0"})]}),e.jsxs("div",{className:"sm:hidden mt-1.5 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-semibold text-foreground",children:o.click_count})," clicks"]})]}),e.jsxs("div",{className:"text-right hidden sm:block flex-shrink-0",children:[e.jsx("div",{className:"text-lg font-semibold text-foreground",children:o.click_count}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"clicks"})]}),e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>De(o),className:"p-2 sm:p-2.5 hover:bg-accent active:bg-accent/80 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Edit link",children:e.jsx(nt,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("button",{onClick:()=>Ce(o.id),className:"p-2 sm:p-2.5 hover:bg-red-50 active:bg-red-100 rounded-lg transition-all min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Delete link",children:e.jsx(it,{className:"h-4 w-4 text-red-500"})})]})]},o.id))}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4",children:e.jsxs("p",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 leading-relaxed",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Drag and drop links to reorder them."}),e.jsx("span",{className:"sm:hidden",children:"Use the edit option to change link details."})," The order here will reflect on your public profile page."]})}),e.jsx(ot,{open:a,onOpenChange:t,onSave:Ae}),e.jsx(ct,{open:s,onOpenChange:r,link:n,onSave:we}),e.jsx(yt,{open:u,onOpenChange:l,children:e.jsxs(de,{children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Are you sure?"}),e.jsx(pe,{children:"This will permanently delete this link. This action cannot be undone."})]}),e.jsxs(ue,{children:[e.jsx(he,{children:"Cancel"}),e.jsx(ge,{onClick:Le,children:"Delete"})]})]})}),e.jsx(at,{open:h,onOpenChange:D,feature:"links",currentPlan:(y==null?void 0:y.plan_name)||"Free",requiredPlan:"Starter"})]})}export{zt as default};
