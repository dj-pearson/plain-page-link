import{j as e}from"./ui-components-BlSGx7hb.js";import{L as s,m as t,j as a,a as i}from"./react-vendor-CmKLYqnR.js";import{u as l}from"./useAnalytics-BrutScAM.js";import{u as r}from"./useLinks-BxnI-qBo.js";import{u as n}from"./useProfile-CTmaHgQN.js";import{u as c}from"./useSubscription-DIatBRn4.js";import{C as m,a as o,b as d,c as x,d as h,u as p,D as u,q as j,v as b,r as g,t as f}from"./index-BN67XOPb.js";import{P as N}from"./progress-_biHgRdX.js";import{u as y}from"./useListings-BBGICo5c.js";import{u as w}from"./useTestimonials-D0RCTImw.js";import{C as v,at as k,J as L,E as C,U as A,au as _,T as S,ae as P,h as T,av as U,d as D}from"./icons-C4ubqulC.js";import{L as W}from"./LoadingSpinner-CwtnS6yI.js";import"./data-CgAYSh8x.js";import"./three-addons-bxfOomGn.js";import"./three-BxgHQpUo.js";import"./charts-D6IDAGAX.js";import"./utils-CwVVV8W2.js";import"./supabase-DpFHdg_3.js";import"./forms-BQFHsYzL.js";function M(){const{data:t}=n(),{data:a}=y(),{data:i}=w(),{data:l}=r();if(!t)return null;const c=[{id:"avatar",label:"Add profile photo",description:"Upload a professional headshot",completed:!!t.avatar_url,link:"/dashboard/profile",priority:"high"},{id:"bio",label:"Write your bio",description:"Tell visitors about your experience",completed:!!t.bio&&t.bio.length>50,link:"/dashboard/profile",priority:"high"},{id:"contact",label:"Add contact info",description:"Phone and email for leads",completed:!!t.phone||!!t.email_display,link:"/dashboard/profile",priority:"high"},{id:"listings",label:"Add your first listing",description:"Showcase properties you're selling",completed:(a?.length||0)>0,link:"/dashboard/listings",priority:"medium"},{id:"testimonials",label:"Add testimonials",description:"Build trust with client reviews",completed:(i?.length||0)>0,link:"/dashboard/testimonials",priority:"medium"},{id:"links",label:"Add custom links",description:"Link to your website and social",completed:(l?.length||0)>0,link:"/dashboard/links",priority:"low"},{id:"theme",label:"Customize theme",description:"Match your brand colors",completed:!!t.theme,link:"/dashboard/theme",priority:"low"}],p=c.filter(e=>e.completed).length,u=c.length,j=Math.round(p/u*100);if(100===j)return null;const b=c.filter(e=>"high"===e.priority&&!e.completed)[0]||c.find(e=>!e.completed);return e.jsxs(m,{className:"border-blue-200 bg-blue-50/50",children:[e.jsxs(o,{children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs(d,{className:"text-lg flex items-center gap-2",children:[j<50?e.jsx(v,{className:"w-5 h-5 text-orange-500"}):e.jsx(k,{className:"w-5 h-5 text-blue-500"}),"Profile Completion"]}),e.jsxs(x,{children:[j,"% complete - ",p," of ",u," steps done"]})]})}),e.jsx(N,{value:j,className:"mt-4"})]}),e.jsxs(h,{className:"space-y-4",children:[b&&e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:p+1})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Next: ",b.label]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.description}),e.jsx(s,{to:b.link,className:"inline-block mt-2 text-sm font-medium text-blue-600 hover:text-blue-700",children:"Complete this step â†’"})]})]})}),e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900 list-none flex items-center gap-2",children:[e.jsx("span",{children:"View all steps"}),e.jsx("span",{className:"group-open:rotate-180 transition-transform",children:"â–¼"})]}),e.jsx("div",{className:"mt-3 space-y-2",children:c.map(t=>e.jsxs(s,{to:t.link,className:"flex items-start gap-3 p-2 rounded-lg hover:bg-white transition-colors group/item",children:[t.completed?e.jsx(L,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):e.jsx(k,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium "+(t.completed?"text-gray-500 line-through":"text-gray-900"),children:t.label}),e.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]},t.id))})]})]})]})}function V(){const{stats:s,recentLeads:x,isLoading:N}=l(),{links:y}=r(),{profile:w}=n(),{subscription:v}=c(),{toast:k}=p(),[L]=t(),V=a(),[E,R]=i.useState(!1),$=y.reduce((e,s)=>e+(s.click_count||0),0),q=!!w?.created_at&&(new Date).getTime()-new Date(w.created_at).getTime()<1728e5,z=q?"Welcome to AgentBio!":"Welcome Back!",F=q?"Let's get your profile set up and start attracting clients":"Here's what's happening with your profile";i.useEffect(()=>{"success"===L.get("subscription")&&(R(!0),V("/dashboard",{replace:!0}))},[L,V]);return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(W,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1 sm:mb-2",children:[z,w?.full_name&&!q&&e.jsxs("span",{className:"text-gray-600",children:[", ",w.full_name.split(" ")[0]]})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:F})]}),e.jsx(M,{}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[e.jsx(B,{icon:e.jsx(C,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"}),label:"Profile Views",value:s.totalViews.toLocaleString()}),e.jsx(B,{icon:e.jsx(A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"}),label:"New Leads",value:s.totalLeads.toString()}),e.jsx(B,{icon:e.jsx(_,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"}),label:"Link Clicks",value:$.toLocaleString()}),e.jsx(B,{icon:e.jsx(S,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-600"}),label:"Conversion Rate",value:`${s.conversionRate}%`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(m,{children:[e.jsx(o,{className:"pb-3 sm:pb-4",children:e.jsx(d,{className:"text-base sm:text-lg",children:"Recent Leads"})}),e.jsx(h,{children:x.length>0?e.jsx("div",{className:"space-y-2 sm:space-y-3",children:x.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-2.5 border-b border-border last:border-0 gap-2 min-h-[44px]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:s.name}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:s.email})]}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full flex-shrink-0 font-medium "+("new"===s.status?"bg-blue-100 text-blue-700":"contacted"===s.status?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:s.status})]},s.id))}):e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-3",children:e.jsx(A,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Start Capturing Leads"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3 max-w-xs mx-auto",children:"Share your profile link to start receiving inquiries from potential clients"}),w?.username&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-muted rounded-lg max-w-xs mx-auto",children:[e.jsxs("code",{className:"text-xs truncate",children:["agentbio.net/",w.username]}),e.jsx("button",{onClick:async()=>{await navigator.clipboard.writeText(`${window.location.origin}/${w.username}`),k({title:"Copied!",description:"Profile link copied to clipboard"})},className:"p-1 hover:bg-background rounded transition-colors",children:e.jsx(P,{className:"h-3 w-3"})})]})]})})]}),e.jsxs(m,{children:[e.jsx(o,{className:"pb-3 sm:pb-4",children:e.jsx(d,{className:"text-base sm:text-lg",children:"Top Links"})}),e.jsx(h,{children:y.length>0?e.jsx("div",{className:"space-y-2 sm:space-y-3",children:y.sort((e,s)=>(s.click_count||0)-(e.click_count||0)).slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-2.5 border-b border-border last:border-0 gap-2 min-h-[44px]",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base truncate",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:s.url})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm sm:text-base text-muted-foreground flex-shrink-0",children:[e.jsx(_,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"font-medium",children:s.click_count||0})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-purple-100 mb-3",children:e.jsx(_,{className:"h-6 w-6 text-purple-600"})}),e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Add Your First Link"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3 max-w-xs mx-auto",children:"Add links to your website, social media, and other profiles"}),e.jsxs("a",{href:"/dashboard/links",className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 font-medium",children:["Manage Links ",e.jsx(T,{className:"h-3 w-3"})]})]})})]})]}),e.jsx(u,{open:E,onOpenChange:R,children:e.jsxs(j,{className:"sm:max-w-md",children:[e.jsxs(b,{children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mx-auto mb-4",children:e.jsx(U,{className:"w-8 h-8 text-green-600"})}),e.jsxs(g,{className:"text-center text-2xl",children:["ðŸŽ‰ Welcome to ",v?.plan_name,"!"]}),e.jsx(f,{className:"text-center pt-2",children:"Your subscription is now active. Here's what you just unlocked:"})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 my-4",children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),"New Features Available:"]}),e.jsx("ul",{className:"space-y-2",children:(H=v?.plan_name,{starter:["20 active listings","15 custom links","10 testimonials","90-day analytics","Lead export to CSV"],professional:["Unlimited listings","Unlimited custom links","Unlimited testimonials","Unlimited analytics history","Custom domain support","Premium themes with 3D effects","Priority email support"],team:["Everything in Professional","Multi-agent dashboard","Team analytics","White-label branding","API access","Dedicated account manager"]}[H?.toLowerCase()||"starter"]||[]).map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(D,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:s})]},t))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"A confirmation email with your receipt has been sent to your email address."}),e.jsx("button",{onClick:()=>R(!1),className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium",children:"Get Started"})]})]})})]});var H}function B({icon:s,label:t,value:a}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-4 md:p-6 hover:shadow-md transition-shadow active:scale-[0.98] cursor-pointer",children:[e.jsx("div",{className:"flex items-center mb-2 sm:mb-3 md:mb-4",children:e.jsx("div",{className:"p-1.5 sm:p-2 bg-gray-50 rounded-lg",children:s})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:t}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 break-all",children:a})]})]})}export{V as default};
