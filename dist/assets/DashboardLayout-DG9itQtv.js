import{u as e,g as s,r as a,j as t,L as i,O as r}from"./react-vendor-CGQ4_CNL.js";import{a as l,u as n}from"./index-D4aQRIrG.js";import{c as o,D as c,k as d,l as m,m as h,B as x,j as b}from"./ui-components-B-j2jwdU.js";import{H as p,al as f,U as u,B as g,$ as j,i as y,a7 as v,Z as N,aj as w,a0 as k,am as C,an as L,h as P,ao as O,ap as A,aq as S,m as T,b as $,ae as z,u as B}from"./icons-BX9Iz4zT.js";import"./charts-D_q0pR-d.js";import"./utils-wmY8hpgz.js";import"./data-O5cD9hjv.js";import"./three-addons-DQ5hBofG.js";import"./three-BxgHQpUo.js";import"./supabase-D5NmozDF.js";import"./forms-BzNDvv3d.js";function F(){const r=e(),n=s(),{profile:b,signOut:S,role:T}=l(),[$,z]=a.useState(!1),B=[{label:"Home",icon:p,href:"/dashboard"},{label:"Listings",icon:f,href:"/dashboard/listings"},{label:"Leads",icon:u,href:"/dashboard/leads"},{label:"Analytics",icon:g,href:"/dashboard/analytics"}],F=[{label:"Testimonials",icon:y,href:"/dashboard/testimonials"},{label:"Custom Links",icon:v,href:"/dashboard/links"},{label:"Quick Actions",icon:N,href:"/dashboard/quick-actions"},{label:"Page Builder",icon:w,href:"/dashboard/page-builder"},{label:"Profile",icon:k,href:"/dashboard/profile"},{label:"Theme",icon:C,href:"/dashboard/theme"},{label:"Settings",icon:L,href:"/dashboard/settings"}],M=e=>{z(!1),n(e)},U=e=>r.pathname===e||r.pathname.startsWith(e+"/");return t.jsxs(t.Fragment,{children:[t.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden safe-area-inset-bottom shadow-lg","aria-label":"Mobile navigation",children:t.jsxs("div",{className:"flex justify-around items-center h-16 px-1",children:[B.map(e=>{const s=U(e.href),a=e.icon;return t.jsxs(i,{to:e.href,className:o("flex flex-col items-center justify-center flex-1 h-full relative","transition-all duration-200 rounded-lg mx-0.5","min-w-[44px] min-h-[44px]","active:scale-95 active:bg-gray-100",s?"text-primary bg-primary/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":e.label,"aria-current":s?"page":void 0,children:[t.jsxs("div",{className:"relative",children:[t.jsx(a,{className:o("w-6 h-6 transition-transform",s&&"scale-110")}),e.badge&&e.badge>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold animate-pulse","aria-label":`${e.badge} unread`,children:e.badge>99?"99+":e.badge})]}),t.jsx("span",{className:o("text-xs mt-1 font-medium transition-all",s&&"font-semibold"),children:e.label})]},e.href)}),t.jsxs("button",{onClick:()=>z(!0),className:o("flex flex-col items-center justify-center flex-1 h-full relative","transition-all duration-200 rounded-lg mx-0.5","min-w-[44px] min-h-[44px]","active:scale-95 active:bg-gray-100","text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":"Open menu with more options","aria-expanded":$,children:[t.jsx(j,{className:"w-6 h-6"}),t.jsx("span",{className:"text-xs mt-1 font-medium",children:"More"})]})]})}),t.jsx(c,{open:$,onOpenChange:z,children:t.jsxs(d,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[t.jsx(m,{children:t.jsx(h,{children:"Menu"})}),t.jsxs("div",{className:"space-y-1 py-2",children:[t.jsxs(i,{to:`/${b?.username||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors min-h-[44px]",onClick:()=>z(!1),children:[t.jsx(P,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"font-medium text-sm",children:"View My Public Profile"}),t.jsx("p",{className:"text-xs text-gray-500",children:"See how visitors see your page"})]})]}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),"admin"===T&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>M("/admin"),className:o("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors w-full text-left min-h-[44px]",U("/admin")?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[t.jsx(O,{className:"h-5 w-5 flex-shrink-0"}),t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx("span",{children:"Admin Panel"}),t.jsx(x,{variant:"secondary",className:"text-xs",children:"ROOT"})]})]}),t.jsx("div",{className:"border-t border-gray-200 my-2"})]}),F.map(e=>{const s=e.icon,a=U(e.href);return t.jsxs("button",{onClick:()=>M(e.href),className:o("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors w-full text-left min-h-[44px]",a?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[t.jsx(s,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("span",{children:e.label})]},e.href)}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsxs("button",{onClick:async()=>{z(!1),await S(),n("/auth/login")},className:"flex items-center gap-3 px-3 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full text-left min-h-[44px]",children:[t.jsx(A,{className:"h-5 w-5 flex-shrink-0"}),t.jsx("span",{children:"Log Out"})]})]})]})})]})}function M({href:e="#main-content",children:s="Skip to main content"}){return t.jsx("a",{href:e,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-lg focus:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:s})}function U(){const o=e(),c=s(),{profile:d,signOut:m,role:h}=l(),{toast:f}=n(),[j,P]=a.useState(!1),U=e=>o.pathname===e,R=async()=>{if(!d?.username)return;const e=`${window.location.origin}/${d.username}`;try{navigator.share&&/mobile|android|ios|iphone|ipad/i.test(navigator.userAgent)?(await navigator.share({title:`${d.full_name||"My"} AgentBio Profile`,url:e}),f({title:"Shared!",description:"Profile link shared successfully"})):(await navigator.clipboard.writeText(e),P(!0),f({title:"Copied!",description:"Profile link copied to clipboard"}),setTimeout(()=>P(!1),2e3))}catch(s){f({title:"Failed to copy",description:"Please try again",variant:"destructive"})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(M,{}),t.jsxs("aside",{className:"hidden md:fixed md:block left-0 top-0 h-full w-64 bg-white border-r border-gray-200 z-40",children:[t.jsx("div",{className:"p-6",children:t.jsxs(i,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-gray-900",children:[t.jsx(p,{className:"h-6 w-6 text-blue-600"}),"AgentBio.net"]})}),t.jsxs("nav",{className:"px-3 space-y-1",children:[t.jsx(q,{to:"/dashboard",icon:t.jsx(S,{className:"h-5 w-5"}),label:"Dashboard",active:U("/dashboard")}),t.jsx(q,{to:"/dashboard/listings",icon:t.jsx(T,{className:"h-5 w-5"}),label:"Listings",active:U("/dashboard/listings")}),t.jsx(q,{to:"/dashboard/leads",icon:t.jsx(u,{className:"h-5 w-5"}),label:"Leads",active:U("/dashboard/leads")}),t.jsx(q,{to:"/dashboard/testimonials",icon:t.jsx(y,{className:"h-5 w-5"}),label:"Testimonials",active:U("/dashboard/testimonials")}),t.jsx(q,{to:"/dashboard/links",icon:t.jsx(v,{className:"h-5 w-5"}),label:"Custom Links",active:U("/dashboard/links")}),t.jsx(q,{to:"/dashboard/analytics",icon:t.jsx(g,{className:"h-5 w-5"}),label:"Analytics",active:U("/dashboard/analytics")}),t.jsx(q,{to:"/dashboard/quick-actions",icon:t.jsx(N,{className:"h-5 w-5"}),label:"Quick Actions",active:U("/dashboard/quick-actions")}),t.jsx(q,{to:"/dashboard/page-builder",icon:t.jsx(w,{className:"h-5 w-5"}),label:"Page Builder",active:U("/dashboard/page-builder")}),t.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-200",children:["admin"===h&&t.jsx(q,{to:"/admin",icon:t.jsx(O,{className:"h-5 w-5"}),label:t.jsxs("div",{className:"flex items-center gap-2",children:["Admin",t.jsx(x,{variant:"secondary",className:"text-xs",children:"ROOT"})]}),active:U("/admin")}),t.jsx(q,{to:"/dashboard/profile",icon:t.jsx(k,{className:"h-5 w-5"}),label:"Profile",active:U("/dashboard/profile")}),t.jsx(q,{to:"/dashboard/theme",icon:t.jsx(C,{className:"h-5 w-5"}),label:"Theme",active:U("/dashboard/theme")}),t.jsx(q,{to:"/dashboard/settings",icon:t.jsx(L,{className:"h-5 w-5"}),label:"Settings",active:U("/dashboard/settings")})]})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:t.jsxs("button",{onClick:async()=>{await m(),c("/auth/login")},className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 w-full px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsx(A,{className:"h-5 w-5"}),t.jsx("span",{children:"Log Out"})]})})]}),t.jsxs("div",{className:"md:ml-64 min-h-screen",children:[t.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-30 safe-area-inset-top",children:t.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between gap-2 sm:gap-4",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:"Dashboard"}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[d?.username&&t.jsxs(t.Fragment,{children:[t.jsx(b,{variant:"outline",size:"sm",onClick:R,className:"gap-2 hidden md:flex","aria-label":"Copy profile URL to clipboard",children:j?t.jsxs(t.Fragment,{children:[t.jsx($,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{children:"Copied!"})]}):t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"h-4 w-4"}),t.jsx("span",{children:"Copy Link"})]})}),t.jsx(b,{variant:"outline",size:"sm",onClick:R,className:"md:hidden p-2","aria-label":"Share profile URL",children:j?t.jsx($,{className:"h-4 w-4 text-green-600"}):t.jsx(B,{className:"h-4 w-4"})})]}),t.jsx(i,{to:`/${d?.username||""}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-medium whitespace-nowrap min-h-[44px] flex items-center hidden sm:flex","aria-label":`View your public profile page as ${d?.username}`,children:"View Profile â†’"}),t.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-sm sm:text-base text-blue-600 font-semibold",children:(_=d?.full_name,_?_.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U")})})]})]})}),t.jsx("main",{id:"main-content",className:"p-4 sm:p-5 md:p-6 pb-24 sm:pb-24 md:pb-6 safe-area-inset-bottom",tabIndex:-1,children:t.jsx(r,{})})]}),t.jsx(F,{})]});var _}function q({to:e,icon:s,label:a,active:r}){return t.jsxs(i,{to:e,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(r?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[s,t.jsx("span",{children:a})]})}export{U as default};
