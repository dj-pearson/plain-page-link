import{u as e}from"./data-Hz84gFTE.js";import{s as r}from"./index-CbjSOmPL.js";const n=()=>{var n,i;const{data:s}=e({queryKey:["session"],queryFn:async()=>{const{data:e}=await r.auth.getSession();return e.session}}),{data:a,isLoading:t}=e({queryKey:["user-subscription",null==(n=null==s?void 0:s.user)?void 0:n.id],queryFn:async()=>{var e;if(!(null==(e=null==s?void 0:s.user)?void 0:e.id))return null;const{data:n,error:i}=await r.rpc("get_user_plan",{_user_id:s.user.id});if(i)throw i;return n},enabled:!!(null==(i=null==s?void 0:s.user)?void 0:i.id)}),{data:o}=e({queryKey:["subscription-plans"],queryFn:async()=>{const{data:e,error:n}=await r.from("subscription_plans").select("*").eq("is_active",!0).order("sort_order");if(n)throw n;return e}});return{subscription:a,plans:o,isLoading:t,checkLimit:(e,r)=>{if(!(null==a?void 0:a.limits))return r<3;const n=a.limits[e];return-1===n||void 0!==n&&r<n},hasFeature:e=>!!(null==a?void 0:a.features)&&!0===a.features[e],isPro:"professional"===(null==a?void 0:a.plan_name)||"team"===(null==a?void 0:a.plan_name)||"enterprise"===(null==a?void 0:a.plan_name),isTeam:"team"===(null==a?void 0:a.plan_name)||"enterprise"===(null==a?void 0:a.plan_name)}};export{n as u};
