import{j as e}from"./ui-vendor-CfJXqRNY.js";import{b as d,u as k,j as L,L as y,O as Y}from"./react-vendor-J1CWpfuS.js";import{a1 as S,l as C,O as p,H as A,V as O,a4 as P,ai as E,a8 as q,a9 as W,aj as _,aa as H,S as D,Z as T,U as M,ak as Q,al as R,J as U,u as Z,am as J,B as w,g as N,af as G,an as K}from"./index-D2pWWD8v.js";import{L as F}from"./link-BjSkPJjo.js";import{F as I}from"./file-text-DCmjezaa.js";import{W as $}from"./workflow-BfsM3Yaw.js";import{P as B}from"./palette-CI3yW_eU.js";import{S as z}from"./settings-CqXm5unG.js";import{L as V}from"./log-out-BKwYzu0n.js";import{C as X}from"./copy-CjzaPtfb.js";import"./supabase-Cz6j5Lvp.js";import"./three-vendor-D7cCqkiR.js";import"./state-vendor-CLv4ylJ5.js";import"./charts-vendor-CEquIWeD.js";import"./date-vendor-Xm6TBh54.js";import"./form-vendor-DMOe4tsc.js";import"./animation-vendor-BZ61rGB5.js";const ee=S("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ae=S("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);function se({threshold:n=10,throttleMs:o=100,initialVisible:r=!0,topThreshold:x=100}={}){const[j,c]=d.useState("none"),[h,u]=d.useState(r),[s,g]=d.useState(0),f=d.useRef(0),b=d.useRef(0),t=d.useRef(!1),a=d.useCallback(()=>{const l=window.scrollY,v=l-f.current;if(g(l),l<x){u(!0),c("none"),f.current=l,t.current=!1;return}if(Math.abs(v)<n){t.current=!1;return}v>0?(c("down"),u(!1)):(c("up"),u(!0)),f.current=l,t.current=!1},[n,x]),m=d.useCallback(()=>{const l=Date.now();if(l-b.current<o){t.current||(t.current=!0,requestAnimationFrame(()=>{a()}));return}b.current=l,a()},[o,a]);return d.useEffect(()=>(f.current=window.scrollY,g(window.scrollY),window.addEventListener("scroll",m,{passive:!0}),()=>{window.removeEventListener("scroll",m)}),[m]),{scrollDirection:j,isVisible:h,scrollY:s,isAtTop:s<x}}function te(){const n=k(),o=L(),{profile:r,signOut:x,role:j}=C(),[c,h]=d.useState(!1),{isVisible:u}=se({threshold:15,topThreshold:50}),s=[{label:"Home",icon:A,href:"/dashboard"},{label:"Listings",icon:ae,href:"/dashboard/listings"},{label:"Leads",icon:O,href:"/dashboard/leads"},{label:"Analytics",icon:P,href:"/dashboard/analytics"}],g=[{label:"Testimonials",icon:D,href:"/dashboard/testimonials"},{label:"Custom Links",icon:F,href:"/dashboard/links"},{label:"Quick Actions",icon:T,href:"/dashboard/quick-actions"},{label:"Page Builder",icon:I,href:"/dashboard/page-builder"},{label:"Workflows",icon:$,href:"/dashboard/workflows"},{label:"Profile",icon:M,href:"/dashboard/profile"},{label:"Theme",icon:B,href:"/dashboard/theme"},{label:"Settings",icon:z,href:"/dashboard/settings"}],f=async()=>{h(!1),await x(),o("/auth/login")},b=a=>{h(!1),o(a)},t=a=>n.pathname===a||n.pathname.startsWith(a+"/");return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:p("fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden safe-area-inset-bottom shadow-lg","transition-transform duration-300 ease-out",u||c?"translate-y-0":"translate-y-full"),"aria-label":"Mobile navigation",children:e.jsxs("div",{className:"flex justify-around items-center h-16 px-1",children:[s.map(a=>{const m=t(a.href),l=a.icon;return e.jsxs(y,{to:a.href,className:p("flex flex-col items-center justify-center flex-1 h-full relative","transition-all duration-200 rounded-lg mx-0.5","min-w-[44px] min-h-[44px]","active:scale-95 active:bg-gray-100",m?"text-primary bg-primary/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":a.label,"aria-current":m?"page":void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:p("w-6 h-6 transition-transform",m&&"scale-110")}),a.badge&&a.badge>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold animate-pulse","aria-label":`${a.badge} unread`,children:a.badge>99?"99+":a.badge})]}),e.jsx("span",{className:p("text-xs mt-1 font-medium transition-all",m&&"font-semibold"),children:a.label})]},a.href)}),e.jsxs("button",{onClick:()=>h(!0),className:p("flex flex-col items-center justify-center flex-1 h-full relative","transition-all duration-200 rounded-lg mx-0.5","min-w-[44px] min-h-[44px]","active:scale-95 active:bg-gray-100","text-gray-600 hover:text-gray-900 hover:bg-gray-50"),"aria-label":"Open menu with more options","aria-expanded":c,children:[e.jsx(E,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs mt-1 font-medium",children:"More"})]})]})}),e.jsx(q,{open:c,onOpenChange:h,children:e.jsxs(W,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(_,{children:e.jsx(H,{children:"Menu"})}),e.jsxs("div",{className:"space-y-1 py-2",children:[e.jsxs(y,{to:`/${r?.username||""}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-3 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors min-h-[44px]",onClick:()=>h(!1),children:[e.jsx(Q,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:"View My Public Profile"}),e.jsx("p",{className:"text-xs text-gray-500",children:"See how visitors see your page"})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),j==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b("/admin"),className:p("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors w-full text-left min-h-[44px]",t("/admin")?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(R,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{children:"Admin Panel"}),e.jsx(U,{variant:"secondary",className:"text-xs",children:"ROOT"})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"})]}),g.map(a=>{const m=a.icon,l=t(a.href);return e.jsxs("button",{onClick:()=>b(a.href),className:p("flex items-center gap-3 px-3 py-3 rounded-lg transition-colors w-full text-left min-h-[44px]",l?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(m,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:a.label})]},a.href)}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:f,className:"flex items-center gap-3 px-3 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full text-left min-h-[44px]",children:[e.jsx(V,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:"Log Out"})]})]})]})})]})}function re({href:n="#main-content",children:o="Skip to main content"}){return e.jsx("a",{href:n,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-lg focus:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:o})}function we(){const n=k(),o=L(),{profile:r,signOut:x,role:j}=C(),{toast:c}=Z(),[h,u]=d.useState(!1),s=t=>n.pathname===t,g=async()=>{await x(),o("/auth/login")},f=t=>t?t.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):"U",b=async()=>{if(!r?.username)return;const t=`${window.location.origin}/${r.username}`;try{navigator.share&&/mobile|android|ios|iphone|ipad/i.test(navigator.userAgent)?(await navigator.share({title:`${r.full_name||"My"} AgentBio Profile`,url:t}),c({title:"Shared!",description:"Profile link shared successfully"})):(await navigator.clipboard.writeText(t),u(!0),c({title:"Copied!",description:"Profile link copied to clipboard"}),setTimeout(()=>u(!1),2e3))}catch(a){K.error("Failed to copy/share profile URL",a),c({title:"Failed to copy",description:"Please try again",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(re,{}),e.jsxs("aside",{className:"hidden md:fixed md:block left-0 top-0 h-full w-64 bg-white border-r border-gray-200 z-40",role:"navigation","aria-label":"Main navigation",children:[e.jsx("div",{className:"p-6",children:e.jsxs(y,{to:"/",className:"flex items-center gap-2 text-xl font-bold text-gray-900",children:[e.jsx(A,{className:"h-6 w-6 text-blue-600"}),"AgentBio.net"]})}),e.jsxs("nav",{className:"px-3 space-y-1",children:[e.jsx(i,{to:"/dashboard",icon:e.jsx(ee,{className:"h-5 w-5"}),label:"Dashboard",active:s("/dashboard")}),e.jsx(i,{to:"/dashboard/listings",icon:e.jsx(J,{className:"h-5 w-5"}),label:"Listings",active:s("/dashboard/listings")}),e.jsx(i,{to:"/dashboard/leads",icon:e.jsx(O,{className:"h-5 w-5"}),label:"Leads",active:s("/dashboard/leads")}),e.jsx(i,{to:"/dashboard/testimonials",icon:e.jsx(D,{className:"h-5 w-5"}),label:"Testimonials",active:s("/dashboard/testimonials")}),e.jsx(i,{to:"/dashboard/links",icon:e.jsx(F,{className:"h-5 w-5"}),label:"Custom Links",active:s("/dashboard/links")}),e.jsx(i,{to:"/dashboard/analytics",icon:e.jsx(P,{className:"h-5 w-5"}),label:"Analytics",active:s("/dashboard/analytics")}),e.jsx(i,{to:"/dashboard/quick-actions",icon:e.jsx(T,{className:"h-5 w-5"}),label:"Quick Actions",active:s("/dashboard/quick-actions")}),e.jsx(i,{to:"/dashboard/page-builder",icon:e.jsx(I,{className:"h-5 w-5"}),label:"Page Builder",active:s("/dashboard/page-builder")}),e.jsx(i,{to:"/dashboard/workflows",icon:e.jsx($,{className:"h-5 w-5"}),label:"Workflows",active:s("/dashboard/workflows")}),e.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-200",children:[j==="admin"&&e.jsx(i,{to:"/admin",icon:e.jsx(R,{className:"h-5 w-5"}),label:e.jsxs("div",{className:"flex items-center gap-2",children:["Admin",e.jsx(U,{variant:"secondary",className:"text-xs",children:"ROOT"})]}),active:s("/admin")}),e.jsx(i,{to:"/dashboard/profile",icon:e.jsx(M,{className:"h-5 w-5"}),label:"Profile",active:s("/dashboard/profile")}),e.jsx(i,{to:"/dashboard/theme",icon:e.jsx(B,{className:"h-5 w-5"}),label:"Theme",active:s("/dashboard/theme")}),e.jsx(i,{to:"/dashboard/settings",icon:e.jsx(z,{className:"h-5 w-5"}),label:"Settings",active:s("/dashboard/settings")})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:e.jsxs("button",{onClick:g,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 w-full px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{children:"Log Out"})]})})]}),e.jsxs("div",{className:"md:ml-64 min-h-screen",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-30 safe-area-inset-top",role:"banner",children:e.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between gap-2 sm:gap-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[r?.username&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outline",size:"sm",onClick:b,className:"gap-2 hidden md:flex","aria-label":"Copy profile URL to clipboard",children:h?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy Link"})]})}),e.jsx(w,{variant:"outline",size:"sm",onClick:b,className:"md:hidden p-2","aria-label":"Share profile URL",children:h?e.jsx(N,{className:"h-4 w-4 text-green-600"}):e.jsx(G,{className:"h-4 w-4"})})]}),e.jsx(y,{to:`/${r?.username||""}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-medium whitespace-nowrap min-h-[44px] flex items-center hidden sm:flex","aria-label":`View your public profile page as ${r?.username}`,children:"View Profile â†’"}),e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",role:"img","aria-label":`Profile avatar for ${r?.full_name||"user"}`,children:e.jsx("span",{className:"text-sm sm:text-base text-blue-600 font-semibold","aria-hidden":"true",children:f(r?.full_name)})})]})]})}),e.jsx("main",{id:"main-content",className:"p-4 sm:p-5 md:p-6 pb-24 sm:pb-24 md:pb-6 safe-area-inset-bottom",tabIndex:-1,children:e.jsx(Y,{})})]}),e.jsx(te,{})]})}function i({to:n,icon:o,label:r,active:x}){return e.jsxs(y,{to:n,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${x?"bg-blue-50 text-blue-600 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[o,e.jsx("span",{children:r})]})}export{we as default};
