import{j as e}from"./ui-components-cnQr7CF8-1762802164755.js";import{a as s}from"./react-vendor-CmKLYqnR-1762802164755.js";import{T as a,a as t,b as r,c as n}from"./tabs-D2xB4nZ2-1762802164755.js";import{o as i,L as l,i as c,j as o,k as d,l as m,m as u,B as x,n as h}from"./index-CJpEzai_-1762802164755.js";import{aN as g,a4 as p,T as v,b as j,U as f,D as N,ad as b,a5 as y,C as w,u as R,ab as M,e as C,O as L,B as $}from"./icons-DrcTsquU-1762802164755.js";import{e as V,a as T,u as S,s as k,d as D,g as F}from"./utils-BEAgWB1B-1762802164755.js";import"./three-addons-DjCF8854-1762802164755.js";import"./three-BxgHQpUo-1762802164755.js";import"./charts-wuw5sxMV-1762802164755.js";import"./data-CuF6D63I-1762802164755.js";import"./supabase-C2TWteSX-1762802164755.js";import"./forms-uHc451s7-1762802164755.js";function P({metrics:s,className:a}){return e.jsx("div",{className:i("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",a),children:s.map(s=>e.jsx(q,{metric:s},s.name))})}function q({metric:s}){return e.jsxs("div",{className:"bg-white p-6 rounded-lg border hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.name}),e.jsx("div",{className:i("p-2 rounded-full",(()=>{switch(s.trend){case"up":return"text-green-600 bg-green-100";case"down":return"text-red-600 bg-red-100";case"flat":return"text-gray-600 bg-gray-100"}})()),children:(()=>{switch(s.trend){case"up":return e.jsx(v,{className:"w-4 h-4"});case"down":return e.jsx(p,{className:"w-4 h-4"});case"flat":return e.jsx(g,{className:"w-4 h-4"})}})()})]}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"$"===s.unit?`$${s.value.toLocaleString()}`:"%"===s.unit?`${s.value.toFixed(1)}%`:"min"===s.unit?`${Math.round(s.value)} min`:s.value.toLocaleString()})}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[e.jsxs("span",{className:i("text-sm font-medium","up"===s.trend?"text-green-600":"down"===s.trend?"text-red-600":"text-gray-600"),children:[s.change>0?"+":"",s.change.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"vs last period"})]}),s.benchmark&&e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Benchmark: ","$"===s.unit?"$":"",s.benchmark.toLocaleString(),"%"===s.unit?"%":""]})})]})}function O({data:a,title:t,color:r="#2563eb",height:n=300,showPredictions:i=!1,className:l}){const{actualData:c,predictedData:o,maxValue:d,minValue:m}=s.useMemo(()=>{const e=a.filter(e=>!e.label),s=a.filter(e=>"predicted"===e.label),t=a.map(e=>e.value);return{actualData:e,predictedData:s,maxValue:Math.max(...t),minValue:Math.min(...t)}},[a]),u=e=>{const s=n-40;return 20+s-(e-m)/(d-m||1)*s},x=(e,s)=>40+e/(s-1)*720,h=(e,s=!1)=>{if(0===e.length)return"";return e.map((s,a)=>({x:x(a,e.length),y:u(s.value)})).map((e,s)=>`${0===s?"M":"L"} ${e.x} ${e.y}`).join(" ")};return e.jsxs("div",{className:l,children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t}),e.jsxs("svg",{width:"100%",height:n,viewBox:"0 0 800 300",className:"bg-white rounded-lg border",children:[e.jsx("g",{className:"grid-lines",children:[0,25,50,75,100].map(s=>{const a=20+s/100*(n-40);return e.jsxs("g",{children:[e.jsx("line",{x1:40,y1:a,x2:760,y2:a,stroke:"#e5e7eb",strokeWidth:1}),e.jsx("text",{x:25,y:a+4,fontSize:10,fill:"#6b7280",textAnchor:"end",children:Math.round(d-s/100*(d-m))})]},s)})}),e.jsx("path",{d:(e=>{if(0===e.length)return"";const s=h(e),a=x(e.length-1,e.length),t=x(0,e.length),r=n-20;return`${s} L ${a} ${r} L ${t} ${r} Z`})(c),fill:r,fillOpacity:.1}),e.jsx("path",{d:h(c),fill:"none",stroke:r,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),i&&o.length>0&&e.jsx("path",{d:h(o),fill:"none",stroke:r,strokeWidth:2,strokeDasharray:"5,5",strokeOpacity:.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.map((s,a)=>e.jsx("circle",{cx:x(a,c.length),cy:u(s.value),r:4,fill:"white",stroke:r,strokeWidth:2},a)),e.jsx("g",{className:"x-axis-labels",children:c.map((s,a)=>a%Math.ceil(c.length/7)===0?e.jsx("text",{x:x(a,c.length),y:n-5,fontSize:10,fill:"#6b7280",textAnchor:"middle",children:s.date},a):null)})]}),i&&o.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:r}}),e.jsx("span",{children:"Actual"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:r,opacity:.5,borderTop:`2px dashed ${r}`}}),e.jsx("span",{children:"Predicted"})]})]})]})}function A({stages:s,className:a}){const t=s[0]?.count||1;return e.jsxs("div",{className:i("bg-white p-6 rounded-lg border",a),children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Conversion Funnel"}),e.jsx("div",{className:"space-y-2",children:s.map((a,r)=>e.jsxs("div",{children:[e.jsx(_,{stage:a,maxCount:t,isFirst:0===r,isLast:r===s.length-1}),!isLast&&void 0!==a.dropoff&&a.dropoff>0&&e.jsx(I,{count:a.dropoff,percentage:B(a,s[r+1])})]},a.name))}),e.jsxs("div",{className:"mt-6 pt-6 border-t grid grid-cols-3 gap-4",children:[e.jsx(z,{label:"Overall Conversion",value:`${s[s.length-1].percentage.toFixed(1)}%`}),e.jsx(z,{label:"Total Conversions",value:s[s.length-1].count.toLocaleString()}),e.jsx(z,{label:"Total Dropoff",value:U(s).toLocaleString()})]})]})}function _({stage:s,maxCount:a,isFirst:t,isLast:r}){const n=s.count/a*100;return e.jsx("div",{className:"relative",children:e.jsx("div",{className:i("relative mx-auto rounded-lg p-4 transition-all duration-300 hover:shadow-md",s.percentage>=75?"bg-green-500":s.percentage>=50?"bg-yellow-500":s.percentage>=25?"bg-orange-500":"bg-red-500"),style:{width:`${Math.max(n,20)}%`},children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm opacity-90",children:[s.count.toLocaleString()," leads"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[s.percentage.toFixed(1),"%"]}),!t&&e.jsx("p",{className:"text-xs opacity-90",children:"of total"})]})]})})})}function I({count:s,percentage:a}){return e.jsx("div",{className:"flex items-center justify-center py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(j,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-medium text-red-600",children:s.toLocaleString()})," ","dropped off (",a.toFixed(1),"%)"]})]})})}function z({label:s,value:a}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]})}function B(e,s){return 0===e.count?0:(e.count-s.count)/e.count*100}function U(e){return e.length<2?0:e[0].count-e[e.length-1].count}function E({sources:s,className:a}){const t=s.reduce((e,s)=>e+s.leads,0),r=s.reduce((e,s)=>e+s.revenue,0),n=[...s].sort((e,s)=>s.conversionRate-e.conversionRate);return e.jsxs("div",{className:i("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lead Sources"}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),t," leads"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),"$",r.toLocaleString()]})]})]}),e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsx(G,{source:s,totalLeads:t},s.source))}),0===n.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(b,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No lead source data available"})]})]})}function G({source:s,totalLeads:a}){const t=s.leads/a*100;return e.jsxs("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 capitalize",children:s.source}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:i("text-lg font-bold",(r=s.conversionRate,r>=20?"text-green-600":r>=10?"text-yellow-600":"text-gray-600")),children:[s.conversionRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"conversion"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Lead share"}),e.jsxs("span",{className:"font-medium",children:[t.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 transition-all duration-500",style:{width:`${t}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Leads"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.leads})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversions"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.conversions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",s.revenue.toLocaleString()]})]})]}),void 0!==s.roi&&e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ROI"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:i("font-semibold",s.roi>0?"text-green-600":"text-red-600"),children:[s.roi>0?"+":"",s.roi.toFixed(1),"%"]})]})]})]});var r}function W({insights:s,className:a}){return e.jsxs("div",{className:i("bg-white p-6 rounded-lg border",a),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(y,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Key Insights"})]}),e.jsx("div",{className:"space-y-3",children:s.map((s,a)=>e.jsx(K,{insight:s},a))}),0===s.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No insights available yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Check back when you have more data"})]})]})}function K({insight:s}){return e.jsx("div",{className:i("p-4 rounded-lg border",s.includes("ðŸ“ˆ")||s.includes("ðŸš€")||s.includes("ðŸŽ¯")?"bg-green-50 border-green-200":s.includes("âš ï¸")||s.includes("ðŸŒ")?"bg-orange-50 border-orange-200":s.includes("âš¡")||s.includes("ðŸŒŸ")?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:s.includes("ðŸ“ˆ")||s.includes("ðŸš€")||s.includes("ðŸŽ¯")?e.jsx(v,{className:"w-5 h-5 text-green-600"}):s.includes("âš ï¸")||s.includes("ðŸŒ")?e.jsx(w,{className:"w-5 h-5 text-orange-600"}):s.includes("âš¡")||s.includes("ðŸŒŸ")?e.jsx(R,{className:"w-5 h-5 text-blue-600"}):e.jsx(y,{className:"w-5 h-5 text-yellow-600"})}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:s})]})})}class Q{static calculateKPIs(e,s){return[this.createMetric("Total Page Views",e.pageViews,"",s.pageViews),this.createMetric("Unique Visitors",e.uniqueVisitors,"",s.uniqueVisitors),this.createMetric("Total Leads",e.leads,"",s.leads),this.createMetric("Conversions",e.conversions,"",s.conversions),this.createMetric("Revenue",e.revenue,"$",s.revenue),this.createMetric("Avg Response Time",e.avgResponseTime,"min",s.avgResponseTime,!0),this.createMetric("Conversion Rate",this.calculateConversionRate(e.leads,e.conversions),"%",this.calculateConversionRate(s.leads,s.conversions)),this.createMetric("Lead-to-Visitor Rate",this.calculateConversionRate(e.uniqueVisitors,e.leads),"%",this.calculateConversionRate(s.uniqueVisitors,s.leads))]}static createMetric(e,s,a,t,r=!1){const n=this.calculatePercentageChange(s,t);return{name:e,value:s,unit:a,change:n,trend:this.determineTrend(n,r)}}static calculatePercentageChange(e,s){return 0===s?e>0?100:0:(e-s)/s*100}static determineTrend(e,s=!1){return Math.abs(e)<2?"flat":s?e<0?"up":"down":e>0?"up":"down"}static calculateConversionRate(e,s){return 0===e?0:s/e*100}static generateTimeSeries(e,s,a){return V({start:e,end:s}).map(e=>({date:T(e,"MMM d"),value:a(e)}))}static calculateFunnel(e){const{visitors:s,viewed:a,contacted:t,qualified:r,converted:n}=e;return[{name:"Visitors",count:s,percentage:100},{name:"Viewed Listing",count:a,percentage:this.calculateConversionRate(s,a),dropoff:s-a},{name:"Contacted",count:t,percentage:this.calculateConversionRate(s,t),dropoff:a-t},{name:"Qualified",count:r,percentage:this.calculateConversionRate(s,r),dropoff:t-r},{name:"Converted",count:n,percentage:this.calculateConversionRate(s,n),dropoff:r-n}]}static analyzeLeadSources(e){return e.map(e=>({source:e.source,leads:e.leads,conversions:e.conversions,conversionRate:this.calculateConversionRate(e.leads,e.conversions),revenue:e.revenue,roi:e.cost?(e.revenue-e.cost)/e.cost*100:void 0}))}static rankListings(e){return e.map(e=>({...e,conversionRate:this.calculateConversionRate(e.views,e.leads)})).sort((e,s)=>s.conversionRate-e.conversionRate)}static predictTrend(e,s=7){if(e.length<2)return[];const a=e.length,t=e.map((e,s)=>s),r=e.map(e=>e.value),n=t.reduce((e,s)=>e+s,0),i=r.reduce((e,s)=>e+s,0),l=(a*t.reduce((e,s,a)=>e+s*r[a],0)-n*i)/(a*t.reduce((e,s)=>e+s*s,0)-n*n),c=(i-l*n)/a,o=[],d=new Date(e[e.length-1].date);for(let m=1;m<=s;m++){const e=a+m-1,s=Math.max(0,Math.round(l*e+c)),t=new Date(d);t.setDate(t.getDate()+m),o.push({date:T(t,"MMM d"),value:s,label:"predicted"})}return o}static calculateEngagementScore(e){const{avgTimeOnPage:s,bounceRate:a,pagesPerSession:t,returnVisitorRate:r}=e,n=Math.min(s/180*25,25),i=Math.max((100-a)/4,0),l=Math.min(t/5*25,25),c=r/100*25;return Math.round(n+i+l+c)}static generateInsights(e,s,a){const t=[],r=this.calculatePercentageChange(e.leads,s.leads);r>20?t.push(`ðŸ“ˆ Lead generation is up ${Math.round(r)}% compared to last period`):r<-20&&t.push(`âš ï¸ Lead generation is down ${Math.abs(Math.round(r))}% - consider increasing marketing efforts`);const n=this.calculateConversionRate(e.leads,e.conversions);if(n>this.calculateConversionRate(s.leads,s.conversions)+5&&t.push(`ðŸŽ¯ Conversion rate improved to ${n.toFixed(1)}% - keep up the good work!`),e.avgResponseTime<5?t.push("âš¡ Excellent response time! You're responding in under 5 minutes"):e.avgResponseTime>60&&t.push(`ðŸŒ Response time is high (${Math.round(e.avgResponseTime)} min) - faster responses increase conversions`),a.length>0){const e=a.reduce((e,s)=>s.conversionRate>e.conversionRate?s:e);e.conversionRate>15&&t.push(`ðŸŒŸ ${e.source} is your best performing source at ${e.conversionRate.toFixed(1)}% conversion rate`)}const i=this.calculatePercentageChange(e.uniqueVisitors,s.uniqueVisitors);return i>30&&t.push(`ðŸš€ Traffic is surging! Up ${Math.round(i)}% - great time to capture leads`),t}static exportToCSV(e,s){if(0===e.length)return;const a=Object.keys(e[0]),t=[a.join(","),...e.map(e=>a.map(s=>JSON.stringify(e[s]||"")).join(","))].join("\n"),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),i=URL.createObjectURL(r);n.setAttribute("href",i),n.setAttribute("download",`${s}_${Date.now()}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}const J=Q.calculateKPIs,Y=Q.generateTimeSeries,Z=Q.calculateFunnel,H=Q.analyzeLeadSources,X=Q.predictTrend,ee=Q.generateInsights,se=Q.exportToCSV;function ae({onGenerateReport:a,className:t}){const[r,n]=s.useState("leads"),[h,g]=s.useState("30d"),[p,v]=s.useState("csv"),[j,f]=s.useState(!1),N=()=>{const e=new Date;switch(h){case"7d":return{start:k(e,7),end:e};case"30d":default:return{start:k(e,30),end:e};case"90d":return{start:k(e,90),end:e};case"this_month":return{start:D(e),end:F(e)};case"last_month":const s=k(D(e),1);return{start:D(s),end:F(s)}}};return e.jsxs("div",{className:i("bg-white p-6 rounded-lg border",t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(M,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Custom Report Builder"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Report Type"}),e.jsxs(c,{value:r,onValueChange:e=>n(e),children:[e.jsx(o,{children:e.jsx(d,{})}),e.jsx(m,{children:[{value:"leads",label:"Leads Report"},{value:"listings",label:"Listings Performance"},{value:"conversions",label:"Conversion Analytics"},{value:"sources",label:"Lead Sources"},{value:"performance",label:"Overall Performance"}].map(s=>e.jsx(u,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Date Range"]}),e.jsxs(c,{value:h,onValueChange:e=>g(e),children:[e.jsx(o,{children:e.jsx(d,{})}),e.jsx(m,{children:[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"}].map(s=>e.jsx(u,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Export Format"}),e.jsxs(c,{value:p,onValueChange:e=>v(e),children:[e.jsx(o,{children:e.jsx(d,{})}),e.jsx(m,{children:[{value:"csv",label:"CSV"},{value:"pdf",label:"PDF (Coming Soon)",disabled:!0},{value:"excel",label:"Excel (Coming Soon)",disabled:!0}].map(s=>e.jsx(u,{value:s.value,disabled:s.disabled,children:s.label},s.value))})]})]}),e.jsxs(x,{onClick:async()=>{f(!0);try{const{start:e,end:s}=N(),t={reportType:r,dateRange:h,metrics:[],format:p,startDate:e,endDate:s},n=await a(t);if("csv"===p){const a=`${r}_report_${p(e,"yyyy-MM-dd")}_to_${p(s,"yyyy-MM-dd")}`;se(n,a),S.success("Report exported successfully!")}}catch(e){S.error("Failed to generate report")}finally{f(!1)}},disabled:j,className:"w-full gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),j?"Generating...":"Generate Report"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Report Preview"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Type: ",e.jsx("span",{className:"font-medium",children:r})]}),e.jsxs("p",{children:["Range:"," ",e.jsxs("span",{className:"font-medium",children:[p(N().start,"MMM d, yyyy")," ","-"," ",p(N().end,"MMM d, yyyy")]})]}),e.jsxs("p",{children:["Format:"," ",e.jsx("span",{className:"font-medium uppercase",children:p})]})]})]})]})}function te(){const[i,l]=s.useState(!0),{current:c,previous:o}=s.useMemo(()=>(()=>{const e=new Date;return{current:{pageViews:3542,uniqueVisitors:1876,leads:156,conversions:23,revenue:156e3,avgResponseTime:12,period:"month",startDate:k(e,30),endDate:e},previous:{pageViews:2890,uniqueVisitors:1520,leads:128,conversions:18,revenue:122e3,avgResponseTime:18,period:"month",startDate:k(e,60),endDate:k(e,30)}}})(),[]),d=s.useMemo(()=>(()=>{const e=new Date;return Y(k(e,30),e,s=>{const a=8*Math.random(),t=(s.getTime()-k(e,30).getTime())/2592e6;return Math.round(5+a+5*t)})})(),[]),m=s.useMemo(()=>X(d,7),[d]),u=[...d,...i?m:[]],x=s.useMemo(()=>J(c,o),[c,o]),g=s.useMemo(()=>Z({visitors:c.uniqueVisitors,viewed:Math.round(.7*c.uniqueVisitors),contacted:c.leads,qualified:Math.round(.4*c.leads),converted:c.conversions}),[c]),p=s.useMemo(()=>H([{source:"zillow",leads:45,conversions:12,revenue:85e3,cost:5e3},{source:"realtor",leads:38,conversions:8,revenue:62e3,cost:4e3},{source:"facebook",leads:32,conversions:5,revenue:38e3,cost:3500},{source:"google",leads:28,conversions:4,revenue:31e3,cost:4500},{source:"website",leads:25,conversions:3,revenue:28e3,cost:1e3},{source:"referral",leads:18,conversions:4,revenue:45e3,cost:0}]),[]),j=s.useMemo(()=>ee(c,o,p),[c,o,p]);return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your performance and gain insights"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(h,{variant:"outline",className:"px-4 py-2",children:"Last 30 Days"})})]}),e.jsx(P,{metrics:x}),e.jsxs(a,{defaultValue:"overview",className:"w-full",children:[e.jsxs(t,{className:"grid w-full grid-cols-4 max-w-2xl",children:[e.jsxs(r,{value:"overview",className:"gap-2",children:[e.jsx($,{className:"w-4 h-4"}),"Overview"]}),e.jsxs(r,{value:"funnel",className:"gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Funnel"]}),e.jsxs(r,{value:"sources",className:"gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Sources"]}),e.jsxs(r,{value:"reports",className:"gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Reports"]})]}),e.jsx(n,{value:"overview",className:"mt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(O,{data:u,title:"Lead Generation Trend",color:"#2563eb",showPredictions:i})}),e.jsx(W,{insights:j})]})}),e.jsx(n,{value:"funnel",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(A,{stages:g}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{insights:j}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Optimization Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Improve Viewed â†’ Contacted rate with clearer CTAs"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Reduce dropoff with faster response times"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Qualify leads better with targeted questions"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-primary",children:"â€¢"}),e.jsx("span",{children:"Nurture qualified leads with follow-ups"})]})]})]})]})]})}),e.jsx(n,{value:"sources",className:"mt-6",children:e.jsx(E,{sources:p})}),e.jsx(n,{value:"reports",className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Reports"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(re,{title:"Leads Report",description:"Detailed lead data with scores and sources",icon:e.jsx(f,{className:"w-6 h-6"})}),e.jsx(re,{title:"Performance Report",description:"Overall performance metrics and trends",icon:e.jsx(v,{className:"w-6 h-6"})}),e.jsx(re,{title:"Sources Report",description:"Lead source analysis with ROI",icon:e.jsx($,{className:"w-6 h-6"})}),e.jsx(re,{title:"Conversion Report",description:"Conversion funnel and rates",icon:e.jsx(v,{className:"w-6 h-6"})})]})]})}),e.jsx(ae,{onGenerateReport:async e=>{switch(await new Promise(e=>setTimeout(e,1e3)),e.reportType){case"leads":return Array.from({length:50},(e,s)=>({id:`L${s+1}`,name:`Lead ${s+1}`,email:`lead${s+1}@example.com`,source:p[s%p.length].source,status:["new","contacted","qualified","converted"][Math.floor(4*Math.random())],score:Math.floor(100*Math.random()),created:(new Date).toISOString()}));case"sources":return p.map(e=>({source:e.source,leads:e.leads,conversions:e.conversions,conversion_rate:`${e.conversionRate.toFixed(1)}%`,revenue:e.revenue,roi:e.roi?`${e.roi.toFixed(1)}%`:"N/A"}));default:return[{metric:"Page Views",current:c.pageViews,previous:o.pageViews,change:`${((c.pageViews-o.pageViews)/o.pageViews*100).toFixed(1)}%`},{metric:"Leads",current:c.leads,previous:o.leads,change:`${((c.leads-o.leads)/o.leads*100).toFixed(1)}%`},{metric:"Conversions",current:c.conversions,previous:o.conversions,change:`${((c.conversions-o.conversions)/o.conversions*100).toFixed(1)}%`}]}}})]})})]})]})}function re({title:s,description:a,icon:t}){return e.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:t}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:s}),e.jsx("p",{className:"text-sm text-gray-600",children:a})]})]})})}export{te as default};
