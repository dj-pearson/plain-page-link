import{j as e,v as s,w as a,x as t,y as l}from"./ui-components-DtyTDbSg.js";import{r}from"./react-vendor-B_Chv4nK.js";import{C as o,m as i,e as n,l as d,B as c,L as m,I as x,u as h,t as p,s as u,v as f,w as j,x as g,b as y,c as b,d as N,g as v,h as w,i as C,j as k,k as P}from"./index-DxTo7WPx.js";import{d as S,E as F,ag as z,ae as T,a2 as B}from"./icons-K_BhWJ_Z.js";import{T as E,a as O,b as A,c as D}from"./tabs-BI9P6yR1.js";import{u as L}from"./use-toast-BIxl6y56.js";import{u as H,U as R}from"./UpgradeModal-CFOSkjmS.js";import"./three-t2PEh41g.js";import"./charts-CeHnXkIf.js";import"./utils-D6PrBqaA.js";import"./data-ChU7VID-.js";import"./supabase-D4JaKbf_.js";import"./forms-yc2f2ZZT.js";function q({theme:s,isSelected:a,onSelect:t,onPreview:l}){return e.jsxs(o,{className:i("relative cursor-pointer transition-all hover:shadow-lg",a&&"ring-2 ring-primary"),onClick:()=>t(s),children:[a&&e.jsx("div",{className:"absolute top-2 right-2 z-10 w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4 text-white"})}),e.jsxs(n,{className:"p-0",children:[e.jsxs("div",{className:"h-32 p-4 rounded-t-lg relative overflow-hidden",style:{backgroundColor:s.colors.background},children:[s.has3D&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-pink-500/10 animate-pulse"}),e.jsxs("div",{className:"flex items-start gap-2 mb-3 relative z-10",children:[e.jsx("div",{className:"w-16 h-16 rounded-full",style:{backgroundColor:s.colors.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 rounded",style:{backgroundColor:s.colors.foreground,opacity:.8,width:"70%"}}),e.jsx("div",{className:"h-2 rounded",style:{backgroundColor:s.colors.muted,width:"90%"}})]})]}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.primary},title:"Primary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.secondary},title:"Secondary"}),e.jsx("div",{className:"w-8 h-8 rounded",style:{backgroundColor:s.colors.accent},title:"Accent"})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[s.isPremium&&e.jsx(d,{variant:"secondary",className:"text-xs",children:"Pro"}),s.has3D&&e.jsx(d,{variant:"outline",className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:"3D"})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Fonts:"})," ",s.fonts.heading,s.fonts.heading!==s.fonts.body&&` / ${s.fonts.body}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:a?"default":"outline",size:"sm",className:"flex-1",onClick:e=>{e.stopPropagation(),t(s)},children:a?"Selected":"Apply"}),l&&e.jsx(c,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),l(s)},children:"Preview"})]})]})]})]})}const M=s,Y=a,$=r.forwardRef(({className:s,align:a="center",sideOffset:r=4,...o},n)=>e.jsx(t,{children:e.jsx(l,{ref:n,align:a,sideOffset:r,className:i("z-50 w-72 rounded-md border border-gray-200 bg-white p-4 text-gray-900 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})}));$.displayName=l.displayName;const _=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#1F2937","#6B7280"];function I({label:s,value:a,onChange:t,description:l}){const[o,i]=r.useState(!1),n=e=>{t(e)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:s,children:s}),l&&e.jsx("p",{className:"text-xs text-muted-foreground",children:l}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{open:o,onOpenChange:i,children:[e.jsx(Y,{asChild:!0,children:e.jsx(c,{variant:"outline",className:"w-12 h-10 p-0 border-2",style:{backgroundColor:a},"aria-label":`Pick ${s}`})}),e.jsx($,{className:"w-64 p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Preset Colors"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:_.map(s=>e.jsx("button",{className:"w-10 h-10 rounded border-2 hover:scale-110 transition-transform",style:{backgroundColor:s},onClick:()=>{n(s),i(!1)},"aria-label":`Select ${s}`},s))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:a,onChange:e=>n(e.target.value),className:"w-12 h-10 rounded border cursor-pointer"}),e.jsx(x,{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"#000000",className:"flex-1 font-mono text-sm"})]})]})]})})]}),e.jsx(x,{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"#000000",className:"flex-1 font-mono"})]})]})}const V=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Playfair Display","Merriweather","Bebas Neue","Source Sans Pro"];function J(){const{toast:s}=L(),{user:a}=h(),[t,l]=r.useState(p()),[i,x]=r.useState(t.colors),[S,M]=r.useState(t.fonts),[Y,$]=r.useState(!1),[_,J]=r.useState(!1),[U,K]=r.useState(!1),{subscription:W}=H();r.useEffect(()=>{G()},[a]);const G=async()=>{if(a)try{const{data:e,error:s}=await u.from("profiles").select("theme").eq("id",a.id).single();if(s)throw s;if(null==e?void 0:e.theme){let s;if("string"==typeof e.theme)if(e.theme.startsWith("{"))s=JSON.parse(e.theme);else{s=f.find(s=>s.id===e.theme)||f[0]}else s=e.theme;l(s),x(s.colors),M(s.fonts),j(s)}}catch(e){const s=f[0];l(s),x(s.colors),M(s.fonts)}},Q=async e=>{e.isPremium&&"free"===(null==W?void 0:W.plan_name)?K(!0):(l(e),x(e.colors),M(e.fonts),$(!1),j(e))},X=(e,s)=>{x(a=>({...a,[e]:s})),$(!0)},Z=(e,s)=>{M(a=>({...a,[e]:s})),$(!0)},ee=f.filter(e=>!e.isPremium),se=f.filter(e=>e.isPremium);return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Theme Customization"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-0.5 sm:mt-1",children:"Customize your profile's look and feel"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:async()=>{if(a)try{const{data:e,error:s}=await u.from("profiles").select("username").eq("id",a.id).single();if(s)throw s;(null==e?void 0:e.username)&&window.open(`/${e.username}`,"_blank")}catch(e){s({title:"Error",description:"Failed to open preview",variant:"destructive"})}else s({title:"Error",description:"You must be logged in to preview",variant:"destructive"})},title:"Open your public profile in a new tab to see your theme",className:"flex-1 sm:flex-none",children:[e.jsx(F,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Preview Live"})]}),Y&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{x(t.colors),M(t.fonts),$(!1),s({title:"Reset to default",description:"Theme has been reset to its default settings."})},className:"flex-1 sm:flex-none",children:[e.jsx(z,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),e.jsxs(c,{size:"sm",onClick:async()=>{if(a){J(!0);try{const e={...t,colors:i,fonts:S},{error:l}=await u.from("profiles").update({theme:JSON.stringify(e)}).eq("id",a.id);if(l)throw l;j(e),s({title:"Theme saved!",description:"Your profile theme has been updated successfully."}),$(!1)}catch(e){s({title:"Error",description:"Failed to save theme. Please try again.",variant:"destructive"})}finally{J(!1)}}else s({title:"Error",description:"You must be logged in to save themes",variant:"destructive"})},disabled:_,className:"flex-1 sm:flex-none",children:[_?e.jsx(g,{size:"sm",className:"mr-2"}):e.jsx(T,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Save Theme"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border border-blue-200 dark:border-blue-900 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"text-xl sm:text-2xl flex-shrink-0",children:"âœ¨"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"How to see your theme changes:"}),e.jsxs("ol",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 space-y-0.5 sm:space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Select a theme below and click ",e.jsx("strong",{children:'"Save Theme"'})]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:'"Preview Live"'})," button above to open your public profile in a new tab"]}),e.jsx("li",{children:"Premium themes with 3D effects will show animated backgrounds on your public page!"})]}),e.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1 sm:mt-2",children:["ðŸ’¡ Note: Theme effects only appear on your ",e.jsx("strong",{children:"public profile page"}),", not in this dashboard."]})]})]})}),e.jsxs(E,{defaultValue:"presets",className:"space-y-6",children:[e.jsxs(O,{children:[e.jsxs(A,{value:"presets",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Theme Presets"]}),e.jsxs(A,{value:"customize",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Customize"]})]}),e.jsxs(D,{value:"presets",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Free Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:ee.map(s=>e.jsx(q,{theme:s,isSelected:t.id===s.id,onSelect:Q},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Premium Themes"}),e.jsx(d,{children:"Pro"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:se.map(s=>e.jsx(q,{theme:s,isSelected:t.id===s.id,onSelect:Q},s.id))})]})]}),e.jsxs(D,{value:"customize",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(o,{children:[e.jsxs(y,{className:"pb-3 sm:pb-4",children:[e.jsx(b,{className:"text-base sm:text-lg",children:"Colors"}),e.jsx(N,{className:"text-xs sm:text-sm",children:"Customize the color scheme of your profile"})]}),e.jsxs(n,{className:"space-y-3 sm:space-y-4",children:[e.jsx(I,{label:"Primary Color",value:i.primary,onChange:e=>X("primary",e),description:"Main brand color (buttons, links)"}),e.jsx(I,{label:"Secondary Color",value:i.secondary,onChange:e=>X("secondary",e),description:"Secondary accent color"}),e.jsx(I,{label:"Accent Color",value:i.accent,onChange:e=>X("accent",e),description:"Highlights and CTAs"}),e.jsx(I,{label:"Background Color",value:i.background,onChange:e=>X("background",e),description:"Page background"}),e.jsx(I,{label:"Text Color",value:i.foreground,onChange:e=>X("foreground",e),description:"Primary text color"})]})]}),e.jsxs(o,{children:[e.jsxs(y,{className:"pb-3 sm:pb-4",children:[e.jsx(b,{className:"text-base sm:text-lg",children:"Typography"}),e.jsx(N,{className:"text-xs sm:text-sm",children:"Select fonts for headings and body text"})]}),e.jsxs(n,{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"heading-font",children:"Heading Font"}),e.jsxs(v,{value:S.heading,onValueChange:e=>Z("heading",e),children:[e.jsx(w,{id:"heading-font",children:e.jsx(C,{})}),e.jsx(k,{children:V.map(s=>e.jsx(P,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for titles and headings"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"body-font",children:"Body Font"}),e.jsxs(v,{value:S.body,onValueChange:e=>Z("body",e),children:[e.jsx(w,{id:"body-font",children:e.jsx(C,{})}),e.jsx(k,{children:V.map(s=>e.jsx(P,{value:s,children:e.jsx("span",{style:{fontFamily:s},children:s})},s))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Font used for paragraphs and text"})]}),e.jsxs("div",{className:"mt-6 p-4 border rounded-lg space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Preview"}),e.jsx("h3",{className:"text-2xl font-bold",style:{fontFamily:S.heading,color:i.primary},children:"Your Profile Heading"}),e.jsx("p",{className:"text-sm",style:{fontFamily:S.body,color:i.foreground},children:"This is how your body text will appear on your profile. It should be readable and professional."})]})]})]})]}),e.jsxs(o,{children:[e.jsxs(y,{className:"pb-3 sm:pb-4",children:[e.jsx(b,{className:"text-base sm:text-lg",children:"Live Preview"}),e.jsx(N,{className:"text-xs sm:text-sm",children:"See how your theme will look on your profile"})]}),e.jsx(n,{children:e.jsxs("div",{className:"rounded-lg p-4 sm:p-8 space-y-3 sm:space-y-4",style:{backgroundColor:i.background},children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full",style:{backgroundColor:i.primary}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{fontFamily:S.heading,color:i.foreground},children:"Agent Name"}),e.jsx("p",{className:"text-sm",style:{fontFamily:S.body,color:i.mutedForeground},children:"RealtorÂ® | Luxury Home Specialist"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-lg text-white text-xs sm:text-sm font-medium min-h-[44px]",style:{backgroundColor:i.primary},children:"Primary"}),e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px]",style:{backgroundColor:i.secondary,color:"white"},children:"Secondary"}),e.jsx("button",{className:"px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium min-h-[44px]",style:{backgroundColor:i.accent,color:"white"},children:"Accent"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:i.card},children:[e.jsx("h4",{className:"font-semibold mb-2",style:{fontFamily:S.heading,color:i.cardForeground},children:"Property Card"}),e.jsx("p",{className:"text-sm",style:{fontFamily:S.body,color:i.mutedForeground},children:"This is how property cards will appear with your selected theme."})]})]})})]})]})]}),e.jsx(R,{open:U,onOpenChange:K,feature:"premium_themes",currentPlan:(null==W?void 0:W.plan_name)||"Free",requiredPlan:"Professional"})]})}export{J as default};
