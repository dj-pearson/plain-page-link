{"version":3,"file":"WorkflowBuilderPage-2p7pFrjp.js","sources":["../../node_modules/lucide-react/dist/esm/icons/code.js","../../node_modules/lucide-react/dist/esm/icons/git-branch.js","../../node_modules/lucide-react/dist/esm/icons/power-off.js","../../node_modules/lucide-react/dist/esm/icons/power.js","../../node_modules/lucide-react/dist/esm/icons/redo-2.js","../../node_modules/lucide-react/dist/esm/icons/settings-2.js","../../node_modules/lucide-react/dist/esm/icons/undo-2.js","../../node_modules/lucide-react/dist/esm/icons/variable.js","../../src/components/workflowBuilder/WorkflowNode.tsx","../../src/components/workflowBuilder/WorkflowCanvas.tsx","../../src/components/workflowBuilder/WorkflowNodePalette.tsx","../../src/types/workflow.ts","../../src/components/workflowBuilder/WorkflowNodeInspector.tsx","../../src/components/workflowBuilder/WorkflowToolbar.tsx","../../src/pages/dashboard/workflows/WorkflowBuilderPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Code = createLucideIcon(\"Code\", [\n  [\"polyline\", { points: \"16 18 22 12 16 6\", key: \"z7tu5w\" }],\n  [\"polyline\", { points: \"8 6 2 12 8 18\", key: \"1eg1df\" }]\n]);\n\nexport { Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst GitBranch = createLucideIcon(\"GitBranch\", [\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"3\", y2: \"15\", key: \"17qcm7\" }],\n  [\"circle\", { cx: \"18\", cy: \"6\", r: \"3\", key: \"1h7g24\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"path\", { d: \"M18 9a9 9 0 0 1-9 9\", key: \"n2h4wq\" }]\n]);\n\nexport { GitBranch as default };\n//# sourceMappingURL=git-branch.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst PowerOff = createLucideIcon(\"PowerOff\", [\n  [\"path\", { d: \"M18.36 6.64A9 9 0 0 1 20.77 15\", key: \"dxknvb\" }],\n  [\"path\", { d: \"M6.16 6.16a9 9 0 1 0 12.68 12.68\", key: \"1x7qb5\" }],\n  [\"path\", { d: \"M12 2v4\", key: \"3427ic\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { PowerOff as default };\n//# sourceMappingURL=power-off.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Power = createLucideIcon(\"Power\", [\n  [\"path\", { d: \"M12 2v10\", key: \"mnfbl\" }],\n  [\"path\", { d: \"M18.4 6.6a9 9 0 1 1-12.77.04\", key: \"obofu9\" }]\n]);\n\nexport { Power as default };\n//# sourceMappingURL=power.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Redo2 = createLucideIcon(\"Redo2\", [\n  [\"path\", { d: \"m15 14 5-5-5-5\", key: \"12vg1m\" }],\n  [\"path\", { d: \"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13\", key: \"19mnr4\" }]\n]);\n\nexport { Redo2 as default };\n//# sourceMappingURL=redo-2.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"Settings2\", [\n  [\"path\", { d: \"M20 7h-9\", key: \"3s1dr2\" }],\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Undo2 = createLucideIcon(\"Undo2\", [\n  [\"path\", { d: \"M9 14 4 9l5-5\", key: \"102s5s\" }],\n  [\"path\", { d: \"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11\", key: \"llx8ln\" }]\n]);\n\nexport { Undo2 as default };\n//# sourceMappingURL=undo-2.js.map\n","/**\n * @license lucide-react v0.354.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Variable = createLucideIcon(\"Variable\", [\n  [\"path\", { d: \"M8 21s-4-3-4-9 4-9 4-9\", key: \"uto9ud\" }],\n  [\"path\", { d: \"M16 3s4 3 4 9-4 9-4 9\", key: \"4w2vsq\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"9\", y2: \"15\", key: \"f7djnv\" }],\n  [\"line\", { x1: \"9\", x2: \"15\", y1: \"9\", y2: \"15\", key: \"1shsy8\" }]\n]);\n\nexport { Variable as default };\n//# sourceMappingURL=variable.js.map\n","import { memo } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport type { WorkflowNode as WorkflowNodeType } from \"@/types/workflow\";\nimport {\n  Play,\n  Mail,\n  MessageSquare,\n  Clock,\n  GitBranch,\n  Repeat,\n  Globe,\n  User,\n  Tag,\n  CheckSquare,\n  Zap,\n  Calendar,\n  Link,\n  Home,\n  Bell,\n  Filter,\n  Variable,\n  Code,\n} from \"lucide-react\";\n\ninterface WorkflowNodeProps {\n  node: WorkflowNodeType;\n  isSelected: boolean;\n  isConnecting: boolean;\n  onSelect: () => void;\n  onStartConnection: () => void;\n  onCompleteConnection: () => void;\n  onDragStart: (e: React.DragEvent) => void;\n}\n\nconst NODE_ICONS: Record<string, React.ComponentType<{ className?: string }>> = {\n  manual: Play,\n  schedule: Calendar,\n  webhook: Link,\n  lead_created: User,\n  lead_updated: User,\n  listing_created: Home,\n  listing_updated: Home,\n  send_email: Mail,\n  send_sms: MessageSquare,\n  update_lead: User,\n  create_task: CheckSquare,\n  webhook_call: Globe,\n  add_tag: Tag,\n  if_else: GitBranch,\n  switch: GitBranch,\n  filter: Filter,\n  wait: Clock,\n  wait_until: Calendar,\n  for_each: Repeat,\n  set_variable: Variable,\n  format_data: Code,\n};\n\nconst NODE_COLORS: Record<string, { bg: string; border: string; text: string }> = {\n  trigger: { bg: \"bg-green-50\", border: \"border-green-300\", text: \"text-green-700\" },\n  action: { bg: \"bg-blue-50\", border: \"border-blue-300\", text: \"text-blue-700\" },\n  condition: { bg: \"bg-amber-50\", border: \"border-amber-300\", text: \"text-amber-700\" },\n  delay: { bg: \"bg-purple-50\", border: \"border-purple-300\", text: \"text-purple-700\" },\n  loop: { bg: \"bg-teal-50\", border: \"border-teal-300\", text: \"text-teal-700\" },\n  transform: { bg: \"bg-pink-50\", border: \"border-pink-300\", text: \"text-pink-700\" },\n};\n\nexport const WorkflowNode = memo(\n  ({\n    node,\n    isSelected,\n    isConnecting,\n    onSelect,\n    onStartConnection,\n    onCompleteConnection,\n    onDragStart,\n  }: WorkflowNodeProps) => {\n    const Icon = NODE_ICONS[node.subtype] || Zap;\n    const colors = NODE_COLORS[node.type] || NODE_COLORS.action;\n\n    const handleMouseDown = (e: React.MouseEvent) => {\n      e.stopPropagation();\n      onSelect();\n    };\n\n    const handleConnectionPoint = (e: React.MouseEvent) => {\n      e.stopPropagation();\n      if (isConnecting) {\n        onCompleteConnection();\n      } else {\n        onStartConnection();\n      }\n    };\n\n    return (\n      <div\n        className={cn(\n          \"absolute cursor-grab active:cursor-grabbing\",\n          \"min-w-[180px] rounded-lg border-2 shadow-md transition-all\",\n          colors.bg,\n          colors.border,\n          isSelected && \"ring-2 ring-blue-500 ring-offset-2\",\n          isConnecting && \"ring-2 ring-green-400 ring-offset-1\"\n        )}\n        style={{\n          left: node.position.x,\n          top: node.position.y,\n        }}\n        onMouseDown={handleMouseDown}\n        draggable\n        onDragStart={onDragStart}\n      >\n        {/* Input connection point */}\n        {node.type !== \"trigger\" && (\n          <div\n            className={cn(\n              \"absolute -top-3 left-1/2 -translate-x-1/2\",\n              \"w-4 h-4 rounded-full bg-white border-2 border-gray-300\",\n              \"cursor-crosshair hover:border-green-500 hover:bg-green-50\",\n              \"transition-colors\"\n            )}\n            onClick={handleConnectionPoint}\n          />\n        )}\n\n        {/* Node content */}\n        <div className=\"p-3\">\n          <div className=\"flex items-center gap-2\">\n            <div\n              className={cn(\n                \"w-8 h-8 rounded-lg flex items-center justify-center\",\n                colors.text,\n                \"bg-white/50\"\n              )}\n            >\n              <Icon className=\"w-5 h-5\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"font-medium text-sm text-gray-900 truncate\">\n                {node.label}\n              </p>\n              <p className=\"text-xs text-gray-500 capitalize\">\n                {node.type}\n              </p>\n            </div>\n          </div>\n\n          {node.description && (\n            <p className=\"mt-2 text-xs text-gray-600 line-clamp-2\">\n              {node.description}\n            </p>\n          )}\n        </div>\n\n        {/* Output connection points */}\n        {node.type === \"condition\" ? (\n          <div className=\"flex justify-around pb-2\">\n            <div className=\"flex flex-col items-center gap-1\">\n              <span className=\"text-xs text-green-600 font-medium\">Yes</span>\n              <div\n                className={cn(\n                  \"w-4 h-4 rounded-full bg-white border-2 border-green-400\",\n                  \"cursor-crosshair hover:border-green-600 hover:bg-green-50\",\n                  \"transition-colors\"\n                )}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onStartConnection();\n                }}\n              />\n            </div>\n            <div className=\"flex flex-col items-center gap-1\">\n              <span className=\"text-xs text-red-600 font-medium\">No</span>\n              <div\n                className={cn(\n                  \"w-4 h-4 rounded-full bg-white border-2 border-red-400\",\n                  \"cursor-crosshair hover:border-red-600 hover:bg-red-50\",\n                  \"transition-colors\"\n                )}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onStartConnection();\n                }}\n              />\n            </div>\n          </div>\n        ) : (\n          <div\n            className={cn(\n              \"absolute -bottom-3 left-1/2 -translate-x-1/2\",\n              \"w-4 h-4 rounded-full bg-white border-2 border-gray-300\",\n              \"cursor-crosshair hover:border-green-500 hover:bg-green-50\",\n              \"transition-colors\"\n            )}\n            onClick={(e) => {\n              e.stopPropagation();\n              onStartConnection();\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nWorkflowNode.displayName = \"WorkflowNode\";\n\nexport default WorkflowNode;\n","import { useRef, useState, useCallback, useEffect } from \"react\";\nimport { useWorkflowBuilderStore } from \"@/stores/useWorkflowBuilderStore\";\nimport { WorkflowNode } from \"./WorkflowNode\";\nimport { cn } from \"@/lib/utils\";\nimport type { WorkflowNodeTemplate, WorkflowNode as WorkflowNodeType } from \"@/types/workflow\";\n\ninterface WorkflowCanvasProps {\n  className?: string;\n}\n\nexport const WorkflowCanvas = ({ className }: WorkflowCanvasProps) => {\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const {\n    workflow,\n    selectedNodeId,\n    isConnecting,\n    connectionStart,\n    selectNode,\n    addNode,\n    updateNode,\n    startConnection,\n    completeConnection,\n    cancelConnection,\n    addEdge,\n    updateViewport,\n  } = useWorkflowBuilderStore();\n\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [panStart, setPanStart] = useState<{ x: number; y: number } | null>(null);\n  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });\n\n  // Handle node drag within canvas\n  const handleNodeDrag = useCallback(\n    (nodeId: string, e: React.DragEvent) => {\n      if (!canvasRef.current) return;\n\n      const rect = canvasRef.current.getBoundingClientRect();\n      const x = e.clientX - rect.left - (workflow?.viewport.x || 0);\n      const y = e.clientY - rect.top - (workflow?.viewport.y || 0);\n\n      updateNode(nodeId, { position: { x, y } });\n    },\n    [workflow?.viewport, updateNode]\n  );\n\n  // Handle dropping new node from palette\n  const handleDrop = useCallback(\n    (e: React.DragEvent) => {\n      e.preventDefault();\n\n      if (!canvasRef.current) return;\n\n      const templateData = e.dataTransfer.getData(\"application/workflow-node\");\n      if (!templateData) return;\n\n      const template: WorkflowNodeTemplate = JSON.parse(templateData);\n\n      const rect = canvasRef.current.getBoundingClientRect();\n      const x = e.clientX - rect.left - (workflow?.viewport.x || 0) - 90; // Center node\n      const y = e.clientY - rect.top - (workflow?.viewport.y || 0) - 30;\n\n      addNode(template.type, template.subtype, { x, y }, template.defaultConfig);\n    },\n    [workflow?.viewport, addNode]\n  );\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"copy\";\n  };\n\n  // Handle canvas panning\n  const handleMouseDown = (e: React.MouseEvent) => {\n    // Only pan with middle mouse button or when clicking on canvas background\n    if (e.button === 1 || (e.button === 0 && e.target === canvasRef.current)) {\n      setPanStart({ x: e.clientX, y: e.clientY });\n      selectNode(null);\n    }\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    setMousePosition({ x: e.clientX, y: e.clientY });\n\n    if (panStart && canvasRef.current) {\n      const dx = e.clientX - panStart.x;\n      const dy = e.clientY - panStart.y;\n\n      updateViewport({\n        x: (workflow?.viewport.x || 0) + dx,\n        y: (workflow?.viewport.y || 0) + dy,\n      });\n\n      setPanStart({ x: e.clientX, y: e.clientY });\n    }\n  };\n\n  const handleMouseUp = () => {\n    setPanStart(null);\n    if (isConnecting) {\n      cancelConnection();\n    }\n  };\n\n  // Handle wheel zoom\n  const handleWheel = (e: React.WheelEvent) => {\n    if (e.ctrlKey || e.metaKey) {\n      e.preventDefault();\n\n      const delta = e.deltaY > 0 ? 0.9 : 1.1;\n      const currentZoom = workflow?.viewport.zoom || 1;\n      const newZoom = Math.max(0.25, Math.min(2, currentZoom * delta));\n\n      updateViewport({ zoom: newZoom });\n    }\n  };\n\n  // Draw edges as SVG paths\n  const renderEdges = () => {\n    if (!workflow) return null;\n\n    return workflow.edges.map((edge) => {\n      const sourceNode = workflow.nodes.find((n) => n.id === edge.source);\n      const targetNode = workflow.nodes.find((n) => n.id === edge.target);\n\n      if (!sourceNode || !targetNode) return null;\n\n      // Calculate edge positions\n      const sourceX = sourceNode.position.x + 90; // Center of node\n      const sourceY = sourceNode.position.y + 60; // Bottom of node\n      const targetX = targetNode.position.x + 90; // Center of node\n      const targetY = targetNode.position.y; // Top of node\n\n      // Create curved path\n      const midY = (sourceY + targetY) / 2;\n      const path = `M ${sourceX} ${sourceY} C ${sourceX} ${midY}, ${targetX} ${midY}, ${targetX} ${targetY}`;\n\n      return (\n        <g key={edge.id}>\n          <path\n            d={path}\n            stroke=\"#94a3b8\"\n            strokeWidth={2}\n            fill=\"none\"\n            className=\"transition-colors hover:stroke-blue-500\"\n          />\n          {/* Arrow head */}\n          <polygon\n            points={`${targetX},${targetY} ${targetX - 5},${targetY - 10} ${targetX + 5},${targetY - 10}`}\n            fill=\"#94a3b8\"\n          />\n          {/* Label */}\n          {edge.label && (\n            <text\n              x={(sourceX + targetX) / 2}\n              y={(sourceY + targetY) / 2 - 10}\n              textAnchor=\"middle\"\n              className=\"text-xs fill-gray-500\"\n            >\n              {edge.label}\n            </text>\n          )}\n        </g>\n      );\n    });\n  };\n\n  // Render connection line while connecting\n  const renderConnectionLine = () => {\n    if (!isConnecting || !connectionStart || !workflow || !canvasRef.current)\n      return null;\n\n    const sourceNode = workflow.nodes.find((n) => n.id === connectionStart);\n    if (!sourceNode) return null;\n\n    const rect = canvasRef.current.getBoundingClientRect();\n    const sourceX = sourceNode.position.x + 90;\n    const sourceY = sourceNode.position.y + 60;\n    const targetX = mousePosition.x - rect.left - (workflow.viewport.x || 0);\n    const targetY = mousePosition.y - rect.top - (workflow.viewport.y || 0);\n\n    const midY = (sourceY + targetY) / 2;\n    const path = `M ${sourceX} ${sourceY} C ${sourceX} ${midY}, ${targetX} ${midY}, ${targetX} ${targetY}`;\n\n    return (\n      <path\n        d={path}\n        stroke=\"#22c55e\"\n        strokeWidth={2}\n        strokeDasharray=\"5,5\"\n        fill=\"none\"\n      />\n    );\n  };\n\n  if (!workflow) {\n    return (\n      <div className={cn(\"flex items-center justify-center bg-gray-100\", className)}>\n        <p className=\"text-gray-500\">No workflow loaded</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={canvasRef}\n      className={cn(\n        \"relative overflow-hidden bg-gray-100\",\n        \"bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:20px_20px]\",\n        panStart && \"cursor-grabbing\",\n        className\n      )}\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onMouseLeave={handleMouseUp}\n      onWheel={handleWheel}\n    >\n      {/* Zoom indicator */}\n      <div className=\"absolute top-4 left-4 bg-white/80 backdrop-blur-sm rounded px-2 py-1 text-xs text-gray-500 z-10\">\n        {Math.round((workflow.viewport.zoom || 1) * 100)}%\n      </div>\n\n      {/* Canvas content with viewport transform */}\n      <div\n        className=\"absolute inset-0\"\n        style={{\n          transform: `translate(${workflow.viewport.x}px, ${workflow.viewport.y}px) scale(${workflow.viewport.zoom || 1})`,\n          transformOrigin: \"0 0\",\n        }}\n      >\n        {/* Edges SVG layer */}\n        <svg className=\"absolute inset-0 w-full h-full pointer-events-none\">\n          {renderEdges()}\n          {renderConnectionLine()}\n        </svg>\n\n        {/* Nodes */}\n        {workflow.nodes.map((node) => (\n          <WorkflowNode\n            key={node.id}\n            node={node}\n            isSelected={selectedNodeId === node.id}\n            isConnecting={isConnecting}\n            onSelect={() => selectNode(node.id)}\n            onStartConnection={() => startConnection(node.id)}\n            onCompleteConnection={() => completeConnection(node.id)}\n            onDragStart={(e) => {\n              e.dataTransfer.setData(\"text/plain\", node.id);\n            }}\n          />\n        ))}\n      </div>\n\n      {/* Empty state */}\n      {workflow.nodes.length === 0 && (\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n          <div className=\"text-center\">\n            <p className=\"text-gray-500 mb-2\">\n              Drag nodes from the palette to start building\n            </p>\n            <p className=\"text-sm text-gray-400\">\n              Start with a trigger node to define when your workflow runs\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WorkflowCanvas;\n","import { useState, useEffect } from \"react\";\nimport { useWorkflowBuilderStore } from \"@/stores/useWorkflowBuilderStore\";\nimport { cn } from \"@/lib/utils\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Play,\n  Mail,\n  MessageSquare,\n  Clock,\n  GitBranch,\n  Repeat,\n  Globe,\n  User,\n  Tag,\n  CheckSquare,\n  Zap,\n  Calendar,\n  Link,\n  Home,\n  Bell,\n  Filter,\n  Variable,\n  Code,\n  Search,\n  ChevronDown,\n  ChevronRight,\n} from \"lucide-react\";\nimport type { WorkflowNodeTemplate } from \"@/types/workflow\";\n\ninterface WorkflowNodePaletteProps {\n  onDragStart: (template: WorkflowNodeTemplate) => void;\n}\n\nconst ICON_MAP: Record<string, React.ComponentType<{ className?: string }>> = {\n  play: Play,\n  mail: Mail,\n  \"message-square\": MessageSquare,\n  clock: Clock,\n  \"git-branch\": GitBranch,\n  repeat: Repeat,\n  globe: Globe,\n  user: User,\n  tag: Tag,\n  \"check-square\": CheckSquare,\n  zap: Zap,\n  calendar: Calendar,\n  link: Link,\n  home: Home,\n  bell: Bell,\n  filter: Filter,\n  variable: Variable,\n  code: Code,\n};\n\nconst CATEGORY_ORDER = [\n  \"triggers\",\n  \"communication\",\n  \"crm\",\n  \"productivity\",\n  \"integrations\",\n  \"organization\",\n  \"logic\",\n  \"timing\",\n  \"data\",\n  \"iteration\",\n];\n\nconst CATEGORY_LABELS: Record<string, string> = {\n  triggers: \"Triggers\",\n  communication: \"Communication\",\n  crm: \"CRM\",\n  productivity: \"Productivity\",\n  integrations: \"Integrations\",\n  organization: \"Organization\",\n  logic: \"Logic\",\n  timing: \"Timing\",\n  data: \"Data\",\n  iteration: \"Iteration\",\n};\n\nexport const WorkflowNodePalette = ({ onDragStart }: WorkflowNodePaletteProps) => {\n  const { nodeTemplates, loadNodeTemplates } = useWorkflowBuilderStore();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(\n    new Set([\"triggers\"])\n  );\n\n  useEffect(() => {\n    loadNodeTemplates();\n  }, [loadNodeTemplates]);\n\n  // Group templates by category\n  const templatesByCategory = nodeTemplates.reduce((acc, template) => {\n    if (!acc[template.category]) {\n      acc[template.category] = [];\n    }\n    acc[template.category].push(template);\n    return acc;\n  }, {} as Record<string, WorkflowNodeTemplate[]>);\n\n  // Filter templates by search\n  const filteredCategories = Object.entries(templatesByCategory)\n    .map(([category, templates]) => ({\n      category,\n      templates: templates.filter(\n        (t) =>\n          t.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          t.description?.toLowerCase().includes(searchQuery.toLowerCase())\n      ),\n    }))\n    .filter((c) => c.templates.length > 0)\n    .sort(\n      (a, b) =>\n        CATEGORY_ORDER.indexOf(a.category) - CATEGORY_ORDER.indexOf(b.category)\n    );\n\n  const toggleCategory = (category: string) => {\n    const newExpanded = new Set(expandedCategories);\n    if (newExpanded.has(category)) {\n      newExpanded.delete(category);\n    } else {\n      newExpanded.add(category);\n    }\n    setExpandedCategories(newExpanded);\n  };\n\n  const handleDragStart = (\n    e: React.DragEvent,\n    template: WorkflowNodeTemplate\n  ) => {\n    e.dataTransfer.setData(\"application/workflow-node\", JSON.stringify(template));\n    e.dataTransfer.effectAllowed = \"copy\";\n    onDragStart(template);\n  };\n\n  return (\n    <div className=\"w-64 bg-white border-r flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"p-4 border-b\">\n        <h3 className=\"font-semibold text-gray-900 mb-2\">Workflow Nodes</h3>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Search nodes...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n          />\n        </div>\n      </div>\n\n      {/* Node list */}\n      <div className=\"flex-1 overflow-y-auto p-2\">\n        {filteredCategories.map(({ category, templates }) => {\n          const isExpanded =\n            expandedCategories.has(category) || searchQuery.length > 0;\n\n          return (\n            <div key={category} className=\"mb-2\">\n              <button\n                onClick={() => toggleCategory(category)}\n                className=\"w-full flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded\"\n              >\n                {isExpanded ? (\n                  <ChevronDown className=\"w-4 h-4\" />\n                ) : (\n                  <ChevronRight className=\"w-4 h-4\" />\n                )}\n                {CATEGORY_LABELS[category] || category}\n                <span className=\"ml-auto text-xs text-gray-400\">\n                  {templates.length}\n                </span>\n              </button>\n\n              {isExpanded && (\n                <div className=\"mt-1 space-y-1\">\n                  {templates.map((template) => {\n                    const Icon = ICON_MAP[template.icon] || Zap;\n\n                    return (\n                      <div\n                        key={template.id}\n                        draggable\n                        onDragStart={(e) => handleDragStart(e, template)}\n                        className={cn(\n                          \"flex items-center gap-2 px-3 py-2 rounded-lg\",\n                          \"cursor-grab active:cursor-grabbing\",\n                          \"border border-transparent hover:border-gray-200\",\n                          \"hover:bg-gray-50 transition-colors\",\n                          template.isPremium && \"opacity-75\"\n                        )}\n                        style={{\n                          borderLeftColor: template.color,\n                          borderLeftWidth: \"3px\",\n                        }}\n                      >\n                        <div\n                          className=\"w-8 h-8 rounded flex items-center justify-center\"\n                          style={{ backgroundColor: `${template.color}20` }}\n                        >\n                          <Icon\n                            className=\"w-4 h-4\"\n                            style={{ color: template.color }}\n                          />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm font-medium text-gray-900 truncate\">\n                            {template.name}\n                          </p>\n                          {template.description && (\n                            <p className=\"text-xs text-gray-500 truncate\">\n                              {template.description}\n                            </p>\n                          )}\n                        </div>\n                        {template.isPremium && (\n                          <span className=\"text-xs bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded\">\n                            Pro\n                          </span>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          );\n        })}\n\n        {filteredCategories.length === 0 && (\n          <p className=\"text-center text-sm text-gray-500 py-8\">\n            No nodes found\n          </p>\n        )}\n      </div>\n\n      {/* Help text */}\n      <div className=\"p-3 border-t bg-gray-50\">\n        <p className=\"text-xs text-gray-500 text-center\">\n          Drag nodes onto the canvas to build your workflow\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default WorkflowNodePalette;\n","/**\n * Workflow Builder Types\n * Type definitions for the visual workflow builder\n */\n\nexport type WorkflowNodeType =\n  | 'trigger'\n  | 'action'\n  | 'condition'\n  | 'delay'\n  | 'loop'\n  | 'transform';\n\nexport type WorkflowTriggerSubtype =\n  | 'manual'\n  | 'schedule'\n  | 'webhook'\n  | 'lead_created'\n  | 'lead_updated'\n  | 'lead_status_changed'\n  | 'listing_created'\n  | 'listing_updated'\n  | 'listing_sold'\n  | 'form_submitted'\n  | 'page_viewed'\n  | 'link_clicked'\n  | 'email_opened'\n  | 'email_clicked';\n\nexport type WorkflowActionSubtype =\n  | 'send_email'\n  | 'send_sms'\n  | 'update_lead'\n  | 'create_task'\n  | 'webhook_call'\n  | 'add_tag'\n  | 'remove_tag'\n  | 'assign_lead'\n  | 'update_listing';\n\nexport type WorkflowConditionSubtype =\n  | 'if_else'\n  | 'switch'\n  | 'filter';\n\nexport type WorkflowDelaySubtype =\n  | 'wait'\n  | 'wait_until';\n\nexport type WorkflowLoopSubtype =\n  | 'for_each';\n\nexport type WorkflowTransformSubtype =\n  | 'set_variable'\n  | 'format_data';\n\nexport interface WorkflowNodePosition {\n  x: number;\n  y: number;\n}\n\nexport interface WorkflowNode {\n  id: string;\n  type: WorkflowNodeType;\n  subtype: string;\n  label: string;\n  description?: string;\n  position: WorkflowNodePosition;\n  config: Record<string, any>;\n  outputs?: string[]; // For conditions with multiple outputs\n}\n\nexport interface WorkflowEdge {\n  id: string;\n  source: string;\n  target: string;\n  sourceHandle?: string; // For conditions: 'true' | 'false'\n  label?: string;\n}\n\nexport interface WorkflowViewport {\n  x: number;\n  y: number;\n  zoom: number;\n}\n\nexport interface WorkflowTriggerConfig {\n  type: WorkflowTriggerSubtype;\n  config: Record<string, any>;\n}\n\nexport interface Workflow {\n  id: string;\n  userId: string;\n  name: string;\n  description?: string;\n  category: WorkflowCategory;\n  nodes: WorkflowNode[];\n  edges: WorkflowEdge[];\n  viewport: WorkflowViewport;\n  isPublished: boolean;\n  isActive: boolean;\n  triggerConfig?: WorkflowTriggerConfig;\n  version: number;\n  executionCount: number;\n  successCount: number;\n  failureCount: number;\n  lastExecutedAt?: string;\n  tags: string[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport type WorkflowCategory =\n  | 'lead_management'\n  | 'listing_automation'\n  | 'marketing'\n  | 'notifications'\n  | 'integrations'\n  | 'general';\n\nexport interface WorkflowNodeTemplate {\n  id: string;\n  type: WorkflowNodeType;\n  subtype: string;\n  name: string;\n  description?: string;\n  icon: string;\n  category: string;\n  configSchema: Record<string, any>;\n  defaultConfig: Record<string, any>;\n  color: string;\n  isPremium?: boolean;\n}\n\nexport interface WorkflowExecution {\n  id: string;\n  workflowId: string;\n  userId: string;\n  workflowVersion: number;\n  status: WorkflowExecutionStatus;\n  triggerType: string;\n  triggerData: Record<string, any>;\n  context: Record<string, any>;\n  variables: Record<string, any>;\n  currentNodeId?: string;\n  completedNodes: string[];\n  startedAt?: string;\n  completedAt?: string;\n  timeoutAt?: string;\n  result?: Record<string, any>;\n  errorMessage?: string;\n  errorNodeId?: string;\n  createdAt: string;\n}\n\nexport type WorkflowExecutionStatus =\n  | 'pending'\n  | 'running'\n  | 'paused'\n  | 'completed'\n  | 'failed'\n  | 'cancelled'\n  | 'timeout';\n\nexport interface WorkflowExecutionStep {\n  id: string;\n  executionId: string;\n  nodeId: string;\n  nodeType: string;\n  nodeName?: string;\n  status: WorkflowStepStatus;\n  inputData: Record<string, any>;\n  outputData: Record<string, any>;\n  startedAt?: string;\n  completedAt?: string;\n  durationMs?: number;\n  errorMessage?: string;\n  errorDetails?: Record<string, any>;\n  retryCount: number;\n  maxRetries: number;\n  createdAt: string;\n}\n\nexport type WorkflowStepStatus =\n  | 'pending'\n  | 'running'\n  | 'completed'\n  | 'failed'\n  | 'skipped'\n  | 'waiting';\n\nexport interface WorkflowTemplate {\n  id: string;\n  name: string;\n  description?: string;\n  category: string;\n  nodes: WorkflowNode[];\n  edges: WorkflowEdge[];\n  triggerConfig?: WorkflowTriggerConfig;\n  icon?: string;\n  previewImageUrl?: string;\n  useCount: number;\n  rating: number;\n  ratingCount: number;\n  isPublic: boolean;\n  isPremium: boolean;\n  tags: string[];\n  createdBy?: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\n// UI-specific types\nexport interface DraggedNodeData {\n  type: WorkflowNodeType;\n  subtype: string;\n  template: WorkflowNodeTemplate;\n}\n\nexport interface WorkflowBuilderState {\n  workflow: Workflow | null;\n  selectedNodeId: string | null;\n  selectedEdgeId: string | null;\n  isDragging: boolean;\n  isPanningEnabled: boolean;\n  isConnecting: boolean;\n  connectionStart: string | null;\n  history: Workflow[];\n  historyIndex: number;\n  isSaving: boolean;\n  isExecuting: boolean;\n}\n\n// Node configuration schemas (for form generation)\nexport const NODE_CONFIG_SCHEMAS: Record<string, Record<string, any>> = {\n  send_email: {\n    to: { type: 'string', label: 'To', required: true, placeholder: '{{lead.email}}' },\n    subject: { type: 'string', label: 'Subject', required: true },\n    body: { type: 'textarea', label: 'Body', required: true },\n    template: { type: 'select', label: 'Template', options: [] },\n  },\n  send_sms: {\n    to: { type: 'string', label: 'To', required: true, placeholder: '{{lead.phone}}' },\n    message: { type: 'textarea', label: 'Message', required: true, maxLength: 160 },\n  },\n  update_lead: {\n    status: { type: 'select', label: 'Status', options: ['new', 'contacted', 'qualified', 'converted', 'lost'] },\n    score: { type: 'number', label: 'Score Adjustment' },\n    notes: { type: 'textarea', label: 'Add Note' },\n  },\n  wait: {\n    duration: { type: 'number', label: 'Duration', required: true, min: 1 },\n    unit: { type: 'select', label: 'Unit', options: ['minutes', 'hours', 'days'], default: 'hours' },\n  },\n  if_else: {\n    field: { type: 'string', label: 'Field', required: true, placeholder: '{{lead.score}}' },\n    operator: { type: 'select', label: 'Operator', options: ['equals', 'not_equals', 'greater_than', 'less_than', 'contains', 'not_contains'] },\n    value: { type: 'string', label: 'Value', required: true },\n  },\n  schedule: {\n    cron: { type: 'string', label: 'Cron Expression', required: true, placeholder: '0 9 * * *' },\n    timezone: { type: 'select', label: 'Timezone', options: [], default: 'America/New_York' },\n  },\n  webhook_call: {\n    url: { type: 'string', label: 'URL', required: true },\n    method: { type: 'select', label: 'Method', options: ['GET', 'POST', 'PUT', 'DELETE'], default: 'POST' },\n    headers: { type: 'json', label: 'Headers' },\n    body: { type: 'json', label: 'Body' },\n  },\n};\n","import { useState, useEffect } from \"react\";\nimport { useWorkflowBuilderStore } from \"@/stores/useWorkflowBuilderStore\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { X, Trash2, Copy, Settings2 } from \"lucide-react\";\nimport { NODE_CONFIG_SCHEMAS } from \"@/types/workflow\";\nimport type { WorkflowNode } from \"@/types/workflow\";\n\nexport const WorkflowNodeInspector = () => {\n  const {\n    workflow,\n    selectedNodeId,\n    selectNode,\n    updateNode,\n    removeNode,\n    duplicateNode,\n  } = useWorkflowBuilderStore();\n\n  const selectedNode = workflow?.nodes.find((n) => n.id === selectedNodeId);\n  const [localConfig, setLocalConfig] = useState<Record<string, any>>({});\n\n  useEffect(() => {\n    if (selectedNode) {\n      setLocalConfig(selectedNode.config || {});\n    }\n  }, [selectedNode?.id, selectedNode?.config]);\n\n  if (!selectedNode) {\n    return (\n      <div className=\"w-80 bg-white border-l flex flex-col items-center justify-center p-8 text-center\">\n        <Settings2 className=\"w-12 h-12 text-gray-300 mb-4\" />\n        <p className=\"text-gray-500\">\n          Select a node to configure its properties\n        </p>\n      </div>\n    );\n  }\n\n  const configSchema = NODE_CONFIG_SCHEMAS[selectedNode.subtype] || {};\n\n  const handleConfigChange = (key: string, value: any) => {\n    const newConfig = { ...localConfig, [key]: value };\n    setLocalConfig(newConfig);\n    updateNode(selectedNodeId!, { config: newConfig });\n  };\n\n  const handleLabelChange = (label: string) => {\n    updateNode(selectedNodeId!, { label });\n  };\n\n  const handleDescriptionChange = (description: string) => {\n    updateNode(selectedNodeId!, { description });\n  };\n\n  const renderConfigField = (key: string, schema: Record<string, any>) => {\n    const value = localConfig[key] ?? schema.default ?? \"\";\n\n    switch (schema.type) {\n      case \"string\":\n        return (\n          <Input\n            value={value}\n            onChange={(e) => handleConfigChange(key, e.target.value)}\n            placeholder={schema.placeholder}\n          />\n        );\n\n      case \"number\":\n        return (\n          <Input\n            type=\"number\"\n            value={value}\n            onChange={(e) => handleConfigChange(key, Number(e.target.value))}\n            min={schema.min}\n            max={schema.max}\n          />\n        );\n\n      case \"textarea\":\n        return (\n          <Textarea\n            value={value}\n            onChange={(e) => handleConfigChange(key, e.target.value)}\n            placeholder={schema.placeholder}\n            rows={4}\n            maxLength={schema.maxLength}\n          />\n        );\n\n      case \"select\":\n        return (\n          <Select\n            value={value}\n            onValueChange={(v) => handleConfigChange(key, v)}\n          >\n            <SelectTrigger>\n              <SelectValue placeholder={`Select ${schema.label}`} />\n            </SelectTrigger>\n            <SelectContent>\n              {(schema.options || []).map((option: string) => (\n                <SelectItem key={option} value={option}>\n                  {option}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        );\n\n      case \"json\":\n        return (\n          <Textarea\n            value={typeof value === \"string\" ? value : JSON.stringify(value, null, 2)}\n            onChange={(e) => {\n              try {\n                handleConfigChange(key, JSON.parse(e.target.value));\n              } catch {\n                // Keep as string if not valid JSON\n                handleConfigChange(key, e.target.value);\n              }\n            }}\n            placeholder=\"{}\"\n            rows={4}\n            className=\"font-mono text-sm\"\n          />\n        );\n\n      default:\n        return (\n          <Input\n            value={value}\n            onChange={(e) => handleConfigChange(key, e.target.value)}\n          />\n        );\n    }\n  };\n\n  return (\n    <div className=\"w-80 bg-white border-l flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"p-4 border-b flex items-center justify-between\">\n        <h3 className=\"font-semibold text-gray-900\">Node Settings</h3>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => selectNode(null)}\n        >\n          <X className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\n        {/* Basic Info */}\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-gray-700\">Label</label>\n            <Input\n              value={selectedNode.label}\n              onChange={(e) => handleLabelChange(e.target.value)}\n            />\n          </div>\n\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium text-gray-700\">\n              Description\n            </label>\n            <Textarea\n              value={selectedNode.description || \"\"}\n              onChange={(e) => handleDescriptionChange(e.target.value)}\n              placeholder=\"Add a description...\"\n              rows={2}\n            />\n          </div>\n        </div>\n\n        {/* Type Info */}\n        <div className=\"bg-gray-50 rounded-lg p-3\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-gray-500\">Type</span>\n            <span className=\"font-medium capitalize\">{selectedNode.type}</span>\n          </div>\n          <div className=\"flex items-center justify-between text-sm mt-1\">\n            <span className=\"text-gray-500\">Action</span>\n            <span className=\"font-medium capitalize\">\n              {selectedNode.subtype.replace(/_/g, \" \")}\n            </span>\n          </div>\n        </div>\n\n        {/* Configuration Fields */}\n        {Object.keys(configSchema).length > 0 && (\n          <div className=\"space-y-4\">\n            <h4 className=\"text-sm font-medium text-gray-900\">Configuration</h4>\n            {Object.entries(configSchema).map(([key, schema]: [string, any]) => (\n              <div key={key} className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">\n                  {schema.label}\n                  {schema.required && (\n                    <span className=\"text-red-500 ml-1\">*</span>\n                  )}\n                </label>\n                {renderConfigField(key, schema)}\n                {schema.help && (\n                  <p className=\"text-xs text-gray-500\">{schema.help}</p>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Variables help */}\n        <div className=\"bg-blue-50 rounded-lg p-3\">\n          <p className=\"text-xs text-blue-700 font-medium mb-1\">\n            Using Variables\n          </p>\n          <p className=\"text-xs text-blue-600\">\n            Use double curly braces to insert variables:\n            <code className=\"bg-blue-100 px-1 mx-1 rounded\">\n              {\"{{lead.email}}\"}\n            </code>\n          </p>\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"p-4 border-t space-y-2\">\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => duplicateNode(selectedNodeId!)}\n            className=\"flex-1\"\n          >\n            <Copy className=\"w-4 h-4 mr-2\" />\n            Duplicate\n          </Button>\n          <Button\n            variant=\"destructive\"\n            size=\"sm\"\n            onClick={() => {\n              removeNode(selectedNodeId!);\n              selectNode(null);\n            }}\n            className=\"flex-1\"\n          >\n            <Trash2 className=\"w-4 h-4 mr-2\" />\n            Delete\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WorkflowNodeInspector;\n","import { useWorkflowBuilderStore } from \"@/stores/useWorkflowBuilderStore\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Undo2,\n  Redo2,\n  Save,\n  Play,\n  Pause,\n  Settings,\n  Eye,\n  Upload,\n  Loader2,\n  Power,\n  PowerOff,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface WorkflowToolbarProps {\n  onOpenSettings?: () => void;\n  onPreview?: () => void;\n}\n\nexport const WorkflowToolbar = ({\n  onOpenSettings,\n  onPreview,\n}: WorkflowToolbarProps) => {\n  const {\n    workflow,\n    isSaving,\n    isExecuting,\n    canUndo,\n    canRedo,\n    undo,\n    redo,\n    saveWorkflow,\n    publishWorkflow,\n    activateWorkflow,\n    executeWorkflow,\n    updateWorkflowMeta,\n  } = useWorkflowBuilderStore();\n\n  if (!workflow) return null;\n\n  const handleNameChange = (e: React.FocusEvent<HTMLInputElement>) => {\n    const name = e.target.value.trim();\n    if (name && name !== workflow.name) {\n      updateWorkflowMeta({ name });\n    }\n  };\n\n  const handleExecute = async () => {\n    try {\n      await executeWorkflow();\n    } catch (error) {\n      console.error(\"Execution failed:\", error);\n    }\n  };\n\n  const handleToggleActive = async () => {\n    await activateWorkflow(!workflow.isActive);\n  };\n\n  return (\n    <div className=\"h-14 bg-white border-b px-4 flex items-center justify-between\">\n      {/* Left section */}\n      <div className=\"flex items-center gap-4\">\n        {/* Workflow name */}\n        <Input\n          defaultValue={workflow.name}\n          onBlur={handleNameChange}\n          className=\"w-64 font-medium border-0 bg-transparent hover:bg-gray-50 focus:bg-white\"\n          placeholder=\"Workflow name...\"\n        />\n\n        {/* Status badges */}\n        <div className=\"flex items-center gap-2\">\n          {workflow.isPublished && (\n            <span className=\"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded\">\n              Published\n            </span>\n          )}\n          {workflow.isActive ? (\n            <span className=\"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-700 rounded flex items-center gap-1\">\n              <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\" />\n              Active\n            </span>\n          ) : (\n            <span className=\"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded\">\n              Inactive\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Center section - History controls */}\n      <div className=\"flex items-center gap-1\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={undo}\n          disabled={!canUndo()}\n          title=\"Undo (Ctrl+Z)\"\n        >\n          <Undo2 className=\"w-4 h-4\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={redo}\n          disabled={!canRedo()}\n          title=\"Redo (Ctrl+Shift+Z)\"\n        >\n          <Redo2 className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Right section */}\n      <div className=\"flex items-center gap-2\">\n        {/* Preview */}\n        {onPreview && (\n          <Button variant=\"ghost\" size=\"sm\" onClick={onPreview}>\n            <Eye className=\"w-4 h-4 mr-2\" />\n            Preview\n          </Button>\n        )}\n\n        {/* Settings */}\n        {onOpenSettings && (\n          <Button variant=\"ghost\" size=\"sm\" onClick={onOpenSettings}>\n            <Settings className=\"w-4 h-4 mr-2\" />\n            Settings\n          </Button>\n        )}\n\n        {/* Activate/Deactivate */}\n        <Button\n          variant={workflow.isActive ? \"outline\" : \"secondary\"}\n          size=\"sm\"\n          onClick={handleToggleActive}\n          disabled={!workflow.isPublished}\n          title={!workflow.isPublished ? \"Publish workflow first\" : undefined}\n        >\n          {workflow.isActive ? (\n            <>\n              <PowerOff className=\"w-4 h-4 mr-2\" />\n              Deactivate\n            </>\n          ) : (\n            <>\n              <Power className=\"w-4 h-4 mr-2\" />\n              Activate\n            </>\n          )}\n        </Button>\n\n        {/* Test run */}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={handleExecute}\n          disabled={isExecuting || workflow.nodes.length === 0}\n        >\n          {isExecuting ? (\n            <>\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              Running...\n            </>\n          ) : (\n            <>\n              <Play className=\"w-4 h-4 mr-2\" />\n              Test Run\n            </>\n          )}\n        </Button>\n\n        {/* Save */}\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={saveWorkflow}\n          disabled={isSaving}\n        >\n          {isSaving ? (\n            <>\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              Saving...\n            </>\n          ) : (\n            <>\n              <Save className=\"w-4 h-4 mr-2\" />\n              Save\n            </>\n          )}\n        </Button>\n\n        {/* Publish */}\n        {!workflow.isPublished && (\n          <Button size=\"sm\" onClick={publishWorkflow} disabled={isSaving}>\n            <Upload className=\"w-4 h-4 mr-2\" />\n            Publish\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default WorkflowToolbar;\n","import { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useWorkflowBuilderStore } from \"@/stores/useWorkflowBuilderStore\";\nimport {\n  WorkflowCanvas,\n  WorkflowNodePalette,\n  WorkflowNodeInspector,\n  WorkflowToolbar,\n} from \"@/components/workflowBuilder\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Loader2, ArrowLeft } from \"lucide-react\";\nimport type { WorkflowCategory, WorkflowNodeTemplate } from \"@/types/workflow\";\n\nconst CATEGORY_OPTIONS: { value: WorkflowCategory; label: string }[] = [\n  { value: \"lead_management\", label: \"Lead Management\" },\n  { value: \"listing_automation\", label: \"Listing Automation\" },\n  { value: \"marketing\", label: \"Marketing\" },\n  { value: \"notifications\", label: \"Notifications\" },\n  { value: \"integrations\", label: \"Integrations\" },\n  { value: \"general\", label: \"General\" },\n];\n\nexport const WorkflowBuilderPage = () => {\n  const { workflowId } = useParams();\n  const navigate = useNavigate();\n  const {\n    workflow,\n    loadWorkflow,\n    createNewWorkflow,\n    resetBuilder,\n    updateWorkflowMeta,\n  } = useWorkflowBuilderStore();\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [draggedTemplate, setDraggedTemplate] = useState<WorkflowNodeTemplate | null>(null);\n\n  useEffect(() => {\n    const initWorkflow = async () => {\n      setIsLoading(true);\n      try {\n        if (workflowId && workflowId !== \"new\") {\n          await loadWorkflow(workflowId);\n        } else {\n          createNewWorkflow(\"Untitled Workflow\");\n        }\n      } catch (error) {\n        console.error(\"Failed to initialize workflow:\", error);\n        navigate(\"/dashboard/workflows\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    initWorkflow();\n\n    return () => {\n      resetBuilder();\n    };\n  }, [workflowId]);\n\n  const handleBack = () => {\n    navigate(\"/dashboard/workflows\");\n  };\n\n  const handleDragStart = (template: WorkflowNodeTemplate) => {\n    setDraggedTemplate(template);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-gray-100\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-100\">\n      {/* Top bar */}\n      <div className=\"h-12 bg-white border-b px-4 flex items-center gap-4\">\n        <Button variant=\"ghost\" size=\"sm\" onClick={handleBack}>\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\n          Back\n        </Button>\n        <div className=\"h-6 w-px bg-gray-200\" />\n        <span className=\"text-sm text-gray-600\">Workflow Builder</span>\n      </div>\n\n      {/* Toolbar */}\n      <WorkflowToolbar\n        onOpenSettings={() => setShowSettings(true)}\n      />\n\n      {/* Main content */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Left sidebar - Node palette */}\n        <WorkflowNodePalette onDragStart={handleDragStart} />\n\n        {/* Canvas */}\n        <WorkflowCanvas className=\"flex-1\" />\n\n        {/* Right sidebar - Node inspector */}\n        <WorkflowNodeInspector />\n      </div>\n\n      {/* Settings dialog */}\n      <Dialog open={showSettings} onOpenChange={setShowSettings}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Workflow Settings</DialogTitle>\n            <DialogDescription>\n              Configure your workflow settings and metadata\n            </DialogDescription>\n          </DialogHeader>\n\n          {workflow && (\n            <div className=\"space-y-4 pt-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">\n                  Workflow Name\n                </label>\n                <Input\n                  value={workflow.name}\n                  onChange={(e) =>\n                    updateWorkflowMeta({ name: e.target.value })\n                  }\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">\n                  Description\n                </label>\n                <Textarea\n                  value={workflow.description || \"\"}\n                  onChange={(e) =>\n                    updateWorkflowMeta({ description: e.target.value })\n                  }\n                  placeholder=\"Describe what this workflow does...\"\n                  rows={3}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">\n                  Category\n                </label>\n                <Select\n                  value={workflow.category}\n                  onValueChange={(value) =>\n                    updateWorkflowMeta({ category: value as WorkflowCategory })\n                  }\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {CATEGORY_OPTIONS.map((option) => (\n                      <SelectItem key={option.value} value={option.value}>\n                        {option.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-gray-700\">\n                  Tags\n                </label>\n                <Input\n                  value={workflow.tags.join(\", \")}\n                  onChange={(e) =>\n                    updateWorkflowMeta({\n                      tags: e.target.value\n                        .split(\",\")\n                        .map((t) => t.trim())\n                        .filter(Boolean),\n                    })\n                  }\n                  placeholder=\"Enter tags separated by commas\"\n                />\n              </div>\n\n              <div className=\"pt-4 flex justify-end\">\n                <Button onClick={() => setShowSettings(false)}>Done</Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default WorkflowBuilderPage;\n"],"names":["Code","createLucideIcon","GitBranch","PowerOff","Power","Redo2","Settings2","Undo2","Variable","NODE_ICONS","Play","Calendar","Link","User","Home","Mail","MessageSquare","CheckSquare","Globe","Tag","Filter","Clock","Repeat","NODE_COLORS","WorkflowNode","memo","node","isSelected","isConnecting","onSelect","onStartConnection","onCompleteConnection","onDragStart","Icon","Zap","colors","handleMouseDown","e","handleConnectionPoint","jsxs","cn","jsx","WorkflowCanvas","className","canvasRef","useRef","workflow","selectedNodeId","connectionStart","selectNode","addNode","updateNode","startConnection","completeConnection","cancelConnection","addEdge","updateViewport","useWorkflowBuilderStore","isDragging","setIsDragging","useState","dragOffset","setDragOffset","panStart","setPanStart","mousePosition","setMousePosition","useCallback","nodeId","rect","x","y","handleDrop","templateData","template","handleDragOver","handleMouseMove","dx","dy","handleMouseUp","handleWheel","delta","currentZoom","newZoom","renderEdges","edge","sourceNode","n","targetNode","sourceX","sourceY","targetX","targetY","midY","path","renderConnectionLine","ICON_MAP","Bell","CATEGORY_ORDER","CATEGORY_LABELS","WorkflowNodePalette","nodeTemplates","loadNodeTemplates","searchQuery","setSearchQuery","expandedCategories","setExpandedCategories","useEffect","templatesByCategory","acc","filteredCategories","category","templates","t","c","b","toggleCategory","newExpanded","handleDragStart","Search","Input","isExpanded","ChevronDown","ChevronRight","NODE_CONFIG_SCHEMAS","WorkflowNodeInspector","removeNode","duplicateNode","selectedNode","localConfig","setLocalConfig","configSchema","handleConfigChange","key","value","newConfig","handleLabelChange","label","handleDescriptionChange","description","renderConfigField","schema","Textarea","Select","v","SelectTrigger","SelectValue","SelectContent","option","SelectItem","Button","X","Copy","Trash2","WorkflowToolbar","onOpenSettings","onPreview","isSaving","isExecuting","canUndo","canRedo","undo","redo","saveWorkflow","publishWorkflow","activateWorkflow","executeWorkflow","updateWorkflowMeta","handleNameChange","name","handleExecute","error","handleToggleActive","Eye","Settings","Fragment","Loader2","Save","Upload","CATEGORY_OPTIONS","WorkflowBuilderPage","workflowId","useParams","navigate","useNavigate","loadWorkflow","createNewWorkflow","resetBuilder","isLoading","setIsLoading","showSettings","setShowSettings","draggedTemplate","setDraggedTemplate","handleBack","ArrowLeft","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}